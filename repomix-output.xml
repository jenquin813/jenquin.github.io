This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
archive_sandbox/
  ._sandbox_1.html
  ._sandbox.html
  ._sandbox1_1.html
  sanbox_1.2
  sandbox_1.html
  sandbox.html
  sandbox1_1.html
Backups/
  ._repomix-output.xml
  ._sandbox_digital_twin_oraclebackup.html
  index_1.1.html
  index_1.2.html
  index_1.html
  repomix-output.xml
  sandbox_1.3.html
  sandbox_digital_twin_oraclebackup.html
scripts/
  ._pull_reminders_local.sh
  pull_reminders_local.sh
._.gitignore
._about.md
._data
._demo.html
._favicon.svg
._index.html
._instructions_digital_twin.md
._logo.svg
._oracle_twin_merge_snippet.html
._README.md
._repomix-output.xml
._run_commands.txt
._sandbox_calendar_loading_bar.html
._sandbox_digital_twin_oracle.html
._script.js
._scripts
._style.css
._test.json
.gitignore
about.md
demo.html
favicon.svg
index.html
instructions_digital_twin.md
logo.svg
oracle_twin_merge_snippet.html
README.md
run_commands.txt
sandbox_calendar_loading_bar.html
sandbox_digital_twin_oracle.html
script.js
site-urls.txt
style.css
test-top3.html
test.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="run_commands.txt">
# Jenquin Site - Common Commands

## üåê LOCAL DEVELOPMENT (MAIN APP)
Start HTTP Server:
cd /Volumes/storage/projects/Jenquin-site
python3 -m http.server 8080

Main App URLs:
- http://localhost:8080                 (Jenquin Local App - BOOKMARK THIS)
- http://localhost:8080/index.html      (Main dashboard)
- http://localhost:8080/index.html?demo=1   (Demo mode)
- http://localhost:8080/demo.html       (Demo redirect)

## üß™ SANDBOX DEVELOPMENT
Sandbox URLs (same server):
 #(agenda card)
- http://localhost:8080/sandbox_calendar_loading_bar.html

# (digital twin oracle)
- http://localhost:8080/sandbox_digital_twin_oracle.html

## üìÅ DATA MANAGEMENT
Generate reminders data:
./scripts/pull_reminders_local.sh

Kill server process:
lsof -ti:8080 | xargs kill

## üì¶ GIT OPERATIONS
Add modified files:
git add.

Commit changes:
git commit -m "your commit message"

Push to remote:
git push origin master

## üíæ BACKUP
Create timestamped backup:
mkdir -p Backups && zip -r "Backups/jenquin-site-backup-$(date +%Y%m%d-%H%M%S).zip" . -x "*.git*" -x "Backups/*"

## üîç VERIFICATION
Check server status:
lsof -i:8080                            (Show server process)
curl -I http://localhost:8080/index.html    (Test HTTP headers)
ps aux | grep "python3.*http.server"       (Find server processes)
</file>

<file path="test.json">
{"message": "HTTP server is working!", "timestamp": "2025-11-10T03:39:00Z"}
</file>

<file path="archive_sandbox/sanbox_1.2">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agenda Card ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.48}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris‚Äô Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris‚Äô Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [
  { label:"Prep & Maintenance",       start: at(7,30),  end: at(8,0),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(10,15), color: AREA_COLORS.health },
  { label:"Flex",                     start: at(11,0),  end: at(12,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Administrative",          start: at(14,0),  end: at(16,0),  color: AREA_COLORS.administrative },
  { label:"Social & Relationships",   start: at(19,30), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,15), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
  }
  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock ‚ÄúFlex ¬∑ 3:33 PM‚Äì7:30 PM‚Äù */
  (function seedAreaPill(){
    const p = document.getElementById('areaPill');
    const seg = ZONES[0];
    if (seg) p.textContent = `${seg.label} ¬∑ ${fmtTime(seg.start)}‚Äì${fmtTime(seg.end)}`;
  })();
</script>
</body>
</html>
</file>

<file path="archive_sandbox/sandbox_1.html">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agenda Card ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.22}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris‚Äô Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris‚Äô Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  const ZONES = [
    { label:"Flex",   start: at(12,47), end: at(19,30), color:'rgba(125,242,201,.45)' }, // example
    // add more segments if you like:
    // { label:"Review", start: at(9,0), end: at(12,30), color:'rgba(255,176,90,.45)' },
  ];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
  }
  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock ‚ÄúFlex ¬∑ 3:33 PM‚Äì7:30 PM‚Äù */
  (function seedAreaPill(){
    const p = document.getElementById('areaPill');
    const seg = ZONES[0];
    if (seg) p.textContent = `${seg.label} ¬∑ ${fmtTime(seg.start)}‚Äì${fmtTime(seg.end)}`;
  })();
</script>
</body>
</html>
</file>

<file path="archive_sandbox/sandbox.html">
<!doctype html>
<meta charset="utf-8" />
<title>Zone Tracker Wireframe</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  :root{
    --bg:#0b0c10; --panel:#111318; --text:#e9edf5; --muted:#7b8496; --border:#20232b;
    --ok:#76ff9b;
    --accent:#6ea8fe; --accent-2:#7df2c9;
  }
  body{margin:0;background:var(--bg);color:var(--text);font:14px/1.4 ui-sans-serif,system-ui}
  .panel{max-width:920px;margin:24px auto;padding:14px;border:1px solid var(--border);border-radius:14px;background:var(--panel)}
  .hd{display:flex;align-items:center;gap:10px;margin-bottom:8px}
  .hd h2{margin:0;font-size:14px;letter-spacing:.3px}
  /* --- Focus / zone tracker --- */
  .zone-wrap{display:flex;flex-direction:column;gap:8px;margin-bottom:10px}
  .zone-bar{
    position:relative;height:28px;border:1px solid var(--border);border-radius:999px;
    background:linear-gradient(180deg,rgba(255,255,255,.01),rgba(0,0,0,.06));
    overflow:hidden;
  }
  /* subtle segment bands */
  .zone-seg{position:absolute;top:0;bottom:0;opacity:.18}
  .seg-flex{background:#8aa0ff}
  .seg-review{background:#ffcc66}
  .seg-prep{background:#7df2c9}
  .seg-rest{background:#b38aff}
  /* progress fill */
  .zone-fill{
    position:absolute;inset:0 auto 0 0;width:0%;
    background:linear-gradient(90deg,rgba(255,255,255,.08),rgba(255,255,255,.02));
    backdrop-filter:saturate(120%) brightness(110%);
  }
  /* glow dot at "now" */
  .zone-dot{
    position:absolute;top:50%;transform:translate(-50%,-50%);
    width:8px;height:8px;border-radius:50%;
    background:rgba(255,255,255,.85);box-shadow:0 0 8px rgba(255,255,255,.45);
    left:0%;
  }
  /* labels row: current + upcoming */
  .zone-labels{display:flex;gap:8px;align-items:center}
  .pill{
    display:inline-flex;align-items:center;gap:6px;
    padding:6px 10px;border:1px solid var(--border);border-radius:999px;
    background:linear-gradient(180deg,rgba(255,255,255,.01),rgba(0,0,0,.05)); color:var(--muted);
    white-space:nowrap;font-size:12px;
  }
  .pill.current{border-color:rgba(255,255,255,.08);background:linear-gradient(180deg,rgba(255,255,255,.015),rgba(0,0,0,.12))}
  /* all-day row */
  .allday{display:flex;gap:8px;align-items:center;overflow:auto}
  .allday .pill{font-size:12px}
  /* agenda list (just for placement) */
  .row{display:grid;grid-template-columns:20px 1fr auto;gap:10px;align-items:center;
       padding:10px;border-top:1px solid var(--border)}
  .row:first-child{border-top:none}
  .dot{width:10px;height:10px;border-radius:50%;background:#6ea8fe;opacity:.9}
  .time{color:var(--muted);font-size:12px}
</style>

<div class="panel">
  <div class="hd"><h2>Saturday ‚Ä¢ Oct 11</h2></div>

  <!-- Focus + zone tracker -->
  <div class="zone-wrap">
    <div class="zone-bar" id="zoneBar">
      <!-- segments (left‚Üíright) will be positioned by JS -->
      <div class="zone-fill" id="zoneFill"></div>
      <div class="zone-dot" id="zoneDot"></div>
    </div>
    <!-- labels: current + upcoming -->
    <div class="zone-labels" id="zoneLabels"></div>
    <!-- all-day items -->
    <div class="allday" id="alldayLane"></div>
  </div>

  <!-- Minimal agenda just for context -->
  <div class="row"><span class="dot"></span><div>water plants<br><span class="time">7:30 AM</span></div><span class="time">7:30 AM</span></div>
  <div class="row"><span class="dot" style="background:#b38aff"></span><div>precor stretch circuit<br><span class="time">9:30 AM</span></div><span class="time">9:30 AM</span></div>
  <div class="row"><span class="dot" style="background:#9aa3b2"></span><div>grocery shop<br><span class="time">11:00 AM‚Äì12:00 PM</span></div><span class="time">11:00 AM</span></div>
</div>

<script>
  // ------- mock day + zones (change times to see effect)
  const day = new Date(); // today
  const at = (h,m=0)=> new Date(day.getFullYear(), day.getMonth(), day.getDate(), h, m);
  const ZONES = [
    { label:"Flex",            start: at(8,  0), end: at(12, 0), cls:"seg-flex"   },
    { label:"Review",          start: at(12, 0), end: at(18,30), cls:"seg-review" },
    { label:"Prep",            start: at(18,30), end: at(19,30), cls:"seg-prep"   },
    { label:"Rest",            start: at(19,30), end: at(21, 0), cls:"seg-rest"   },
  ];
  const ALLDAY = ["Kris‚Äô Birthday", "Anniversary"];

  const bar = document.getElementById('zoneBar');
  const fill = document.getElementById('zoneFill');
  const dot  = document.getElementById('zoneDot');
  const labels = document.getElementById('zoneLabels');
  const allday = document.getElementById('alldayLane');

  // render segments as absolute blocks
  function renderSegments(){
    const dayStart = new Date(day.getFullYear(), day.getMonth(), day.getDate(), 0,0,0);
    const dayEnd   = new Date(day.getFullYear(), day.getMonth(), day.getDate(), 24,0,0);
    const totalMs = dayEnd - dayStart;

    ZONES.forEach(z=>{
      const left = ((z.start - dayStart)/totalMs) * 100;
      const width = ((z.end - z.start)/totalMs) * 100;
      const seg = document.createElement('div');
      seg.className = `zone-seg ${z.cls}`;
      seg.style.left = left + '%';
      seg.style.width = width + '%';
      bar.appendChild(seg);
    });
  }

  // compute current + upcoming (simple)
  function currentZone(now=new Date()){
    return ZONES.find(z => now >= z.start && now < z.end) || null;
  }
  function upcomingZones(now=new Date(), n=3){
    const ups = ZONES.filter(z => z.start > now).map(z=>z.label);
    return ups.slice(0, n);
  }

  function updateBar(){
    const now = new Date();
    const dayStart = new Date(day.getFullYear(), day.getMonth(), day.getDate(), 0,0,0);
    const dayEnd   = new Date(day.getFullYear(), day.getMonth(), day.getDate(), 24,0,0);
    const totalMs = dayEnd - dayStart;
    const pct = Math.max(0, Math.min(1, (now - dayStart)/totalMs)) * 100;

    fill.style.width = pct + '%';
    dot.style.left = pct + '%';

    // labels row: current + next two
    labels.innerHTML = '';
    const cur = currentZone(now);
    const pill = (txt,isCurrent=false)=>{
      const el = document.createElement('span');
      el.className = 'pill' + (isCurrent ? ' current' : '');
      el.textContent = txt;
      return el;
    };
    labels.appendChild(pill(cur ? cur.label : 'Flex', true));
    upcomingZones(now, 2).forEach(lbl => labels.appendChild(pill(lbl)));
  }

  function renderAllday(){
    allday.innerHTML = '';
    ALLDAY.forEach(t=>{
      const p = document.createElement('span');
      p.className = 'pill';
      p.textContent = t;
      allday.appendChild(p);
    });
  }

  renderSegments();
  renderAllday();
  updateBar();
  // gentle updates
  setInterval(updateBar, 60000);
  window.addEventListener('resize', updateBar);
</script>
</file>

<file path="archive_sandbox/sandbox1_1.html">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agenda Card ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.48}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris‚Äô Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris‚Äô Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [
  { label:"Prep & Maintenance",       start: at(7,30),  end: at(8,0),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(10,15), color: AREA_COLORS.health },
  { label:"Flex",                     start: at(11,0),  end: at(12,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Social & Relationships",   start: at(19,30), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,15), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
  }
  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock ‚ÄúFlex ¬∑ 3:33 PM‚Äì7:30 PM‚Äù */
  (function seedAreaPill(){
    const p = document.getElementById('areaPill');
    const seg = ZONES[0];
    if (seg) p.textContent = `${seg.label} ¬∑ ${fmtTime(seg.start)}‚Äì${fmtTime(seg.end)}`;
  })();
</script>
</body>
</html>
</file>

<file path="Backups/index_1.1.html">
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jenquin.io ‚Äî Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg: #0b0c10;
      --panel: #111318;
      --muted: #7b8496;
      --text: #e9edf5;
      --accent: #6ea8fe;
      --accent-2: #7df2c9;
      --danger: #ff7a7a;
      --ok: #76ff9b;
      --border: #20232b;
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 14px;
      --radius-sm: 10px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg: #f6f7fb;
        --panel: #ffffff;
        --muted: #6b7280;
        --text: #0f172a;
        --accent: #2556ff;
        --accent-2: #0ea5e9;
        --border: #e5e7eb;
        --shadow: 0 10px 24px rgba(0,0,0,.08);
      }
    }

    *{ box-sizing: border-box }
    html,body{ height:100% }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
                  radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%), var(--bg);
      color: var(--text);
      line-height:1.4;
    }

    /* Shell */
    .wrap{
      max-width: 1200px;
      margin: 0 auto;
      padding: 28px 18px 40px;
    }

    header{
      display:flex; align-items:center; justify-content:space-between;
      gap: 16px; margin-bottom: 22px;
    }
    .brand{
      display:flex; align-items:center; gap:14px;
    }
    .logo{
      width:44px; height:44px; border-radius:12px;
      background:
        radial-gradient(60% 100% at 30% 10%, rgba(125,242,201,.3), transparent 60%),
        linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: var(--shadow);
    }
    .brand h1{
      font-size: 20px; margin: 0;
      letter-spacing:.4px;
    }
    .brand .sub{ color: var(--muted); font-size:13px; margin-top:2px }
    .actions{ display:flex; align-items:center; gap:10px }
    .btn{
      appearance:none; border:1px solid var(--border); color:var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      padding:10px 14px; border-radius:12px; cursor:pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18) }
    .btn.primary{
      background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.05));
      border-color: rgba(110,168,254,.35); color: white;
    }
    .btn.ghost{ background: transparent; }

    /* Layout */
    .grid{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 18px;
    }
    @media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }

    /* Panel */
    .panel{
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: clip;
    }
    .panel .hd{
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      padding: 14px 16px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    }
    .panel .hd h2{ margin:0; font-size: 15px; letter-spacing:.3px }
    .panel .hd .hint{ color:var(--muted); font-size:12px }
    .panel .bd{ padding: 12px 16px }
    .panel .ft{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; flex-wrap:wrap }

    /* Lists */
    .list{ display:flex; flex-direction:column; gap:10px }
    .item{
      display:grid; grid-template-columns: 22px 1fr auto; align-items:center; gap: 10px;
      padding:10px; border:1px solid var(--border); border-radius: var(--radius-sm);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    }
    .chx{ width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer }
    .chx input{ display:none }
    .chx .dot{ width:10px; height:10px; border-radius:3px; background:transparent; }
    .item.done .title{ color: var(--muted); text-decoration: line-through }
    .item.done .chx .dot{ background: var(--ok); }
    .title{ font-size:14px; }
    .meta{ color: var(--muted); font-size:12px }
    .tag{
      font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border);
      color: var(--muted);
    }
    .kebab{ opacity:.7; }
    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }

    /* Quick add */
    .quick{
      display:flex; gap:10px; align-items:center; width:100%;
    }
    .in{
      flex:1; min-width: 160px;
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }
    .select{
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }

    /* Agenda (Apple-style list) */
    .agenda-day{
      border:1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      margin-bottom: 12px; overflow: hidden;
    }
    .agenda-day-hd{
      display:flex; justify-content:space-between; align-items:center;
      padding:10px 12px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      font-size:13px; letter-spacing:.2px;
    }
    .agenda-day-hd .date{ color: var(--muted) }
    .agenda-list{ display:flex; flex-direction:column }
    .agenda-row{
      display:grid; grid-template-columns: 20px 1fr auto; align-items:center;
      gap:10px; padding:10px 12px; border-top:1px solid var(--border);
    }
    .agenda-row:first-child{ border-top: none }
    .agenda-row .dot{
      width:10px; height:10px; border-radius:50%;
      border:2px solid var(--border);
    }
    .dot.blue{ background: rgba(110,168,254,.9) }
    .dot.green{ background: rgba(125,242,201,.95) }
    .dot.purple{ background: #b38aff }
    .dot.orange{ background: #ffb05a }
    .dot.gray{ background: #9aa3b2 }
    .agenda-title{ font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
    .agenda-meta{ color: var(--muted); font-size:12px }
    .agenda-badge{
      font-size:11px; padding:4px 8px; border-radius:999px;
      border:1px solid var(--border); color: var(--muted);
    }
    .agenda-allday{
      display:flex; gap:8px; padding:10px 12px; border-top:1px solid var(--border); flex-wrap:wrap;
    }
    .allday-pill{
      font-size:12px; padding:6px 10px; border-radius:999px;
      border:1px solid var(--border); background: rgba(255,255,255,.02);
      white-space:nowrap;
    }

    footer{
      margin-top: 24px; color: var(--muted); font-size:12px; text-align:center;
    }
    .sep{ height:1px; background: var(--border); margin: 8px 0 }
    .faded{ color: var(--muted) }
    .badge{
      font-size:11px; padding:3px 8px; border-radius:999px; background: rgba(110,168,254,.15); border:1px solid rgba(110,168,254,.35);
      color: #dbe9ff;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>jenquin.io</h1>
          <div class="sub">Jenquin ‚Ä¢ Personal Ops Dashboard</div>
        </div>
      </div>
      <div class="actions">
        <button class="btn ghost" id="toggleDemo">Demo: On</button>
        <button class="btn" id="openReminders">Open Reminders</button>
        <button class="btn primary" id="quickAddTop">+ Quick Add</button>
      </div>
    </header>

    <div class="grid">
      <!-- Left column: Top 3 + Crash 7 stacked -->
      <div class="stack">
        <section class="panel" id="top3Panel">
          <div class="hd">
            <h2>Top 3 Today</h2>
            <div class="row">
              <span class="badge" id="dayLabel">Today</span>
              <span class="hint" id="nowHint">‚Äî</span>
            </div>
          </div>
          <div class="bd">
            <div class="list" id="top3List"></div>
          </div>
          <div class="ft">
            <form class="quick" id="top3Form">
              <input class="in" type="text" placeholder="Quick add to Top 3‚Ä¶" name="title" required />
              <button class="btn" type="submit">Add</button>
              <button class="btn ghost" type="button" id="revealTop3">Reveal in Reminders</button>
            </form>
          </div>
        </section>

        <section class="panel" id="crashPanel" style="margin-top:18px;">
          <div class="hd">
            <h2>7-Day Crash Plan</h2>
            <div class="hint" id="rangeHint">‚Äî</div>
          </div>
          <div class="bd">
            <div class="list" id="crashList"></div>
          </div>
          <div class="ft">
            <button class="btn ghost" id="revealCrash">Reveal Crash Plan</button>
          </div>
        </section>
      </div>

      <!-- Right column: Agenda (Apple-style) -->
      <section class="panel" id="agendaPanel">
        <div class="hd">
          <h2>Agenda</h2>
          <div class="hint" id="tzHint">‚Äî</div>
        </div>
        <div class="bd">
          <div id="agenda"></div>
        </div>
        <div class="ft">
          <button class="btn ghost" id="openCalendar">Open Calendar</button>
        </div>
      </section>
    </div>

    <footer>
      ¬© <span id="year"></span> jenquin.io ‚Ä¢ v1 preview ¬∑ Data stays in Apple apps ¬∑ Clicks may open native apps
    </footer>
  </div>

  <script>
    // ------------ Utilities
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    function fmtTime(d){
      return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
    }
    function fmtDate(d){
      return new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(d);
    }
    function addDays(d, n){ const c = new Date(d); c.setDate(c.getDate()+n); return c; }

    // ------------ Demo toggle (mock vs live fetch)
    let DEMO = true;
    $('#toggleDemo').addEventListener('click', () => {
      DEMO = !DEMO;
      $('#toggleDemo').textContent = `Demo: ${DEMO ? 'On' : 'Off'}`;
      loadAll();
    });

    // ------------ Mock data
    function mockTop3(){
      return [
        { title: "cut front grass", due: "", completed: false, tag:"#prepandmaintenance" },
        { title: "pay electric", due: "", completed: false, tag:"#administrative" },
        { title: "migrate webhook to tailscale", due: "", completed: false, tag:"#projectwork" },
      ];
    }
    function mockCrash(){
  const now = new Date();
  const day = (n)=> addDays(now, n-1); // Day 1=today, Day 2=+1, etc.

  return [
    {
      day: 1,
      title: "Day 1 ‚Äì Core Finances",
      due: day(1),
      subtasks: [
        "Gather last 3‚Äì6 months bank statements",
        "Gather household bills (utilities, phone, internet, HOA, insurance)",
        "Print/save mortgage statements & lender letters"
      ]
    },
    {
      day: 2,
      title: "Day 2 ‚Äì Ledger + Food Stamps",
      due: day(2),
      subtasks: [
        "Finalize expense ledger (food, gas, health, debt)",
        "Apply for food stamps (use bank statements + ledger as proof)"
      ]
    },
    {
      day: 3,
      title: "Day 3 ‚Äì Mom‚Äôs Medical Packet (Part 1)",
      due: day(3),
      subtasks: [
        "Collect hospital/clinic records (copies/printouts)",
        "Gather prescriptions + receipts"
      ]
    },
    {
      day: 4,
      title: "Day 4 ‚Äì Mom‚Äôs Medical Packet (Part 2)",
      due: day(4),
      subtasks: [
        "Write daily function notes (3‚Äì5 days is enough)",
        "Request doctor‚Äôs letter (or confirm appointment/availability)"
      ]
    },
    {
      day: 5,
      title: "Day 5 ‚Äì Bankruptcy Packet (Part 1)",
      due: day(5),
      subtasks: [
        "Gather credit card + loan statements",
        "List creditors + balances",
        "List assets (truck, tools, furniture, gear)"
      ]
    },
    {
      day: 6,
      title: "Day 6 ‚Äì Bankruptcy Packet (Part 2)",
      due: day(6),
      subtasks: [
        "Review tax returns (last 2 years)",
        "Align ledger with tax numbers (rough match is fine)",
        "Organize everything into Shared Packet folder system"
      ]
    },
    {
      day: 7,
      title: "Day 7 ‚Äì Compile & Review",
      due: day(7),
      subtasks: [
        "Assemble Disability packet (Mom) ‚Äî submission ready",
        "Assemble Bankruptcy packet ‚Äî file-ready (hold unless needed)",
        "Double-check folders, label clearly (‚Äúready to send‚Äù)"
      ]
    }
  ];
}

    // --- Mock agenda data like your screenshots
    function mockAgenda(){
    const now = new Date();
    const d1 = new Date(now);
    d1.setDate(d1.getDate() + 1); // Example: Monday (tomorrow)
    const at = (d, h, m = 0) => new Date(d.getFullYear(), d.getMonth(), d.getDate(), h, m);

    return [
        {
        label: "Monday",
        date: d1,
        allDay: [{ title: "Recovery Focused" }],
        events: [
            
            { title: "water plants", start: at(d1, 7, 30), color: "green" },
            { title: "precor stretch circuit", start: at(d1, 9, 30), color: "blue" },
            { title: "Health", start: at(d1, 9, 30), end: at(d1, 10, 0), color: "gray" },
            { title: "mom dinner", start: at(d1, 19, 30), color: "purple" },
            { title: "sleep", start: at(d1, 23, 15), color: "blue" },
        ],
        },
    ];
    }

    // ------------ Live fetch helpers (wire these to your API later)
    async function apiGet(path){
      if(path==="/top3") return mockTop3();
      if(path==="/crash7") return mockCrash();
      if(path==="/agenda") return mockAgenda();
      return [];
    }
    async function apiPost(path, payload){
      return { ok:true };
    }

    // ------------ Renderers
    function renderTop3(items){
      const wrap = $('#top3List'); wrap.innerHTML = "";
      items.forEach((it, idx)=>{
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div>
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
          </div>
          <div class="row">
            <span class="tag">Top 3</span>
            <button class="btn ghost kebab" data-action="remove" title="Remove">‚ãØ</button>
          </div>
        `;
        row.querySelector('.chx').addEventListener('click', async ()=>{
          row.classList.toggle('done');
        });
        row.querySelector('[data-action="remove"]').addEventListener('click', async ()=>{
          row.style.opacity = .5;
          setTimeout(()=> row.remove(), 180);
        });
        wrap.appendChild(row);
      });
    }

    function renderCrash(items){
    const wrap = $('#crashList'); 
    wrap.innerHTML = "";

    items.forEach((it)=>{
        const due = it.due ? fmtDate(new Date(it.due)) : "‚Äî";

        // Row (day header)
        const row = document.createElement('div');
        row.className = 'item';
        row.innerHTML = `
        <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
        </label>
        <div>
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">Due: ${due}</div>
        </div>
        <div class="row">
            <span class="tag">Crash 7</span>
            <button class="btn ghost chev" type="button" aria-expanded="false">‚ñ∏</button>
        </div>
        `;

        // Subtask list (hidden by default)
        const sub = document.createElement('div');
        sub.className = 'sublist';
        (it.subtasks || []).forEach(txt=>{
        const li = document.createElement('div');
        li.className = 'subitem';
        li.innerHTML = `
            <span class="tick" aria-hidden="true"></span>
            <span class="subtxt">${escapeHtml(txt)}</span>
        `;
        sub.appendChild(li);
        });

        // Toggle
        const toggleBtn = row.querySelector('.chev');
        toggleBtn.addEventListener('click', ()=>{
        const open = sub.classList.toggle('open');
        toggleBtn.textContent = open ? '‚ñæ' : '‚ñ∏';
        toggleBtn.setAttribute('aria-expanded', String(open));
        });

        // Optional: strike-through the day when checkbox clicked
        row.querySelector('.chx').addEventListener('click', ()=>{
        row.classList.toggle('done');
        });

        wrap.appendChild(row);
        wrap.appendChild(sub);
    });
    }
    
    function renderAgenda(days){
    const wrap = document.getElementById('agenda');
    wrap.innerHTML = "";
    days.forEach(day=>{
        const box = document.createElement('div');
        box.className = 'agenda-day';

        const hd = document.createElement('div');
        hd.className = 'agenda-day-hd';
        const dow = new Intl.DateTimeFormat(undefined, { weekday:'long'}).format(day.date);
        const mdy = new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(day.date);
        hd.innerHTML = `<div>${escapeHtml(day.label)}</div><div class="date">${dow}, ${mdy}</div>`;
        box.appendChild(hd);

        // All-day pills
        if(day.allDay && day.allDay.length){
        const ad = document.createElement('div');
        ad.className = 'agenda-allday';
        day.allDay.forEach(a=>{
            const pill = document.createElement('span');
            pill.className = 'allday-pill';
            pill.textContent = a.title;
            ad.appendChild(pill);
        });
        box.appendChild(ad);
        }

        // Timed events (sorted)
        const list = document.createElement('div');
        list.className = 'agenda-list';
        (day.events||[]).sort((a,b)=> +new Date(a.start) - +new Date(b.start));
        (day.events||[]).forEach(ev=>{
        const startStr = fmtTime(new Date(ev.start));       // <-- exact time (e.g., 7:30 AM)
        const endStr   = ev.end ? fmtTime(new Date(ev.end)) : null;

        const row = document.createElement('div');
        row.className = 'agenda-row';
        row.innerHTML = `
            <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
            <div>
            <div class="agenda-title">${escapeHtml(ev.title)}</div>
            <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
            </div>
            <span class="agenda-badge">${startStr}</span>  <!-- matches left -->
        `;
        list.appendChild(row);
        });
        box.appendChild(list);

        wrap.appendChild(box);
    });
    }

    // ------------ Quick add
    $('#top3Form').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const fd = new FormData(e.target);
      const title = String(fd.get('title')||'').trim();
      if(!title) return;
      if(DEMO){
        const items = mockTop3();
        items.unshift({title, due:"", completed:false, tag:"#QuickAdd"});
        renderTop3(items);
      }else{
        await apiPost('/reminder', { list:"Top 3", title });
        await loadTop3();
      }
      e.target.reset();
    });

    // ------------ Actions (simulate opening native apps)
    $('#revealTop3').addEventListener('click', ()=> alert('Would call /open { list:"Top 3" } ‚Üí opens Reminders'));
    $('#revealCrash').addEventListener('click', ()=> alert('Would call /open { list:"Crash Plan" } ‚Üí opens Reminders'));
    $('#openCalendar').addEventListener('click', ()=> alert('Would call /open-calendar ‚Üí opens Calendar'));
    $('#openReminders').addEventListener('click', ()=> alert('Opening Reminders (simulated)‚Ä¶'));
    $('#quickAddTop').addEventListener('click', ()=> $('.in[name="title"]').focus());

    // ------------ Loaders
    async function loadTop3(){
      const items = DEMO ? mockTop3() : await apiGet('/top3');
      renderTop3(items);
    }
    async function loadCrash(){
      const items = DEMO ? mockCrash() : await apiGet('/crash7');
      renderCrash(items);
    }
    async function loadAgenda(){
      const days = DEMO ? mockAgenda() : await apiGet('/agenda');
      renderAgenda(days);
    }
    async function loadAll(){
      const now = new Date();
      $('#nowHint').textContent = fmtDate(now) + " ¬∑ " + fmtTime(now);
      $('#rangeHint').textContent = `${fmtDate(now)} ‚Üí ${fmtDate(addDays(now,6))}`;
      $('#tzHint').textContent = `Local time: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`;
      await Promise.all([loadTop3(), loadCrash(), loadAgenda()]);
    }

    // ------------ Misc
    $('#year').textContent = new Date().getFullYear();
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }

    // Init
    loadAll();
  </script>
</body>
</html>
</file>

<file path="Backups/index_1.2.html">
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jenquin.io ‚Äî Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg: #0b0c10;
      --panel: #111318;
      --muted: #7b8496;
      --text: #e9edf5;
      --accent: #6ea8fe;
      --accent-2: #7df2c9;
      --danger: #ff7a7a;
      --ok: #76ff9b;
      --border: #20232b;
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 14px;
      --radius-sm: 10px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg: #f6f7fb;
        --panel: #ffffff;
        --muted: #6b7280;
        --text: #0f172a;
        --accent: #2556ff;
        --accent-2: #0ea5e9;
        --border: #e5e7eb;
        --shadow: 0 10px 24px rgba(0,0,0,.08);
      }
    }

    *{ box-sizing: border-box }
    html,body{ height:100% }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
                  radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%), var(--bg);
      color: var(--text);
      line-height:1.4;
    }

    /* Shell */
    .wrap{
      max-width: 1200px;
      margin: 0 auto;
      padding: 28px 18px 40px;
    }

    header{
      display:flex; align-items:center; justify-content:space-between;
      gap: 16px; margin-bottom: 22px;
    }
    .brand{
      display:flex; align-items:center; gap:14px;
    }
    .logo{
      width:44px; height:44px; border-radius:12px;
      background:
        radial-gradient(60% 100% at 30% 10%, rgba(125,242,201,.3), transparent 60%),
        linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: var(--shadow);
    }
    .brand h1{
      font-size: 20px; margin: 0;
      letter-spacing:.4px;
    }
    .brand .sub{ color: var(--muted); font-size:13px; margin-top:2px }
    .actions{ display:flex; align-items:center; gap:10px }
    .btn{
      appearance:none; border:1px solid var(--border); color:var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      padding:10px 14px; border-radius:12px; cursor:pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18) }
    .btn.primary{
      background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.05));
      border-color: rgba(110,168,254,.35); color: white;
    }
    .btn.ghost{ background: transparent; }

    /* Layout */
    .grid{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 18px;
    }
    @media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }

    /* Panel */
    .panel{
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: clip;
    }
    .panel .hd{
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      padding: 14px 16px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    }
    .panel .hd h2{ margin:0; font-size: 15px; letter-spacing:.3px }
    .panel .hd .hint{ color:var(--muted); font-size:12px }
    .panel .bd{ padding: 12px 16px }
    .panel .ft{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; flex-wrap:wrap }

    /* Lists */
    .list{ display:flex; flex-direction:column; gap:10px }
    .item{
      display:grid; grid-template-columns: 22px 1fr auto; align-items:center; gap: 10px;
      padding:10px; border:1px solid var(--border); border-radius: var(--radius-sm);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    }
    .chx{ width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer }
    .chx input{ display:none }
    .chx .dot{ width:10px; height:10px; border-radius:3px; background:transparent; }
    .item.done .title{ color: var(--muted); text-decoration: line-through }
    .item.done .chx .dot{ background: var(--ok); }
    .title{ font-size:14px; }
    .meta{ color: var(--muted); font-size:12px }
    .tag{
      font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border);
      color: var(--muted);
    }
    .kebab{ opacity:.7; }
    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }

    /* Quick add */
    .quick{
      display:flex; gap:10px; align-items:center; width:100%;
    }
    .in{
      flex:1; min-width: 160px;
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }
    .select{
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }

    /* Agenda (Apple-style list) */
    .agenda-day{
      border:1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      margin-bottom: 12px; overflow: hidden;
    }
    .agenda-day-hd{
      display:flex; justify-content:space-between; align-items:center;
      padding:10px 12px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      font-size:13px; letter-spacing:.2px;
    }
    .agenda-day-hd .date{ color: var(--muted) }
    .agenda-list{ display:flex; flex-direction:column }
    .agenda-row{
      display:grid; grid-template-columns: 20px 1fr auto; align-items:center;
      gap:10px; padding:10px 12px; border-top:1px solid var(--border);
    }
    .agenda-row:first-child{ border-top: none }
    .agenda-row .dot{
      width:10px; height:10px; border-radius:50%;
      border:2px solid var(--border);
    }
    .dot.blue{ background: rgba(110,168,254,.9) }
    .dot.green{ background: rgba(125,242,201,.95) }
    .dot.purple{ background: #b38aff }
    .dot.orange{ background: #ffb05a }
    .dot.gray{ background: #9aa3b2 }
    .agenda-title{ font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
    .agenda-meta{ color: var(--muted); font-size:12px }
    .agenda-badge{
      font-size:11px; padding:4px 8px; border-radius:999px;
      border:1px solid var(--border); color: var(--muted);
    }
    .agenda-allday{
      display:flex; gap:8px; padding:10px 12px; border-top:1px solid var(--border); flex-wrap:wrap;
    }
    .allday-pill{
      font-size:12px; padding:6px 10px; border-radius:999px;
      border:1px solid var(--border); background: rgba(255,255,255,.02);
      white-space:nowrap;
    }

    footer{
      margin-top: 24px; color: var(--muted); font-size:12px; text-align:center;
    }
    .sep{ height:1px; background: var(--border); margin: 8px 0 }
    .faded{ color: var(--muted) }
    .badge{
      font-size:11px; padding:3px 8px; border-radius:999px; background: rgba(110,168,254,.15); border:1px solid rgba(110,168,254,.35);
      color: #dbe9ff;
    }
    
    /* Crash subtasks (accordion) */
    .chev{ font-size:14px; border:1px solid var(--border); border-radius:8px; padding:4px 8px; }
    .sublist{
      display:none; margin:8px 0 0 38px;
      padding:8px 10px; border-left:2px solid var(--border);
      display:none; gap:8px; flex-direction:column;
    }
    .sublist.open{ display:flex; }
    .subitem{ display:flex; align-items:center; gap:8px; font-size:13px; }
    .subitem .tick{ width:12px; height:12px; border-radius:3px; border:1px solid var(--border); background:rgba(0,0,0,.04); }
    .subitem.done .subtxt{ color:var(--muted); text-decoration:line-through; }
    
    .item .main{
      flex:1;
    }
    .item .chev{
      margin-left:auto;
      font-size:16px;
      border:none;
      background:transparent;
      color:var(--muted);
      cursor:pointer;
      padding:6px 10px;
    }
    .item .chev:hover{
      color:var(--accent);
      transform: translateY(-1px);
    }
    
    .item .main{ flex:1; }
    .item .kebab{
      margin-left:auto;
      border:none;
      background:transparent;
      color:var(--muted);
      padding:6px 10px;
    }
    .item .kebab:hover{ color:var(--accent); transform: translateY(-1px); }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>jenquin.io</h1>
          <div class="sub">Jenquin ‚Ä¢ Personal Ops Dashboard</div>
        </div>
      </div>
      <div class="actions">
        <button class="btn ghost" id="toggleDemo">Demo: On</button>
        <button class="btn" id="openReminders">Open Reminders</button>
        <button class="btn primary" id="quickAddTop">+ Quick Add</button>
      </div>
    </header>

    <div class="grid">
      <!-- Left column: Top 3 + Crash 7 stacked -->
      <div class="stack">
        <section class="panel" id="top3Panel">
          <div class="hd">
            <h2>Top 3 Today</h2>
            <div class="row">
              <span class="badge" id="dayLabel">Today</span>
              <span class="hint" id="nowHint">‚Äî</span>
            </div>
          </div>
          <div class="bd">
            <div class="list" id="top3List"></div>
          </div>
          <div class="ft">
            <form class="quick" id="top3Form">
              <input class="in" type="text" placeholder="Quick add to Top 3‚Ä¶" name="title" required />
              <button class="btn" type="submit">Add</button>
            </form>
          </div>
        </section>

        <!-- Crash Plan (no footer) -->
        <section class="panel" id="crashPanel" style="margin-top:18px;">
          <div class="hd">
            <h2>7-Day Crash Plan</h2>
            <div class="hint" id="rangeHint">‚Äî</div>
          </div>
          <div class="bd">
            <div class="list" id="crashList"></div>
          </div>
        </section>
      </div>

      <!-- Right column: Agenda (Apple-style) -->
      <section class="panel" id="agendaPanel">
        <div class="hd">
          <h2>FlowOs</h2>
          <div class="hint" id="tzHint">‚Äî</div>
        </div>
        <div class="bd">
          <div id="agenda"></div>
        </div>
        <div class="ft">
          <button class="btn ghost" id="openCalendar">Open Calendar</button>
        </div>
      </section>
    </div>

    <footer>
      ¬© <span id="year"></span> jenquin.io ‚Ä¢ v1 preview ¬∑ Data stays in Apple apps ¬∑ Clicks may open native apps
    </footer>
  </div>

  <script>
    // ------------ Utilities
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    function fmtTime(d){
      return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
    }
    function fmtDate(d){
      return new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(d);
    }
    function addDays(d, n){ const c = new Date(d); c.setDate(c.getDate()+n); return c; }

    // ------------ Demo toggle (mock vs live fetch)
    let DEMO = true;
    $('#toggleDemo').addEventListener('click', () => {
      DEMO = !DEMO;
      $('#toggleDemo').textContent = `Demo: ${DEMO ? 'On' : 'Off'}`;
      loadAll();
    });

    // ------------ Mock data
    function mockTop3(){
      return [
        { title: "cut front grass", due: "", completed: false},
        { title: "pay electric", due: "", completed: false},
        { title: "migrate webhook to tailscale", due: "", completed: false},
      ];
    }
    function mockCrash(){
  const now = new Date();
  const day = (n)=> addDays(now, n-1); // Day 1=today, Day 2=+1, etc.

  return [
    {
      day: 1,
      title: "Day 1 ‚Äì Core Finances",
      due: day(1),
      subtasks: [
        "Gather last 3‚Äì6 months bank statements",
        "Gather household bills (utilities, phone, internet, HOA, insurance)",
        "Print/save mortgage statements & lender letters"
      ]
    },
    {
      day: 2,
      title: "Day 2 ‚Äì Ledger + Food Stamps",
      due: day(2),
      subtasks: [
        "Finalize expense ledger (food, gas, health, debt)",
        "Apply for food stamps (use bank statements + ledger as proof)"
      ]
    },
    {
      day: 3,
      title: "Day 3 ‚Äì Mom‚Äôs Medical Packet (Part 1)",
      due: day(3),
      subtasks: [
        "Collect hospital/clinic records (copies/printouts)",
        "Gather prescriptions + receipts"
      ]
    },
    {
      day: 4,
      title: "Day 4 ‚Äì Mom‚Äôs Medical Packet (Part 2)",
      due: day(4),
      subtasks: [
        "Write daily function notes (3‚Äì5 days is enough)",
        "Request doctor‚Äôs letter (or confirm appointment/availability)"
      ]
    },
    {
      day: 5,
      title: "Day 5 ‚Äì Bankruptcy Packet (Part 1)",
      due: day(5),
      subtasks: [
        "Gather credit card + loan statements",
        "List creditors + balances",
        "List assets (truck, tools, furniture, gear)"
      ]
    },
    {
      day: 6,
      title: "Day 6 ‚Äì Bankruptcy Packet (Part 2)",
      due: day(6),
      subtasks: [
        "Review tax returns (last 2 years)",
        "Align ledger with tax numbers (rough match is fine)",
        "Organize everything into Shared Packet folder system"
      ]
    },
    {
      day: 7,
      title: "Day 7 ‚Äì Compile & Review",
      due: day(7),
      subtasks: [
        "Assemble Disability packet (Mom) ‚Äî submission ready",
        "Assemble Bankruptcy packet ‚Äî file-ready (hold unless needed)",
        "Double-check folders, label clearly (‚Äúready to send‚Äù)"
      ]
    }
  ];
}

    // --- Mock agenda data like your screenshots
    function mockAgenda(){
    const now = new Date();
    const d1 = new Date(now);
    d1.setDate(d1.getDate() + 1); // Example: Monday (tomorrow)
    const at = (d, h, m = 0) => new Date(d.getFullYear(), d.getMonth(), d.getDate(), h, m);

    return [
        {
        label: "Monday",
        date: d1,
        allDay: [{ title: "Recovery Focused" }],
        events: [
            
            { title: "water plants", start: at(d1, 7, 30), color: "green" },
            { title: "precor stretch circuit", start: at(d1, 9, 30), color: "blue" },
            { title: "Health", start: at(d1, 9, 30), end: at(d1, 10, 0), color: "gray" },
            { title: "mom dinner", start: at(d1, 19, 30), color: "purple" },
            { title: "sleep", start: at(d1, 23, 15), color: "blue" },
        ],
        },
    ];
    }

    // ------------ Live fetch helpers (wire these to your API later)
    async function apiGet(path){
      if(path==="/top3") return mockTop3();
      if(path==="/crash7") return mockCrash();
      if(path==="/agenda") return mockAgenda();
      return [];
    }
    async function apiPost(path, payload){
      return { ok:true };
    }

    // ------------ Renderers
    function renderTop3(items){
      const wrap = $('#top3List'); 
      wrap.innerHTML = "";

      items.forEach((it, idx)=>{
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div class="main">
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
          </div>
        `;

        // toggle complete
        row.querySelector('.chx').addEventListener('click', ()=>{
          row.classList.toggle('done');
        });

        wrap.appendChild(row);
      });
    }

    function renderCrash(items){
      const wrap = $('#crashList');
      wrap.innerHTML = "";

      items.forEach((it)=>{
        const due = it.due ? fmtDate(new Date(it.due)) : "‚Äî";

        // Row (day header)
        const row = document.createElement('div');
        row.className = 'item';
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div class="main">
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">Due: ${due}</div>
          </div>
          <button class="btn ghost chev" type="button" aria-expanded="false">‚ñ∏</button>
        `;

        // Subtask list (hidden by default)
        const sub = document.createElement('div');
        sub.className = 'sublist';
        (it.subtasks || []).forEach(txt=>{
          const li = document.createElement('div');
          li.className = 'subitem';
          li.innerHTML = `
            <span class="tick" aria-hidden="true"></span>
            <span class="subtxt">${escapeHtml(txt)}</span>
          `;
          sub.appendChild(li);
        });

        // Toggle subtasks open/closed
        const toggleBtn = row.querySelector('.chev');
        toggleBtn.addEventListener('click', ()=>{
          const open = sub.classList.toggle('open');
          toggleBtn.textContent = open ? '‚ñæ' : '‚ñ∏';
          toggleBtn.setAttribute('aria-expanded', String(open));
        });

        // Mark day as done
        row.querySelector('.chx').addEventListener('click', ()=>{
          row.classList.toggle('done');
        });

        wrap.appendChild(row);
        wrap.appendChild(sub);
      });
    }
    
    function renderAgenda(days){
    const wrap = document.getElementById('agenda');
    wrap.innerHTML = "";
    days.forEach(day=>{
        const box = document.createElement('div');
        box.className = 'agenda-day';

        const hd = document.createElement('div');
        hd.className = 'agenda-day-hd';
        const dow = new Intl.DateTimeFormat(undefined, { weekday:'long'}).format(day.date);
        const mdy = new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(day.date);
        hd.innerHTML = `<div>${escapeHtml(day.label)}</div><div class="date">${dow}, ${mdy}</div>`;
        box.appendChild(hd);

        // All-day pills
        if(day.allDay && day.allDay.length){
        const ad = document.createElement('div');
        ad.className = 'agenda-allday';
        day.allDay.forEach(a=>{
            const pill = document.createElement('span');
            pill.className = 'allday-pill';
            pill.textContent = a.title;
            ad.appendChild(pill);
        });
        box.appendChild(ad);
        }

        // Timed events (sorted)
        const list = document.createElement('div');
        list.className = 'agenda-list';
        (day.events||[]).sort((a,b)=> +new Date(a.start) - +new Date(b.start));
        (day.events||[]).forEach(ev=>{
        const startStr = fmtTime(new Date(ev.start));       // <-- exact time (e.g., 7:30 AM)
        const endStr   = ev.end ? fmtTime(new Date(ev.end)) : null;

        const row = document.createElement('div');
        row.className = 'agenda-row';
        row.innerHTML = `
            <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
            <div>
            <div class="agenda-title">${escapeHtml(ev.title)}</div>
            <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
            </div>
            <span class="agenda-badge">${startStr}</span>  <!-- matches left -->
        `;
        list.appendChild(row);
        });
        box.appendChild(list);

        wrap.appendChild(box);
    });
    }

    // ------------ Quick add
    $('#top3Form').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const fd = new FormData(e.target);
      const title = String(fd.get('title')||'').trim();
      if(!title) return;
      if(DEMO){
        const items = mockTop3();
        items.unshift({title, due:"", completed:false, tag:"#QuickAdd"});
        renderTop3(items);
      }else{
        await apiPost('/reminder', { list:"Top 3", title });
        await loadTop3();
      }
      e.target.reset();
    });

    // ------------ Actions (simulate opening native apps)
    $('#openCalendar').addEventListener('click', ()=> alert('Would call /open-calendar ‚Üí opens Calendar'));
    $('#openReminders').addEventListener('click', ()=> alert('Opening Reminders (simulated)‚Ä¶'));
    $('#quickAddTop').addEventListener('click', ()=> $('.in[name="title"]').focus());

    // ------------ Loaders
    async function loadTop3(){
      const items = DEMO ? mockTop3() : await apiGet('/top3');
      renderTop3(items);
    }
    async function loadCrash(){
      const items = DEMO ? mockCrash() : await apiGet('/crash7');
      renderCrash(items);
    }
    async function loadAgenda(){
      const days = DEMO ? mockAgenda() : await apiGet('/agenda');
      renderAgenda(days);
    }
    async function loadAll(){
      const now = new Date();
      $('#nowHint').textContent = fmtDate(now) + " ¬∑ " + fmtTime(now);
      $('#rangeHint').textContent = `${fmtDate(now)} ‚Üí ${fmtDate(addDays(now,6))}`;
      $('#tzHint').textContent = `Local time: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`;
      await Promise.all([loadTop3(), loadCrash(), loadAgenda()]);
    }

    // ------------ Misc
    $('#year').textContent = new Date().getFullYear();
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }

    // Init
    loadAll();
  </script>
</body>
</html>
</file>

<file path="Backups/index_1.html">
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jenquin.io ‚Äî Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg: #0b0c10;
      --panel: #111318;
      --muted: #7b8496;
      --text: #e9edf5;
      --accent: #6ea8fe;
      --accent-2: #7df2c9;
      --danger: #ff7a7a;
      --ok: #76ff9b;
      --border: #20232b;
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 14px;
      --radius-sm: 10px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg: #f6f7fb;
        --panel: #ffffff;
        --muted: #6b7280;
        --text: #0f172a;
        --accent: #2556ff;
        --accent-2: #0ea5e9;
        --border: #e5e7eb;
        --shadow: 0 10px 24px rgba(0,0,0,.08);
      }
    }

    *{ box-sizing: border-box }
    html,body{ height:100% }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
                  radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%), var(--bg);
      color: var(--text);
      line-height:1.4;
    }

    /* Shell */
    .wrap{
      max-width: 1200px;
      margin: 0 auto;
      padding: 28px 18px 40px;
    }

    header{
      display:flex; align-items:center; justify-content:space-between;
      gap: 16px; margin-bottom: 22px;
    }
    .brand{
      display:flex; align-items:center; gap:14px;
    }
    .logo{
      width:44px; height:44px; border-radius:12px;
      background:
        radial-gradient(60% 100% at 30% 10%, rgba(125,242,201,.3), transparent 60%),
        linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: var(--shadow);
    }
    .brand h1{
      font-size: 20px; margin: 0;
      letter-spacing:.4px;
    }
    .brand .sub{ color: var(--muted); font-size:13px; margin-top:2px }
    .actions{ display:flex; align-items:center; gap:10px }
    .btn{
      appearance:none; border:1px solid var(--border); color:var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      padding:10px 14px; border-radius:12px; cursor:pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18) }
    .btn.primary{
      background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.05));
      border-color: rgba(110,168,254,.35); color: white;
    }
    .btn.ghost{
      background: transparent;
    }

    /* Cards */
    .grid{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 18px;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
    }
    .panel{
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: clip;
    }
    .panel .hd{
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      padding: 14px 16px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    }
    .panel .hd h2{ margin:0; font-size: 15px; letter-spacing:.3px }
    .panel .hd .hint{ color:var(--muted); font-size:12px }
    .panel .bd{ padding: 12px 16px }
    .panel .ft{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; flex-wrap:wrap }

    /* Lists */
    .list{ display:flex; flex-direction:column; gap:10px }
    .item{
      display:grid; grid-template-columns: 22px 1fr auto; align-items:center; gap: 10px;
      padding:10px; border:1px solid var(--border); border-radius: var(--radius-sm);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    }
    .chx{ width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer }
    .chx input{ display:none }
    .chx .dot{ width:10px; height:10px; border-radius:3px; background:transparent; }
    .item.done .title{ color: var(--muted); text-decoration: line-through }
    .item.done .chx .dot{ background: var(--ok); }
    .title{ font-size:14px; }
    .meta{ color: var(--muted); font-size:12px }
    .tag{
      font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border);
      color: var(--muted);
    }
    .kebab{ opacity:.7; }
    .row{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap
    }

    /* Quick add */
    .quick{
      display:flex; gap:10px; align-items:center; width:100%;
    }
    .in{
      flex:1; min-width: 160px;
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }
    .select{
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }

    /* Calendar */
    .cal{
      display:grid; grid-template-columns: repeat(7,1fr); gap:10px;
    }
    @media (max-width: 860px){
      .cal{ grid-template-columns: repeat(3,1fr) }
    }
    @media (max-width: 560px){
      .cal{ grid-template-columns: repeat(2,1fr) }
    }
    .day{
      border:1px solid var(--border); border-radius:12px; padding:10px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      min-height:90px;
      display:flex; flex-direction:column; gap:6px;
    }
    .day .d{ font-size:12px; color: var(--muted) }
    .pill{
      font-size:12px; padding:6px 8px; border-radius:10px; border:1px solid var(--border);
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .pill.blue{ border-color: rgba(110,168,254,.4) }
    .pill.green{ border-color: rgba(125,242,201,.45) }

    footer{
      margin-top: 24px; color: var(--muted); font-size:12px; text-align:center;
    }

    .sep{ height:1px; background: var(--border); margin: 8px 0 }
    .faded{ color: var(--muted) }
    .badge{
      font-size:11px; padding:3px 8px; border-radius:999px; background: rgba(110,168,254,.15); border:1px solid rgba(110,168,254,.35);
      color: #dbe9ff;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>jenquin.io</h1>
          <div class="sub">Jenquin ‚Ä¢ Personal Ops Dashboard</div>
        </div>
      </div>
      <div class="actions">
        <button class="btn ghost" id="toggleDemo">Demo: On</button>
        <button class="btn" id="openReminders">Open Reminders</button>
        <button class="btn primary" id="quickAddTop">+ Quick Add</button>
      </div>
    </header>

    <div class="grid">
      <!-- Left column: Top 3 + Crash 7 stacked -->
      <div class="stack">
        <section class="panel" id="top3Panel">
          <div class="hd">
            <h2>Top 3 Today</h2>
            <div class="row">
              <span class="badge" id="dayLabel">Today</span>
              <span class="hint" id="nowHint">‚Äî</span>
            </div>
          </div>
          <div class="bd">
            <div class="list" id="top3List"></div>
          </div>
          <div class="ft">
            <form class="quick" id="top3Form">
              <input class="in" type="text" placeholder="Quick add to Top 3‚Ä¶" name="title" required />
              <button class="btn" type="submit">Add</button>
              <button class="btn ghost" type="button" id="revealTop3">Reveal in Reminders</button>
            </form>
          </div>
        </section>

        <section class="panel" id="crashPanel" style="margin-top:18px;">
          <div class="hd">
            <h2>7-Day Crash Plan</h2>
            <div class="hint" id="rangeHint">‚Äî</div>
          </div>
          <div class="bd">
            <div class="list" id="crashList"></div>
          </div>
          <div class="ft">
            <button class="btn ghost" id="revealCrash">Reveal Crash Plan</button>
          </div>
        </section>
      </div>

      <!-- Right column: Calendar glance -->
      <section class="panel">
        <div class="hd">
          <h2>Calendar (Next 7 Days)</h2>
          <div class="hint" id="tzHint">‚Äî</div>
        </div>
        <div class="bd">
          <div class="cal" id="calGrid"></div>
        </div>
        <div class="ft">
          <button class="btn ghost" id="openCalendar">Open Calendar</button>
        </div>
      </section>
    </div>

    <footer>
      ¬© <span id="year"></span> jenquin.io ‚Ä¢ v1 preview ¬∑ Data stays in Apple apps ¬∑ Clicks may open native apps
    </footer>
  </div>

  <script>
    // ------------ Utilities
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    function fmtTime(d){
      return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
    }
    function fmtDate(d){
      return new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(d);
    }
    function addDays(d, n){ const c = new Date(d); c.setDate(c.getDate()+n); return c; }

    // ------------ Demo toggle (mock vs live fetch)
    let DEMO = true;
    $('#toggleDemo').addEventListener('click', () => {
      DEMO = !DEMO;
      $('#toggleDemo').textContent = `Demo: ${DEMO ? 'On' : 'Off'}`;
      loadAll();
    });

    // ------------ Mock data
    function mockTop3(){
      return [
        { title: "Ship Jenquin v1 page", due: "", completed: false, tag:"#Admin" },
        { title: "Record 'Album Stream' bumper", due: "", completed: false, tag:"#Creative" },
        { title: "7-Day Crash pass ‚Üí prune tasks", due: "", completed: true, tag:"#Review" },
      ];
    }
    function mockCrash(){
      const now = new Date();
      return [
        { title: "Bank statements ‚Üí sort & tag", due: addDays(now,1), completed:false, tag:"#Finance"},
        { title: "Mom Log: weekly summary", due: addDays(now,2), completed:false, tag:"#Caregiving"},
        { title: "Raspberry Pi: stream loop", due: addDays(now,3), completed:false, tag:"#Infra"},
        { title: "Nova ‚Üí Quick Add Shortcut", due: addDays(now,4), completed:true, tag:"#Flow"},
      ];
    }
    function mockCalendar(){
      const now = new Date();
      return [...Array(7)].map((_,i)=>{
        const d = addDays(now, i);
        const events = [];
        if(i===0) events.push({ t:"Standup (self)", at: new Date(d.setHours(10,0)), color:"blue"});
        if(i===1) events.push({ t:"Studio hour", at: new Date(addDays(now,1).setHours(14,0)), color:"green"});
        if(i===2) events.push({ t:"Groceries + meal prep", at: new Date(addDays(now,2).setHours(18,0)), color:"blue"});
        return { date: addDays(new Date(),i), events };
      });
    }

    // ------------ Live fetch helpers (wire these to your API later)
    async function apiGet(path){
      // Example: return fetch(path).then(r=>r.json())
      // For now, return mock
      if(path==="/top3") return mockTop3();
      if(path==="/crash7") return mockCrash();
      if(path==="/calendar") return mockCalendar();
      return [];
    }
    async function apiPost(path, payload){
      // Example: return fetch(path,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)})
      // For demo, just pretend success:
      return { ok:true };
    }

    // ------------ Renderers
    function renderTop3(items){
      const wrap = $('#top3List'); wrap.innerHTML = "";
      items.forEach((it, idx)=>{
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div>
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
          </div>
          <div class="row">
            <span class="tag">Top 3</span>
            <button class="btn ghost kebab" data-action="remove" title="Remove">‚ãØ</button>
          </div>
        `;
        row.querySelector('.chx').addEventListener('click', async ()=>{
          row.classList.toggle('done');
          // later: await apiPost('/reminder/toggle', { list:'Top 3', index: idx })
        });
        row.querySelector('[data-action="remove"]').addEventListener('click', async ()=>{
          row.style.opacity = .5;
          // later: await apiPost('/reminder/delete', { list:'Top 3', index: idx })
          setTimeout(()=> row.remove(), 180);
        });
        wrap.appendChild(row);
      });
    }

    function renderCrash(items){
      const wrap = $('#crashList'); wrap.innerHTML = "";
      items.forEach((it, idx)=>{
        const due = it.due ? fmtDate(new Date(it.due)) : "‚Äî";
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div>
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">Due: ${due} ${it.tag ? '¬∑ ' + escapeHtml(it.tag) : ''}</div>
          </div>
          <span class="tag">Crash 7</span>
        `;
        row.querySelector('.chx').addEventListener('click', async ()=>{
          row.classList.toggle('done');
          // later: await apiPost('/reminder/toggle', { list:'Crash Plan', index: idx })
        });
        wrap.appendChild(row);
      });
    }

    function renderCal(days){
      const grid = $('#calGrid'); grid.innerHTML="";
      days.forEach(day=>{
        const div = document.createElement('div');
        div.className = 'day';
        div.innerHTML = `<div class="d">${fmtDate(new Date(day.date))}</div>`;
        if(day.events && day.events.length){
          day.events.forEach(ev=>{
            const pill = document.createElement('div');
            pill.className = 'pill ' + (ev.color || 'blue');
            pill.title = ev.t;
            pill.textContent = `${fmtTime(new Date(ev.at))} ‚Ä¢ ${ev.t}`;
            div.appendChild(pill);
          });
        } else {
          const none = document.createElement('div');
          none.className = 'faded'; none.textContent = '‚Äî';
          div.appendChild(none);
        }
        grid.appendChild(div);
      });
    }

    // ------------ Quick add
    $('#top3Form').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const fd = new FormData(e.target);
      const title = String(fd.get('title')||'').trim();
      if(!title) return;
      if(DEMO){
        const items = mockTop3();
        items.unshift({title, due:"", completed:false, tag:"#QuickAdd"});
        renderTop3(items);
      }else{
        await apiPost('/reminder', { list:"Top 3", title });
        await loadTop3();
      }
      e.target.reset();
    });

    // ------------ Actions (simulate opening native apps)
    $('#revealTop3').addEventListener('click', ()=> alert('Would call /open { list:"Top 3" } ‚Üí opens Reminders'));
    $('#revealCrash').addEventListener('click', ()=> alert('Would call /open { list:"Crash Plan" } ‚Üí opens Reminders'));
    $('#openCalendar').addEventListener('click', ()=> alert('Would call /open-calendar ‚Üí opens Calendar'));
    $('#openReminders').addEventListener('click', ()=> alert('Opening Reminders (simulated)‚Ä¶'));
    $('#quickAddTop').addEventListener('click', ()=> $('.in[name="title"]').focus());

    // ------------ Loaders
    async function loadTop3(){
      const items = DEMO ? mockTop3() : await apiGet('/top3');
      renderTop3(items);
    }
    async function loadCrash(){
      const items = DEMO ? mockCrash() : await apiGet('/crash7');
      renderCrash(items);
    }
    async function loadCalendar(){
      const days = DEMO ? mockCalendar() : await apiGet('/calendar');
      renderCal(days);
    }
    async function loadAll(){
      const now = new Date();
      $('#nowHint').textContent = fmtDate(now) + " ¬∑ " + fmtTime(now);
      $('#rangeHint').textContent = `${fmtDate(now)} ‚Üí ${fmtDate(addDays(now,6))}`;
      $('#tzHint').textContent = `Local time: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`;
      await Promise.all([loadTop3(), loadCrash(), loadCalendar()]);
    }

    // ------------ Misc
    $('#year').textContent = new Date().getFullYear();
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }

    // Init
    loadAll();
  </script>
</body>
</html>
</file>

<file path="Backups/sandbox_1.3.html">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agenda Card ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.25}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris‚Äô Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris‚Äô Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [

  { label:"Flex",                     start: at(7,30),  end: at(8,0),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(10,15), color: AREA_COLORS.health },
  { label:"Prep & Maintenance",       start: at(11,0),  end: at(12,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Administrative",           start: at(14,0),  end: at(16,0),  color: AREA_COLORS.administrative },
  { label:"Social & Relationships",   start: at(19,30), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,15), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
  }
  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock ‚ÄúFlex ¬∑ 3:33 PM‚Äì7:30 PM‚Äù */
  (function seedAreaPill(){
  const p = document.getElementById('areaPill');
  const seg = ZONES[0];
  if (seg) p.textContent = seg.label; // just the zone name, no time
})();
</script>
</body>
</html>
</file>

<file path="Backups/sandbox_digital_twin_oraclebackup.html">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Digital Twin Oracle ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.28}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}

  /* --- Digital Twin (Oracle) --- */
  .oracle-wrap{
    display:flex; align-items:center; justify-content:center;
    height: 260px; position:relative; overflow:hidden;
    background: radial-gradient(600px 320px at 50% -30%, rgba(125,242,201,.08), transparent 60%),
                radial-gradient(520px 280px at 120% 120%, rgba(110,168,254,.10), transparent 60%);
    border:1px solid var(--border); border-radius: var(--radius);
  }

  .oracle{
    position:relative; width: 160px; aspect-ratio: 3/5;
    filter: drop-shadow(0 12px 28px rgba(0,0,0,.45));
  }

  .oracle .aura{
    position:absolute; inset:-18%;
    border-radius: 30% 30% 36% 36% / 28% 28% 52% 52%;
    background: radial-gradient(60% 60% at 50% 35%, rgba(255,255,255,.35), transparent 60%),
                radial-gradient(80% 80% at 50% 50%, rgba(110,168,254,.25), transparent 65%);
    filter: blur(18px) saturate(1.1);
    animation: auraPulse 3.6s ease-in-out infinite;
    opacity:.9;
  }

  .oracle .body{
    position:absolute; inset:0; display:block;
    background:
      radial-gradient(45% 45% at 50% 20%, rgba(255,255,255,.85), rgba(255,255,255,.15) 60%),
      linear-gradient(180deg, rgba(110,168,254,.9), rgba(125,242,201,.7) 60%, rgba(110,168,254,.85));
    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
    mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
    border-radius: 18px;
    animation: subtleFloat 6s ease-in-out infinite;
  }

  /* Zone colors */
  .oracle[data-zone="Rest & Recharge"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(125,242,201,.30),transparent 65%)}
  .oracle[data-zone="Health"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(118,255,155,.30),transparent 65%);animation-duration:2.2s}
  .oracle[data-zone="Creative / Project Work"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(110,168,254,.30),transparent 65%)}
  .oracle[data-zone="Review & Planning"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(179,138,255,.28),transparent 65%)}
  .oracle[data-zone="Errands & Logistics"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,176,90,.30),transparent 65%)}
  .oracle[data-zone="Social & Relationships"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,122,122,.28),transparent 65%)}
  .oracle[data-zone="Flex"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(154,163,178,.28),transparent 65%)}

  /* Animations */
  @keyframes auraPulse{0%,100%{transform:scale(.96);opacity:.85}50%{transform:scale(1.03);opacity:1}}
  @keyframes subtleFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}

  .oracle-legend{margin-top:10px;font-size:12px;color:var(--muted);text-align:center}
  
  .hint{color:var(--muted);font-size:13px}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris' Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>

    <!-- Digital Twin (Oracle) Panel -->
    <section class="panel" id="oraclePanel" style="margin-top:18px;">
      <div class="hd">
        <h2>Digital Twin</h2>
        <div class="hint"><span id="oracleZoneHint">‚Äî</span></div>
      </div>
      <div class="bd">
        <div class="oracle-wrap">
          <div id="oracle" class="oracle" data-zone="Rest & Recharge" aria-label="Digital twin state">
            <div class="aura"></div>
            <div class="body"></div>
          </div>
        </div>
        <div class="oracle-legend">
          Mirrors your current Area (Rest &amp; Recharge, Health, Creative, etc.).
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris' Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [
  { label:"Health",                   start: at(0,0),  end: at(7,30), color: AREA_COLORS.health },
  { label:"Flex",                     start: at(7,30),  end: at(9,30),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(11,0), color: AREA_COLORS.health },
  { label:"Prep & Maintenance",       start: at(11,0),  end: at(14,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Administrative",           start: at(14,0),  end: at(18,0),  color: AREA_COLORS.administrative },
  { label:"Social & Relationships",   start: at(18,0), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,0), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Digital Twin wiring ---------- */
  function normalizeZone(area){
    const m = {
      "Rest & Recharge": "Rest & Recharge",
      "Health": "Health",
      "Creative / Project Work": "Creative / Project Work",
      "Review & Planning": "Review & Planning",
      "Errands & Logistics": "Errands & Logistics",
      "Social & Relationships": "Social & Relationships",
      "Flex": "Flex",
      "Prep & Maintenance": "Review & Planning"
    };
    return m[area] || "Flex";
  }

  function setOracleZone(zone){
    const el = document.getElementById('oracle');
    const hint = document.getElementById('oracleZoneHint');
    if (!el) return;
    el.setAttribute('data-zone', zone);
    if (hint) hint.textContent = zone;
  }

  function findCurrentArea(events, now) {
    // Mock implementation - find which zone we're currently in
    for (const zone of ZONES) {
      if (now >= zone.start && now < zone.end) {
        return { area: zone.label };
      }
    }
    return null;
  }

  function findNextArea(events, now) {
    // Mock implementation - find next zone
    for (const zone of ZONES) {
      if (now < zone.start) {
        return { area: zone.label };
      }
    }
    return null;
  }

  function updateOracleFromAgenda(){
    const day = window.__CURRENT_DAY || { events: ZONES };
    if (!day) return;
    const now = new Date();
    const current = findCurrentArea(day.events, now);
    if (current){
      setOracleZone(normalizeZone(current.area));
      return;
    }
    const next = findNextArea(day.events, now);
    setOracleZone(next ? "Flex" : "Flex");
  }

  function updateLiveArea() {
    // Mock function to simulate existing functionality
    updateOracleFromAgenda();
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
    updateOracleFromAgenda(); // Update oracle on each tick
  }

  document.addEventListener('DOMContentLoaded', ()=>{
    if (document.getElementById('oracle')){
      updateOracleFromAgenda();
    }
  });

  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock "Flex ¬∑ 3:33 PM‚Äì7:30 PM" */
  (function seedAreaPill(){
  const p = document.getElementById('areaPill');
  const seg = ZONES[0];
  if (seg) p.textContent = seg.label; // just the zone name, no time
})();
</script>
</body>
</html>
</file>

<file path="scripts/pull_reminders_local.sh">
#!/bin/bash
# pull_reminders_local.sh
# Converts LifeOrganizer CSV reminders to JSON for Jenquin-site calendar

set -e

# Paths
SOURCE_DIR="/Volumes/storage/projects/LifeOrganizer/life_organizer/modules/organized_reminders/data/deduped_reminders"
OUTPUT_FILE="/Volumes/storage/projects/Jenquin-site/data/reminders.local.json"
TEMP_FILE="/tmp/reminders_processing.json"

echo "üîÑ Pulling reminders from LifeOrganizer..."

# Find the newest CSV file
NEWEST_CSV=$(find "$SOURCE_DIR" -name "*.csv" -type f | sort | tail -1)

if [ -z "$NEWEST_CSV" ]; then
    echo "‚ùå No CSV files found in $SOURCE_DIR"
    exit 1
fi

echo "üìÑ Processing: $(basename "$NEWEST_CSV")"

# Create temp directory for processing
mkdir -p "$(dirname "$TEMP_FILE")"

# Convert CSV to JSON using Python
export NEWEST_CSV
export TEMP_FILE
python3 << EOF
import csv
import json
import sys
from datetime import datetime
import os

source_file = os.environ['NEWEST_CSV']
temp_file = os.environ['TEMP_FILE']

items = []
count = 0
valid_count = 0

try:
    with open(source_file, 'r', encoding='utf-8') as csvfile:
        reader = csv.DictReader(csvfile)
        
        for row in reader:
            count += 1
            
            # Skip completed items
            if row.get('completed', '').lower() in ['yes', 'true', '1']:
                continue
                
            # Skip items with invalid due dates
            due_str = row.get('due', '').strip()
            if not due_str or 'Error:' in due_str or due_str == 'No':
                continue
                
            try:
                # Parse the due date
                due_dt = datetime.strptime(due_str, '%Y-%m-%d %H:%M:%S')
                due_iso = due_dt.isoformat()
                
                # Convert to expected format
                item = {
                    'title': row.get('title', 'Untitled').strip(),
                    'dueISO': due_iso,
                    'list': row.get('list', 'Default').strip(),
                    'flagged': False,  # CSV doesn't have flagged field
                    'priority': 0,     # CSV doesn't have priority field
                    'id': row.get('id', '').strip()
                }
                
                items.append(item)
                valid_count += 1
                
            except ValueError:
                # Skip items with unparseable dates
                continue
    
    # Sort by due date
    items.sort(key=lambda x: x['dueISO'])
    
    # Create output structure
    output = {
        'items': items,
        'count': valid_count,
        'total_processed': count,
        'exported_at': datetime.now().isoformat(),
        'source_file': os.path.basename(source_file)
    }
    
    # Write to temp file
    with open(temp_file, 'w', encoding='utf-8') as outfile:
        json.dump(output, outfile, indent=2, ensure_ascii=False)
    
    print(f"‚úÖ Processed {count} total rows, found {valid_count} valid scheduled reminders")

except Exception as e:
    print(f"‚ùå Error processing CSV: {e}")
    sys.exit(1)
EOF

# Check if Python processing succeeded
if [ $? -ne 0 ]; then
    echo "‚ùå Failed to process CSV data"
    exit 1
fi

# Ensure output directory exists
mkdir -p "$(dirname "$OUTPUT_FILE")"

# Move temp file to final location
mv "$TEMP_FILE" "$OUTPUT_FILE"

echo "üìÑ Output written to: $OUTPUT_FILE"
echo "üîç Preview:"
head -20 "$OUTPUT_FILE"

echo ""
echo "‚úÖ Reminders pull complete!"
echo "üí° Usage: python3 -m http.server 8080 from Jenquin-site root"
echo "üåê Then open: http://localhost:8080/sandbox_calendar_agenda_card.html"
</file>

<file path=".gitignore">
/data/
</file>

<file path="about.md">
# Jenquin.io ‚Äî v1 demo

This is a single-page **Jenquin Dashboard** mock that mirrors your Apple system:
- **Top 3 Today**
- **7-Day Crash Plan**
- **Calendar (next 7 days)**
- Quick Add + ‚ÄúReveal in Reminders/Calendar‚Äù (simulated)

## Run locally (no backend required)
Double-click `index.html` to open in your browser **or** run a local server:

```bash
cd jengquin_site
python3 -m http.server 8080
# open http://localhost:8080
```

## Hooking up a backend later
When your Flask/FastAPI endpoints are ready:
1. Replace `apiGet`/`apiPost` in `script.js` to call real endpoints.
2. Wire buttons (Reveal/Open) to routes that trigger AppleScript on your Mac.

## Deploy via Tailscale (optional)
Expose your local port (e.g., 8080) with **Tailscale Funnel**:

```bash
tailscale funnel 8080
```

Keep ACLs private unless you intend to share publicly.
</file>

<file path="favicon.svg">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
  <defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#6ea8fe"/><stop offset="100%" stop-color="#7df2c9"/></linearGradient></defs>
  <rect x="4" y="4" width="56" height="56" rx="14" fill="url(#g)"/>
  <circle cx="32" cy="32" r="10" fill="white" opacity="0.9"/>
</svg>
</file>

<file path="instructions_digital_twin.md">
# Digital Twin Oracle - Integration Instructions

## Overview
The Digital Twin Oracle displays a glowing humanoid figure that changes color based on your current FlowOS zone (Rest & Recharge, Health, Creative, etc.).

## Integration Steps

### 1Ô∏è‚É£ CSS Integration
Add this CSS block to your main `<style>` section (before the closing `</style>` tag):

```css
/* --- Digital Twin (Oracle) --- */
.oracle-wrap{
  display:flex; align-items:center; justify-content:center;
  height: 260px; position:relative; overflow:hidden;
  background: radial-gradient(600px 320px at 50% -30%, rgba(125,242,201,.08), transparent 60%),
              radial-gradient(520px 280px at 120% 120%, rgba(110,168,254,.10), transparent 60%);
  border:1px solid var(--border); border-radius: var(--radius);
}

.oracle{
  position:relative; width: 160px; aspect-ratio: 3/5;
  filter: drop-shadow(0 12px 28px rgba(0,0,0,.45));
}

.oracle .aura{
  position:absolute; inset:-18%;
  border-radius: 30% 30% 36% 36% / 28% 28% 52% 52%;
  background: radial-gradient(60% 60% at 50% 35%, rgba(255,255,255,.35), transparent 60%),
              radial-gradient(80% 80% at 50% 50%, rgba(110,168,254,.25), transparent 65%);
  filter: blur(18px) saturate(1.1);
  animation: auraPulse 3.6s ease-in-out infinite;
  opacity:.9;
}

.oracle .body{
  position:absolute; inset:0; display:block;
  background:
    radial-gradient(45% 45% at 50% 20%, rgba(255,255,255,.85), rgba(255,255,255,.15) 60%),
    linear-gradient(180deg, rgba(110,168,254,.9), rgba(125,242,201,.7) 60%, rgba(110,168,254,.85));
  -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
  mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
  border-radius: 18px;
  animation: subtleFloat 6s ease-in-out infinite;
}

/* Zone colors */
.oracle[data-zone="Rest & Recharge"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(125,242,201,.30),transparent 65%)}
.oracle[data-zone="Health"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(118,255,155,.30),transparent 65%);animation-duration:2.2s}
.oracle[data-zone="Creative / Project Work"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(110,168,254,.30),transparent 65%)}
.oracle[data-zone="Review & Planning"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(179,138,255,.28),transparent 65%)}
.oracle[data-zone="Errands & Logistics"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,176,90,.30),transparent 65%)}
.oracle[data-zone="Social & Relationships"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,122,122,.28),transparent 65%)}
.oracle[data-zone="Flex"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(154,163,178,.28),transparent 65%)}

/* Animations */
@keyframes auraPulse{0%,100%{transform:scale(.96);opacity:.85}50%{transform:scale(1.03);opacity:1}}
@keyframes subtleFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}

.oracle-legend{margin-top:10px;font-size:12px;color:var(--muted);text-align:center}
```

### 2Ô∏è‚É£ HTML Integration
Add this panel after your existing panels (e.g., after "Crash Plan"):

```html
<!-- Digital Twin (Oracle) Panel -->
<section class="panel" id="oraclePanel" style="margin-top:18px;">
  <div class="hd">
    <h2>Digital Twin</h2>
    <div class="hint"><span id="oracleZoneHint">‚Äî</span></div>
  </div>
  <div class="bd">
    <div class="oracle-wrap">
      <div id="oracle" class="oracle" data-zone="Rest & Recharge" aria-label="Digital twin state">
        <div class="aura"></div>
        <div class="body"></div>
      </div>
    </div>
    <div class="oracle-legend">
      Mirrors your current Area (Rest &amp; Recharge, Health, Creative, etc.).
    </div>
  </div>
</section>
```

### 3Ô∏è‚É£ JavaScript Integration
Add these functions before your closing `</script>` tag:

```javascript
/* ---------- Digital Twin wiring ---------- */
function normalizeZone(area){
  const m = {
    "Rest & Recharge": "Rest & Recharge",
    "Health": "Health",
    "Creative / Project Work": "Creative / Project Work",
    "Review & Planning": "Review & Planning",
    "Errands & Logistics": "Errands & Logistics",
    "Social & Relationships": "Social & Relationships",
    "Flex": "Flex",
    "Prep & Maintenance": "Review & Planning"
  };
  return m[area] || "Flex";
}

function setOracleZone(zone){
  const el = document.getElementById('oracle');
  const hint = document.getElementById('oracleZoneHint');
  if (!el) return;
  el.setAttribute('data-zone', zone);
  if (hint) hint.textContent = zone;
}

function updateOracleFromAgenda(){
  const day = window.__CURRENT_DAY;
  if (!day) return;
  const now = new Date();
  const current = findCurrentArea(day.events, now);
  if (current){
    setOracleZone(normalizeZone(current.area));
    return;
  }
  const next = findNextArea(day.events, now);
  setOracleZone(next ? "Flex" : "Flex");
}

document.addEventListener('DOMContentLoaded', ()=>{
  if (document.getElementById('oracle')){
    updateOracleFromAgenda();
  }
});

const __oldUpdateLiveArea = updateLiveArea;
updateLiveArea = function(){
  try{ __oldUpdateLiveArea(); }catch(_){}
  updateOracleFromAgenda();
};
```

## Features

‚úÖ **Real-time Zone Detection**: Automatically detects and displays current FlowOS zone  
‚úÖ **Dynamic Color Auras**: Each zone has its unique color scheme  
‚úÖ **Smooth Animations**: Subtle floating and pulsing effects  
‚úÖ **Accessibility**: Proper ARIA labels and semantic HTML  
‚úÖ **Responsive Design**: Adapts to different screen sizes  

## Zone Color Mapping

- **Rest & Recharge**: Mint green aura
- **Health**: Bright green aura (faster pulse)
- **Creative / Project Work**: Blue aura
- **Review & Planning**: Purple aura
- **Errands & Logistics**: Orange aura
- **Social & Relationships**: Red/pink aura
- **Flex**: Gray aura

## Testing

The sandbox file `sandbox_digital_twin_oracle.html` is ready for testing and demonstrates the full functionality.
</file>

<file path="logo.svg">
<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 64 64">
  <defs>
    <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#6ea8fe"/>
      <stop offset="100%" stop-color="#7df2c9"/>
    </linearGradient>
  </defs>
  <rect x="4" y="4" width="56" height="56" rx="14" fill="url(#g)"/>
  <g fill="white" opacity="0.95">
    <path d="M20 40c0-8 6-14 14-14h6v6h-6c-4.4 0-8 3.6-8 8v6h-6v-6z"/>
    <path d="M34 18h10v10h-6a4 4 0 0 1-4-4v-6z" opacity="0.85"/>
  </g>
</svg>
</file>

<file path="oracle_twin_merge_snippet.html">
<!-- =======================================================
     DIGITAL TWIN ORACLE - MERGE-READY SNIPPET
     =======================================================
     
     Instructions for integrating into index.html:
     
     1. Add the CSS block to your main <style> section (before closing </style>)
     2. Add the HTML panel after any existing panel (e.g., after "Crash Plan")  
     3. Add the JavaScript functions before your closing </script> tag
     
     ======================================================= -->

<!-- 1Ô∏è‚É£ CSS - Add this to your main <style> section -->
<style>
/* --- Digital Twin (Oracle) --- */
.oracle-wrap{
  display:flex; align-items:center; justify-content:center;
  height: 260px; position:relative; overflow:hidden;
  background: radial-gradient(600px 320px at 50% -30%, rgba(125,242,201,.08), transparent 60%),
              radial-gradient(520px 280px at 120% 120%, rgba(110,168,254,.10), transparent 60%);
  border:1px solid var(--border); border-radius: var(--radius);
}

.oracle{
  position:relative; width: 160px; aspect-ratio: 3/5;
  filter: drop-shadow(0 12px 28px rgba(0,0,0,.45));
}

.oracle .aura{
  position:absolute; inset:-18%;
  border-radius: 30% 30% 36% 36% / 28% 28% 52% 52%;
  background: radial-gradient(60% 60% at 50% 35%, rgba(255,255,255,.35), transparent 60%),
              radial-gradient(80% 80% at 50% 50%, rgba(110,168,254,.25), transparent 65%);
  filter: blur(18px) saturate(1.1);
  animation: auraPulse 3.6s ease-in-out infinite;
  opacity:.9;
}

.oracle .body{
  position:absolute; inset:0; display:block;
  background:
    radial-gradient(45% 45% at 50% 20%, rgba(255,255,255,.85), rgba(255,255,255,.15) 60%),
    linear-gradient(180deg, rgba(110,168,254,.9), rgba(125,242,201,.7) 60%, rgba(110,168,254,.85));
  -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
  mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
  border-radius: 18px;
  animation: subtleFloat 6s ease-in-out infinite;
}

/* Zone colors */
.oracle[data-zone="Rest & Recharge"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(125,242,201,.30),transparent 65%)}
.oracle[data-zone="Health"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(118,255,155,.30),transparent 65%);animation-duration:2.2s}
.oracle[data-zone="Creative / Project Work"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(110,168,254,.30),transparent 65%)}
.oracle[data-zone="Review & Planning"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(179,138,255,.28),transparent 65%)}
.oracle[data-zone="Errands & Logistics"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,176,90,.30),transparent 65%)}
.oracle[data-zone="Social & Relationships"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,122,122,.28),transparent 65%)}
.oracle[data-zone="Flex"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(154,163,178,.28),transparent 65%)}

/* Animations */
@keyframes auraPulse{0%,100%{transform:scale(.96);opacity:.85}50%{transform:scale(1.03);opacity:1}}
@keyframes subtleFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}

.oracle-legend{margin-top:10px;font-size:12px;color:var(--muted);text-align:center}
</style>

<!-- 2Ô∏è‚É£ HTML - Add this panel after your existing panels -->
<!-- Digital Twin (Oracle) Panel -->
<section class="panel" id="oraclePanel" style="margin-top:18px;">
  <div class="hd">
    <h2>Digital Twin</h2>
    <div class="hint"><span id="oracleZoneHint">‚Äî</span></div>
  </div>
  <div class="bd">
    <div class="oracle-wrap">
      <div id="oracle" class="oracle" data-zone="Rest & Recharge" aria-label="Digital twin state">
        <div class="aura"></div>
        <div class="body"></div>
      </div>
    </div>
    <div class="oracle-legend">
      Mirrors your current Area (Rest &amp; Recharge, Health, Creative, etc.).
    </div>
  </div>
</section>

<script>
/* 3Ô∏è‚É£ JAVASCRIPT - Add these functions before your closing </script> tag */

/* ---------- Digital Twin wiring ---------- */
function normalizeZone(area){
  const m = {
    "Rest & Recharge": "Rest & Recharge",
    "Health": "Health",
    "Creative / Project Work": "Creative / Project Work",
    "Review & Planning": "Review & Planning",
    "Errands & Logistics": "Errands & Logistics",
    "Social & Relationships": "Social & Relationships",
    "Flex": "Flex",
    "Prep & Maintenance": "Review & Planning"
  };
  return m[area] || "Flex";
}

function setOracleZone(zone){
  const el = document.getElementById('oracle');
  const hint = document.getElementById('oracleZoneHint');
  if (!el) return;
  el.setAttribute('data-zone', zone);
  if (hint) hint.textContent = zone;
}

function updateOracleFromAgenda(){
  const day = window.__CURRENT_DAY;
  if (!day) return;
  const now = new Date();
  const current = findCurrentArea(day.events, now);
  if (current){
    setOracleZone(normalizeZone(current.area));
    return;
  }
  const next = findNextArea(day.events, now);
  setOracleZone(next ? "Flex" : "Flex");
}

document.addEventListener('DOMContentLoaded', ()=>{
  if (document.getElementById('oracle')){
    updateOracleFromAgenda();
  }
});

const __oldUpdateLiveArea = updateLiveArea;
updateLiveArea = function(){
  try{ __oldUpdateLiveArea(); }catch(_){}
  updateOracleFromAgenda();
};
</script>
</file>

<file path="sandbox_digital_twin_oracle.html">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Digital Twin Oracle ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.28}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}

  /* --- Digital Twin (Oracle) --- */
  .oracle-wrap{
    display:flex; align-items:center; justify-content:center;
    height: 260px; position:relative; overflow:hidden;
    background: radial-gradient(600px 320px at 50% -30%, rgba(125,242,201,.08), transparent 60%),
                radial-gradient(520px 280px at 120% 120%, rgba(110,168,254,.10), transparent 60%);
    border:1px solid var(--border); border-radius: var(--radius);
  }

  .oracle{
    position:relative; width: 160px; aspect-ratio: 3/5;
    filter: drop-shadow(0 12px 28px rgba(0,0,0,.45));
  }

  .oracle .aura{
    position:absolute; inset:-18%;
    border-radius: 30% 30% 36% 36% / 28% 28% 52% 52%;
    background: radial-gradient(60% 60% at 50% 35%, rgba(255,255,255,.35), transparent 60%),
                radial-gradient(80% 80% at 50% 50%, rgba(110,168,254,.25), transparent 65%);
    filter: blur(18px) saturate(1.1);
    animation: auraPulse 3.6s ease-in-out infinite;
    opacity:.9;
  }

  .oracle .body{
    position:absolute; inset:0; display:block;
    background:
      radial-gradient(45% 45% at 50% 20%, rgba(255,255,255,.85), rgba(255,255,255,.15) 60%),
      linear-gradient(180deg, rgba(110,168,254,.9), rgba(125,242,201,.7) 60%, rgba(110,168,254,.85));
    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
    mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
    border-radius: 18px;
    animation: subtleFloat 6s ease-in-out infinite;
  }

  /* Zone colors */
  .oracle[data-zone="Rest & Recharge"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(125,242,201,.30),transparent 65%)}
  .oracle[data-zone="Health"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(118,255,155,.30),transparent 65%);animation-duration:2.2s}
  .oracle[data-zone="Creative / Project Work"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(110,168,254,.30),transparent 65%)}
  .oracle[data-zone="Review & Planning"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(179,138,255,.28),transparent 65%)}
  .oracle[data-zone="Errands & Logistics"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,176,90,.30),transparent 65%)}
  .oracle[data-zone="Social & Relationships"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,122,122,.28),transparent 65%)}
  .oracle[data-zone="Flex"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(154,163,178,.28),transparent 65%)}

  /* Animations */
  @keyframes auraPulse{0%,100%{transform:scale(.96);opacity:.85}50%{transform:scale(1.03);opacity:1}}
  @keyframes subtleFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}

  .oracle-legend{margin-top:10px;font-size:12px;color:var(--muted);text-align:center}
  
  .hint{color:var(--muted);font-size:13px}

  /* ===== Hologram look (full-body) ===== */
  .oracle.holo{
    --holo-a: 180;            /* base hue; gets overridden per zone below */
    --holo-s: 90%;
    --holo-l: 60%;
    --holo-glow: hsla(var(--holo-a), var(--holo-s), var(--holo-l), .55);
    --holo-glow-2: hsla(calc(var(--holo-a) + 30), 80%, 65%, .35);
    --holo-line: hsla(var(--holo-a), 95%, 75%, .95);
    --holo-scan: hsla(var(--holo-a), 95%, 75%, .2);
    --holo-grain: rgba(255,255,255,.08);
    width: 200px; aspect-ratio: 3/5;
    position: relative;
    isolation: isolate;            /* keep blending tidy */
  }

  /* zone hues -> hologram palette */
  .oracle.holo[data-zone="Rest & Recharge"]{ --holo-a: 175 }
  .oracle.holo[data-zone="Health"]{ --holo-a: 155 }
  .oracle.holo[data-zone="Creative / Project Work"]{ --holo-a: 210 }
  .oracle.holo[data-zone="Review & Planning"]{ --holo-a: 265 }
  .oracle.holo[data-zone="Errands & Logistics"]{ --holo-a: 35 }
  .oracle.holo[data-zone="Social & Relationships"]{ --holo-a: 320 }
  .oracle.holo[data-zone="Flex"]{ --holo-a: 220 }

  /* big soft glow behind the figure */
  .holo .holo-glow{
    position:absolute; inset:-24%;
    background:
      radial-gradient(60% 50% at 50% 35%, var(--holo-glow), transparent 60%),
      radial-gradient(75% 60% at 50% 60%, var(--holo-glow-2), transparent 70%);
    filter: blur(18px) saturate(1.15);
    animation: holoPulse 3.8s ease-in-out infinite;
  }

  /* full-body mask (SVG in data URL) */
  .holo .holo-body{
    position:absolute; inset:0;
    background:
      linear-gradient(180deg,
        hsla(var(--holo-a), 85%, 78%, .95) 0%,
        hsla(var(--holo-a), 85%, 68%, .85) 45%,
        hsla(var(--holo-a), 85%, 58%, .90) 100%);
    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 200"><g fill="black"><circle cx="60" cy="26" r="16"/><path d="M36 48h48v30c0 10-8 18-18 18H54c-9 0-18-8-18-18V48z"/><rect x="22" y="70" width="20" height="46" rx="10"/><rect x="78" y="70" width="20" height="46" rx="10"/><path d="M46 96h28v60H46z"/><path d="M46 156h20v40H46z"/><path d="M66 156h20v40H66z"/></g></svg>') center/80% 100% no-repeat;
    mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 200"><g fill="black"><circle cx="60" cy="26" r="16"/><path d="M36 48h48v30c0 10-8 18-18 18H54c-9 0-18-8-18-18V48z"/><rect x="22" y="70" width="20" height="46" rx="10"/><rect x="78" y="70" width="20" height="46" rx="10"/><path d="M46 96h28v60H46z"/><path d="M46 156h20v40H46z"/><path d="M66 156h20v40H66z"/></g></svg>') center/80% 100% no-repeat;
    border-radius: 18px;
    box-shadow:
      0 0 12px var(--holo-glow),
      0 0 28px var(--holo-glow-2);
    animation: holoFloat 6s ease-in-out infinite;
  }

  /* edge glow / chromatic fringe */
  .holo .holo-edge{
    position:absolute; inset:0;
    background:
      radial-gradient(120% 110% at 50% 40%,
        transparent 45%,
        hsla(var(--holo-a), 100%, 85%, .5) 65%,
        transparent 80%) ;
    mix-blend-mode: screen;
    filter: blur(2.5px) saturate(1.2);
    pointer-events:none;
  }

  /* scanlines + shimmer sweep */
  .holo .holo-scan{
    position:absolute; inset:0;
    background:
      repeating-linear-gradient( to bottom,
        transparent 0 3px,
        var(--holo-scan) 3px 4px),
      linear-gradient( to bottom,
        transparent 0%,
        rgba(255,255,255,.05) 40%,
        rgba(255,255,255,.12) 50%,
        transparent 60%);
    -webkit-mask: inherit; mask: inherit;
    mix-blend-mode: screen;
    animation: holoScan 4.8s linear infinite;
  }

  /* particles */
  .holo .holo-particles{ position:absolute; inset:0; pointer-events:none; }
  .holo .holo-particles span{
    --sz: 3px; --x: 50%; --y: 50%; --t: 6s;
    position:absolute; width:var(--sz); height:var(--sz); border-radius:50%;
    background: var(--holo-line);
    left: var(--x); top: var(--y);
    filter: drop-shadow(0 0 6px var(--holo-line));
    animation: floatDot var(--t) ease-in-out infinite;
  }
  /* sprinkle positions */
  .holo .holo-particles span:nth-child(1){ --x:14%; --y:18%; --t:7s }
  .holo .holo-particles span:nth-child(2){ --x:78%; --y:22%; --t:6.3s }
  .holo .holo-particles span:nth-child(3){ --x:20%; --y:62%; --t:7.6s }
  .holo .holo-particles span:nth-child(4){ --x:84%; --y:68%; --t:5.8s }
  .holo .holo-particles span:nth-child(5){ --x:52%; --y:86%; --t:6.8s }
  .holo .holo-particles span:nth-child(6){ --x:36%; --y:40%; --t:6.1s }
  .holo .holo-particles span:nth-child(7){ --x:66%; --y:46%; --t:7.2s }
  .holo .holo-particles span:nth-child(8){ --x:30%; --y:84%; --t:5.9s }
  .holo .holo-particles span:nth-child(9){ --x:72%; --y:82%; --t:7.4s }
  .holo .holo-particles span:nth-child(10){ --x:44%; --y:12%; --t:6.6s }

  /* animations */
  @keyframes holoPulse{ 0%,100%{transform:scale(.96);opacity:.85} 50%{transform:scale(1.03);opacity:1} }
  @keyframes holoFloat{ 0%,100%{ transform: translateY(0) } 50%{ transform: translateY(-4px) } }
  @keyframes holoScan{
    0%{ background-position: 0 -120px, 0 -120px }
    100%{ background-position: 0 160px, 0 160px }
  }
  @keyframes floatDot{
    0%,100%{ transform: translateY(0) scale(1) ; opacity:.85}
    50%{ transform: translateY(-6px) scale(1.15); opacity:1}
  }

  /* ===== Wireframe + Nodes layer (masked to the body) ===== */
  .holo .holo-net{
    position:absolute; inset:0; mix-blend-mode:screen; opacity:.95;
    -webkit-mask: inherit; mask: inherit;
    background:
      /* base grid */
      url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><defs><linearGradient id="lg" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="white" stop-opacity="0.55"/><stop offset="100%" stop-color="white" stop-opacity="0.15"/></linearGradient></defs><g stroke="white" stroke-opacity="0.25" stroke-width="0.6"><!-- vertical lines --><path d="M10 0 V200 M30 0 V200 M50 0 V200 M70 0 V200 M90 0 V200 M110 0 V200 M130 0 V200 M150 0 V200 M170 0 V200 M190 0 V200"/><!-- horizontal lines --><path d="M0 10 H200 M0 30 H200 M0 50 H200 M0 70 H200 M0 90 H200 M0 110 H200 M0 130 H200 M0 150 H200 M0 170 H200 M0 190 H200"/><!-- diagonals --><g opacity="0.35"><path d="M-40 0 L200 240"/><path d="M-20 0 L220 240"/><path d="M0 0 L240 240"/><path d="M0 -40 L240 200"/><path d="M0 -20 L240 220"/></g></g><!-- nodes (small glowing points) --><g fill="white"><circle cx="22" cy="18" r="1.7"/><circle cx="58" cy="32" r="1.4"/><circle cx="96" cy="26" r="1.6"/><circle cx="142" cy="44" r="1.5"/><circle cx="176" cy="20" r="1.9"/><circle cx="34" cy="74" r="1.6"/><circle cx="86" cy="92" r="1.5"/><circle cx="126" cy="80" r="1.7"/><circle cx="164" cy="96" r="1.6"/><circle cx="52" cy="124" r="1.5"/><circle cx="96" cy="136" r="1.7"/><circle cx="144" cy="132" r="1.6"/><circle cx="70" cy="168" r="1.5"/><circle cx="118" cy="176" r="1.8"/></g></svg>') center/180px 180px repeat;

    /* subtle parallax to keep it alive */
    animation: netDrift 14s ease-in-out infinite;
    filter: drop-shadow(0 0 6px hsla(var(--holo-a),95%,75%,.55));
  }

  /* vary opacity by zone for mood */
  .oracle.holo[data-zone="Rest & Recharge"] .holo-net{ opacity:.90 }
  .oracle.holo[data-zone="Health"] .holo-net{ opacity:.98 }
  .oracle.holo[data-zone="Creative / Project Work"] .holo-net{ opacity:.95 }
  .oracle.holo[data-zone="Review & Planning"] .holo-net{ opacity:.92 }

  /* vertical "spine" core glow */
  .holo .holo-core{
    position:absolute; inset:6% 30%;
    background:
      radial-gradient(60% 100% at 50% 0%, hsla(var(--holo-a),95%,75%,.55), transparent 60%),
      linear-gradient(180deg, hsla(var(--holo-a),95%,75%,.9), transparent 60%);
    filter: blur(2px) saturate(1.1);
    opacity:.85; mix-blend-mode:screen;
    -webkit-mask: inherit; mask: inherit;
    animation: corePulse 3.6s ease-in-out infinite;
  }

  /* gentle motion */
  @keyframes netDrift{
    0%{ background-position: 0 0 }
    50%{ background-position: 12px -10px }
    100%{ background-position: 0 0 }
  }
  @keyframes corePulse{
    0%,100%{ opacity:.75; transform: translateY(0) }
    50%{ opacity:1; transform: translateY(-2px) }
  }

  /* ===== Anatomical full-body silhouette (neutral athletic) ===== */
  .holo .holo-body.anat{
    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 200"><!-- Head --><circle cx="60" cy="22" r="12" fill="black"/><!-- Neck --><rect x="54" y="34" width="12" height="8" rx="3" fill="black"/><!-- Torso + shoulders (curved) --><path fill="black" d="M30,55 C34,42 44,36 60,36 C76,36 86,42 90,55 L92,78 C92,96 80,110 60,110 C40,110 28,96 28,78 Z"/><!-- Arms (slight natural bend) --><path fill="black" d="M28,58 C23,70 24,84 28,94 C30,100 36,104 40,103 C43,102 44,98 42,95 C39,90 38,84 38,78 L38,60 C36,58 32,57 28,58 Z"/><path fill="black" d="M92,58 C97,70 96,84 92,94 C90,100 84,104 80,103 C77,102 76,98 78,95 C81,90 82,84 82,78 L82,60 C84,58 88,57 92,58 Z"/><!-- Pelvis --><path fill="black" d="M46,110 C46,118 50,124 60,124 C70,124 74,118 74,110 Z"/><!-- Left leg --><path fill="black" d="M50,124 C48,140 48,156 49,172 C49.5,180 48,188 46,196 L56,196 C58,188 59,180 59,172 C59,156 60,140 62,124 Z"/><!-- Right leg --><path fill="black" d="M70,124 C72,140 72,156 71,172 C70.5,180 72,188 74,196 L64,196 C62,188 61,180 61,172 C61,156 60,140 58,124 Z"/></svg>') center/80% 100% no-repeat;
    mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 200"><circle cx="60" cy="22" r="12" fill="black"/><rect x="54" y="34" width="12" height="8" rx="3" fill="black"/><path fill="black" d="M30,55 C34,42 44,36 60,36 C76,36 86,42 90,55 L92,78 C92,96 80,110 60,110 C40,110 28,96 28,78 Z"/><path fill="black" d="M28,58 C23,70 24,84 28,94 C30,100 36,104 40,103 C43,102 44,98 42,95 C39,90 38,84 38,78 L38,60 C36,58 32,57 28,58 Z"/><path fill="black" d="M92,58 C97,70 96,84 92,94 C90,100 84,104 80,103 C77,102 76,98 78,95 C81,90 82,84 82,78 L82,60 C84,58 88,57 92,58 Z"/><path fill="black" d="M46,110 C46,118 50,124 60,124 C70,124 74,118 74,110 Z"/><path fill="black" d="M50,124 C48,140 48,156 49,172 C49.5,180 48,188 46,196 L56,196 C58,188 59,180 59,172 C59,156 60,140 62,124 Z"/><path fill="black" d="M70,124 C72,140 72,156 71,172 C70.5,180 72,188 74,196 L64,196 C62,188 61,180 61,172 C61,156 60,140 58,124 Z"/></svg>') center/80% 100% no-repeat;
  }

  /* Optional: a slimmer neutral variant‚Äîjust toggle .slim instead of .anat */
  .holo .holo-body.slim{
    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 200"><circle cx="60" cy="22" r="11" fill="black"/><rect x="55" y="33" width="10" height="7" rx="3" fill="black"/><path fill="black" d="M34,56 C38,44 46,38 60,38 C74,38 82,44 86,56 L88,78 C88,96 78,108 60,108 C42,108 32,96 32,78 Z"/><path fill="black" d="M32,59 C28,70 30,84 33,92 C35,97 39,100 42,99 C44,98 45,96 44,93 C42,89 40,83 40,77 L40,62 C38,60 35,59 32,59 Z"/><path fill="black" d="M88,59 C92,70 90,84 87,92 C85,97 81,100 78,99 C76,98 75,96 76,93 C78,89 80,83 80,77 L80,62 C82,60 85,59 88,59 Z"/><path fill="black" d="M48,108 C48,116 52,121 60,121 C68,121 72,116 72,108 Z"/><path fill="black" d="M52,121 C50,138 51,156 52,172 C52.5,180 51,188 49,196 L57,196 C59,188 60,180 60,172 C60,156 60,138 61,121 Z"/><path fill="black" d="M68,121 C70,138 69,156 68,172 C67.5,180 69,188 71,196 L63,196 C61,188 60,180 60,172 C60,156 60,138 59,121 Z"/></svg>') center/78% 100% no-repeat;
    mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 200"><circle cx="60" cy="22" r="11" fill="black"/><rect x="55" y="33" width="10" height="7" rx="3" fill="black"/><path fill="black" d="M34,56 C38,44 46,38 60,38 C74,38 82,44 86,56 L88,78 C88,96 78,108 60,108 C42,108 32,96 32,78 Z"/><path fill="black" d="M32,59 C28,70 30,84 33,92 C35,97 39,100 42,99 C44,98 45,96 44,93 C42,89 40,83 40,77 L40,62 C38,60 35,59 32,59 Z"/><path fill="black" d="M88,59 C92,70 90,84 87,92 C85,97 81,100 78,99 C76,98 75,96 76,93 C78,89 80,83 80,77 L80,62 C82,60 85,59 88,59 Z"/><path fill="black" d="M48,108 C48,116 52,121 60,121 C68,121 72,116 72,108 Z"/><path fill="black" d="M52,121 C50,138 51,156 52,172 C52.5,180 51,188 49,196 L57,196 C59,188 60,180 60,172 C60,156 60,138 61,121 Z"/><path fill="black" d="M68,121 C70,138 69,156 68,172 C67.5,180 69,188 71,196 L63,196 C61,188 60,180 60,172 C60,156 60,138 59,121 Z"/></svg>') center/78% 100% no-repeat;
  }
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris' Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>

    <!-- Digital Twin (Oracle) Panel -->
    <section class="panel" id="oraclePanel" style="margin-top:18px;">
      <div class="hd">
        <h2>Digital Twin</h2>
        <div class="hint"><span id="oracleZoneHint">‚Äî</span></div>
      </div>
      <div class="bd">
        <div class="oracle-wrap">
          <div id="oracle" class="oracle holo" data-zone="Rest & Recharge" aria-label="Digital twin state">
            <div class="holo-glow"></div>
            <div class="holo-body anat"></div>

            <!-- NEW: wireframe grid + nodes clipped to the body -->
            <div class="holo-net"></div>

            <!-- vertical core glow (spine-like) -->
            <div class="holo-core"></div>

            <!-- edge + scan + particles stay for hologram vibe -->
            <div class="holo-edge"></div>
            <div class="holo-scan"></div>
            <div class="holo-particles">
              <span></span><span></span><span></span><span></span><span></span>
              <span></span><span></span><span></span><span></span><span></span>
            </div>
          </div>
        </div>
        <div class="oracle-legend">
          Mirrors your current Area (Rest &amp; Recharge, Health, Creative, etc.).
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris' Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [
  { label:"Health",                   start: at(0,0),  end: at(7,30), color: AREA_COLORS.health },
  { label:"Flex",                     start: at(7,30),  end: at(9,30),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(11,0), color: AREA_COLORS.health },
  { label:"Prep & Maintenance",       start: at(11,0),  end: at(14,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Administrative",           start: at(14,0),  end: at(18,0),  color: AREA_COLORS.administrative },
  { label:"Social & Relationships",   start: at(18,0), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,0), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Digital Twin wiring ---------- */
  function normalizeZone(area){
    const m = {
      "Rest & Recharge": "Rest & Recharge",
      "Health": "Health",
      "Creative / Project Work": "Creative / Project Work",
      "Review & Planning": "Review & Planning",
      "Errands & Logistics": "Errands & Logistics",
      "Social & Relationships": "Social & Relationships",
      "Flex": "Flex",
      "Prep & Maintenance": "Review & Planning"
    };
    return m[area] || "Flex";
  }

  function setOracleZone(zone){
    const el = document.getElementById('oracle');
    const hint = document.getElementById('oracleZoneHint');
    if (!el) return;
    el.setAttribute('data-zone', zone);
    if (hint) hint.textContent = zone;
  }

  function findCurrentArea(events, now) {
    // Mock implementation - find which zone we're currently in
    for (const zone of ZONES) {
      if (now >= zone.start && now < zone.end) {
        return { area: zone.label };
      }
    }
    return null;
  }

  function findNextArea(events, now) {
    // Mock implementation - find next zone
    for (const zone of ZONES) {
      if (now < zone.start) {
        return { area: zone.label };
      }
    }
    return null;
  }

  function updateOracleFromAgenda(){
    const day = window.__CURRENT_DAY || { events: ZONES };
    if (!day) return;
    const now = new Date();
    const current = findCurrentArea(day.events, now);
    if (current){
      setOracleZone(normalizeZone(current.area));
      return;
    }
    const next = findNextArea(day.events, now);
    setOracleZone(next ? "Flex" : "Flex");
  }

  function updateLiveArea() {
    // Mock function to simulate existing functionality
    updateOracleFromAgenda();
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
    updateOracleFromAgenda(); // Update oracle on each tick
  }

  document.addEventListener('DOMContentLoaded', ()=>{
    if (document.getElementById('oracle')){
      updateOracleFromAgenda();
    }
  });

  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock "Flex ¬∑ 3:33 PM‚Äì7:30 PM" */
  (function seedAreaPill(){
  const p = document.getElementById('areaPill');
  const seg = ZONES[0];
  if (seg) p.textContent = seg.label; // just the zone name, no time
})();
</script>
</body>
</html>
</file>

<file path="script.js">
// jengquin.io v1 demo script

const $ = sel => document.querySelector(sel);
const $$ = sel => Array.from(document.querySelectorAll(sel));

function fmtTime(d){
  return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
}
function fmtDate(d){
  return new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(d);
}
function addDays(d, n){ const c = new Date(d); c.setDate(c.getDate()+n); return c; }
function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }

let DEMO = true;

// ------------ Mock data
function mockTop3(){
  return [
    { title: "Ship GenCoin v1 page", due: "", completed: false, tag:"#Admin" },
    { title: "Record 'Album Stream' bumper", due: "", completed: false, tag:"#Creative" },
    { title: "7-Day Crash pass ‚Üí prune tasks", due: "", completed: true, tag:"#Review" },
  ];
}
function mockCrash(){
  const now = new Date();
  return [
    { title: "Bank statements ‚Üí sort & tag", due: addDays(now,1), completed:false, tag:"#Finance"},
    { title: "Mom Log: weekly summary", due: addDays(now,2), completed:false, tag:"#Caregiving"},
    { title: "Raspberry Pi: stream loop", due: addDays(now,3), completed:false, tag:"#Infra"},
    { title: "Nova ‚Üí Quick Add Shortcut", due: addDays(now,4), completed:true, tag:"#Flow"},
  ];
}
function mockCalendar(){
  const now = new Date();
  return [...Array(7)].map((_,i)=>{
    const d = addDays(now, i);
    const events = [];
    if(i===0) events.push({ t:"Standup (self)", at: new Date(d.setHours(10,0)), color:"blue"});
    if(i===1) events.push({ t:"Studio hour", at: new Date(addDays(now,1).setHours(14,0)), color:"green"});
    if(i===2) events.push({ t:"Groceries + meal prep", at: new Date(addDays(now,2).setHours(18,0)), color:"blue"});
    return { date: addDays(new Date(),i), events };
  });
}

// ------------ Live fetch helpers (wire these to your API later)
async function apiGet(path){
  // Replace with: return fetch(path).then(r=>r.json())
  if(path==="/top3") return mockTop3();
  if(path==="/crash7") return mockCrash();
  if(path==="/calendar") return mockCalendar();
  return [];
}
async function apiPost(path, payload){
  // Replace with real fetch POST when backend is ready
  return { ok:true };
}

// ------------ Renderers
function renderTop3(items){
  const wrap = $('#top3List'); wrap.innerHTML = "";
  items.forEach((it, idx)=>{
    const row = document.createElement('div');
    row.className = 'item' + (it.completed ? ' done' : '');
    row.innerHTML = `
      <label class="chx" aria-label="toggle done"><span class="dot"></span></label>
      <div>
        <div class="title">${escapeHtml(it.title)}</div>
        <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
      </div>
      <div class="row">
        <span class="tag">Top 3</span>
        <button class="btn ghost kebab" data-action="remove" title="Remove">‚ãØ</button>
      </div>`;
    row.querySelector('.chx').addEventListener('click', async ()=>{
      row.classList.toggle('done');
      // later: await apiPost('/reminder/toggle', { list:'Top 3', index: idx })
    });
    row.querySelector('[data-action="remove"]').addEventListener('click', async ()=>{
      row.style.opacity = .5;
      // later: await apiPost('/reminder/delete', { list:'Top 3', index: idx })
      setTimeout(()=> row.remove(), 180);
    });
    wrap.appendChild(row);
  });
}

function renderCrash(items){
  const wrap = $('#crashList'); wrap.innerHTML = "";
  items.forEach((it, idx)=>{
    const due = it.due ? fmtDate(new Date(it.due)) : "‚Äî";
    const row = document.createElement('div');
    row.className = 'item' + (it.completed ? ' done' : '');
    row.innerHTML = `
      <label class="chx" aria-label="toggle done"><span class="dot"></span></label>
      <div>
        <div class="title">${escapeHtml(it.title)}</div>
        <div class="meta">Due: ${due} ${it.tag ? '¬∑ ' + escapeHtml(it.tag) : ''}</div>
      </div>
      <span class="tag">Crash 7</span>`;
    row.querySelector('.chx').addEventListener('click', async ()=>{
      row.classList.toggle('done');
      // later: await apiPost('/reminder/toggle', { list:'Crash Plan', index: idx })
    });
    wrap.appendChild(row);
  });
}

function renderCal(days){
  const grid = $('#calGrid'); grid.innerHTML="";
  days.forEach(day=>{
    const div = document.createElement('div');
    div.className = 'day';
    div.innerHTML = `<div class="d">${fmtDate(new Date(day.date))}</div>`;
    if(day.events && day.events.length){
      day.events.forEach(ev=>{
        const pill = document.createElement('div');
        pill.className = 'pill ' + (ev.color || 'blue');
        pill.title = ev.t;
        pill.textContent = `${fmtTime(new Date(ev.at))} ‚Ä¢ ${ev.t}`;
        div.appendChild(pill);
      });
    } else {
      const none = document.createElement('div');
      none.className = 'faded'; none.textContent = '‚Äî';
      div.appendChild(none);
    }
    grid.appendChild(div);
  });
}

// ------------ Quick add
function wireEvents(){
  $('#top3Form').addEventListener('submit', async (e)=>{
    e.preventDefault();
    const fd = new FormData(e.target);
    const title = String(fd.get('title')||'').trim();
    if(!title) return;
    if(DEMO){
      const items = mockTop3();
      items.unshift({title, due:"", completed:false, tag:"#QuickAdd"});
      renderTop3(items);
    }else{
      await apiPost('/reminder', { list:"Top 3", title });
      await loadTop3();
    }
    e.target.reset();
  });

  // Simulated native app actions
  $('#revealTop3').addEventListener('click', ()=> alert('Would call /open { list:"Top 3" } ‚Üí opens Reminders'));
  $('#revealCrash').addEventListener('click', ()=> alert('Would call /open { list:"Crash Plan" } ‚Üí opens Reminders'));
  $('#openCalendar').addEventListener('click', ()=> alert('Would call /open-calendar ‚Üí opens Calendar'));
  $('#openReminders').addEventListener('click', ()=> alert('Opening Reminders (simulated)‚Ä¶'));
  $('#quickAddTop').addEventListener('click', ()=> $('.in[name="title"]').focus());

  // Demo toggle
  $('#toggleDemo').addEventListener('click', () => {
    DEMO = !DEMO;
    $('#toggleDemo').textContent = `Demo: ${DEMO ? 'Demo: On' : 'Demo: Off'}`;
    loadAll();
  });
}

// ------------ Loaders
async function loadTop3(){
  const items = DEMO ? mockTop3() : await apiGet('/top3');
  renderTop3(items);
}
async function loadCrash(){
  const items = DEMO ? mockCrash() : await apiGet('/crash7');
  renderCrash(items);
}
async function loadCalendar(){
  const days = DEMO ? mockCalendar() : await apiGet('/calendar');
  renderCal(days);
}
async function loadAll(){
  const now = new Date();
  $('#nowHint').textContent = fmtDate(now) + " ¬∑ " + fmtTime(now);
  $('#rangeHint').textContent = `${fmtDate(now)} ‚Üí ${fmtDate(addDays(now,6))}`;
  $('#tzHint').textContent = `Local time: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`;
  $('#year').textContent = new Date().getFullYear();
  await Promise.all([loadTop3(), loadCrash(), loadCalendar()]);
}

// Init
document.addEventListener('DOMContentLoaded', ()=>{
  wireEvents();
  loadAll();
});
</file>

<file path="site-urls.txt">
Jenquin Site URLs:

Live Site: https://jenquin813.github.io/jenquin.github.io/
Demo Mode: https://jenquin813.github.io/jenquin.github.io/?demo=1
</file>

<file path="test-top3.html">
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Top 3 Form</title>
  <style>
    body { font-family: system-ui, sans-serif; padding: 20px; }
    .panel { border: 1px solid #ccc; border-radius: 8px; padding: 15px; max-width: 500px; }
    .hd { margin-bottom: 10px; }
    .bd { margin-bottom: 15px; }
    .ft { border-top: 1px solid #eee; padding-top: 10px; }
    .list { min-height: 50px; }
    .item { display: flex; padding: 8px 0; border-bottom: 1px solid #eee; }
    .chx { margin-right: 10px; cursor: pointer; }
    .dot { display: inline-block; width: 16px; height: 16px; border: 2px solid #999; border-radius: 50%; }
    .done .dot { background-color: #999; }
    .title { font-weight: 500; }
    .meta { font-size: 0.8em; color: #666; }
    .quick { display: flex; }
    .in { flex: 1; padding: 8px; border: 1px solid #ccc; border-radius: 4px; margin-right: 8px; }
    .btn { padding: 8px 16px; background: #0066cc; color: white; border: none; border-radius: 4px; cursor: pointer; }
  </style>
</head>
<body>
  <section class="panel" id="top3Panel">
    <div class="hd">
      <h2>Top 3 Today</h2>
      <div class="row">
        <span class="badge" id="dayLabel">Today</span>
        <span class="hint" id="nowHint">‚Äî</span>
      </div>
    </div>
    <div class="bd">
      <div class="list" id="top3List"></div>
    </div>
    <div class="ft">
      <form class="quick" id="top3Form">
        <input class="in" type="text" placeholder="Quick add to Top 3‚Ä¶" name="title" required />
        <button class="btn" type="submit">Add</button>
      </form>
    </div>
  </section>

  <script>
    // Utilities
    const $ = sel => document.querySelector(sel);
    
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }
    
    // Demo mode
    let DEMO = true;
    
    // Mock data
    function mockTop3() {
      return [
        { title: "cut front grass", due: "", completed: false},
        { title: "pay electric", due: "", completed: false},
        { title: "migrate webhook to tailscale", due: "", completed: false},
      ];
    }
    
    // Renderer
    function renderTop3(items) {
      const wrap = $('#top3List'); 
      wrap.innerHTML = "";
      
      items.forEach((it, idx) => {
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div class="main">
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
          </div>
        `;
        
        // toggle complete
        row.querySelector('.chx').addEventListener('click', () => {
          row.classList.toggle('done');
        });
        
        wrap.appendChild(row);
      });
    }
    
    // Initial load
    function loadTop3() {
      const items = mockTop3();
      renderTop3(items);
    }
    
    // Form handler
    document.addEventListener('DOMContentLoaded', () => {
      console.log("DOM loaded, setting up form handler");
      const top3Form = $('#top3Form');
      console.log("Form element:", top3Form);
      
      if (top3Form) {
        top3Form.addEventListener('submit', (e) => {
          console.log("Form submitted");
          e.preventDefault();
          const fd = new FormData(e.target);
          const title = String(fd.get('title') || '').trim();
          console.log("Title:", title);
          
          if (!title) return;
          
          const items = mockTop3();
          items.unshift({title, due: "", completed: false, tag: "#QuickAdd"});
          renderTop3(items);
          e.target.reset();
        });
      }
    });
    
    // Initialize
    loadTop3();
  </script>
</body>
</html>
</file>

<file path="Backups/repomix-output.xml">
This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
archive_sandbox/
  ._sandbox_1.html
  ._sandbox.html
  ._sandbox1_1.html
  sanbox_1.2
  sandbox_1.html
  sandbox.html
  sandbox1_1.html
Backups/
  ._repomix-output.xml
  ._sandbox_digital_twin_oraclebackup.html
  index_1.1.html
  index_1.2.html
  index_1.html
  jenquin-site-backup-20251010-210309.zip
  jenquin-site-backup-20251010-211554.zip
  jenquin-site-backup-20251010-213744.zip
  jenquin-site-backup-20251010-222451.zip
  jenquin-site-backup-20251011-000316.zip
  jenquin-site-backup-20251011-004539.zip
  jenquin-site-backup-20251011-004827.zip
  jenquin-site-backup-20251011-112959.zip
  jenquin-site-backup-20251011-131456.zip
  jenquin-site-backup-20251011-132956.zip
  jenquin-site-backup-20251011-154210.zip
  jenquin-site-backup-20251011-172407.zip
  repomix-output.xml
  sandbox_1.3.html
  sandbox_digital_twin_oraclebackup.html
scripts/
  ._pull_reminders_local.sh
  pull_reminders_local.sh
._.gitignore
._about.md
._data
._demo.html
._favicon.svg
._index.html
._instructions_digital_twin.md
._logo.svg
._oracle_twin_merge_snippet.html
._README.md
._run_commands
._sandbox_calendar_agenda_card.html
._sandbox_digital_twin_oracle.html
._script.js
._scripts
._style.css
.gitignore
about.md
demo.html
favicon.svg
index.html
instructions_digital_twin.md
logo.svg
oracle_twin_merge_snippet.html
README.md
run_commands
sandbox_calendar_agenda_card.html
sandbox_digital_twin_oracle.html
script.js
site-urls.txt
style.css
test-top3.html
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="archive_sandbox/sanbox_1.2">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agenda Card ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.48}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris‚Äô Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris‚Äô Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [
  { label:"Prep & Maintenance",       start: at(7,30),  end: at(8,0),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(10,15), color: AREA_COLORS.health },
  { label:"Flex",                     start: at(11,0),  end: at(12,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Administrative",          start: at(14,0),  end: at(16,0),  color: AREA_COLORS.administrative },
  { label:"Social & Relationships",   start: at(19,30), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,15), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
  }
  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock ‚ÄúFlex ¬∑ 3:33 PM‚Äì7:30 PM‚Äù */
  (function seedAreaPill(){
    const p = document.getElementById('areaPill');
    const seg = ZONES[0];
    if (seg) p.textContent = `${seg.label} ¬∑ ${fmtTime(seg.start)}‚Äì${fmtTime(seg.end)}`;
  })();
</script>
</body>
</html>
</file>

<file path="archive_sandbox/sandbox_1.html">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agenda Card ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.22}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris‚Äô Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris‚Äô Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  const ZONES = [
    { label:"Flex",   start: at(12,47), end: at(19,30), color:'rgba(125,242,201,.45)' }, // example
    // add more segments if you like:
    // { label:"Review", start: at(9,0), end: at(12,30), color:'rgba(255,176,90,.45)' },
  ];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
  }
  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock ‚ÄúFlex ¬∑ 3:33 PM‚Äì7:30 PM‚Äù */
  (function seedAreaPill(){
    const p = document.getElementById('areaPill');
    const seg = ZONES[0];
    if (seg) p.textContent = `${seg.label} ¬∑ ${fmtTime(seg.start)}‚Äì${fmtTime(seg.end)}`;
  })();
</script>
</body>
</html>
</file>

<file path="archive_sandbox/sandbox.html">
<!doctype html>
<meta charset="utf-8" />
<title>Zone Tracker Wireframe</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  :root{
    --bg:#0b0c10; --panel:#111318; --text:#e9edf5; --muted:#7b8496; --border:#20232b;
    --ok:#76ff9b;
    --accent:#6ea8fe; --accent-2:#7df2c9;
  }
  body{margin:0;background:var(--bg);color:var(--text);font:14px/1.4 ui-sans-serif,system-ui}
  .panel{max-width:920px;margin:24px auto;padding:14px;border:1px solid var(--border);border-radius:14px;background:var(--panel)}
  .hd{display:flex;align-items:center;gap:10px;margin-bottom:8px}
  .hd h2{margin:0;font-size:14px;letter-spacing:.3px}
  /* --- Focus / zone tracker --- */
  .zone-wrap{display:flex;flex-direction:column;gap:8px;margin-bottom:10px}
  .zone-bar{
    position:relative;height:28px;border:1px solid var(--border);border-radius:999px;
    background:linear-gradient(180deg,rgba(255,255,255,.01),rgba(0,0,0,.06));
    overflow:hidden;
  }
  /* subtle segment bands */
  .zone-seg{position:absolute;top:0;bottom:0;opacity:.18}
  .seg-flex{background:#8aa0ff}
  .seg-review{background:#ffcc66}
  .seg-prep{background:#7df2c9}
  .seg-rest{background:#b38aff}
  /* progress fill */
  .zone-fill{
    position:absolute;inset:0 auto 0 0;width:0%;
    background:linear-gradient(90deg,rgba(255,255,255,.08),rgba(255,255,255,.02));
    backdrop-filter:saturate(120%) brightness(110%);
  }
  /* glow dot at "now" */
  .zone-dot{
    position:absolute;top:50%;transform:translate(-50%,-50%);
    width:8px;height:8px;border-radius:50%;
    background:rgba(255,255,255,.85);box-shadow:0 0 8px rgba(255,255,255,.45);
    left:0%;
  }
  /* labels row: current + upcoming */
  .zone-labels{display:flex;gap:8px;align-items:center}
  .pill{
    display:inline-flex;align-items:center;gap:6px;
    padding:6px 10px;border:1px solid var(--border);border-radius:999px;
    background:linear-gradient(180deg,rgba(255,255,255,.01),rgba(0,0,0,.05)); color:var(--muted);
    white-space:nowrap;font-size:12px;
  }
  .pill.current{border-color:rgba(255,255,255,.08);background:linear-gradient(180deg,rgba(255,255,255,.015),rgba(0,0,0,.12))}
  /* all-day row */
  .allday{display:flex;gap:8px;align-items:center;overflow:auto}
  .allday .pill{font-size:12px}
  /* agenda list (just for placement) */
  .row{display:grid;grid-template-columns:20px 1fr auto;gap:10px;align-items:center;
       padding:10px;border-top:1px solid var(--border)}
  .row:first-child{border-top:none}
  .dot{width:10px;height:10px;border-radius:50%;background:#6ea8fe;opacity:.9}
  .time{color:var(--muted);font-size:12px}
</style>

<div class="panel">
  <div class="hd"><h2>Saturday ‚Ä¢ Oct 11</h2></div>

  <!-- Focus + zone tracker -->
  <div class="zone-wrap">
    <div class="zone-bar" id="zoneBar">
      <!-- segments (left‚Üíright) will be positioned by JS -->
      <div class="zone-fill" id="zoneFill"></div>
      <div class="zone-dot" id="zoneDot"></div>
    </div>
    <!-- labels: current + upcoming -->
    <div class="zone-labels" id="zoneLabels"></div>
    <!-- all-day items -->
    <div class="allday" id="alldayLane"></div>
  </div>

  <!-- Minimal agenda just for context -->
  <div class="row"><span class="dot"></span><div>water plants<br><span class="time">7:30 AM</span></div><span class="time">7:30 AM</span></div>
  <div class="row"><span class="dot" style="background:#b38aff"></span><div>precor stretch circuit<br><span class="time">9:30 AM</span></div><span class="time">9:30 AM</span></div>
  <div class="row"><span class="dot" style="background:#9aa3b2"></span><div>grocery shop<br><span class="time">11:00 AM‚Äì12:00 PM</span></div><span class="time">11:00 AM</span></div>
</div>

<script>
  // ------- mock day + zones (change times to see effect)
  const day = new Date(); // today
  const at = (h,m=0)=> new Date(day.getFullYear(), day.getMonth(), day.getDate(), h, m);
  const ZONES = [
    { label:"Flex",            start: at(8,  0), end: at(12, 0), cls:"seg-flex"   },
    { label:"Review",          start: at(12, 0), end: at(18,30), cls:"seg-review" },
    { label:"Prep",            start: at(18,30), end: at(19,30), cls:"seg-prep"   },
    { label:"Rest",            start: at(19,30), end: at(21, 0), cls:"seg-rest"   },
  ];
  const ALLDAY = ["Kris‚Äô Birthday", "Anniversary"];

  const bar = document.getElementById('zoneBar');
  const fill = document.getElementById('zoneFill');
  const dot  = document.getElementById('zoneDot');
  const labels = document.getElementById('zoneLabels');
  const allday = document.getElementById('alldayLane');

  // render segments as absolute blocks
  function renderSegments(){
    const dayStart = new Date(day.getFullYear(), day.getMonth(), day.getDate(), 0,0,0);
    const dayEnd   = new Date(day.getFullYear(), day.getMonth(), day.getDate(), 24,0,0);
    const totalMs = dayEnd - dayStart;

    ZONES.forEach(z=>{
      const left = ((z.start - dayStart)/totalMs) * 100;
      const width = ((z.end - z.start)/totalMs) * 100;
      const seg = document.createElement('div');
      seg.className = `zone-seg ${z.cls}`;
      seg.style.left = left + '%';
      seg.style.width = width + '%';
      bar.appendChild(seg);
    });
  }

  // compute current + upcoming (simple)
  function currentZone(now=new Date()){
    return ZONES.find(z => now >= z.start && now < z.end) || null;
  }
  function upcomingZones(now=new Date(), n=3){
    const ups = ZONES.filter(z => z.start > now).map(z=>z.label);
    return ups.slice(0, n);
  }

  function updateBar(){
    const now = new Date();
    const dayStart = new Date(day.getFullYear(), day.getMonth(), day.getDate(), 0,0,0);
    const dayEnd   = new Date(day.getFullYear(), day.getMonth(), day.getDate(), 24,0,0);
    const totalMs = dayEnd - dayStart;
    const pct = Math.max(0, Math.min(1, (now - dayStart)/totalMs)) * 100;

    fill.style.width = pct + '%';
    dot.style.left = pct + '%';

    // labels row: current + next two
    labels.innerHTML = '';
    const cur = currentZone(now);
    const pill = (txt,isCurrent=false)=>{
      const el = document.createElement('span');
      el.className = 'pill' + (isCurrent ? ' current' : '');
      el.textContent = txt;
      return el;
    };
    labels.appendChild(pill(cur ? cur.label : 'Flex', true));
    upcomingZones(now, 2).forEach(lbl => labels.appendChild(pill(lbl)));
  }

  function renderAllday(){
    allday.innerHTML = '';
    ALLDAY.forEach(t=>{
      const p = document.createElement('span');
      p.className = 'pill';
      p.textContent = t;
      allday.appendChild(p);
    });
  }

  renderSegments();
  renderAllday();
  updateBar();
  // gentle updates
  setInterval(updateBar, 60000);
  window.addEventListener('resize', updateBar);
</script>
</file>

<file path="archive_sandbox/sandbox1_1.html">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agenda Card ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.48}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris‚Äô Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris‚Äô Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [
  { label:"Prep & Maintenance",       start: at(7,30),  end: at(8,0),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(10,15), color: AREA_COLORS.health },
  { label:"Flex",                     start: at(11,0),  end: at(12,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Social & Relationships",   start: at(19,30), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,15), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
  }
  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock ‚ÄúFlex ¬∑ 3:33 PM‚Äì7:30 PM‚Äù */
  (function seedAreaPill(){
    const p = document.getElementById('areaPill');
    const seg = ZONES[0];
    if (seg) p.textContent = `${seg.label} ¬∑ ${fmtTime(seg.start)}‚Äì${fmtTime(seg.end)}`;
  })();
</script>
</body>
</html>
</file>

<file path="Backups/index_1.1.html">
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jenquin.io ‚Äî Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg: #0b0c10;
      --panel: #111318;
      --muted: #7b8496;
      --text: #e9edf5;
      --accent: #6ea8fe;
      --accent-2: #7df2c9;
      --danger: #ff7a7a;
      --ok: #76ff9b;
      --border: #20232b;
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 14px;
      --radius-sm: 10px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg: #f6f7fb;
        --panel: #ffffff;
        --muted: #6b7280;
        --text: #0f172a;
        --accent: #2556ff;
        --accent-2: #0ea5e9;
        --border: #e5e7eb;
        --shadow: 0 10px 24px rgba(0,0,0,.08);
      }
    }

    *{ box-sizing: border-box }
    html,body{ height:100% }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
                  radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%), var(--bg);
      color: var(--text);
      line-height:1.4;
    }

    /* Shell */
    .wrap{
      max-width: 1200px;
      margin: 0 auto;
      padding: 28px 18px 40px;
    }

    header{
      display:flex; align-items:center; justify-content:space-between;
      gap: 16px; margin-bottom: 22px;
    }
    .brand{
      display:flex; align-items:center; gap:14px;
    }
    .logo{
      width:44px; height:44px; border-radius:12px;
      background:
        radial-gradient(60% 100% at 30% 10%, rgba(125,242,201,.3), transparent 60%),
        linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: var(--shadow);
    }
    .brand h1{
      font-size: 20px; margin: 0;
      letter-spacing:.4px;
    }
    .brand .sub{ color: var(--muted); font-size:13px; margin-top:2px }
    .actions{ display:flex; align-items:center; gap:10px }
    .btn{
      appearance:none; border:1px solid var(--border); color:var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      padding:10px 14px; border-radius:12px; cursor:pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18) }
    .btn.primary{
      background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.05));
      border-color: rgba(110,168,254,.35); color: white;
    }
    .btn.ghost{ background: transparent; }

    /* Layout */
    .grid{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 18px;
    }
    @media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }

    /* Panel */
    .panel{
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: clip;
    }
    .panel .hd{
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      padding: 14px 16px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    }
    .panel .hd h2{ margin:0; font-size: 15px; letter-spacing:.3px }
    .panel .hd .hint{ color:var(--muted); font-size:12px }
    .panel .bd{ padding: 12px 16px }
    .panel .ft{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; flex-wrap:wrap }

    /* Lists */
    .list{ display:flex; flex-direction:column; gap:10px }
    .item{
      display:grid; grid-template-columns: 22px 1fr auto; align-items:center; gap: 10px;
      padding:10px; border:1px solid var(--border); border-radius: var(--radius-sm);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    }
    .chx{ width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer }
    .chx input{ display:none }
    .chx .dot{ width:10px; height:10px; border-radius:3px; background:transparent; }
    .item.done .title{ color: var(--muted); text-decoration: line-through }
    .item.done .chx .dot{ background: var(--ok); }
    .title{ font-size:14px; }
    .meta{ color: var(--muted); font-size:12px }
    .tag{
      font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border);
      color: var(--muted);
    }
    .kebab{ opacity:.7; }
    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }

    /* Quick add */
    .quick{
      display:flex; gap:10px; align-items:center; width:100%;
    }
    .in{
      flex:1; min-width: 160px;
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }
    .select{
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }

    /* Agenda (Apple-style list) */
    .agenda-day{
      border:1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      margin-bottom: 12px; overflow: hidden;
    }
    .agenda-day-hd{
      display:flex; justify-content:space-between; align-items:center;
      padding:10px 12px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      font-size:13px; letter-spacing:.2px;
    }
    .agenda-day-hd .date{ color: var(--muted) }
    .agenda-list{ display:flex; flex-direction:column }
    .agenda-row{
      display:grid; grid-template-columns: 20px 1fr auto; align-items:center;
      gap:10px; padding:10px 12px; border-top:1px solid var(--border);
    }
    .agenda-row:first-child{ border-top: none }
    .agenda-row .dot{
      width:10px; height:10px; border-radius:50%;
      border:2px solid var(--border);
    }
    .dot.blue{ background: rgba(110,168,254,.9) }
    .dot.green{ background: rgba(125,242,201,.95) }
    .dot.purple{ background: #b38aff }
    .dot.orange{ background: #ffb05a }
    .dot.gray{ background: #9aa3b2 }
    .agenda-title{ font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
    .agenda-meta{ color: var(--muted); font-size:12px }
    .agenda-badge{
      font-size:11px; padding:4px 8px; border-radius:999px;
      border:1px solid var(--border); color: var(--muted);
    }
    .agenda-allday{
      display:flex; gap:8px; padding:10px 12px; border-top:1px solid var(--border); flex-wrap:wrap;
    }
    .allday-pill{
      font-size:12px; padding:6px 10px; border-radius:999px;
      border:1px solid var(--border); background: rgba(255,255,255,.02);
      white-space:nowrap;
    }

    footer{
      margin-top: 24px; color: var(--muted); font-size:12px; text-align:center;
    }
    .sep{ height:1px; background: var(--border); margin: 8px 0 }
    .faded{ color: var(--muted) }
    .badge{
      font-size:11px; padding:3px 8px; border-radius:999px; background: rgba(110,168,254,.15); border:1px solid rgba(110,168,254,.35);
      color: #dbe9ff;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>jenquin.io</h1>
          <div class="sub">Jenquin ‚Ä¢ Personal Ops Dashboard</div>
        </div>
      </div>
      <div class="actions">
        <button class="btn ghost" id="toggleDemo">Demo: On</button>
        <button class="btn" id="openReminders">Open Reminders</button>
        <button class="btn primary" id="quickAddTop">+ Quick Add</button>
      </div>
    </header>

    <div class="grid">
      <!-- Left column: Top 3 + Crash 7 stacked -->
      <div class="stack">
        <section class="panel" id="top3Panel">
          <div class="hd">
            <h2>Top 3 Today</h2>
            <div class="row">
              <span class="badge" id="dayLabel">Today</span>
              <span class="hint" id="nowHint">‚Äî</span>
            </div>
          </div>
          <div class="bd">
            <div class="list" id="top3List"></div>
          </div>
          <div class="ft">
            <form class="quick" id="top3Form">
              <input class="in" type="text" placeholder="Quick add to Top 3‚Ä¶" name="title" required />
              <button class="btn" type="submit">Add</button>
              <button class="btn ghost" type="button" id="revealTop3">Reveal in Reminders</button>
            </form>
          </div>
        </section>

        <section class="panel" id="crashPanel" style="margin-top:18px;">
          <div class="hd">
            <h2>7-Day Crash Plan</h2>
            <div class="hint" id="rangeHint">‚Äî</div>
          </div>
          <div class="bd">
            <div class="list" id="crashList"></div>
          </div>
          <div class="ft">
            <button class="btn ghost" id="revealCrash">Reveal Crash Plan</button>
          </div>
        </section>
      </div>

      <!-- Right column: Agenda (Apple-style) -->
      <section class="panel" id="agendaPanel">
        <div class="hd">
          <h2>Agenda</h2>
          <div class="hint" id="tzHint">‚Äî</div>
        </div>
        <div class="bd">
          <div id="agenda"></div>
        </div>
        <div class="ft">
          <button class="btn ghost" id="openCalendar">Open Calendar</button>
        </div>
      </section>
    </div>

    <footer>
      ¬© <span id="year"></span> jenquin.io ‚Ä¢ v1 preview ¬∑ Data stays in Apple apps ¬∑ Clicks may open native apps
    </footer>
  </div>

  <script>
    // ------------ Utilities
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    function fmtTime(d){
      return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
    }
    function fmtDate(d){
      return new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(d);
    }
    function addDays(d, n){ const c = new Date(d); c.setDate(c.getDate()+n); return c; }

    // ------------ Demo toggle (mock vs live fetch)
    let DEMO = true;
    $('#toggleDemo').addEventListener('click', () => {
      DEMO = !DEMO;
      $('#toggleDemo').textContent = `Demo: ${DEMO ? 'On' : 'Off'}`;
      loadAll();
    });

    // ------------ Mock data
    function mockTop3(){
      return [
        { title: "cut front grass", due: "", completed: false, tag:"#prepandmaintenance" },
        { title: "pay electric", due: "", completed: false, tag:"#administrative" },
        { title: "migrate webhook to tailscale", due: "", completed: false, tag:"#projectwork" },
      ];
    }
    function mockCrash(){
  const now = new Date();
  const day = (n)=> addDays(now, n-1); // Day 1=today, Day 2=+1, etc.

  return [
    {
      day: 1,
      title: "Day 1 ‚Äì Core Finances",
      due: day(1),
      subtasks: [
        "Gather last 3‚Äì6 months bank statements",
        "Gather household bills (utilities, phone, internet, HOA, insurance)",
        "Print/save mortgage statements & lender letters"
      ]
    },
    {
      day: 2,
      title: "Day 2 ‚Äì Ledger + Food Stamps",
      due: day(2),
      subtasks: [
        "Finalize expense ledger (food, gas, health, debt)",
        "Apply for food stamps (use bank statements + ledger as proof)"
      ]
    },
    {
      day: 3,
      title: "Day 3 ‚Äì Mom‚Äôs Medical Packet (Part 1)",
      due: day(3),
      subtasks: [
        "Collect hospital/clinic records (copies/printouts)",
        "Gather prescriptions + receipts"
      ]
    },
    {
      day: 4,
      title: "Day 4 ‚Äì Mom‚Äôs Medical Packet (Part 2)",
      due: day(4),
      subtasks: [
        "Write daily function notes (3‚Äì5 days is enough)",
        "Request doctor‚Äôs letter (or confirm appointment/availability)"
      ]
    },
    {
      day: 5,
      title: "Day 5 ‚Äì Bankruptcy Packet (Part 1)",
      due: day(5),
      subtasks: [
        "Gather credit card + loan statements",
        "List creditors + balances",
        "List assets (truck, tools, furniture, gear)"
      ]
    },
    {
      day: 6,
      title: "Day 6 ‚Äì Bankruptcy Packet (Part 2)",
      due: day(6),
      subtasks: [
        "Review tax returns (last 2 years)",
        "Align ledger with tax numbers (rough match is fine)",
        "Organize everything into Shared Packet folder system"
      ]
    },
    {
      day: 7,
      title: "Day 7 ‚Äì Compile & Review",
      due: day(7),
      subtasks: [
        "Assemble Disability packet (Mom) ‚Äî submission ready",
        "Assemble Bankruptcy packet ‚Äî file-ready (hold unless needed)",
        "Double-check folders, label clearly (‚Äúready to send‚Äù)"
      ]
    }
  ];
}

    // --- Mock agenda data like your screenshots
    function mockAgenda(){
    const now = new Date();
    const d1 = new Date(now);
    d1.setDate(d1.getDate() + 1); // Example: Monday (tomorrow)
    const at = (d, h, m = 0) => new Date(d.getFullYear(), d.getMonth(), d.getDate(), h, m);

    return [
        {
        label: "Monday",
        date: d1,
        allDay: [{ title: "Recovery Focused" }],
        events: [
            
            { title: "water plants", start: at(d1, 7, 30), color: "green" },
            { title: "precor stretch circuit", start: at(d1, 9, 30), color: "blue" },
            { title: "Health", start: at(d1, 9, 30), end: at(d1, 10, 0), color: "gray" },
            { title: "mom dinner", start: at(d1, 19, 30), color: "purple" },
            { title: "sleep", start: at(d1, 23, 15), color: "blue" },
        ],
        },
    ];
    }

    // ------------ Live fetch helpers (wire these to your API later)
    async function apiGet(path){
      if(path==="/top3") return mockTop3();
      if(path==="/crash7") return mockCrash();
      if(path==="/agenda") return mockAgenda();
      return [];
    }
    async function apiPost(path, payload){
      return { ok:true };
    }

    // ------------ Renderers
    function renderTop3(items){
      const wrap = $('#top3List'); wrap.innerHTML = "";
      items.forEach((it, idx)=>{
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div>
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
          </div>
          <div class="row">
            <span class="tag">Top 3</span>
            <button class="btn ghost kebab" data-action="remove" title="Remove">‚ãØ</button>
          </div>
        `;
        row.querySelector('.chx').addEventListener('click', async ()=>{
          row.classList.toggle('done');
        });
        row.querySelector('[data-action="remove"]').addEventListener('click', async ()=>{
          row.style.opacity = .5;
          setTimeout(()=> row.remove(), 180);
        });
        wrap.appendChild(row);
      });
    }

    function renderCrash(items){
    const wrap = $('#crashList'); 
    wrap.innerHTML = "";

    items.forEach((it)=>{
        const due = it.due ? fmtDate(new Date(it.due)) : "‚Äî";

        // Row (day header)
        const row = document.createElement('div');
        row.className = 'item';
        row.innerHTML = `
        <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
        </label>
        <div>
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">Due: ${due}</div>
        </div>
        <div class="row">
            <span class="tag">Crash 7</span>
            <button class="btn ghost chev" type="button" aria-expanded="false">‚ñ∏</button>
        </div>
        `;

        // Subtask list (hidden by default)
        const sub = document.createElement('div');
        sub.className = 'sublist';
        (it.subtasks || []).forEach(txt=>{
        const li = document.createElement('div');
        li.className = 'subitem';
        li.innerHTML = `
            <span class="tick" aria-hidden="true"></span>
            <span class="subtxt">${escapeHtml(txt)}</span>
        `;
        sub.appendChild(li);
        });

        // Toggle
        const toggleBtn = row.querySelector('.chev');
        toggleBtn.addEventListener('click', ()=>{
        const open = sub.classList.toggle('open');
        toggleBtn.textContent = open ? '‚ñæ' : '‚ñ∏';
        toggleBtn.setAttribute('aria-expanded', String(open));
        });

        // Optional: strike-through the day when checkbox clicked
        row.querySelector('.chx').addEventListener('click', ()=>{
        row.classList.toggle('done');
        });

        wrap.appendChild(row);
        wrap.appendChild(sub);
    });
    }
    
    function renderAgenda(days){
    const wrap = document.getElementById('agenda');
    wrap.innerHTML = "";
    days.forEach(day=>{
        const box = document.createElement('div');
        box.className = 'agenda-day';

        const hd = document.createElement('div');
        hd.className = 'agenda-day-hd';
        const dow = new Intl.DateTimeFormat(undefined, { weekday:'long'}).format(day.date);
        const mdy = new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(day.date);
        hd.innerHTML = `<div>${escapeHtml(day.label)}</div><div class="date">${dow}, ${mdy}</div>`;
        box.appendChild(hd);

        // All-day pills
        if(day.allDay && day.allDay.length){
        const ad = document.createElement('div');
        ad.className = 'agenda-allday';
        day.allDay.forEach(a=>{
            const pill = document.createElement('span');
            pill.className = 'allday-pill';
            pill.textContent = a.title;
            ad.appendChild(pill);
        });
        box.appendChild(ad);
        }

        // Timed events (sorted)
        const list = document.createElement('div');
        list.className = 'agenda-list';
        (day.events||[]).sort((a,b)=> +new Date(a.start) - +new Date(b.start));
        (day.events||[]).forEach(ev=>{
        const startStr = fmtTime(new Date(ev.start));       // <-- exact time (e.g., 7:30 AM)
        const endStr   = ev.end ? fmtTime(new Date(ev.end)) : null;

        const row = document.createElement('div');
        row.className = 'agenda-row';
        row.innerHTML = `
            <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
            <div>
            <div class="agenda-title">${escapeHtml(ev.title)}</div>
            <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
            </div>
            <span class="agenda-badge">${startStr}</span>  <!-- matches left -->
        `;
        list.appendChild(row);
        });
        box.appendChild(list);

        wrap.appendChild(box);
    });
    }

    // ------------ Quick add
    $('#top3Form').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const fd = new FormData(e.target);
      const title = String(fd.get('title')||'').trim();
      if(!title) return;
      if(DEMO){
        const items = mockTop3();
        items.unshift({title, due:"", completed:false, tag:"#QuickAdd"});
        renderTop3(items);
      }else{
        await apiPost('/reminder', { list:"Top 3", title });
        await loadTop3();
      }
      e.target.reset();
    });

    // ------------ Actions (simulate opening native apps)
    $('#revealTop3').addEventListener('click', ()=> alert('Would call /open { list:"Top 3" } ‚Üí opens Reminders'));
    $('#revealCrash').addEventListener('click', ()=> alert('Would call /open { list:"Crash Plan" } ‚Üí opens Reminders'));
    $('#openCalendar').addEventListener('click', ()=> alert('Would call /open-calendar ‚Üí opens Calendar'));
    $('#openReminders').addEventListener('click', ()=> alert('Opening Reminders (simulated)‚Ä¶'));
    $('#quickAddTop').addEventListener('click', ()=> $('.in[name="title"]').focus());

    // ------------ Loaders
    async function loadTop3(){
      const items = DEMO ? mockTop3() : await apiGet('/top3');
      renderTop3(items);
    }
    async function loadCrash(){
      const items = DEMO ? mockCrash() : await apiGet('/crash7');
      renderCrash(items);
    }
    async function loadAgenda(){
      const days = DEMO ? mockAgenda() : await apiGet('/agenda');
      renderAgenda(days);
    }
    async function loadAll(){
      const now = new Date();
      $('#nowHint').textContent = fmtDate(now) + " ¬∑ " + fmtTime(now);
      $('#rangeHint').textContent = `${fmtDate(now)} ‚Üí ${fmtDate(addDays(now,6))}`;
      $('#tzHint').textContent = `Local time: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`;
      await Promise.all([loadTop3(), loadCrash(), loadAgenda()]);
    }

    // ------------ Misc
    $('#year').textContent = new Date().getFullYear();
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }

    // Init
    loadAll();
  </script>
</body>
</html>
</file>

<file path="Backups/index_1.2.html">
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jenquin.io ‚Äî Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg: #0b0c10;
      --panel: #111318;
      --muted: #7b8496;
      --text: #e9edf5;
      --accent: #6ea8fe;
      --accent-2: #7df2c9;
      --danger: #ff7a7a;
      --ok: #76ff9b;
      --border: #20232b;
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 14px;
      --radius-sm: 10px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg: #f6f7fb;
        --panel: #ffffff;
        --muted: #6b7280;
        --text: #0f172a;
        --accent: #2556ff;
        --accent-2: #0ea5e9;
        --border: #e5e7eb;
        --shadow: 0 10px 24px rgba(0,0,0,.08);
      }
    }

    *{ box-sizing: border-box }
    html,body{ height:100% }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
                  radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%), var(--bg);
      color: var(--text);
      line-height:1.4;
    }

    /* Shell */
    .wrap{
      max-width: 1200px;
      margin: 0 auto;
      padding: 28px 18px 40px;
    }

    header{
      display:flex; align-items:center; justify-content:space-between;
      gap: 16px; margin-bottom: 22px;
    }
    .brand{
      display:flex; align-items:center; gap:14px;
    }
    .logo{
      width:44px; height:44px; border-radius:12px;
      background:
        radial-gradient(60% 100% at 30% 10%, rgba(125,242,201,.3), transparent 60%),
        linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: var(--shadow);
    }
    .brand h1{
      font-size: 20px; margin: 0;
      letter-spacing:.4px;
    }
    .brand .sub{ color: var(--muted); font-size:13px; margin-top:2px }
    .actions{ display:flex; align-items:center; gap:10px }
    .btn{
      appearance:none; border:1px solid var(--border); color:var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      padding:10px 14px; border-radius:12px; cursor:pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18) }
    .btn.primary{
      background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.05));
      border-color: rgba(110,168,254,.35); color: white;
    }
    .btn.ghost{ background: transparent; }

    /* Layout */
    .grid{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 18px;
    }
    @media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }

    /* Panel */
    .panel{
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: clip;
    }
    .panel .hd{
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      padding: 14px 16px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    }
    .panel .hd h2{ margin:0; font-size: 15px; letter-spacing:.3px }
    .panel .hd .hint{ color:var(--muted); font-size:12px }
    .panel .bd{ padding: 12px 16px }
    .panel .ft{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; flex-wrap:wrap }

    /* Lists */
    .list{ display:flex; flex-direction:column; gap:10px }
    .item{
      display:grid; grid-template-columns: 22px 1fr auto; align-items:center; gap: 10px;
      padding:10px; border:1px solid var(--border); border-radius: var(--radius-sm);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    }
    .chx{ width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer }
    .chx input{ display:none }
    .chx .dot{ width:10px; height:10px; border-radius:3px; background:transparent; }
    .item.done .title{ color: var(--muted); text-decoration: line-through }
    .item.done .chx .dot{ background: var(--ok); }
    .title{ font-size:14px; }
    .meta{ color: var(--muted); font-size:12px }
    .tag{
      font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border);
      color: var(--muted);
    }
    .kebab{ opacity:.7; }
    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }

    /* Quick add */
    .quick{
      display:flex; gap:10px; align-items:center; width:100%;
    }
    .in{
      flex:1; min-width: 160px;
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }
    .select{
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }

    /* Agenda (Apple-style list) */
    .agenda-day{
      border:1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      margin-bottom: 12px; overflow: hidden;
    }
    .agenda-day-hd{
      display:flex; justify-content:space-between; align-items:center;
      padding:10px 12px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      font-size:13px; letter-spacing:.2px;
    }
    .agenda-day-hd .date{ color: var(--muted) }
    .agenda-list{ display:flex; flex-direction:column }
    .agenda-row{
      display:grid; grid-template-columns: 20px 1fr auto; align-items:center;
      gap:10px; padding:10px 12px; border-top:1px solid var(--border);
    }
    .agenda-row:first-child{ border-top: none }
    .agenda-row .dot{
      width:10px; height:10px; border-radius:50%;
      border:2px solid var(--border);
    }
    .dot.blue{ background: rgba(110,168,254,.9) }
    .dot.green{ background: rgba(125,242,201,.95) }
    .dot.purple{ background: #b38aff }
    .dot.orange{ background: #ffb05a }
    .dot.gray{ background: #9aa3b2 }
    .agenda-title{ font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
    .agenda-meta{ color: var(--muted); font-size:12px }
    .agenda-badge{
      font-size:11px; padding:4px 8px; border-radius:999px;
      border:1px solid var(--border); color: var(--muted);
    }
    .agenda-allday{
      display:flex; gap:8px; padding:10px 12px; border-top:1px solid var(--border); flex-wrap:wrap;
    }
    .allday-pill{
      font-size:12px; padding:6px 10px; border-radius:999px;
      border:1px solid var(--border); background: rgba(255,255,255,.02);
      white-space:nowrap;
    }

    footer{
      margin-top: 24px; color: var(--muted); font-size:12px; text-align:center;
    }
    .sep{ height:1px; background: var(--border); margin: 8px 0 }
    .faded{ color: var(--muted) }
    .badge{
      font-size:11px; padding:3px 8px; border-radius:999px; background: rgba(110,168,254,.15); border:1px solid rgba(110,168,254,.35);
      color: #dbe9ff;
    }
    
    /* Crash subtasks (accordion) */
    .chev{ font-size:14px; border:1px solid var(--border); border-radius:8px; padding:4px 8px; }
    .sublist{
      display:none; margin:8px 0 0 38px;
      padding:8px 10px; border-left:2px solid var(--border);
      display:none; gap:8px; flex-direction:column;
    }
    .sublist.open{ display:flex; }
    .subitem{ display:flex; align-items:center; gap:8px; font-size:13px; }
    .subitem .tick{ width:12px; height:12px; border-radius:3px; border:1px solid var(--border); background:rgba(0,0,0,.04); }
    .subitem.done .subtxt{ color:var(--muted); text-decoration:line-through; }
    
    .item .main{
      flex:1;
    }
    .item .chev{
      margin-left:auto;
      font-size:16px;
      border:none;
      background:transparent;
      color:var(--muted);
      cursor:pointer;
      padding:6px 10px;
    }
    .item .chev:hover{
      color:var(--accent);
      transform: translateY(-1px);
    }
    
    .item .main{ flex:1; }
    .item .kebab{
      margin-left:auto;
      border:none;
      background:transparent;
      color:var(--muted);
      padding:6px 10px;
    }
    .item .kebab:hover{ color:var(--accent); transform: translateY(-1px); }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>jenquin.io</h1>
          <div class="sub">Jenquin ‚Ä¢ Personal Ops Dashboard</div>
        </div>
      </div>
      <div class="actions">
        <button class="btn ghost" id="toggleDemo">Demo: On</button>
        <button class="btn" id="openReminders">Open Reminders</button>
        <button class="btn primary" id="quickAddTop">+ Quick Add</button>
      </div>
    </header>

    <div class="grid">
      <!-- Left column: Top 3 + Crash 7 stacked -->
      <div class="stack">
        <section class="panel" id="top3Panel">
          <div class="hd">
            <h2>Top 3 Today</h2>
            <div class="row">
              <span class="badge" id="dayLabel">Today</span>
              <span class="hint" id="nowHint">‚Äî</span>
            </div>
          </div>
          <div class="bd">
            <div class="list" id="top3List"></div>
          </div>
          <div class="ft">
            <form class="quick" id="top3Form">
              <input class="in" type="text" placeholder="Quick add to Top 3‚Ä¶" name="title" required />
              <button class="btn" type="submit">Add</button>
            </form>
          </div>
        </section>

        <!-- Crash Plan (no footer) -->
        <section class="panel" id="crashPanel" style="margin-top:18px;">
          <div class="hd">
            <h2>7-Day Crash Plan</h2>
            <div class="hint" id="rangeHint">‚Äî</div>
          </div>
          <div class="bd">
            <div class="list" id="crashList"></div>
          </div>
        </section>
      </div>

      <!-- Right column: Agenda (Apple-style) -->
      <section class="panel" id="agendaPanel">
        <div class="hd">
          <h2>FlowOs</h2>
          <div class="hint" id="tzHint">‚Äî</div>
        </div>
        <div class="bd">
          <div id="agenda"></div>
        </div>
        <div class="ft">
          <button class="btn ghost" id="openCalendar">Open Calendar</button>
        </div>
      </section>
    </div>

    <footer>
      ¬© <span id="year"></span> jenquin.io ‚Ä¢ v1 preview ¬∑ Data stays in Apple apps ¬∑ Clicks may open native apps
    </footer>
  </div>

  <script>
    // ------------ Utilities
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    function fmtTime(d){
      return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
    }
    function fmtDate(d){
      return new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(d);
    }
    function addDays(d, n){ const c = new Date(d); c.setDate(c.getDate()+n); return c; }

    // ------------ Demo toggle (mock vs live fetch)
    let DEMO = true;
    $('#toggleDemo').addEventListener('click', () => {
      DEMO = !DEMO;
      $('#toggleDemo').textContent = `Demo: ${DEMO ? 'On' : 'Off'}`;
      loadAll();
    });

    // ------------ Mock data
    function mockTop3(){
      return [
        { title: "cut front grass", due: "", completed: false},
        { title: "pay electric", due: "", completed: false},
        { title: "migrate webhook to tailscale", due: "", completed: false},
      ];
    }
    function mockCrash(){
  const now = new Date();
  const day = (n)=> addDays(now, n-1); // Day 1=today, Day 2=+1, etc.

  return [
    {
      day: 1,
      title: "Day 1 ‚Äì Core Finances",
      due: day(1),
      subtasks: [
        "Gather last 3‚Äì6 months bank statements",
        "Gather household bills (utilities, phone, internet, HOA, insurance)",
        "Print/save mortgage statements & lender letters"
      ]
    },
    {
      day: 2,
      title: "Day 2 ‚Äì Ledger + Food Stamps",
      due: day(2),
      subtasks: [
        "Finalize expense ledger (food, gas, health, debt)",
        "Apply for food stamps (use bank statements + ledger as proof)"
      ]
    },
    {
      day: 3,
      title: "Day 3 ‚Äì Mom‚Äôs Medical Packet (Part 1)",
      due: day(3),
      subtasks: [
        "Collect hospital/clinic records (copies/printouts)",
        "Gather prescriptions + receipts"
      ]
    },
    {
      day: 4,
      title: "Day 4 ‚Äì Mom‚Äôs Medical Packet (Part 2)",
      due: day(4),
      subtasks: [
        "Write daily function notes (3‚Äì5 days is enough)",
        "Request doctor‚Äôs letter (or confirm appointment/availability)"
      ]
    },
    {
      day: 5,
      title: "Day 5 ‚Äì Bankruptcy Packet (Part 1)",
      due: day(5),
      subtasks: [
        "Gather credit card + loan statements",
        "List creditors + balances",
        "List assets (truck, tools, furniture, gear)"
      ]
    },
    {
      day: 6,
      title: "Day 6 ‚Äì Bankruptcy Packet (Part 2)",
      due: day(6),
      subtasks: [
        "Review tax returns (last 2 years)",
        "Align ledger with tax numbers (rough match is fine)",
        "Organize everything into Shared Packet folder system"
      ]
    },
    {
      day: 7,
      title: "Day 7 ‚Äì Compile & Review",
      due: day(7),
      subtasks: [
        "Assemble Disability packet (Mom) ‚Äî submission ready",
        "Assemble Bankruptcy packet ‚Äî file-ready (hold unless needed)",
        "Double-check folders, label clearly (‚Äúready to send‚Äù)"
      ]
    }
  ];
}

    // --- Mock agenda data like your screenshots
    function mockAgenda(){
    const now = new Date();
    const d1 = new Date(now);
    d1.setDate(d1.getDate() + 1); // Example: Monday (tomorrow)
    const at = (d, h, m = 0) => new Date(d.getFullYear(), d.getMonth(), d.getDate(), h, m);

    return [
        {
        label: "Monday",
        date: d1,
        allDay: [{ title: "Recovery Focused" }],
        events: [
            
            { title: "water plants", start: at(d1, 7, 30), color: "green" },
            { title: "precor stretch circuit", start: at(d1, 9, 30), color: "blue" },
            { title: "Health", start: at(d1, 9, 30), end: at(d1, 10, 0), color: "gray" },
            { title: "mom dinner", start: at(d1, 19, 30), color: "purple" },
            { title: "sleep", start: at(d1, 23, 15), color: "blue" },
        ],
        },
    ];
    }

    // ------------ Live fetch helpers (wire these to your API later)
    async function apiGet(path){
      if(path==="/top3") return mockTop3();
      if(path==="/crash7") return mockCrash();
      if(path==="/agenda") return mockAgenda();
      return [];
    }
    async function apiPost(path, payload){
      return { ok:true };
    }

    // ------------ Renderers
    function renderTop3(items){
      const wrap = $('#top3List'); 
      wrap.innerHTML = "";

      items.forEach((it, idx)=>{
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div class="main">
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
          </div>
        `;

        // toggle complete
        row.querySelector('.chx').addEventListener('click', ()=>{
          row.classList.toggle('done');
        });

        wrap.appendChild(row);
      });
    }

    function renderCrash(items){
      const wrap = $('#crashList');
      wrap.innerHTML = "";

      items.forEach((it)=>{
        const due = it.due ? fmtDate(new Date(it.due)) : "‚Äî";

        // Row (day header)
        const row = document.createElement('div');
        row.className = 'item';
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div class="main">
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">Due: ${due}</div>
          </div>
          <button class="btn ghost chev" type="button" aria-expanded="false">‚ñ∏</button>
        `;

        // Subtask list (hidden by default)
        const sub = document.createElement('div');
        sub.className = 'sublist';
        (it.subtasks || []).forEach(txt=>{
          const li = document.createElement('div');
          li.className = 'subitem';
          li.innerHTML = `
            <span class="tick" aria-hidden="true"></span>
            <span class="subtxt">${escapeHtml(txt)}</span>
          `;
          sub.appendChild(li);
        });

        // Toggle subtasks open/closed
        const toggleBtn = row.querySelector('.chev');
        toggleBtn.addEventListener('click', ()=>{
          const open = sub.classList.toggle('open');
          toggleBtn.textContent = open ? '‚ñæ' : '‚ñ∏';
          toggleBtn.setAttribute('aria-expanded', String(open));
        });

        // Mark day as done
        row.querySelector('.chx').addEventListener('click', ()=>{
          row.classList.toggle('done');
        });

        wrap.appendChild(row);
        wrap.appendChild(sub);
      });
    }
    
    function renderAgenda(days){
    const wrap = document.getElementById('agenda');
    wrap.innerHTML = "";
    days.forEach(day=>{
        const box = document.createElement('div');
        box.className = 'agenda-day';

        const hd = document.createElement('div');
        hd.className = 'agenda-day-hd';
        const dow = new Intl.DateTimeFormat(undefined, { weekday:'long'}).format(day.date);
        const mdy = new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(day.date);
        hd.innerHTML = `<div>${escapeHtml(day.label)}</div><div class="date">${dow}, ${mdy}</div>`;
        box.appendChild(hd);

        // All-day pills
        if(day.allDay && day.allDay.length){
        const ad = document.createElement('div');
        ad.className = 'agenda-allday';
        day.allDay.forEach(a=>{
            const pill = document.createElement('span');
            pill.className = 'allday-pill';
            pill.textContent = a.title;
            ad.appendChild(pill);
        });
        box.appendChild(ad);
        }

        // Timed events (sorted)
        const list = document.createElement('div');
        list.className = 'agenda-list';
        (day.events||[]).sort((a,b)=> +new Date(a.start) - +new Date(b.start));
        (day.events||[]).forEach(ev=>{
        const startStr = fmtTime(new Date(ev.start));       // <-- exact time (e.g., 7:30 AM)
        const endStr   = ev.end ? fmtTime(new Date(ev.end)) : null;

        const row = document.createElement('div');
        row.className = 'agenda-row';
        row.innerHTML = `
            <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
            <div>
            <div class="agenda-title">${escapeHtml(ev.title)}</div>
            <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
            </div>
            <span class="agenda-badge">${startStr}</span>  <!-- matches left -->
        `;
        list.appendChild(row);
        });
        box.appendChild(list);

        wrap.appendChild(box);
    });
    }

    // ------------ Quick add
    $('#top3Form').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const fd = new FormData(e.target);
      const title = String(fd.get('title')||'').trim();
      if(!title) return;
      if(DEMO){
        const items = mockTop3();
        items.unshift({title, due:"", completed:false, tag:"#QuickAdd"});
        renderTop3(items);
      }else{
        await apiPost('/reminder', { list:"Top 3", title });
        await loadTop3();
      }
      e.target.reset();
    });

    // ------------ Actions (simulate opening native apps)
    $('#openCalendar').addEventListener('click', ()=> alert('Would call /open-calendar ‚Üí opens Calendar'));
    $('#openReminders').addEventListener('click', ()=> alert('Opening Reminders (simulated)‚Ä¶'));
    $('#quickAddTop').addEventListener('click', ()=> $('.in[name="title"]').focus());

    // ------------ Loaders
    async function loadTop3(){
      const items = DEMO ? mockTop3() : await apiGet('/top3');
      renderTop3(items);
    }
    async function loadCrash(){
      const items = DEMO ? mockCrash() : await apiGet('/crash7');
      renderCrash(items);
    }
    async function loadAgenda(){
      const days = DEMO ? mockAgenda() : await apiGet('/agenda');
      renderAgenda(days);
    }
    async function loadAll(){
      const now = new Date();
      $('#nowHint').textContent = fmtDate(now) + " ¬∑ " + fmtTime(now);
      $('#rangeHint').textContent = `${fmtDate(now)} ‚Üí ${fmtDate(addDays(now,6))}`;
      $('#tzHint').textContent = `Local time: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`;
      await Promise.all([loadTop3(), loadCrash(), loadAgenda()]);
    }

    // ------------ Misc
    $('#year').textContent = new Date().getFullYear();
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }

    // Init
    loadAll();
  </script>
</body>
</html>
</file>

<file path="Backups/index_1.html">
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jenquin.io ‚Äî Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg: #0b0c10;
      --panel: #111318;
      --muted: #7b8496;
      --text: #e9edf5;
      --accent: #6ea8fe;
      --accent-2: #7df2c9;
      --danger: #ff7a7a;
      --ok: #76ff9b;
      --border: #20232b;
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 14px;
      --radius-sm: 10px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg: #f6f7fb;
        --panel: #ffffff;
        --muted: #6b7280;
        --text: #0f172a;
        --accent: #2556ff;
        --accent-2: #0ea5e9;
        --border: #e5e7eb;
        --shadow: 0 10px 24px rgba(0,0,0,.08);
      }
    }

    *{ box-sizing: border-box }
    html,body{ height:100% }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
                  radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%), var(--bg);
      color: var(--text);
      line-height:1.4;
    }

    /* Shell */
    .wrap{
      max-width: 1200px;
      margin: 0 auto;
      padding: 28px 18px 40px;
    }

    header{
      display:flex; align-items:center; justify-content:space-between;
      gap: 16px; margin-bottom: 22px;
    }
    .brand{
      display:flex; align-items:center; gap:14px;
    }
    .logo{
      width:44px; height:44px; border-radius:12px;
      background:
        radial-gradient(60% 100% at 30% 10%, rgba(125,242,201,.3), transparent 60%),
        linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: var(--shadow);
    }
    .brand h1{
      font-size: 20px; margin: 0;
      letter-spacing:.4px;
    }
    .brand .sub{ color: var(--muted); font-size:13px; margin-top:2px }
    .actions{ display:flex; align-items:center; gap:10px }
    .btn{
      appearance:none; border:1px solid var(--border); color:var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      padding:10px 14px; border-radius:12px; cursor:pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18) }
    .btn.primary{
      background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.05));
      border-color: rgba(110,168,254,.35); color: white;
    }
    .btn.ghost{
      background: transparent;
    }

    /* Cards */
    .grid{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 18px;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
    }
    .panel{
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: clip;
    }
    .panel .hd{
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      padding: 14px 16px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    }
    .panel .hd h2{ margin:0; font-size: 15px; letter-spacing:.3px }
    .panel .hd .hint{ color:var(--muted); font-size:12px }
    .panel .bd{ padding: 12px 16px }
    .panel .ft{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; flex-wrap:wrap }

    /* Lists */
    .list{ display:flex; flex-direction:column; gap:10px }
    .item{
      display:grid; grid-template-columns: 22px 1fr auto; align-items:center; gap: 10px;
      padding:10px; border:1px solid var(--border); border-radius: var(--radius-sm);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    }
    .chx{ width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer }
    .chx input{ display:none }
    .chx .dot{ width:10px; height:10px; border-radius:3px; background:transparent; }
    .item.done .title{ color: var(--muted); text-decoration: line-through }
    .item.done .chx .dot{ background: var(--ok); }
    .title{ font-size:14px; }
    .meta{ color: var(--muted); font-size:12px }
    .tag{
      font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border);
      color: var(--muted);
    }
    .kebab{ opacity:.7; }
    .row{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap
    }

    /* Quick add */
    .quick{
      display:flex; gap:10px; align-items:center; width:100%;
    }
    .in{
      flex:1; min-width: 160px;
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }
    .select{
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }

    /* Calendar */
    .cal{
      display:grid; grid-template-columns: repeat(7,1fr); gap:10px;
    }
    @media (max-width: 860px){
      .cal{ grid-template-columns: repeat(3,1fr) }
    }
    @media (max-width: 560px){
      .cal{ grid-template-columns: repeat(2,1fr) }
    }
    .day{
      border:1px solid var(--border); border-radius:12px; padding:10px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      min-height:90px;
      display:flex; flex-direction:column; gap:6px;
    }
    .day .d{ font-size:12px; color: var(--muted) }
    .pill{
      font-size:12px; padding:6px 8px; border-radius:10px; border:1px solid var(--border);
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .pill.blue{ border-color: rgba(110,168,254,.4) }
    .pill.green{ border-color: rgba(125,242,201,.45) }

    footer{
      margin-top: 24px; color: var(--muted); font-size:12px; text-align:center;
    }

    .sep{ height:1px; background: var(--border); margin: 8px 0 }
    .faded{ color: var(--muted) }
    .badge{
      font-size:11px; padding:3px 8px; border-radius:999px; background: rgba(110,168,254,.15); border:1px solid rgba(110,168,254,.35);
      color: #dbe9ff;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>jenquin.io</h1>
          <div class="sub">Jenquin ‚Ä¢ Personal Ops Dashboard</div>
        </div>
      </div>
      <div class="actions">
        <button class="btn ghost" id="toggleDemo">Demo: On</button>
        <button class="btn" id="openReminders">Open Reminders</button>
        <button class="btn primary" id="quickAddTop">+ Quick Add</button>
      </div>
    </header>

    <div class="grid">
      <!-- Left column: Top 3 + Crash 7 stacked -->
      <div class="stack">
        <section class="panel" id="top3Panel">
          <div class="hd">
            <h2>Top 3 Today</h2>
            <div class="row">
              <span class="badge" id="dayLabel">Today</span>
              <span class="hint" id="nowHint">‚Äî</span>
            </div>
          </div>
          <div class="bd">
            <div class="list" id="top3List"></div>
          </div>
          <div class="ft">
            <form class="quick" id="top3Form">
              <input class="in" type="text" placeholder="Quick add to Top 3‚Ä¶" name="title" required />
              <button class="btn" type="submit">Add</button>
              <button class="btn ghost" type="button" id="revealTop3">Reveal in Reminders</button>
            </form>
          </div>
        </section>

        <section class="panel" id="crashPanel" style="margin-top:18px;">
          <div class="hd">
            <h2>7-Day Crash Plan</h2>
            <div class="hint" id="rangeHint">‚Äî</div>
          </div>
          <div class="bd">
            <div class="list" id="crashList"></div>
          </div>
          <div class="ft">
            <button class="btn ghost" id="revealCrash">Reveal Crash Plan</button>
          </div>
        </section>
      </div>

      <!-- Right column: Calendar glance -->
      <section class="panel">
        <div class="hd">
          <h2>Calendar (Next 7 Days)</h2>
          <div class="hint" id="tzHint">‚Äî</div>
        </div>
        <div class="bd">
          <div class="cal" id="calGrid"></div>
        </div>
        <div class="ft">
          <button class="btn ghost" id="openCalendar">Open Calendar</button>
        </div>
      </section>
    </div>

    <footer>
      ¬© <span id="year"></span> jenquin.io ‚Ä¢ v1 preview ¬∑ Data stays in Apple apps ¬∑ Clicks may open native apps
    </footer>
  </div>

  <script>
    // ------------ Utilities
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    function fmtTime(d){
      return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
    }
    function fmtDate(d){
      return new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(d);
    }
    function addDays(d, n){ const c = new Date(d); c.setDate(c.getDate()+n); return c; }

    // ------------ Demo toggle (mock vs live fetch)
    let DEMO = true;
    $('#toggleDemo').addEventListener('click', () => {
      DEMO = !DEMO;
      $('#toggleDemo').textContent = `Demo: ${DEMO ? 'On' : 'Off'}`;
      loadAll();
    });

    // ------------ Mock data
    function mockTop3(){
      return [
        { title: "Ship Jenquin v1 page", due: "", completed: false, tag:"#Admin" },
        { title: "Record 'Album Stream' bumper", due: "", completed: false, tag:"#Creative" },
        { title: "7-Day Crash pass ‚Üí prune tasks", due: "", completed: true, tag:"#Review" },
      ];
    }
    function mockCrash(){
      const now = new Date();
      return [
        { title: "Bank statements ‚Üí sort & tag", due: addDays(now,1), completed:false, tag:"#Finance"},
        { title: "Mom Log: weekly summary", due: addDays(now,2), completed:false, tag:"#Caregiving"},
        { title: "Raspberry Pi: stream loop", due: addDays(now,3), completed:false, tag:"#Infra"},
        { title: "Nova ‚Üí Quick Add Shortcut", due: addDays(now,4), completed:true, tag:"#Flow"},
      ];
    }
    function mockCalendar(){
      const now = new Date();
      return [...Array(7)].map((_,i)=>{
        const d = addDays(now, i);
        const events = [];
        if(i===0) events.push({ t:"Standup (self)", at: new Date(d.setHours(10,0)), color:"blue"});
        if(i===1) events.push({ t:"Studio hour", at: new Date(addDays(now,1).setHours(14,0)), color:"green"});
        if(i===2) events.push({ t:"Groceries + meal prep", at: new Date(addDays(now,2).setHours(18,0)), color:"blue"});
        return { date: addDays(new Date(),i), events };
      });
    }

    // ------------ Live fetch helpers (wire these to your API later)
    async function apiGet(path){
      // Example: return fetch(path).then(r=>r.json())
      // For now, return mock
      if(path==="/top3") return mockTop3();
      if(path==="/crash7") return mockCrash();
      if(path==="/calendar") return mockCalendar();
      return [];
    }
    async function apiPost(path, payload){
      // Example: return fetch(path,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)})
      // For demo, just pretend success:
      return { ok:true };
    }

    // ------------ Renderers
    function renderTop3(items){
      const wrap = $('#top3List'); wrap.innerHTML = "";
      items.forEach((it, idx)=>{
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div>
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
          </div>
          <div class="row">
            <span class="tag">Top 3</span>
            <button class="btn ghost kebab" data-action="remove" title="Remove">‚ãØ</button>
          </div>
        `;
        row.querySelector('.chx').addEventListener('click', async ()=>{
          row.classList.toggle('done');
          // later: await apiPost('/reminder/toggle', { list:'Top 3', index: idx })
        });
        row.querySelector('[data-action="remove"]').addEventListener('click', async ()=>{
          row.style.opacity = .5;
          // later: await apiPost('/reminder/delete', { list:'Top 3', index: idx })
          setTimeout(()=> row.remove(), 180);
        });
        wrap.appendChild(row);
      });
    }

    function renderCrash(items){
      const wrap = $('#crashList'); wrap.innerHTML = "";
      items.forEach((it, idx)=>{
        const due = it.due ? fmtDate(new Date(it.due)) : "‚Äî";
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div>
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">Due: ${due} ${it.tag ? '¬∑ ' + escapeHtml(it.tag) : ''}</div>
          </div>
          <span class="tag">Crash 7</span>
        `;
        row.querySelector('.chx').addEventListener('click', async ()=>{
          row.classList.toggle('done');
          // later: await apiPost('/reminder/toggle', { list:'Crash Plan', index: idx })
        });
        wrap.appendChild(row);
      });
    }

    function renderCal(days){
      const grid = $('#calGrid'); grid.innerHTML="";
      days.forEach(day=>{
        const div = document.createElement('div');
        div.className = 'day';
        div.innerHTML = `<div class="d">${fmtDate(new Date(day.date))}</div>`;
        if(day.events && day.events.length){
          day.events.forEach(ev=>{
            const pill = document.createElement('div');
            pill.className = 'pill ' + (ev.color || 'blue');
            pill.title = ev.t;
            pill.textContent = `${fmtTime(new Date(ev.at))} ‚Ä¢ ${ev.t}`;
            div.appendChild(pill);
          });
        } else {
          const none = document.createElement('div');
          none.className = 'faded'; none.textContent = '‚Äî';
          div.appendChild(none);
        }
        grid.appendChild(div);
      });
    }

    // ------------ Quick add
    $('#top3Form').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const fd = new FormData(e.target);
      const title = String(fd.get('title')||'').trim();
      if(!title) return;
      if(DEMO){
        const items = mockTop3();
        items.unshift({title, due:"", completed:false, tag:"#QuickAdd"});
        renderTop3(items);
      }else{
        await apiPost('/reminder', { list:"Top 3", title });
        await loadTop3();
      }
      e.target.reset();
    });

    // ------------ Actions (simulate opening native apps)
    $('#revealTop3').addEventListener('click', ()=> alert('Would call /open { list:"Top 3" } ‚Üí opens Reminders'));
    $('#revealCrash').addEventListener('click', ()=> alert('Would call /open { list:"Crash Plan" } ‚Üí opens Reminders'));
    $('#openCalendar').addEventListener('click', ()=> alert('Would call /open-calendar ‚Üí opens Calendar'));
    $('#openReminders').addEventListener('click', ()=> alert('Opening Reminders (simulated)‚Ä¶'));
    $('#quickAddTop').addEventListener('click', ()=> $('.in[name="title"]').focus());

    // ------------ Loaders
    async function loadTop3(){
      const items = DEMO ? mockTop3() : await apiGet('/top3');
      renderTop3(items);
    }
    async function loadCrash(){
      const items = DEMO ? mockCrash() : await apiGet('/crash7');
      renderCrash(items);
    }
    async function loadCalendar(){
      const days = DEMO ? mockCalendar() : await apiGet('/calendar');
      renderCal(days);
    }
    async function loadAll(){
      const now = new Date();
      $('#nowHint').textContent = fmtDate(now) + " ¬∑ " + fmtTime(now);
      $('#rangeHint').textContent = `${fmtDate(now)} ‚Üí ${fmtDate(addDays(now,6))}`;
      $('#tzHint').textContent = `Local time: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`;
      await Promise.all([loadTop3(), loadCrash(), loadCalendar()]);
    }

    // ------------ Misc
    $('#year').textContent = new Date().getFullYear();
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }

    // Init
    loadAll();
  </script>
</body>
</html>
</file>

<file path="Backups/repomix-output.xml">
This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
archive_sandbox/
  ._sandbox_1.html
  ._sandbox.html
  ._sandbox1_1.html
  sanbox_1.2
  sandbox_1.html
  sandbox.html
  sandbox1_1.html
Backups/
  ._repomix-output.xml
  ._sandbox_digital_twin_oraclebackup.html
  index_1.1.html
  index_1.2.html
  index_1.html
  jenquin-site-backup-20251010-210309.zip
  jenquin-site-backup-20251010-211554.zip
  jenquin-site-backup-20251010-213744.zip
  jenquin-site-backup-20251010-222451.zip
  jenquin-site-backup-20251011-000316.zip
  jenquin-site-backup-20251011-004539.zip
  jenquin-site-backup-20251011-004827.zip
  jenquin-site-backup-20251011-112959.zip
  jenquin-site-backup-20251011-131456.zip
  jenquin-site-backup-20251011-132956.zip
  jenquin-site-backup-20251011-154210.zip
  jenquin-site-backup-20251011-172407.zip
  repomix-output.xml
  sandbox_1.3.html
  sandbox_digital_twin_oraclebackup.html
scripts/
  ._pull_reminders_local.sh
  pull_reminders_local.sh
._.gitignore
._about.md
._data
._demo.html
._favicon.svg
._index.html
._instructions_digital_twin.md
._logo.svg
._oracle_twin_merge_snippet.html
._README.md
._run_commands
._sandbox_calendar_agenda_card.html
._sandbox_digital_twin_oracle.html
._script.js
._scripts
._style.css
.gitignore
about.md
demo.html
favicon.svg
index.html
instructions_digital_twin.md
logo.svg
oracle_twin_merge_snippet.html
README.md
run_commands
sandbox_calendar_agenda_card.html
sandbox_digital_twin_oracle.html
script.js
site-urls.txt
style.css
test-top3.html
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="archive_sandbox/sandbox1_1.html">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agenda Card ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.48}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris‚Äô Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris‚Äô Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [
  { label:"Prep & Maintenance",       start: at(7,30),  end: at(8,0),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(10,15), color: AREA_COLORS.health },
  { label:"Flex",                     start: at(11,0),  end: at(12,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Social & Relationships",   start: at(19,30), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,15), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
  }
  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock ‚ÄúFlex ¬∑ 3:33 PM‚Äì7:30 PM‚Äù */
  (function seedAreaPill(){
    const p = document.getElementById('areaPill');
    const seg = ZONES[0];
    if (seg) p.textContent = `${seg.label} ¬∑ ${fmtTime(seg.start)}‚Äì${fmtTime(seg.end)}`;
  })();
</script>
</body>
</html>
</file>

<file path="Backups/repomix-output.xml">
This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
archive_sandbox/
  sanbox_1.2
  sandbox_1.1
  sandbox_1.html
  sandbox.html
Backups/
  index_1.1.html
  index_1.2.html
  index_1.html
  jenquin-site-backup-20251010-210309.zip
  jenquin-site-backup-20251010-211554.zip
  jenquin-site-backup-20251010-213744.zip
  jenquin-site-backup-20251010-222451.zip
  jenquin-site-backup-20251011-000316.zip
  jenquin-site-backup-20251011-004539.zip
  jenquin-site-backup-20251011-004827.zip
  jenquin-site-backup-20251011-112959.zip
  jenquin-site-backup-20251011-131456.zip
  jenquin-site-backup-20251011-132956.zip
  jenquin-site-backup-20251011-154210.zip
  jenquin-site-backup-20251011-172407.zip
  sandbox_1.3.html
._about.md
._favicon.svg
._index.html
._logo.svg
._README.md
._sandbox.html
._script.js
._style.css
about.md
demo.html
favicon.svg
index.html
logo.svg
README.md
run_commands
sandbox.html
script.js
site-urls.txt
style.css
test-top3.html
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="Backups/sandbox_1.3.html">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agenda Card ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.25}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris‚Äô Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris‚Äô Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [

  { label:"Flex",                     start: at(7,30),  end: at(8,0),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(10,15), color: AREA_COLORS.health },
  { label:"Prep & Maintenance",       start: at(11,0),  end: at(12,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Administrative",           start: at(14,0),  end: at(16,0),  color: AREA_COLORS.administrative },
  { label:"Social & Relationships",   start: at(19,30), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,15), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
  }
  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock ‚ÄúFlex ¬∑ 3:33 PM‚Äì7:30 PM‚Äù */
  (function seedAreaPill(){
  const p = document.getElementById('areaPill');
  const seg = ZONES[0];
  if (seg) p.textContent = seg.label; // just the zone name, no time
})();
</script>
</body>
</html>
</file>

<file path="archive_sandbox/sanbox_1.2">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agenda Card ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.48}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris‚Äô Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris‚Äô Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [
  { label:"Prep & Maintenance",       start: at(7,30),  end: at(8,0),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(10,15), color: AREA_COLORS.health },
  { label:"Flex",                     start: at(11,0),  end: at(12,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Administrative",          start: at(14,0),  end: at(16,0),  color: AREA_COLORS.administrative },
  { label:"Social & Relationships",   start: at(19,30), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,15), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
  }
  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock ‚ÄúFlex ¬∑ 3:33 PM‚Äì7:30 PM‚Äù */
  (function seedAreaPill(){
    const p = document.getElementById('areaPill');
    const seg = ZONES[0];
    if (seg) p.textContent = `${seg.label} ¬∑ ${fmtTime(seg.start)}‚Äì${fmtTime(seg.end)}`;
  })();
</script>
</body>
</html>
</file>

<file path="archive_sandbox/sandbox_1.1">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agenda Card ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.48}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris‚Äô Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris‚Äô Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [
  { label:"Prep & Maintenance",       start: at(7,30),  end: at(8,0),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(10,15), color: AREA_COLORS.health },
  { label:"Flex",                     start: at(11,0),  end: at(12,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Social & Relationships",   start: at(19,30), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,15), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
  }
  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock ‚ÄúFlex ¬∑ 3:33 PM‚Äì7:30 PM‚Äù */
  (function seedAreaPill(){
    const p = document.getElementById('areaPill');
    const seg = ZONES[0];
    if (seg) p.textContent = `${seg.label} ¬∑ ${fmtTime(seg.start)}‚Äì${fmtTime(seg.end)}`;
  })();
</script>
</body>
</html>
</file>

<file path="archive_sandbox/sandbox_1.html">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agenda Card ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.22}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris‚Äô Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris‚Äô Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  const ZONES = [
    { label:"Flex",   start: at(12,47), end: at(19,30), color:'rgba(125,242,201,.45)' }, // example
    // add more segments if you like:
    // { label:"Review", start: at(9,0), end: at(12,30), color:'rgba(255,176,90,.45)' },
  ];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
  }
  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock ‚ÄúFlex ¬∑ 3:33 PM‚Äì7:30 PM‚Äù */
  (function seedAreaPill(){
    const p = document.getElementById('areaPill');
    const seg = ZONES[0];
    if (seg) p.textContent = `${seg.label} ¬∑ ${fmtTime(seg.start)}‚Äì${fmtTime(seg.end)}`;
  })();
</script>
</body>
</html>
</file>

<file path="archive_sandbox/sandbox.html">
<!doctype html>
<meta charset="utf-8" />
<title>Zone Tracker Wireframe</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  :root{
    --bg:#0b0c10; --panel:#111318; --text:#e9edf5; --muted:#7b8496; --border:#20232b;
    --ok:#76ff9b;
    --accent:#6ea8fe; --accent-2:#7df2c9;
  }
  body{margin:0;background:var(--bg);color:var(--text);font:14px/1.4 ui-sans-serif,system-ui}
  .panel{max-width:920px;margin:24px auto;padding:14px;border:1px solid var(--border);border-radius:14px;background:var(--panel)}
  .hd{display:flex;align-items:center;gap:10px;margin-bottom:8px}
  .hd h2{margin:0;font-size:14px;letter-spacing:.3px}
  /* --- Focus / zone tracker --- */
  .zone-wrap{display:flex;flex-direction:column;gap:8px;margin-bottom:10px}
  .zone-bar{
    position:relative;height:28px;border:1px solid var(--border);border-radius:999px;
    background:linear-gradient(180deg,rgba(255,255,255,.01),rgba(0,0,0,.06));
    overflow:hidden;
  }
  /* subtle segment bands */
  .zone-seg{position:absolute;top:0;bottom:0;opacity:.18}
  .seg-flex{background:#8aa0ff}
  .seg-review{background:#ffcc66}
  .seg-prep{background:#7df2c9}
  .seg-rest{background:#b38aff}
  /* progress fill */
  .zone-fill{
    position:absolute;inset:0 auto 0 0;width:0%;
    background:linear-gradient(90deg,rgba(255,255,255,.08),rgba(255,255,255,.02));
    backdrop-filter:saturate(120%) brightness(110%);
  }
  /* glow dot at "now" */
  .zone-dot{
    position:absolute;top:50%;transform:translate(-50%,-50%);
    width:8px;height:8px;border-radius:50%;
    background:rgba(255,255,255,.85);box-shadow:0 0 8px rgba(255,255,255,.45);
    left:0%;
  }
  /* labels row: current + upcoming */
  .zone-labels{display:flex;gap:8px;align-items:center}
  .pill{
    display:inline-flex;align-items:center;gap:6px;
    padding:6px 10px;border:1px solid var(--border);border-radius:999px;
    background:linear-gradient(180deg,rgba(255,255,255,.01),rgba(0,0,0,.05)); color:var(--muted);
    white-space:nowrap;font-size:12px;
  }
  .pill.current{border-color:rgba(255,255,255,.08);background:linear-gradient(180deg,rgba(255,255,255,.015),rgba(0,0,0,.12))}
  /* all-day row */
  .allday{display:flex;gap:8px;align-items:center;overflow:auto}
  .allday .pill{font-size:12px}
  /* agenda list (just for placement) */
  .row{display:grid;grid-template-columns:20px 1fr auto;gap:10px;align-items:center;
       padding:10px;border-top:1px solid var(--border)}
  .row:first-child{border-top:none}
  .dot{width:10px;height:10px;border-radius:50%;background:#6ea8fe;opacity:.9}
  .time{color:var(--muted);font-size:12px}
</style>

<div class="panel">
  <div class="hd"><h2>Saturday ‚Ä¢ Oct 11</h2></div>

  <!-- Focus + zone tracker -->
  <div class="zone-wrap">
    <div class="zone-bar" id="zoneBar">
      <!-- segments (left‚Üíright) will be positioned by JS -->
      <div class="zone-fill" id="zoneFill"></div>
      <div class="zone-dot" id="zoneDot"></div>
    </div>
    <!-- labels: current + upcoming -->
    <div class="zone-labels" id="zoneLabels"></div>
    <!-- all-day items -->
    <div class="allday" id="alldayLane"></div>
  </div>

  <!-- Minimal agenda just for context -->
  <div class="row"><span class="dot"></span><div>water plants<br><span class="time">7:30 AM</span></div><span class="time">7:30 AM</span></div>
  <div class="row"><span class="dot" style="background:#b38aff"></span><div>precor stretch circuit<br><span class="time">9:30 AM</span></div><span class="time">9:30 AM</span></div>
  <div class="row"><span class="dot" style="background:#9aa3b2"></span><div>grocery shop<br><span class="time">11:00 AM‚Äì12:00 PM</span></div><span class="time">11:00 AM</span></div>
</div>

<script>
  // ------- mock day + zones (change times to see effect)
  const day = new Date(); // today
  const at = (h,m=0)=> new Date(day.getFullYear(), day.getMonth(), day.getDate(), h, m);
  const ZONES = [
    { label:"Flex",            start: at(8,  0), end: at(12, 0), cls:"seg-flex"   },
    { label:"Review",          start: at(12, 0), end: at(18,30), cls:"seg-review" },
    { label:"Prep",            start: at(18,30), end: at(19,30), cls:"seg-prep"   },
    { label:"Rest",            start: at(19,30), end: at(21, 0), cls:"seg-rest"   },
  ];
  const ALLDAY = ["Kris‚Äô Birthday", "Anniversary"];

  const bar = document.getElementById('zoneBar');
  const fill = document.getElementById('zoneFill');
  const dot  = document.getElementById('zoneDot');
  const labels = document.getElementById('zoneLabels');
  const allday = document.getElementById('alldayLane');

  // render segments as absolute blocks
  function renderSegments(){
    const dayStart = new Date(day.getFullYear(), day.getMonth(), day.getDate(), 0,0,0);
    const dayEnd   = new Date(day.getFullYear(), day.getMonth(), day.getDate(), 24,0,0);
    const totalMs = dayEnd - dayStart;

    ZONES.forEach(z=>{
      const left = ((z.start - dayStart)/totalMs) * 100;
      const width = ((z.end - z.start)/totalMs) * 100;
      const seg = document.createElement('div');
      seg.className = `zone-seg ${z.cls}`;
      seg.style.left = left + '%';
      seg.style.width = width + '%';
      bar.appendChild(seg);
    });
  }

  // compute current + upcoming (simple)
  function currentZone(now=new Date()){
    return ZONES.find(z => now >= z.start && now < z.end) || null;
  }
  function upcomingZones(now=new Date(), n=3){
    const ups = ZONES.filter(z => z.start > now).map(z=>z.label);
    return ups.slice(0, n);
  }

  function updateBar(){
    const now = new Date();
    const dayStart = new Date(day.getFullYear(), day.getMonth(), day.getDate(), 0,0,0);
    const dayEnd   = new Date(day.getFullYear(), day.getMonth(), day.getDate(), 24,0,0);
    const totalMs = dayEnd - dayStart;
    const pct = Math.max(0, Math.min(1, (now - dayStart)/totalMs)) * 100;

    fill.style.width = pct + '%';
    dot.style.left = pct + '%';

    // labels row: current + next two
    labels.innerHTML = '';
    const cur = currentZone(now);
    const pill = (txt,isCurrent=false)=>{
      const el = document.createElement('span');
      el.className = 'pill' + (isCurrent ? ' current' : '');
      el.textContent = txt;
      return el;
    };
    labels.appendChild(pill(cur ? cur.label : 'Flex', true));
    upcomingZones(now, 2).forEach(lbl => labels.appendChild(pill(lbl)));
  }

  function renderAllday(){
    allday.innerHTML = '';
    ALLDAY.forEach(t=>{
      const p = document.createElement('span');
      p.className = 'pill';
      p.textContent = t;
      allday.appendChild(p);
    });
  }

  renderSegments();
  renderAllday();
  updateBar();
  // gentle updates
  setInterval(updateBar, 60000);
  window.addEventListener('resize', updateBar);
</script>
</file>

<file path="Backups/index_1.1.html">
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jenquin.io ‚Äî Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg: #0b0c10;
      --panel: #111318;
      --muted: #7b8496;
      --text: #e9edf5;
      --accent: #6ea8fe;
      --accent-2: #7df2c9;
      --danger: #ff7a7a;
      --ok: #76ff9b;
      --border: #20232b;
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 14px;
      --radius-sm: 10px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg: #f6f7fb;
        --panel: #ffffff;
        --muted: #6b7280;
        --text: #0f172a;
        --accent: #2556ff;
        --accent-2: #0ea5e9;
        --border: #e5e7eb;
        --shadow: 0 10px 24px rgba(0,0,0,.08);
      }
    }

    *{ box-sizing: border-box }
    html,body{ height:100% }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
                  radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%), var(--bg);
      color: var(--text);
      line-height:1.4;
    }

    /* Shell */
    .wrap{
      max-width: 1200px;
      margin: 0 auto;
      padding: 28px 18px 40px;
    }

    header{
      display:flex; align-items:center; justify-content:space-between;
      gap: 16px; margin-bottom: 22px;
    }
    .brand{
      display:flex; align-items:center; gap:14px;
    }
    .logo{
      width:44px; height:44px; border-radius:12px;
      background:
        radial-gradient(60% 100% at 30% 10%, rgba(125,242,201,.3), transparent 60%),
        linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: var(--shadow);
    }
    .brand h1{
      font-size: 20px; margin: 0;
      letter-spacing:.4px;
    }
    .brand .sub{ color: var(--muted); font-size:13px; margin-top:2px }
    .actions{ display:flex; align-items:center; gap:10px }
    .btn{
      appearance:none; border:1px solid var(--border); color:var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      padding:10px 14px; border-radius:12px; cursor:pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18) }
    .btn.primary{
      background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.05));
      border-color: rgba(110,168,254,.35); color: white;
    }
    .btn.ghost{ background: transparent; }

    /* Layout */
    .grid{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 18px;
    }
    @media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }

    /* Panel */
    .panel{
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: clip;
    }
    .panel .hd{
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      padding: 14px 16px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    }
    .panel .hd h2{ margin:0; font-size: 15px; letter-spacing:.3px }
    .panel .hd .hint{ color:var(--muted); font-size:12px }
    .panel .bd{ padding: 12px 16px }
    .panel .ft{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; flex-wrap:wrap }

    /* Lists */
    .list{ display:flex; flex-direction:column; gap:10px }
    .item{
      display:grid; grid-template-columns: 22px 1fr auto; align-items:center; gap: 10px;
      padding:10px; border:1px solid var(--border); border-radius: var(--radius-sm);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    }
    .chx{ width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer }
    .chx input{ display:none }
    .chx .dot{ width:10px; height:10px; border-radius:3px; background:transparent; }
    .item.done .title{ color: var(--muted); text-decoration: line-through }
    .item.done .chx .dot{ background: var(--ok); }
    .title{ font-size:14px; }
    .meta{ color: var(--muted); font-size:12px }
    .tag{
      font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border);
      color: var(--muted);
    }
    .kebab{ opacity:.7; }
    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }

    /* Quick add */
    .quick{
      display:flex; gap:10px; align-items:center; width:100%;
    }
    .in{
      flex:1; min-width: 160px;
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }
    .select{
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }

    /* Agenda (Apple-style list) */
    .agenda-day{
      border:1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      margin-bottom: 12px; overflow: hidden;
    }
    .agenda-day-hd{
      display:flex; justify-content:space-between; align-items:center;
      padding:10px 12px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      font-size:13px; letter-spacing:.2px;
    }
    .agenda-day-hd .date{ color: var(--muted) }
    .agenda-list{ display:flex; flex-direction:column }
    .agenda-row{
      display:grid; grid-template-columns: 20px 1fr auto; align-items:center;
      gap:10px; padding:10px 12px; border-top:1px solid var(--border);
    }
    .agenda-row:first-child{ border-top: none }
    .agenda-row .dot{
      width:10px; height:10px; border-radius:50%;
      border:2px solid var(--border);
    }
    .dot.blue{ background: rgba(110,168,254,.9) }
    .dot.green{ background: rgba(125,242,201,.95) }
    .dot.purple{ background: #b38aff }
    .dot.orange{ background: #ffb05a }
    .dot.gray{ background: #9aa3b2 }
    .agenda-title{ font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
    .agenda-meta{ color: var(--muted); font-size:12px }
    .agenda-badge{
      font-size:11px; padding:4px 8px; border-radius:999px;
      border:1px solid var(--border); color: var(--muted);
    }
    .agenda-allday{
      display:flex; gap:8px; padding:10px 12px; border-top:1px solid var(--border); flex-wrap:wrap;
    }
    .allday-pill{
      font-size:12px; padding:6px 10px; border-radius:999px;
      border:1px solid var(--border); background: rgba(255,255,255,.02);
      white-space:nowrap;
    }

    footer{
      margin-top: 24px; color: var(--muted); font-size:12px; text-align:center;
    }
    .sep{ height:1px; background: var(--border); margin: 8px 0 }
    .faded{ color: var(--muted) }
    .badge{
      font-size:11px; padding:3px 8px; border-radius:999px; background: rgba(110,168,254,.15); border:1px solid rgba(110,168,254,.35);
      color: #dbe9ff;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>jenquin.io</h1>
          <div class="sub">Jenquin ‚Ä¢ Personal Ops Dashboard</div>
        </div>
      </div>
      <div class="actions">
        <button class="btn ghost" id="toggleDemo">Demo: On</button>
        <button class="btn" id="openReminders">Open Reminders</button>
        <button class="btn primary" id="quickAddTop">+ Quick Add</button>
      </div>
    </header>

    <div class="grid">
      <!-- Left column: Top 3 + Crash 7 stacked -->
      <div class="stack">
        <section class="panel" id="top3Panel">
          <div class="hd">
            <h2>Top 3 Today</h2>
            <div class="row">
              <span class="badge" id="dayLabel">Today</span>
              <span class="hint" id="nowHint">‚Äî</span>
            </div>
          </div>
          <div class="bd">
            <div class="list" id="top3List"></div>
          </div>
          <div class="ft">
            <form class="quick" id="top3Form">
              <input class="in" type="text" placeholder="Quick add to Top 3‚Ä¶" name="title" required />
              <button class="btn" type="submit">Add</button>
              <button class="btn ghost" type="button" id="revealTop3">Reveal in Reminders</button>
            </form>
          </div>
        </section>

        <section class="panel" id="crashPanel" style="margin-top:18px;">
          <div class="hd">
            <h2>7-Day Crash Plan</h2>
            <div class="hint" id="rangeHint">‚Äî</div>
          </div>
          <div class="bd">
            <div class="list" id="crashList"></div>
          </div>
          <div class="ft">
            <button class="btn ghost" id="revealCrash">Reveal Crash Plan</button>
          </div>
        </section>
      </div>

      <!-- Right column: Agenda (Apple-style) -->
      <section class="panel" id="agendaPanel">
        <div class="hd">
          <h2>Agenda</h2>
          <div class="hint" id="tzHint">‚Äî</div>
        </div>
        <div class="bd">
          <div id="agenda"></div>
        </div>
        <div class="ft">
          <button class="btn ghost" id="openCalendar">Open Calendar</button>
        </div>
      </section>
    </div>

    <footer>
      ¬© <span id="year"></span> jenquin.io ‚Ä¢ v1 preview ¬∑ Data stays in Apple apps ¬∑ Clicks may open native apps
    </footer>
  </div>

  <script>
    // ------------ Utilities
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    function fmtTime(d){
      return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
    }
    function fmtDate(d){
      return new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(d);
    }
    function addDays(d, n){ const c = new Date(d); c.setDate(c.getDate()+n); return c; }

    // ------------ Demo toggle (mock vs live fetch)
    let DEMO = true;
    $('#toggleDemo').addEventListener('click', () => {
      DEMO = !DEMO;
      $('#toggleDemo').textContent = `Demo: ${DEMO ? 'On' : 'Off'}`;
      loadAll();
    });

    // ------------ Mock data
    function mockTop3(){
      return [
        { title: "cut front grass", due: "", completed: false, tag:"#prepandmaintenance" },
        { title: "pay electric", due: "", completed: false, tag:"#administrative" },
        { title: "migrate webhook to tailscale", due: "", completed: false, tag:"#projectwork" },
      ];
    }
    function mockCrash(){
  const now = new Date();
  const day = (n)=> addDays(now, n-1); // Day 1=today, Day 2=+1, etc.

  return [
    {
      day: 1,
      title: "Day 1 ‚Äì Core Finances",
      due: day(1),
      subtasks: [
        "Gather last 3‚Äì6 months bank statements",
        "Gather household bills (utilities, phone, internet, HOA, insurance)",
        "Print/save mortgage statements & lender letters"
      ]
    },
    {
      day: 2,
      title: "Day 2 ‚Äì Ledger + Food Stamps",
      due: day(2),
      subtasks: [
        "Finalize expense ledger (food, gas, health, debt)",
        "Apply for food stamps (use bank statements + ledger as proof)"
      ]
    },
    {
      day: 3,
      title: "Day 3 ‚Äì Mom‚Äôs Medical Packet (Part 1)",
      due: day(3),
      subtasks: [
        "Collect hospital/clinic records (copies/printouts)",
        "Gather prescriptions + receipts"
      ]
    },
    {
      day: 4,
      title: "Day 4 ‚Äì Mom‚Äôs Medical Packet (Part 2)",
      due: day(4),
      subtasks: [
        "Write daily function notes (3‚Äì5 days is enough)",
        "Request doctor‚Äôs letter (or confirm appointment/availability)"
      ]
    },
    {
      day: 5,
      title: "Day 5 ‚Äì Bankruptcy Packet (Part 1)",
      due: day(5),
      subtasks: [
        "Gather credit card + loan statements",
        "List creditors + balances",
        "List assets (truck, tools, furniture, gear)"
      ]
    },
    {
      day: 6,
      title: "Day 6 ‚Äì Bankruptcy Packet (Part 2)",
      due: day(6),
      subtasks: [
        "Review tax returns (last 2 years)",
        "Align ledger with tax numbers (rough match is fine)",
        "Organize everything into Shared Packet folder system"
      ]
    },
    {
      day: 7,
      title: "Day 7 ‚Äì Compile & Review",
      due: day(7),
      subtasks: [
        "Assemble Disability packet (Mom) ‚Äî submission ready",
        "Assemble Bankruptcy packet ‚Äî file-ready (hold unless needed)",
        "Double-check folders, label clearly (‚Äúready to send‚Äù)"
      ]
    }
  ];
}

    // --- Mock agenda data like your screenshots
    function mockAgenda(){
    const now = new Date();
    const d1 = new Date(now);
    d1.setDate(d1.getDate() + 1); // Example: Monday (tomorrow)
    const at = (d, h, m = 0) => new Date(d.getFullYear(), d.getMonth(), d.getDate(), h, m);

    return [
        {
        label: "Monday",
        date: d1,
        allDay: [{ title: "Recovery Focused" }],
        events: [
            
            { title: "water plants", start: at(d1, 7, 30), color: "green" },
            { title: "precor stretch circuit", start: at(d1, 9, 30), color: "blue" },
            { title: "Health", start: at(d1, 9, 30), end: at(d1, 10, 0), color: "gray" },
            { title: "mom dinner", start: at(d1, 19, 30), color: "purple" },
            { title: "sleep", start: at(d1, 23, 15), color: "blue" },
        ],
        },
    ];
    }

    // ------------ Live fetch helpers (wire these to your API later)
    async function apiGet(path){
      if(path==="/top3") return mockTop3();
      if(path==="/crash7") return mockCrash();
      if(path==="/agenda") return mockAgenda();
      return [];
    }
    async function apiPost(path, payload){
      return { ok:true };
    }

    // ------------ Renderers
    function renderTop3(items){
      const wrap = $('#top3List'); wrap.innerHTML = "";
      items.forEach((it, idx)=>{
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div>
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
          </div>
          <div class="row">
            <span class="tag">Top 3</span>
            <button class="btn ghost kebab" data-action="remove" title="Remove">‚ãØ</button>
          </div>
        `;
        row.querySelector('.chx').addEventListener('click', async ()=>{
          row.classList.toggle('done');
        });
        row.querySelector('[data-action="remove"]').addEventListener('click', async ()=>{
          row.style.opacity = .5;
          setTimeout(()=> row.remove(), 180);
        });
        wrap.appendChild(row);
      });
    }

    function renderCrash(items){
    const wrap = $('#crashList'); 
    wrap.innerHTML = "";

    items.forEach((it)=>{
        const due = it.due ? fmtDate(new Date(it.due)) : "‚Äî";

        // Row (day header)
        const row = document.createElement('div');
        row.className = 'item';
        row.innerHTML = `
        <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
        </label>
        <div>
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">Due: ${due}</div>
        </div>
        <div class="row">
            <span class="tag">Crash 7</span>
            <button class="btn ghost chev" type="button" aria-expanded="false">‚ñ∏</button>
        </div>
        `;

        // Subtask list (hidden by default)
        const sub = document.createElement('div');
        sub.className = 'sublist';
        (it.subtasks || []).forEach(txt=>{
        const li = document.createElement('div');
        li.className = 'subitem';
        li.innerHTML = `
            <span class="tick" aria-hidden="true"></span>
            <span class="subtxt">${escapeHtml(txt)}</span>
        `;
        sub.appendChild(li);
        });

        // Toggle
        const toggleBtn = row.querySelector('.chev');
        toggleBtn.addEventListener('click', ()=>{
        const open = sub.classList.toggle('open');
        toggleBtn.textContent = open ? '‚ñæ' : '‚ñ∏';
        toggleBtn.setAttribute('aria-expanded', String(open));
        });

        // Optional: strike-through the day when checkbox clicked
        row.querySelector('.chx').addEventListener('click', ()=>{
        row.classList.toggle('done');
        });

        wrap.appendChild(row);
        wrap.appendChild(sub);
    });
    }
    
    function renderAgenda(days){
    const wrap = document.getElementById('agenda');
    wrap.innerHTML = "";
    days.forEach(day=>{
        const box = document.createElement('div');
        box.className = 'agenda-day';

        const hd = document.createElement('div');
        hd.className = 'agenda-day-hd';
        const dow = new Intl.DateTimeFormat(undefined, { weekday:'long'}).format(day.date);
        const mdy = new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(day.date);
        hd.innerHTML = `<div>${escapeHtml(day.label)}</div><div class="date">${dow}, ${mdy}</div>`;
        box.appendChild(hd);

        // All-day pills
        if(day.allDay && day.allDay.length){
        const ad = document.createElement('div');
        ad.className = 'agenda-allday';
        day.allDay.forEach(a=>{
            const pill = document.createElement('span');
            pill.className = 'allday-pill';
            pill.textContent = a.title;
            ad.appendChild(pill);
        });
        box.appendChild(ad);
        }

        // Timed events (sorted)
        const list = document.createElement('div');
        list.className = 'agenda-list';
        (day.events||[]).sort((a,b)=> +new Date(a.start) - +new Date(b.start));
        (day.events||[]).forEach(ev=>{
        const startStr = fmtTime(new Date(ev.start));       // <-- exact time (e.g., 7:30 AM)
        const endStr   = ev.end ? fmtTime(new Date(ev.end)) : null;

        const row = document.createElement('div');
        row.className = 'agenda-row';
        row.innerHTML = `
            <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
            <div>
            <div class="agenda-title">${escapeHtml(ev.title)}</div>
            <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
            </div>
            <span class="agenda-badge">${startStr}</span>  <!-- matches left -->
        `;
        list.appendChild(row);
        });
        box.appendChild(list);

        wrap.appendChild(box);
    });
    }

    // ------------ Quick add
    $('#top3Form').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const fd = new FormData(e.target);
      const title = String(fd.get('title')||'').trim();
      if(!title) return;
      if(DEMO){
        const items = mockTop3();
        items.unshift({title, due:"", completed:false, tag:"#QuickAdd"});
        renderTop3(items);
      }else{
        await apiPost('/reminder', { list:"Top 3", title });
        await loadTop3();
      }
      e.target.reset();
    });

    // ------------ Actions (simulate opening native apps)
    $('#revealTop3').addEventListener('click', ()=> alert('Would call /open { list:"Top 3" } ‚Üí opens Reminders'));
    $('#revealCrash').addEventListener('click', ()=> alert('Would call /open { list:"Crash Plan" } ‚Üí opens Reminders'));
    $('#openCalendar').addEventListener('click', ()=> alert('Would call /open-calendar ‚Üí opens Calendar'));
    $('#openReminders').addEventListener('click', ()=> alert('Opening Reminders (simulated)‚Ä¶'));
    $('#quickAddTop').addEventListener('click', ()=> $('.in[name="title"]').focus());

    // ------------ Loaders
    async function loadTop3(){
      const items = DEMO ? mockTop3() : await apiGet('/top3');
      renderTop3(items);
    }
    async function loadCrash(){
      const items = DEMO ? mockCrash() : await apiGet('/crash7');
      renderCrash(items);
    }
    async function loadAgenda(){
      const days = DEMO ? mockAgenda() : await apiGet('/agenda');
      renderAgenda(days);
    }
    async function loadAll(){
      const now = new Date();
      $('#nowHint').textContent = fmtDate(now) + " ¬∑ " + fmtTime(now);
      $('#rangeHint').textContent = `${fmtDate(now)} ‚Üí ${fmtDate(addDays(now,6))}`;
      $('#tzHint').textContent = `Local time: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`;
      await Promise.all([loadTop3(), loadCrash(), loadAgenda()]);
    }

    // ------------ Misc
    $('#year').textContent = new Date().getFullYear();
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }

    // Init
    loadAll();
  </script>
</body>
</html>
</file>

<file path="Backups/index_1.2.html">
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jenquin.io ‚Äî Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg: #0b0c10;
      --panel: #111318;
      --muted: #7b8496;
      --text: #e9edf5;
      --accent: #6ea8fe;
      --accent-2: #7df2c9;
      --danger: #ff7a7a;
      --ok: #76ff9b;
      --border: #20232b;
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 14px;
      --radius-sm: 10px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg: #f6f7fb;
        --panel: #ffffff;
        --muted: #6b7280;
        --text: #0f172a;
        --accent: #2556ff;
        --accent-2: #0ea5e9;
        --border: #e5e7eb;
        --shadow: 0 10px 24px rgba(0,0,0,.08);
      }
    }

    *{ box-sizing: border-box }
    html,body{ height:100% }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
                  radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%), var(--bg);
      color: var(--text);
      line-height:1.4;
    }

    /* Shell */
    .wrap{
      max-width: 1200px;
      margin: 0 auto;
      padding: 28px 18px 40px;
    }

    header{
      display:flex; align-items:center; justify-content:space-between;
      gap: 16px; margin-bottom: 22px;
    }
    .brand{
      display:flex; align-items:center; gap:14px;
    }
    .logo{
      width:44px; height:44px; border-radius:12px;
      background:
        radial-gradient(60% 100% at 30% 10%, rgba(125,242,201,.3), transparent 60%),
        linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: var(--shadow);
    }
    .brand h1{
      font-size: 20px; margin: 0;
      letter-spacing:.4px;
    }
    .brand .sub{ color: var(--muted); font-size:13px; margin-top:2px }
    .actions{ display:flex; align-items:center; gap:10px }
    .btn{
      appearance:none; border:1px solid var(--border); color:var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      padding:10px 14px; border-radius:12px; cursor:pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18) }
    .btn.primary{
      background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.05));
      border-color: rgba(110,168,254,.35); color: white;
    }
    .btn.ghost{ background: transparent; }

    /* Layout */
    .grid{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 18px;
    }
    @media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }

    /* Panel */
    .panel{
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: clip;
    }
    .panel .hd{
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      padding: 14px 16px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    }
    .panel .hd h2{ margin:0; font-size: 15px; letter-spacing:.3px }
    .panel .hd .hint{ color:var(--muted); font-size:12px }
    .panel .bd{ padding: 12px 16px }
    .panel .ft{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; flex-wrap:wrap }

    /* Lists */
    .list{ display:flex; flex-direction:column; gap:10px }
    .item{
      display:grid; grid-template-columns: 22px 1fr auto; align-items:center; gap: 10px;
      padding:10px; border:1px solid var(--border); border-radius: var(--radius-sm);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    }
    .chx{ width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer }
    .chx input{ display:none }
    .chx .dot{ width:10px; height:10px; border-radius:3px; background:transparent; }
    .item.done .title{ color: var(--muted); text-decoration: line-through }
    .item.done .chx .dot{ background: var(--ok); }
    .title{ font-size:14px; }
    .meta{ color: var(--muted); font-size:12px }
    .tag{
      font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border);
      color: var(--muted);
    }
    .kebab{ opacity:.7; }
    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }

    /* Quick add */
    .quick{
      display:flex; gap:10px; align-items:center; width:100%;
    }
    .in{
      flex:1; min-width: 160px;
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }
    .select{
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }

    /* Agenda (Apple-style list) */
    .agenda-day{
      border:1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      margin-bottom: 12px; overflow: hidden;
    }
    .agenda-day-hd{
      display:flex; justify-content:space-between; align-items:center;
      padding:10px 12px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      font-size:13px; letter-spacing:.2px;
    }
    .agenda-day-hd .date{ color: var(--muted) }
    .agenda-list{ display:flex; flex-direction:column }
    .agenda-row{
      display:grid; grid-template-columns: 20px 1fr auto; align-items:center;
      gap:10px; padding:10px 12px; border-top:1px solid var(--border);
    }
    .agenda-row:first-child{ border-top: none }
    .agenda-row .dot{
      width:10px; height:10px; border-radius:50%;
      border:2px solid var(--border);
    }
    .dot.blue{ background: rgba(110,168,254,.9) }
    .dot.green{ background: rgba(125,242,201,.95) }
    .dot.purple{ background: #b38aff }
    .dot.orange{ background: #ffb05a }
    .dot.gray{ background: #9aa3b2 }
    .agenda-title{ font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
    .agenda-meta{ color: var(--muted); font-size:12px }
    .agenda-badge{
      font-size:11px; padding:4px 8px; border-radius:999px;
      border:1px solid var(--border); color: var(--muted);
    }
    .agenda-allday{
      display:flex; gap:8px; padding:10px 12px; border-top:1px solid var(--border); flex-wrap:wrap;
    }
    .allday-pill{
      font-size:12px; padding:6px 10px; border-radius:999px;
      border:1px solid var(--border); background: rgba(255,255,255,.02);
      white-space:nowrap;
    }

    footer{
      margin-top: 24px; color: var(--muted); font-size:12px; text-align:center;
    }
    .sep{ height:1px; background: var(--border); margin: 8px 0 }
    .faded{ color: var(--muted) }
    .badge{
      font-size:11px; padding:3px 8px; border-radius:999px; background: rgba(110,168,254,.15); border:1px solid rgba(110,168,254,.35);
      color: #dbe9ff;
    }
    
    /* Crash subtasks (accordion) */
    .chev{ font-size:14px; border:1px solid var(--border); border-radius:8px; padding:4px 8px; }
    .sublist{
      display:none; margin:8px 0 0 38px;
      padding:8px 10px; border-left:2px solid var(--border);
      display:none; gap:8px; flex-direction:column;
    }
    .sublist.open{ display:flex; }
    .subitem{ display:flex; align-items:center; gap:8px; font-size:13px; }
    .subitem .tick{ width:12px; height:12px; border-radius:3px; border:1px solid var(--border); background:rgba(0,0,0,.04); }
    .subitem.done .subtxt{ color:var(--muted); text-decoration:line-through; }
    
    .item .main{
      flex:1;
    }
    .item .chev{
      margin-left:auto;
      font-size:16px;
      border:none;
      background:transparent;
      color:var(--muted);
      cursor:pointer;
      padding:6px 10px;
    }
    .item .chev:hover{
      color:var(--accent);
      transform: translateY(-1px);
    }
    
    .item .main{ flex:1; }
    .item .kebab{
      margin-left:auto;
      border:none;
      background:transparent;
      color:var(--muted);
      padding:6px 10px;
    }
    .item .kebab:hover{ color:var(--accent); transform: translateY(-1px); }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>jenquin.io</h1>
          <div class="sub">Jenquin ‚Ä¢ Personal Ops Dashboard</div>
        </div>
      </div>
      <div class="actions">
        <button class="btn ghost" id="toggleDemo">Demo: On</button>
        <button class="btn" id="openReminders">Open Reminders</button>
        <button class="btn primary" id="quickAddTop">+ Quick Add</button>
      </div>
    </header>

    <div class="grid">
      <!-- Left column: Top 3 + Crash 7 stacked -->
      <div class="stack">
        <section class="panel" id="top3Panel">
          <div class="hd">
            <h2>Top 3 Today</h2>
            <div class="row">
              <span class="badge" id="dayLabel">Today</span>
              <span class="hint" id="nowHint">‚Äî</span>
            </div>
          </div>
          <div class="bd">
            <div class="list" id="top3List"></div>
          </div>
          <div class="ft">
            <form class="quick" id="top3Form">
              <input class="in" type="text" placeholder="Quick add to Top 3‚Ä¶" name="title" required />
              <button class="btn" type="submit">Add</button>
            </form>
          </div>
        </section>

        <!-- Crash Plan (no footer) -->
        <section class="panel" id="crashPanel" style="margin-top:18px;">
          <div class="hd">
            <h2>7-Day Crash Plan</h2>
            <div class="hint" id="rangeHint">‚Äî</div>
          </div>
          <div class="bd">
            <div class="list" id="crashList"></div>
          </div>
        </section>
      </div>

      <!-- Right column: Agenda (Apple-style) -->
      <section class="panel" id="agendaPanel">
        <div class="hd">
          <h2>FlowOs</h2>
          <div class="hint" id="tzHint">‚Äî</div>
        </div>
        <div class="bd">
          <div id="agenda"></div>
        </div>
        <div class="ft">
          <button class="btn ghost" id="openCalendar">Open Calendar</button>
        </div>
      </section>
    </div>

    <footer>
      ¬© <span id="year"></span> jenquin.io ‚Ä¢ v1 preview ¬∑ Data stays in Apple apps ¬∑ Clicks may open native apps
    </footer>
  </div>

  <script>
    // ------------ Utilities
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    function fmtTime(d){
      return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
    }
    function fmtDate(d){
      return new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(d);
    }
    function addDays(d, n){ const c = new Date(d); c.setDate(c.getDate()+n); return c; }

    // ------------ Demo toggle (mock vs live fetch)
    let DEMO = true;
    $('#toggleDemo').addEventListener('click', () => {
      DEMO = !DEMO;
      $('#toggleDemo').textContent = `Demo: ${DEMO ? 'On' : 'Off'}`;
      loadAll();
    });

    // ------------ Mock data
    function mockTop3(){
      return [
        { title: "cut front grass", due: "", completed: false},
        { title: "pay electric", due: "", completed: false},
        { title: "migrate webhook to tailscale", due: "", completed: false},
      ];
    }
    function mockCrash(){
  const now = new Date();
  const day = (n)=> addDays(now, n-1); // Day 1=today, Day 2=+1, etc.

  return [
    {
      day: 1,
      title: "Day 1 ‚Äì Core Finances",
      due: day(1),
      subtasks: [
        "Gather last 3‚Äì6 months bank statements",
        "Gather household bills (utilities, phone, internet, HOA, insurance)",
        "Print/save mortgage statements & lender letters"
      ]
    },
    {
      day: 2,
      title: "Day 2 ‚Äì Ledger + Food Stamps",
      due: day(2),
      subtasks: [
        "Finalize expense ledger (food, gas, health, debt)",
        "Apply for food stamps (use bank statements + ledger as proof)"
      ]
    },
    {
      day: 3,
      title: "Day 3 ‚Äì Mom‚Äôs Medical Packet (Part 1)",
      due: day(3),
      subtasks: [
        "Collect hospital/clinic records (copies/printouts)",
        "Gather prescriptions + receipts"
      ]
    },
    {
      day: 4,
      title: "Day 4 ‚Äì Mom‚Äôs Medical Packet (Part 2)",
      due: day(4),
      subtasks: [
        "Write daily function notes (3‚Äì5 days is enough)",
        "Request doctor‚Äôs letter (or confirm appointment/availability)"
      ]
    },
    {
      day: 5,
      title: "Day 5 ‚Äì Bankruptcy Packet (Part 1)",
      due: day(5),
      subtasks: [
        "Gather credit card + loan statements",
        "List creditors + balances",
        "List assets (truck, tools, furniture, gear)"
      ]
    },
    {
      day: 6,
      title: "Day 6 ‚Äì Bankruptcy Packet (Part 2)",
      due: day(6),
      subtasks: [
        "Review tax returns (last 2 years)",
        "Align ledger with tax numbers (rough match is fine)",
        "Organize everything into Shared Packet folder system"
      ]
    },
    {
      day: 7,
      title: "Day 7 ‚Äì Compile & Review",
      due: day(7),
      subtasks: [
        "Assemble Disability packet (Mom) ‚Äî submission ready",
        "Assemble Bankruptcy packet ‚Äî file-ready (hold unless needed)",
        "Double-check folders, label clearly (‚Äúready to send‚Äù)"
      ]
    }
  ];
}

    // --- Mock agenda data like your screenshots
    function mockAgenda(){
    const now = new Date();
    const d1 = new Date(now);
    d1.setDate(d1.getDate() + 1); // Example: Monday (tomorrow)
    const at = (d, h, m = 0) => new Date(d.getFullYear(), d.getMonth(), d.getDate(), h, m);

    return [
        {
        label: "Monday",
        date: d1,
        allDay: [{ title: "Recovery Focused" }],
        events: [
            
            { title: "water plants", start: at(d1, 7, 30), color: "green" },
            { title: "precor stretch circuit", start: at(d1, 9, 30), color: "blue" },
            { title: "Health", start: at(d1, 9, 30), end: at(d1, 10, 0), color: "gray" },
            { title: "mom dinner", start: at(d1, 19, 30), color: "purple" },
            { title: "sleep", start: at(d1, 23, 15), color: "blue" },
        ],
        },
    ];
    }

    // ------------ Live fetch helpers (wire these to your API later)
    async function apiGet(path){
      if(path==="/top3") return mockTop3();
      if(path==="/crash7") return mockCrash();
      if(path==="/agenda") return mockAgenda();
      return [];
    }
    async function apiPost(path, payload){
      return { ok:true };
    }

    // ------------ Renderers
    function renderTop3(items){
      const wrap = $('#top3List'); 
      wrap.innerHTML = "";

      items.forEach((it, idx)=>{
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div class="main">
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
          </div>
        `;

        // toggle complete
        row.querySelector('.chx').addEventListener('click', ()=>{
          row.classList.toggle('done');
        });

        wrap.appendChild(row);
      });
    }

    function renderCrash(items){
      const wrap = $('#crashList');
      wrap.innerHTML = "";

      items.forEach((it)=>{
        const due = it.due ? fmtDate(new Date(it.due)) : "‚Äî";

        // Row (day header)
        const row = document.createElement('div');
        row.className = 'item';
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div class="main">
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">Due: ${due}</div>
          </div>
          <button class="btn ghost chev" type="button" aria-expanded="false">‚ñ∏</button>
        `;

        // Subtask list (hidden by default)
        const sub = document.createElement('div');
        sub.className = 'sublist';
        (it.subtasks || []).forEach(txt=>{
          const li = document.createElement('div');
          li.className = 'subitem';
          li.innerHTML = `
            <span class="tick" aria-hidden="true"></span>
            <span class="subtxt">${escapeHtml(txt)}</span>
          `;
          sub.appendChild(li);
        });

        // Toggle subtasks open/closed
        const toggleBtn = row.querySelector('.chev');
        toggleBtn.addEventListener('click', ()=>{
          const open = sub.classList.toggle('open');
          toggleBtn.textContent = open ? '‚ñæ' : '‚ñ∏';
          toggleBtn.setAttribute('aria-expanded', String(open));
        });

        // Mark day as done
        row.querySelector('.chx').addEventListener('click', ()=>{
          row.classList.toggle('done');
        });

        wrap.appendChild(row);
        wrap.appendChild(sub);
      });
    }
    
    function renderAgenda(days){
    const wrap = document.getElementById('agenda');
    wrap.innerHTML = "";
    days.forEach(day=>{
        const box = document.createElement('div');
        box.className = 'agenda-day';

        const hd = document.createElement('div');
        hd.className = 'agenda-day-hd';
        const dow = new Intl.DateTimeFormat(undefined, { weekday:'long'}).format(day.date);
        const mdy = new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(day.date);
        hd.innerHTML = `<div>${escapeHtml(day.label)}</div><div class="date">${dow}, ${mdy}</div>`;
        box.appendChild(hd);

        // All-day pills
        if(day.allDay && day.allDay.length){
        const ad = document.createElement('div');
        ad.className = 'agenda-allday';
        day.allDay.forEach(a=>{
            const pill = document.createElement('span');
            pill.className = 'allday-pill';
            pill.textContent = a.title;
            ad.appendChild(pill);
        });
        box.appendChild(ad);
        }

        // Timed events (sorted)
        const list = document.createElement('div');
        list.className = 'agenda-list';
        (day.events||[]).sort((a,b)=> +new Date(a.start) - +new Date(b.start));
        (day.events||[]).forEach(ev=>{
        const startStr = fmtTime(new Date(ev.start));       // <-- exact time (e.g., 7:30 AM)
        const endStr   = ev.end ? fmtTime(new Date(ev.end)) : null;

        const row = document.createElement('div');
        row.className = 'agenda-row';
        row.innerHTML = `
            <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
            <div>
            <div class="agenda-title">${escapeHtml(ev.title)}</div>
            <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
            </div>
            <span class="agenda-badge">${startStr}</span>  <!-- matches left -->
        `;
        list.appendChild(row);
        });
        box.appendChild(list);

        wrap.appendChild(box);
    });
    }

    // ------------ Quick add
    $('#top3Form').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const fd = new FormData(e.target);
      const title = String(fd.get('title')||'').trim();
      if(!title) return;
      if(DEMO){
        const items = mockTop3();
        items.unshift({title, due:"", completed:false, tag:"#QuickAdd"});
        renderTop3(items);
      }else{
        await apiPost('/reminder', { list:"Top 3", title });
        await loadTop3();
      }
      e.target.reset();
    });

    // ------------ Actions (simulate opening native apps)
    $('#openCalendar').addEventListener('click', ()=> alert('Would call /open-calendar ‚Üí opens Calendar'));
    $('#openReminders').addEventListener('click', ()=> alert('Opening Reminders (simulated)‚Ä¶'));
    $('#quickAddTop').addEventListener('click', ()=> $('.in[name="title"]').focus());

    // ------------ Loaders
    async function loadTop3(){
      const items = DEMO ? mockTop3() : await apiGet('/top3');
      renderTop3(items);
    }
    async function loadCrash(){
      const items = DEMO ? mockCrash() : await apiGet('/crash7');
      renderCrash(items);
    }
    async function loadAgenda(){
      const days = DEMO ? mockAgenda() : await apiGet('/agenda');
      renderAgenda(days);
    }
    async function loadAll(){
      const now = new Date();
      $('#nowHint').textContent = fmtDate(now) + " ¬∑ " + fmtTime(now);
      $('#rangeHint').textContent = `${fmtDate(now)} ‚Üí ${fmtDate(addDays(now,6))}`;
      $('#tzHint').textContent = `Local time: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`;
      await Promise.all([loadTop3(), loadCrash(), loadAgenda()]);
    }

    // ------------ Misc
    $('#year').textContent = new Date().getFullYear();
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }

    // Init
    loadAll();
  </script>
</body>
</html>
</file>

<file path="Backups/index_1.html">
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jenquin.io ‚Äî Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg: #0b0c10;
      --panel: #111318;
      --muted: #7b8496;
      --text: #e9edf5;
      --accent: #6ea8fe;
      --accent-2: #7df2c9;
      --danger: #ff7a7a;
      --ok: #76ff9b;
      --border: #20232b;
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 14px;
      --radius-sm: 10px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg: #f6f7fb;
        --panel: #ffffff;
        --muted: #6b7280;
        --text: #0f172a;
        --accent: #2556ff;
        --accent-2: #0ea5e9;
        --border: #e5e7eb;
        --shadow: 0 10px 24px rgba(0,0,0,.08);
      }
    }

    *{ box-sizing: border-box }
    html,body{ height:100% }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
                  radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%), var(--bg);
      color: var(--text);
      line-height:1.4;
    }

    /* Shell */
    .wrap{
      max-width: 1200px;
      margin: 0 auto;
      padding: 28px 18px 40px;
    }

    header{
      display:flex; align-items:center; justify-content:space-between;
      gap: 16px; margin-bottom: 22px;
    }
    .brand{
      display:flex; align-items:center; gap:14px;
    }
    .logo{
      width:44px; height:44px; border-radius:12px;
      background:
        radial-gradient(60% 100% at 30% 10%, rgba(125,242,201,.3), transparent 60%),
        linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: var(--shadow);
    }
    .brand h1{
      font-size: 20px; margin: 0;
      letter-spacing:.4px;
    }
    .brand .sub{ color: var(--muted); font-size:13px; margin-top:2px }
    .actions{ display:flex; align-items:center; gap:10px }
    .btn{
      appearance:none; border:1px solid var(--border); color:var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      padding:10px 14px; border-radius:12px; cursor:pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18) }
    .btn.primary{
      background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.05));
      border-color: rgba(110,168,254,.35); color: white;
    }
    .btn.ghost{
      background: transparent;
    }

    /* Cards */
    .grid{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 18px;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
    }
    .panel{
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: clip;
    }
    .panel .hd{
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      padding: 14px 16px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    }
    .panel .hd h2{ margin:0; font-size: 15px; letter-spacing:.3px }
    .panel .hd .hint{ color:var(--muted); font-size:12px }
    .panel .bd{ padding: 12px 16px }
    .panel .ft{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; flex-wrap:wrap }

    /* Lists */
    .list{ display:flex; flex-direction:column; gap:10px }
    .item{
      display:grid; grid-template-columns: 22px 1fr auto; align-items:center; gap: 10px;
      padding:10px; border:1px solid var(--border); border-radius: var(--radius-sm);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    }
    .chx{ width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer }
    .chx input{ display:none }
    .chx .dot{ width:10px; height:10px; border-radius:3px; background:transparent; }
    .item.done .title{ color: var(--muted); text-decoration: line-through }
    .item.done .chx .dot{ background: var(--ok); }
    .title{ font-size:14px; }
    .meta{ color: var(--muted); font-size:12px }
    .tag{
      font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border);
      color: var(--muted);
    }
    .kebab{ opacity:.7; }
    .row{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap
    }

    /* Quick add */
    .quick{
      display:flex; gap:10px; align-items:center; width:100%;
    }
    .in{
      flex:1; min-width: 160px;
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }
    .select{
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }

    /* Calendar */
    .cal{
      display:grid; grid-template-columns: repeat(7,1fr); gap:10px;
    }
    @media (max-width: 860px){
      .cal{ grid-template-columns: repeat(3,1fr) }
    }
    @media (max-width: 560px){
      .cal{ grid-template-columns: repeat(2,1fr) }
    }
    .day{
      border:1px solid var(--border); border-radius:12px; padding:10px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      min-height:90px;
      display:flex; flex-direction:column; gap:6px;
    }
    .day .d{ font-size:12px; color: var(--muted) }
    .pill{
      font-size:12px; padding:6px 8px; border-radius:10px; border:1px solid var(--border);
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .pill.blue{ border-color: rgba(110,168,254,.4) }
    .pill.green{ border-color: rgba(125,242,201,.45) }

    footer{
      margin-top: 24px; color: var(--muted); font-size:12px; text-align:center;
    }

    .sep{ height:1px; background: var(--border); margin: 8px 0 }
    .faded{ color: var(--muted) }
    .badge{
      font-size:11px; padding:3px 8px; border-radius:999px; background: rgba(110,168,254,.15); border:1px solid rgba(110,168,254,.35);
      color: #dbe9ff;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>jenquin.io</h1>
          <div class="sub">Jenquin ‚Ä¢ Personal Ops Dashboard</div>
        </div>
      </div>
      <div class="actions">
        <button class="btn ghost" id="toggleDemo">Demo: On</button>
        <button class="btn" id="openReminders">Open Reminders</button>
        <button class="btn primary" id="quickAddTop">+ Quick Add</button>
      </div>
    </header>

    <div class="grid">
      <!-- Left column: Top 3 + Crash 7 stacked -->
      <div class="stack">
        <section class="panel" id="top3Panel">
          <div class="hd">
            <h2>Top 3 Today</h2>
            <div class="row">
              <span class="badge" id="dayLabel">Today</span>
              <span class="hint" id="nowHint">‚Äî</span>
            </div>
          </div>
          <div class="bd">
            <div class="list" id="top3List"></div>
          </div>
          <div class="ft">
            <form class="quick" id="top3Form">
              <input class="in" type="text" placeholder="Quick add to Top 3‚Ä¶" name="title" required />
              <button class="btn" type="submit">Add</button>
              <button class="btn ghost" type="button" id="revealTop3">Reveal in Reminders</button>
            </form>
          </div>
        </section>

        <section class="panel" id="crashPanel" style="margin-top:18px;">
          <div class="hd">
            <h2>7-Day Crash Plan</h2>
            <div class="hint" id="rangeHint">‚Äî</div>
          </div>
          <div class="bd">
            <div class="list" id="crashList"></div>
          </div>
          <div class="ft">
            <button class="btn ghost" id="revealCrash">Reveal Crash Plan</button>
          </div>
        </section>
      </div>

      <!-- Right column: Calendar glance -->
      <section class="panel">
        <div class="hd">
          <h2>Calendar (Next 7 Days)</h2>
          <div class="hint" id="tzHint">‚Äî</div>
        </div>
        <div class="bd">
          <div class="cal" id="calGrid"></div>
        </div>
        <div class="ft">
          <button class="btn ghost" id="openCalendar">Open Calendar</button>
        </div>
      </section>
    </div>

    <footer>
      ¬© <span id="year"></span> jenquin.io ‚Ä¢ v1 preview ¬∑ Data stays in Apple apps ¬∑ Clicks may open native apps
    </footer>
  </div>

  <script>
    // ------------ Utilities
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    function fmtTime(d){
      return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
    }
    function fmtDate(d){
      return new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(d);
    }
    function addDays(d, n){ const c = new Date(d); c.setDate(c.getDate()+n); return c; }

    // ------------ Demo toggle (mock vs live fetch)
    let DEMO = true;
    $('#toggleDemo').addEventListener('click', () => {
      DEMO = !DEMO;
      $('#toggleDemo').textContent = `Demo: ${DEMO ? 'On' : 'Off'}`;
      loadAll();
    });

    // ------------ Mock data
    function mockTop3(){
      return [
        { title: "Ship Jenquin v1 page", due: "", completed: false, tag:"#Admin" },
        { title: "Record 'Album Stream' bumper", due: "", completed: false, tag:"#Creative" },
        { title: "7-Day Crash pass ‚Üí prune tasks", due: "", completed: true, tag:"#Review" },
      ];
    }
    function mockCrash(){
      const now = new Date();
      return [
        { title: "Bank statements ‚Üí sort & tag", due: addDays(now,1), completed:false, tag:"#Finance"},
        { title: "Mom Log: weekly summary", due: addDays(now,2), completed:false, tag:"#Caregiving"},
        { title: "Raspberry Pi: stream loop", due: addDays(now,3), completed:false, tag:"#Infra"},
        { title: "Nova ‚Üí Quick Add Shortcut", due: addDays(now,4), completed:true, tag:"#Flow"},
      ];
    }
    function mockCalendar(){
      const now = new Date();
      return [...Array(7)].map((_,i)=>{
        const d = addDays(now, i);
        const events = [];
        if(i===0) events.push({ t:"Standup (self)", at: new Date(d.setHours(10,0)), color:"blue"});
        if(i===1) events.push({ t:"Studio hour", at: new Date(addDays(now,1).setHours(14,0)), color:"green"});
        if(i===2) events.push({ t:"Groceries + meal prep", at: new Date(addDays(now,2).setHours(18,0)), color:"blue"});
        return { date: addDays(new Date(),i), events };
      });
    }

    // ------------ Live fetch helpers (wire these to your API later)
    async function apiGet(path){
      // Example: return fetch(path).then(r=>r.json())
      // For now, return mock
      if(path==="/top3") return mockTop3();
      if(path==="/crash7") return mockCrash();
      if(path==="/calendar") return mockCalendar();
      return [];
    }
    async function apiPost(path, payload){
      // Example: return fetch(path,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)})
      // For demo, just pretend success:
      return { ok:true };
    }

    // ------------ Renderers
    function renderTop3(items){
      const wrap = $('#top3List'); wrap.innerHTML = "";
      items.forEach((it, idx)=>{
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div>
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
          </div>
          <div class="row">
            <span class="tag">Top 3</span>
            <button class="btn ghost kebab" data-action="remove" title="Remove">‚ãØ</button>
          </div>
        `;
        row.querySelector('.chx').addEventListener('click', async ()=>{
          row.classList.toggle('done');
          // later: await apiPost('/reminder/toggle', { list:'Top 3', index: idx })
        });
        row.querySelector('[data-action="remove"]').addEventListener('click', async ()=>{
          row.style.opacity = .5;
          // later: await apiPost('/reminder/delete', { list:'Top 3', index: idx })
          setTimeout(()=> row.remove(), 180);
        });
        wrap.appendChild(row);
      });
    }

    function renderCrash(items){
      const wrap = $('#crashList'); wrap.innerHTML = "";
      items.forEach((it, idx)=>{
        const due = it.due ? fmtDate(new Date(it.due)) : "‚Äî";
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div>
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">Due: ${due} ${it.tag ? '¬∑ ' + escapeHtml(it.tag) : ''}</div>
          </div>
          <span class="tag">Crash 7</span>
        `;
        row.querySelector('.chx').addEventListener('click', async ()=>{
          row.classList.toggle('done');
          // later: await apiPost('/reminder/toggle', { list:'Crash Plan', index: idx })
        });
        wrap.appendChild(row);
      });
    }

    function renderCal(days){
      const grid = $('#calGrid'); grid.innerHTML="";
      days.forEach(day=>{
        const div = document.createElement('div');
        div.className = 'day';
        div.innerHTML = `<div class="d">${fmtDate(new Date(day.date))}</div>`;
        if(day.events && day.events.length){
          day.events.forEach(ev=>{
            const pill = document.createElement('div');
            pill.className = 'pill ' + (ev.color || 'blue');
            pill.title = ev.t;
            pill.textContent = `${fmtTime(new Date(ev.at))} ‚Ä¢ ${ev.t}`;
            div.appendChild(pill);
          });
        } else {
          const none = document.createElement('div');
          none.className = 'faded'; none.textContent = '‚Äî';
          div.appendChild(none);
        }
        grid.appendChild(div);
      });
    }

    // ------------ Quick add
    $('#top3Form').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const fd = new FormData(e.target);
      const title = String(fd.get('title')||'').trim();
      if(!title) return;
      if(DEMO){
        const items = mockTop3();
        items.unshift({title, due:"", completed:false, tag:"#QuickAdd"});
        renderTop3(items);
      }else{
        await apiPost('/reminder', { list:"Top 3", title });
        await loadTop3();
      }
      e.target.reset();
    });

    // ------------ Actions (simulate opening native apps)
    $('#revealTop3').addEventListener('click', ()=> alert('Would call /open { list:"Top 3" } ‚Üí opens Reminders'));
    $('#revealCrash').addEventListener('click', ()=> alert('Would call /open { list:"Crash Plan" } ‚Üí opens Reminders'));
    $('#openCalendar').addEventListener('click', ()=> alert('Would call /open-calendar ‚Üí opens Calendar'));
    $('#openReminders').addEventListener('click', ()=> alert('Opening Reminders (simulated)‚Ä¶'));
    $('#quickAddTop').addEventListener('click', ()=> $('.in[name="title"]').focus());

    // ------------ Loaders
    async function loadTop3(){
      const items = DEMO ? mockTop3() : await apiGet('/top3');
      renderTop3(items);
    }
    async function loadCrash(){
      const items = DEMO ? mockCrash() : await apiGet('/crash7');
      renderCrash(items);
    }
    async function loadCalendar(){
      const days = DEMO ? mockCalendar() : await apiGet('/calendar');
      renderCal(days);
    }
    async function loadAll(){
      const now = new Date();
      $('#nowHint').textContent = fmtDate(now) + " ¬∑ " + fmtTime(now);
      $('#rangeHint').textContent = `${fmtDate(now)} ‚Üí ${fmtDate(addDays(now,6))}`;
      $('#tzHint').textContent = `Local time: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`;
      await Promise.all([loadTop3(), loadCrash(), loadCalendar()]);
    }

    // ------------ Misc
    $('#year').textContent = new Date().getFullYear();
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }

    // Init
    loadAll();
  </script>
</body>
</html>
</file>

<file path="about.md">
# Jenquin.io ‚Äî v1 demo

This is a single-page **Jenquin Dashboard** mock that mirrors your Apple system:
- **Top 3 Today**
- **7-Day Crash Plan**
- **Calendar (next 7 days)**
- Quick Add + ‚ÄúReveal in Reminders/Calendar‚Äù (simulated)

## Run locally (no backend required)
Double-click `index.html` to open in your browser **or** run a local server:

```bash
cd jengquin_site
python3 -m http.server 8080
# open http://localhost:8080
```

## Hooking up a backend later
When your Flask/FastAPI endpoints are ready:
1. Replace `apiGet`/`apiPost` in `script.js` to call real endpoints.
2. Wire buttons (Reveal/Open) to routes that trigger AppleScript on your Mac.

## Deploy via Tailscale (optional)
Expose your local port (e.g., 8080) with **Tailscale Funnel**:

```bash
tailscale funnel 8080
```

Keep ACLs private unless you intend to share publicly.
</file>

<file path="favicon.svg">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
  <defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#6ea8fe"/><stop offset="100%" stop-color="#7df2c9"/></linearGradient></defs>
  <rect x="4" y="4" width="56" height="56" rx="14" fill="url(#g)"/>
  <circle cx="32" cy="32" r="10" fill="white" opacity="0.9"/>
</svg>
</file>

<file path="logo.svg">
<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 64 64">
  <defs>
    <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#6ea8fe"/>
      <stop offset="100%" stop-color="#7df2c9"/>
    </linearGradient>
  </defs>
  <rect x="4" y="4" width="56" height="56" rx="14" fill="url(#g)"/>
  <g fill="white" opacity="0.95">
    <path d="M20 40c0-8 6-14 14-14h6v6h-6c-4.4 0-8 3.6-8 8v6h-6v-6z"/>
    <path d="M34 18h10v10h-6a4 4 0 0 1-4-4v-6z" opacity="0.85"/>
  </g>
</svg>
</file>

<file path="run_commands">
add the modified files:
git add 

commit the changes:
git commit -m ""

push the changes to the remote repository:
git push origin master

create a zip backup with a timestamp in the Backups folder:
mkdir -p Backups && zip -r "Backups/jenquin-site-backup-$(date +%Y%m%d-%H%M%S).zip" . -x "*.git*" -x "Backups/*"
</file>

<file path="sandbox.html">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agenda Card ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.28}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris‚Äô Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris‚Äô Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [
  { label:"Health",                   start: at(0,0),  end: at(7,30), color: AREA_COLORS.health },
  { label:"Flex",                     start: at(7,30),  end: at(9,30),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(11,0), color: AREA_COLORS.health },
  { label:"Prep & Maintenance",       start: at(11,0),  end: at(14,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Administrative",           start: at(14,0),  end: at(18,0),  color: AREA_COLORS.administrative },
  { label:"Social & Relationships",   start: at(18,0), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,0), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
  }
  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock ‚ÄúFlex ¬∑ 3:33 PM‚Äì7:30 PM‚Äù */
  (function seedAreaPill(){
  const p = document.getElementById('areaPill');
  const seg = ZONES[0];
  if (seg) p.textContent = seg.label; // just the zone name, no time
})();
</script>
</body>
</html>
</file>

<file path="script.js">
// jengquin.io v1 demo script

const $ = sel => document.querySelector(sel);
const $$ = sel => Array.from(document.querySelectorAll(sel));

function fmtTime(d){
  return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
}
function fmtDate(d){
  return new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(d);
}
function addDays(d, n){ const c = new Date(d); c.setDate(c.getDate()+n); return c; }
function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }

let DEMO = true;

// ------------ Mock data
function mockTop3(){
  return [
    { title: "Ship GenCoin v1 page", due: "", completed: false, tag:"#Admin" },
    { title: "Record 'Album Stream' bumper", due: "", completed: false, tag:"#Creative" },
    { title: "7-Day Crash pass ‚Üí prune tasks", due: "", completed: true, tag:"#Review" },
  ];
}
function mockCrash(){
  const now = new Date();
  return [
    { title: "Bank statements ‚Üí sort & tag", due: addDays(now,1), completed:false, tag:"#Finance"},
    { title: "Mom Log: weekly summary", due: addDays(now,2), completed:false, tag:"#Caregiving"},
    { title: "Raspberry Pi: stream loop", due: addDays(now,3), completed:false, tag:"#Infra"},
    { title: "Nova ‚Üí Quick Add Shortcut", due: addDays(now,4), completed:true, tag:"#Flow"},
  ];
}
function mockCalendar(){
  const now = new Date();
  return [...Array(7)].map((_,i)=>{
    const d = addDays(now, i);
    const events = [];
    if(i===0) events.push({ t:"Standup (self)", at: new Date(d.setHours(10,0)), color:"blue"});
    if(i===1) events.push({ t:"Studio hour", at: new Date(addDays(now,1).setHours(14,0)), color:"green"});
    if(i===2) events.push({ t:"Groceries + meal prep", at: new Date(addDays(now,2).setHours(18,0)), color:"blue"});
    return { date: addDays(new Date(),i), events };
  });
}

// ------------ Live fetch helpers (wire these to your API later)
async function apiGet(path){
  // Replace with: return fetch(path).then(r=>r.json())
  if(path==="/top3") return mockTop3();
  if(path==="/crash7") return mockCrash();
  if(path==="/calendar") return mockCalendar();
  return [];
}
async function apiPost(path, payload){
  // Replace with real fetch POST when backend is ready
  return { ok:true };
}

// ------------ Renderers
function renderTop3(items){
  const wrap = $('#top3List'); wrap.innerHTML = "";
  items.forEach((it, idx)=>{
    const row = document.createElement('div');
    row.className = 'item' + (it.completed ? ' done' : '');
    row.innerHTML = `
      <label class="chx" aria-label="toggle done"><span class="dot"></span></label>
      <div>
        <div class="title">${escapeHtml(it.title)}</div>
        <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
      </div>
      <div class="row">
        <span class="tag">Top 3</span>
        <button class="btn ghost kebab" data-action="remove" title="Remove">‚ãØ</button>
      </div>`;
    row.querySelector('.chx').addEventListener('click', async ()=>{
      row.classList.toggle('done');
      // later: await apiPost('/reminder/toggle', { list:'Top 3', index: idx })
    });
    row.querySelector('[data-action="remove"]').addEventListener('click', async ()=>{
      row.style.opacity = .5;
      // later: await apiPost('/reminder/delete', { list:'Top 3', index: idx })
      setTimeout(()=> row.remove(), 180);
    });
    wrap.appendChild(row);
  });
}

function renderCrash(items){
  const wrap = $('#crashList'); wrap.innerHTML = "";
  items.forEach((it, idx)=>{
    const due = it.due ? fmtDate(new Date(it.due)) : "‚Äî";
    const row = document.createElement('div');
    row.className = 'item' + (it.completed ? ' done' : '');
    row.innerHTML = `
      <label class="chx" aria-label="toggle done"><span class="dot"></span></label>
      <div>
        <div class="title">${escapeHtml(it.title)}</div>
        <div class="meta">Due: ${due} ${it.tag ? '¬∑ ' + escapeHtml(it.tag) : ''}</div>
      </div>
      <span class="tag">Crash 7</span>`;
    row.querySelector('.chx').addEventListener('click', async ()=>{
      row.classList.toggle('done');
      // later: await apiPost('/reminder/toggle', { list:'Crash Plan', index: idx })
    });
    wrap.appendChild(row);
  });
}

function renderCal(days){
  const grid = $('#calGrid'); grid.innerHTML="";
  days.forEach(day=>{
    const div = document.createElement('div');
    div.className = 'day';
    div.innerHTML = `<div class="d">${fmtDate(new Date(day.date))}</div>`;
    if(day.events && day.events.length){
      day.events.forEach(ev=>{
        const pill = document.createElement('div');
        pill.className = 'pill ' + (ev.color || 'blue');
        pill.title = ev.t;
        pill.textContent = `${fmtTime(new Date(ev.at))} ‚Ä¢ ${ev.t}`;
        div.appendChild(pill);
      });
    } else {
      const none = document.createElement('div');
      none.className = 'faded'; none.textContent = '‚Äî';
      div.appendChild(none);
    }
    grid.appendChild(div);
  });
}

// ------------ Quick add
function wireEvents(){
  $('#top3Form').addEventListener('submit', async (e)=>{
    e.preventDefault();
    const fd = new FormData(e.target);
    const title = String(fd.get('title')||'').trim();
    if(!title) return;
    if(DEMO){
      const items = mockTop3();
      items.unshift({title, due:"", completed:false, tag:"#QuickAdd"});
      renderTop3(items);
    }else{
      await apiPost('/reminder', { list:"Top 3", title });
      await loadTop3();
    }
    e.target.reset();
  });

  // Simulated native app actions
  $('#revealTop3').addEventListener('click', ()=> alert('Would call /open { list:"Top 3" } ‚Üí opens Reminders'));
  $('#revealCrash').addEventListener('click', ()=> alert('Would call /open { list:"Crash Plan" } ‚Üí opens Reminders'));
  $('#openCalendar').addEventListener('click', ()=> alert('Would call /open-calendar ‚Üí opens Calendar'));
  $('#openReminders').addEventListener('click', ()=> alert('Opening Reminders (simulated)‚Ä¶'));
  $('#quickAddTop').addEventListener('click', ()=> $('.in[name="title"]').focus());

  // Demo toggle
  $('#toggleDemo').addEventListener('click', () => {
    DEMO = !DEMO;
    $('#toggleDemo').textContent = `Demo: ${DEMO ? 'Demo: On' : 'Demo: Off'}`;
    loadAll();
  });
}

// ------------ Loaders
async function loadTop3(){
  const items = DEMO ? mockTop3() : await apiGet('/top3');
  renderTop3(items);
}
async function loadCrash(){
  const items = DEMO ? mockCrash() : await apiGet('/crash7');
  renderCrash(items);
}
async function loadCalendar(){
  const days = DEMO ? mockCalendar() : await apiGet('/calendar');
  renderCal(days);
}
async function loadAll(){
  const now = new Date();
  $('#nowHint').textContent = fmtDate(now) + " ¬∑ " + fmtTime(now);
  $('#rangeHint').textContent = `${fmtDate(now)} ‚Üí ${fmtDate(addDays(now,6))}`;
  $('#tzHint').textContent = `Local time: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`;
  $('#year').textContent = new Date().getFullYear();
  await Promise.all([loadTop3(), loadCrash(), loadCalendar()]);
}

// Init
document.addEventListener('DOMContentLoaded', ()=>{
  wireEvents();
  loadAll();
});
</file>

<file path="site-urls.txt">
Jenquin Site URLs:

Live Site: https://jenquin813.github.io/jenquin.github.io/
Demo Mode: https://jenquin813.github.io/jenquin.github.io/?demo=1
</file>

<file path="test-top3.html">
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Top 3 Form</title>
  <style>
    body { font-family: system-ui, sans-serif; padding: 20px; }
    .panel { border: 1px solid #ccc; border-radius: 8px; padding: 15px; max-width: 500px; }
    .hd { margin-bottom: 10px; }
    .bd { margin-bottom: 15px; }
    .ft { border-top: 1px solid #eee; padding-top: 10px; }
    .list { min-height: 50px; }
    .item { display: flex; padding: 8px 0; border-bottom: 1px solid #eee; }
    .chx { margin-right: 10px; cursor: pointer; }
    .dot { display: inline-block; width: 16px; height: 16px; border: 2px solid #999; border-radius: 50%; }
    .done .dot { background-color: #999; }
    .title { font-weight: 500; }
    .meta { font-size: 0.8em; color: #666; }
    .quick { display: flex; }
    .in { flex: 1; padding: 8px; border: 1px solid #ccc; border-radius: 4px; margin-right: 8px; }
    .btn { padding: 8px 16px; background: #0066cc; color: white; border: none; border-radius: 4px; cursor: pointer; }
  </style>
</head>
<body>
  <section class="panel" id="top3Panel">
    <div class="hd">
      <h2>Top 3 Today</h2>
      <div class="row">
        <span class="badge" id="dayLabel">Today</span>
        <span class="hint" id="nowHint">‚Äî</span>
      </div>
    </div>
    <div class="bd">
      <div class="list" id="top3List"></div>
    </div>
    <div class="ft">
      <form class="quick" id="top3Form">
        <input class="in" type="text" placeholder="Quick add to Top 3‚Ä¶" name="title" required />
        <button class="btn" type="submit">Add</button>
      </form>
    </div>
  </section>

  <script>
    // Utilities
    const $ = sel => document.querySelector(sel);
    
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }
    
    // Demo mode
    let DEMO = true;
    
    // Mock data
    function mockTop3() {
      return [
        { title: "cut front grass", due: "", completed: false},
        { title: "pay electric", due: "", completed: false},
        { title: "migrate webhook to tailscale", due: "", completed: false},
      ];
    }
    
    // Renderer
    function renderTop3(items) {
      const wrap = $('#top3List'); 
      wrap.innerHTML = "";
      
      items.forEach((it, idx) => {
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div class="main">
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
          </div>
        `;
        
        // toggle complete
        row.querySelector('.chx').addEventListener('click', () => {
          row.classList.toggle('done');
        });
        
        wrap.appendChild(row);
      });
    }
    
    // Initial load
    function loadTop3() {
      const items = mockTop3();
      renderTop3(items);
    }
    
    // Form handler
    document.addEventListener('DOMContentLoaded', () => {
      console.log("DOM loaded, setting up form handler");
      const top3Form = $('#top3Form');
      console.log("Form element:", top3Form);
      
      if (top3Form) {
        top3Form.addEventListener('submit', (e) => {
          console.log("Form submitted");
          e.preventDefault();
          const fd = new FormData(e.target);
          const title = String(fd.get('title') || '').trim();
          console.log("Title:", title);
          
          if (!title) return;
          
          const items = mockTop3();
          items.unshift({title, due: "", completed: false, tag: "#QuickAdd"});
          renderTop3(items);
          e.target.reset();
        });
      }
    });
    
    // Initialize
    loadTop3();
  </script>
</body>
</html>
</file>

<file path="demo.html">
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Redirecting to Demo Mode</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      background-color: #1e1e1e;
      color: white;
      text-align: center;
    }
    h1 {
      margin-bottom: 1rem;
    }
    p {
      margin-bottom: 2rem;
      max-width: 600px;
    }
    .loader {
      border: 5px solid #f3f3f3;
      border-top: 5px solid #3498db;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin-bottom: 2rem;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <h1>Redirecting to Demo Mode</h1>
  <div class="loader"></div>
  <p>You will be automatically redirected to the jenquin.io dashboard in demo mode...</p>
  <script>
    // Ensure we're always in demo mode
    function redirectToDemo() {
      // Get the current URL
      var currentUrl = window.location.href;
      var baseUrl = './index.html';
      
      // Check if we're already on index.html
      if (currentUrl.includes('index.html')) {
        baseUrl = currentUrl.split('?')[0]; // Get the URL without parameters
      }
      
      // Add or update the demo parameter
      var targetUrl = baseUrl + (baseUrl.includes('?') ? '&' : '?') + 'demo=1';
      
      // Redirect to the demo URL
      window.location.href = targetUrl;
    }
    
    // Redirect after a short delay for the loading animation
    setTimeout(redirectToDemo, 1500);
  </script>
</body>
</html>
</file>

<file path="README.md">
# Jenquin.io

Personal Ops Dashboard

## Access URLs

- **Live Site**: https://jenquin813.github.io/jenquin.github.io/
- **Demo Mode**: https://jenquin813.github.io/jenquin.github.io/?demo=1

## Features

- Top 3 Today task management
- 7-Day Crash Plan
- Daily Agenda view
- Mini calendar with month navigation
- Digital clock
- Quick Add functionality
- Demo mode (via URL parameter)

| Layer | Description |
|------|-------------|
| **Backend (Private Repo)** | Handles the ‚Äúthinking‚Äù: logic, scheduling, data processing, and decision-making. |
| **Frontend (`jenquin-site`)** | Handles the ‚Äúfeeling‚Äù: what users see, click, and experience visually. |

This separation allows for clean modular growth ‚Äî keeping the system secure, adaptable, and easy to evolve over time.

## üß≠ Concept Diagram (Aligned & Consistent)
A high-level view of how **Jenquin Site** fits into the broader system with consistent, parallel labels:

```
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ        Jenquin UI        ‚îÇ
                     ‚îÇ  (jenquin-site frontend) ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                         [User Interaction Layer]
                                   ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ       Voice Gateway      ‚îÇ
                     ‚îÇ    (Siri / Mic Input)    ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                           [Input Interpretation]
                                   ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ       AI Assistant       ‚îÇ
                     ‚îÇ  (Nova ‚Äî Router/Agent)   ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                         [Intent Routing & Orchestration]
                                   ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ     Language Model(s)    ‚îÇ
                     ‚îÇ (LLM Engine ‚Äî Reasoning) ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                          [Structured Commands]
                                   ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ      Jenquin Backend     ‚îÇ
                     ‚îÇ (Data & Automation Core) ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                         [Memory & Long-Term Data]
                                   ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ    FlowOS / SelfOS Stack ‚îÇ
                     ‚îÇ   (Personal System Memory)‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Alignment notes:**
- **Voice Gateway** parallels **AI Assistant** in label style (top role + subtitle in parentheses).
- **AI Assistant** is the title; **Nova** is specified as the implementation (Router/Agent).
- **Language Model(s)** mirrors this pattern (title + role in parentheses).
- **Backend** and **FlowOS** use consistent ‚Äútitle + role‚Äù phrasing.

## üéØ Goals
- Present a **functional and visually clear** concept site.
- Prototype UI elements such as dashboards, top tasks, and flow navigation.
- Serve as the **public face** of the Jenquin project while backend logic develops privately.
- Evolve into a unified web or app experience that integrates voice, reminders, and adaptive interfaces.

## üîÑ Future Vision
Jenquin isn‚Äôt just a site ‚Äî it‚Äôs the start of a connected ecosystem. Over time, this front-end layer will become a **gateway** into a broader platform that blends:
- **automation**
- **data awareness**
- **voice input**
- **flow-based productivity**

The goal is to make technology feel *invisible but intelligent* ‚Äî helping people stay organized and in flow without needing to manage every detail manually.

## üß∞ Built With
- **HTML5 / CSS3**
- **JavaScript (Vanilla)**
- *(Optional future frameworks: React, Vue, or Svelte)*

## üöÄ Getting Started
To preview locally:
```bash
git clone https://github.com/<yourusername>/jenquin-site.git
cd jenquin-site
open index.html
```
Or view live on GitHub Pages (after enabling it in repo settings).

## üñºÔ∏è Showcase / Screenshots (placeholder)
- `docs/screenshots/` folder for UI previews and GIFs (add when ready).
- Example sections to show later: **Reveal Crash Plan**, **Top 3 / Top 7**, **Flow Navigation**.

## ü™∂ License
This project is currently under personal development and not licensed for redistribution.
Future licensing will be added once the full system architecture is ready for collaboration.
</file>

<file path="style.css">
:root{
  --bg: #0b0c10;
  --panel: #111318;
  --muted: #7b8496;
  --text: #e9edf5;
  --accent: #6ea8fe;
  --accent-2: #7df2c9;
  --danger: #ff7a7a;
  --ok: #76ff9b;
  --border: #20232b;
  --shadow: 0 8px 24px rgba(0,0,0,.35);
  --radius: 14px;
  --radius-sm: 10px;
}
@media (prefers-color-scheme: light){
  :root{
    --bg: #f6f7fb;
    --panel: #ffffff;
    --muted: #6b7280;
    --text: #0f172a;
    --accent: #2556ff;
    --accent-2: #0ea5e9;
    --border: #e5e7eb;
    --shadow: 0 10px 24px rgba(0,0,0,.08);
  }
}
*{ box-sizing: border-box }
html,body{ height:100% }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  background: radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
              radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%), var(--bg);
  color: var(--text);
  line-height:1.4;
}
.wrap{ max-width: 1200px; margin: 0 auto; padding: 28px 18px 40px; }
header{ display:flex; align-items:center; justify-content:space-between; gap: 16px; margin-bottom: 22px; }
.brand{ display:flex; align-items:center; gap:14px; }
.logo{ width:44px; height:44px; border-radius:12px; box-shadow: var(--shadow); }
.brand h1{ font-size: 20px; margin: 0; letter-spacing:.4px }
.brand .sub{ color: var(--muted); font-size:13px; margin-top:2px }
.actions{ display:flex; align-items:center; gap:8px }
.btn{
  appearance:none; border:1px solid var(--border); color:var(--text);
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  padding:10px 14px; border-radius:12px; cursor:pointer;
  transition: transform .08s ease, background .2s ease, border-color .2s ease;
}
.btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18) }
.btn.primary{ background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.05)); border-color: rgba(110,168,254,.35); color: white; }
.btn.ghost{ background: transparent; }
.grid{ display:grid; grid-template-columns: 1.1fr 1fr; gap: 18px; }
@media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }
.panel{
  background: var(--panel); border: 1px solid var(--border); border-radius: var(--radius);
  box-shadow: var(--shadow); overflow: clip;
}
.panel .hd{ display:flex; align-items:center; justify-content:space-between; gap: 10px; padding: 14px 16px; border-bottom:1px solid var(--border);
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06)); }
.panel .hd h2{ margin:0; font-size: 15px; letter-spacing:.3px }
.panel .hd .hint{ color: var(--muted); font-size:12px }
.panel .bd{ padding: 12px 16px }
.panel .ft{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; flex-wrap:wrap }
.list{ display:flex; flex-direction:column; gap:10px }
.item{
  display:grid; grid-template-columns: 22px 1fr auto; align-items:center; gap: 10px;
  padding:10px; border:1px solid var(--border); border-radius: var(--radius-sm);
  background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
}
.chx{ width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer }
.chx input{ display:none }
.chx .dot{ width:10px; height:10px; border-radius:3px; background:transparent; }
.item.done .title{ color: var(--muted); text-decoration: line-through }
.item.done .chx .dot{ background: var(--ok); }
.title{ font-size:14px; }
.meta{ color: var(--muted); font-size:12px }
.tag{ font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border); color: var(--muted); }
.kebab{ opacity:.7; }
.row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }
.quick{ display:flex; gap:10px; align-items:center; width:100%; }
.in{
  flex:1; min-width: 160px;
  border:1px solid var(--border); border-radius:12px; padding:10px 12px;
  background: rgba(0,0,0,.04); color: var(--text);
}
.select{
  border:1px solid var(--border); border-radius:12px; padding:10px 12px;
  background: rgba(0,0,0,.04); color: var(--text);
}
.cal{ display:grid; grid-template-columns: repeat(7,1fr); gap:10px; }
@media (max-width: 860px){ .cal{ grid-template-columns: repeat(3,1fr) } }
@media (max-width: 560px){ .cal{ grid-template-columns: repeat(2,1fr) } }
.day{
  border:1px solid var(--border); border-radius:12px; padding:10px;
  background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  min-height:90px; display:flex; flex-direction:column; gap:6px;
}
.day .d{ font-size:12px; color: var(--muted) }
.pill{
  font-size:12px; padding:6px 8px; border-radius:10px; border:1px solid var(--border);
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.pill.blue{ border-color: rgba(110,168,254,.4) }
.pill.green{ border-color: rgba(125,242,201,.45) }
footer{ margin-top: 24px; color: var(--muted); font-size:12px; text-align:center; }
.sep{ height:1px; background: var(--border); margin: 8px 0 }
.faded{ color: var(--muted) }
.badge{
  font-size:11px; padding:3px 8px; border-radius:999px; background: rgba(110,168,254,.15); border:1px solid rgba(110,168,254,.35);
  color: #dbe9ff;
}

/* Crash subtasks (accordion) */
.chev{ font-size:14px; border:1px solid var(--border); border-radius:8px; padding:4px 8px; }
.sublist{
  display:none; margin:8px 0 0 38px;
  padding:8px 10px; border-left:2px solid var(--border);
  display:none; gap:8px; flex-direction:column;
}
.sublist.open{ display:flex; }
.subitem{ display:flex; align-items:center; gap:8px; font-size:13px; }
.subitem .tick{ width:12px; height:12px; border-radius:3px; border:1px solid var(--border); background:rgba(0,0,0,.04); }
.subitem.done .subtxt{ color:var(--muted); text-decoration:line-through; }
</file>

<file path="index.html">
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jenquin.io ‚Äî Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg: #0b0c10;
      --panel: #111318;
      --muted: #7b8496;
      --text: #e9edf5;
      --accent: #6ea8fe;
      --accent-2: #7df2c9;
      --danger: #ff7a7a;
      --ok: #76ff9b;
      --border: #20232b;
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 14px;
      --radius-sm: 10px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg: #f6f7fb;
        --panel: #ffffff;
        --muted: #6b7280;
        --text: #0f172a;
        --accent: #2556ff;
        --accent-2: #0ea5e9;
        --border: #e5e7eb;
        --shadow: 0 10px 24px rgba(0,0,0,.08);
      }
    }

    *{ box-sizing: border-box }
    html,body{ height:100% }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
                  radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%), var(--bg);
      color: var(--text);
      line-height:1.4;
    }

    /* Shell */
    .wrap{
      max-width: 1200px;
      margin: 0 auto;
      padding: 28px 18px 40px;
    }

    header{
      display:flex; align-items:center; justify-content:space-between;
      gap: 16px; margin-bottom: 22px;
    }
    .brand{
      display:flex; align-items:center; gap:14px;
    }
    .logo{
      width:44px; height:44px; border-radius:12px;
      background:
        radial-gradient(60% 100% at 30% 10%, rgba(125,242,201,.3), transparent 60%),
        linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: var(--shadow);
    }
    .brand h1{
      font-size: 20px; margin: 0;
      letter-spacing:.4px;
    }
    .brand .sub{ color: var(--muted); font-size:13px; margin-top:2px }
    .actions{ display:flex; align-items:center; gap:10px }
    .btn{
      appearance:none; border:1px solid var(--border); color:var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      padding:10px 14px; border-radius:12px; cursor:pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18) }
    .btn.primary{
      background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.05));
      border-color: rgba(110,168,254,.35); color: white;
    }
    .btn.ghost{ background: transparent; }

    /* Layout */
    .grid{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 18px;
    }
    @media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }

    /* Panel */
    .panel{
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: clip;
    }
    .panel .hd{
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      padding: 14px 16px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    }
    .panel .hd h2{ margin:0; font-size: 15px; letter-spacing:.3px }
    .panel .hd .hint{ color:var(--muted); font-size:12px }
    .panel .bd{ padding: 12px 16px }
    .panel .ft{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; flex-wrap:wrap }

    /* Lists */
    .list{ display:flex; flex-direction:column; gap:10px }
    .item{
      display:grid; grid-template-columns: 22px 1fr auto; align-items:center; gap: 10px;
      padding:10px; border:1px solid var(--border); border-radius: var(--radius-sm);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    }
    .chx{ width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer }
    .chx input{ display:none }
    .chx .dot{ width:10px; height:10px; border-radius:3px; background:transparent; }
    .item.done .title{ color: var(--muted); text-decoration: line-through }
    .item.done .chx .dot{ background: var(--ok); }
    .title{ font-size:14px; }
    .meta{ color: var(--muted); font-size:12px }
    .tag{
      font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border);
      color: var(--muted);
    }
    .kebab{ opacity:.7; }
    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }

    /* Quick add */
    .quick{
      display:flex; gap:10px; align-items:center; width:100%;
    }
    .in{
      flex:1; min-width: 160px;
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }
    .select{
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }

    /* Agenda (Apple-style list) */
    .agenda-day{
      border:1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      margin-bottom: 12px; overflow: hidden;
      position: relative;
    }

    /* Live 'now' line inside a day box */
    .now-indicator {
      position: absolute;
      left: 12px;           /* aligns with agenda padding */
      right: 12px;
      height: 2px;
      background: rgba(255,255,255,.35);   /* subtle gray on dark */
      border-radius: 2px;
      pointer-events: none;
      z-index: 20;
      transition: top .2s ease-out;        /* smooth nudges */
    }

    /* optional tiny dot on the left edge */
    .now-indicator::before{
      content:"";
      position:absolute;
      left:-4px; top:-3px;
      width:8px; height:8px; border-radius:50%;
      background: rgba(255,255,255,.6);
      box-shadow: 0 0 6px rgba(255,255,255,.25);
    }
    @media (prefers-color-scheme: light){
      .now-indicator{ background: rgba(0,0,0,.25); }
      .now-indicator::before{ background: rgba(0,0,0,.45); }
    }
    .agenda-day-hd{
      display:flex; justify-content:space-between; align-items:center;
      padding:10px 12px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      font-size:13px; letter-spacing:.2px;
    }
    .agenda-day-hd .date{ color: var(--muted) }
    
    /* Make the left item in the small day header look like a pill */
    /* Softer, more blended focus pill ‚Äî matches card background */
    /* Softer, muted-gray focus pill */
    .agenda-day-hd > :first-child{
      display:inline-block;
      padding:6px 10px;
      border:1px solid rgba(255,255,255,.05);
      border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
      font-weight:400;
      font-size:12px;
      letter-spacing:.2px;
      color: var(--muted);         /* ‚Üê makes text match your time gray */
      box-shadow: inset 0 0 2px rgba(0,0,0,.25);
    }

    @media (prefers-color-scheme: light){
      .agenda-day-hd > :first-child{
        border:1px solid rgba(0,0,0,.05);
        background: linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
        color: var(--muted);       /* still use muted tone in light mode */
      }
    }
    .agenda-list{ display:flex; flex-direction:column }
    .agenda-row{
      display:grid; grid-template-columns: 20px 1fr auto; align-items:center;
      gap:10px; padding:10px 12px; border-top:1px solid var(--border);
    }
    .agenda-row:first-child{ border-top: none }
    .agenda-row .dot{
      width:10px; height:10px; border-radius:50%;
      border:2px solid var(--border);
    }
    .dot.blue{ background: rgba(110,168,254,.9) }
    .dot.green{ background: rgba(125,242,201,.95) }
    .dot.purple{ background: #b38aff }
    .dot.orange{ background: #ffb05a }
    .dot.gray{ background: #9aa3b2 }
    .agenda-title{ font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
    .agenda-meta{ color: var(--muted); font-size:12px }
    .agenda-badge{
      font-size:11px; padding:4px 8px; border-radius:999px;
      border:1px solid var(--border); color: var(--muted);
    }

    /* Agenda checkbox = exactly like Top 3 / Crash */
    .agenda-row .chx{
      width:18px; height:18px;
      border-radius:6px;
      border:1px solid var(--border);
      display:inline-grid; place-items:center;
      cursor:pointer;
      background: transparent;            /* <- no gray fill */
    }

    /* Hide the inner square when unchecked (no "box in box") */
    .agenda-row .chx .dot{
      width:10px; height:10px;
      border-radius:3px;
      background: transparent;
      border: none;                        /* <- ensure no outline */
      opacity: 0;                          /* <- invisible when unchecked */
    }

    /* Checked state = same green fill you already use */
    .agenda-row.done .chx .dot{
      opacity: 1;
      background: var(--ok);
    }

    /* Strike-through title when done (already added, keep) */
    .agenda-row.done .agenda-title{
      color: var(--muted);
      text-decoration: line-through;
    }

    /* Optional: nudge the right cell a hair */
    .agenda-row > .chx{ margin-left: 8px; }

    /* All-day lane: single line, scrolls left‚Üíright */
    .agenda-allday{
      display:flex;
      gap:8px;
      padding:10px 12px;
      border-top:1px solid var(--border);
      overflow-x:auto;
      white-space:nowrap;
      scrollbar-width: thin;
    }
    .agenda-allday::-webkit-scrollbar{ height:6px; }
    .agenda-allday::-webkit-scrollbar-thumb{
      background: rgba(255,255,255,.1);
      border-radius: 999px;
    }

    /* Subtle all-day pills */
    .allday-pill{
      display:inline-flex; align-items:center;
      padding:6px 10px;
      border:1px solid var(--border);
      border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      color: var(--muted);
      font-size:12px;
      white-space:nowrap;
    }

    /* Row directly under the focus banner: Area (left) + All-day items (right) */
    .area-row{
      display:flex; align-items:center; gap:8px;
      padding:10px 12px;
      border-top:1px solid var(--border);
      overflow-x:auto; /* if lots of all-day pills */
    }
    .area-row::-webkit-scrollbar{ height:6px; }
    .area-row::-webkit-scrollbar-thumb{
      background: rgba(255,255,255,.1);
      border-radius:999px;
    }

    /* Left pill = current Area (soft, blended) */
    .area-pill{
      display:inline-flex; align-items:center;
      padding:6px 10px;
      border:1px solid rgba(255,255,255,.05);
      border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
      color: var(--muted);
      font-size:12px;
      box-shadow: inset 0 0 2px rgba(0,0,0,.25);
      white-space:nowrap;
    }

    /* Right lane container for all-day items */
    .allday-lane{
      display:flex; gap:8px;
      margin-left:6px;
    }

    /* Reuse your subtle all-day pill look */
    .allday-pill{
      display:inline-flex; align-items:center;
      padding:6px 10px;
      border:1px solid var(--border);
      border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      color: var(--muted);
      font-size:12px;
      white-space:nowrap;
    }

    @media (prefers-color-scheme: light){
      .area-pill{
        border:1px solid rgba(0,0,0,.05);
        background: linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      }
    }

    footer{
      margin-top: 24px; color: var(--muted); font-size:12px; text-align:center;
    }
    .sep{ height:1px; background: var(--border); margin: 8px 0 }
    .faded{ color: var(--muted) }
    .badge{
      font-size:11px; padding:3px 8px; border-radius:999px; background: rgba(110,168,254,.15); border:1px solid rgba(110,168,254,.35);
      color: #dbe9ff;
    }
    
    /* Crash subtasks (accordion) */
    .chev{ font-size:14px; border:1px solid var(--border); border-radius:8px; padding:4px 8px; }
    .sublist{
      display:none; margin:8px 0 0 38px;
      padding:8px 10px; border-left:2px solid var(--border);
      display:none; gap:8px; flex-direction:column;
    }
    .sublist.open{ display:flex; }
    .subitem{ display:flex; align-items:center; gap:8px; font-size:13px; }
    .subitem .tick{ width:12px; height:12px; border-radius:3px; border:1px solid var(--border); background:rgba(0,0,0,.04); }
    .subitem.done .subtxt{ color:var(--muted); text-decoration:line-through; }
    .subitem{ cursor:pointer; }
    .subitem.done .tick{
      background: var(--ok);
      border-color: rgba(118,255,155,.7);
    }
    
    .item .main{
      flex:1;
    }
    .item .chev{
      margin-left:auto;
      font-size:16px;
      border:none;
      background:transparent;
      color:var(--muted);
      cursor:pointer;
      padding:6px 10px;
    }
    .item .chev:hover{
      color:var(--accent);
      transform: translateY(-1px);
    }
    
    .item .main{ flex:1; }
    .item .kebab{
      margin-left:auto;
      border:none;
      background:transparent;
      color:var(--muted);
      padding:6px 10px;
    }
    .item .kebab:hover{ color:var(--accent); transform: translateY(-1px); }
    
    .btn.mini{ padding:6px 10px; border-radius:10px }
    #miniMonth{
      display:grid; gap:6px;
      grid-template-columns: repeat(7, 1fr);
      width:100%;
    }
    .mm-cell{
      text-align:center; font-size:12px; padding:6px 0;
      border:1px solid var(--border); border-radius:8px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.04));
      cursor:pointer; user-select:none;
    }
    .mm-head{ font-weight:600; color:var(--muted); cursor:default; }
    .mm-out{ opacity:.45 }
    .mm-today{ outline:2px solid var(--accent); }
    .mm-sel{ background: rgba(110,168,254,.18); border-color: rgba(110,168,254,.45); }
    
    .month-nav {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-bottom: 10px;
    }
    
    .month-nav h3 {
      margin: 0;
      font-size: 14px;
      font-weight: 600;
      text-align: center;
      min-width: 100px;
    }
    
    .mini-row{
      display:grid; grid-template-columns: 1fr 1fr; gap:12px; align-items:stretch; width:100%;
      height: 180px;  /* match the clock box height */
    }
    @media (max-width: 860px){
      .mini-row{ grid-template-columns: 1fr; } /* stack on small screens */
    }

    /* Updated miniMonth styles */
    #miniMonth {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 6px 6px 8px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      box-shadow: var(--shadow);
    }

    /* Month header (keep small) */
    .mm-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2px; /* tighten spacing */
      font-size: 11px;
    }
    .mm-nav-btn {
      font-size: 11px;
      padding: 2px 6px;
    }
    .mm-nav-title {
      font-size: 11px;
    }

    /* Days grid scaled down */
    #mmGrid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 3px;
      flex: 1;
    }
    .mm-cell {
      font-size: 10px;
      padding: 3px 0;
    }

    /* Clock card */
    #miniClock{
      display:flex; flex-direction:column; justify-content:center; align-items:center;
      border:1px solid var(--border); border-radius:12px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      box-shadow: var(--shadow); height:100%;
      font-size: 48px;
    }
    .clk-time{
      font-variant-numeric: tabular-nums;
      font-size:46px; line-height:1; letter-spacing:1px;
    }
    .clk-sub{ margin-top:6px; color:var(--muted); font-size:12px; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>jenquin.io</h1>
          <div class="sub">Jenquin ‚Ä¢ Personal Ops Dashboard</div>
        </div>
      </div>
      <div class="actions">
        <button class="btn" id="openReminders">Open Reminders</button>
      </div>
    </header>

    <div class="grid">
      <!-- Left column: Top 3 + Crash 7 stacked -->
      <div class="stack">
        <section class="panel" id="top3Panel">
          <div class="hd">
            <h2>Top 3 Today</h2>
            <div class="row">
              <span class="badge" id="dayLabel">Today</span>
              <span class="hint" id="nowHint">‚Äî</span>
            </div>
          </div>
          <div class="bd">
            <div class="list" id="top3List"></div>
          </div>
          <div class="ft">
            <form class="quick" id="top3Form">
              <input class="in" type="text" placeholder="Quick add to Top 3‚Ä¶" name="title" required />
              <button class="btn" type="submit">Add</button>
            </form>
          </div>
        </section>

        <!-- Crash Plan (no footer) -->
        <section class="panel" id="crashPanel" style="margin-top:18px;">
          <div class="hd">
            <h2>7-Day Crash Plan</h2>
            <div class="hint" id="rangeHint">‚Äî</div>
          </div>
          <div class="bd">
            <div class="list" id="crashList"></div>
          </div>
        </section>
      </div>

      <!-- Right column: Agenda (Apple-style) -->
      <section class="panel" id="agendaPanel">
        <div class="hd" id="flowHd">
          <button class="btn ghost mini" id="dayPrev" aria-label="Previous day">‚Üê</button>
          <h2 id="dayTitle" style="margin:0 auto;">‚Äî</h2>
          <button class="btn ghost mini" id="dayNext" aria-label="Next day">‚Üí</button>
        </div>
        <div class="bd">
          <div id="agenda"></div>
        </div>
        <div class="ft">
          <div class="mini-row">
            <div id="miniMonth">
              <div class="mm-nav">
                <button class="mm-nav-btn" id="monthPrev" aria-label="Previous month">‚óÑ</button>
                <span class="mm-nav-title" id="monthTitle">Month</span>
                <button class="mm-nav-btn" id="monthNext" aria-label="Next month">‚ñ∫</button>
              </div>
              <div id="mmGrid"></div>
            </div>
            <div id="miniClock" aria-label="Current time">
              <div class="clk-time">--:--</div>
              <div class="clk-sub">‚Äî</div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <footer>
      ¬© <span id="year"></span> jenquin.io ‚Ä¢ v1 preview ¬∑ Data stays in Apple apps ¬∑ Clicks may open native apps
    </footer>
  </div>

  <script>
    // ------------ Utilities
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));
    
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function fmtTime(d){
      return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
    }
    function fmtDate(d){
      return new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(d);
    }
    function addDays(d, n){ const c = new Date(d); c.setDate(c.getDate()+n); return c; }
    
    // ----- Date anchors
    function startOfDay(d){ return new Date(d.getFullYear(), d.getMonth(), d.getDate()); }
    const TODAY = startOfDay(new Date());
    let SELECTED = TODAY; // ‚Üê the day your FlowOS panel shows

    // --- AREA detection (minimal; explicit ev.area preferred, else infer by title)
    const AREA_FLEX = "Flex";
    const AREA_NAMES = [
      "Prep & Maintenance",
      "Review & Planning",
      "Rest & Recharge",
      "Creative / Project Work",
      "Health",
      "Errands & Logistics",
      "Social & Relationships",
      "Flex"
    ];

    function inferAreaFromTitle(title=""){
      const t = title.toLowerCase();
      if (t.match(/\breview\b|\bplanning\b/)) return "Review & Planning";
      if (t.match(/\brest\b|\brecharge\b/)) return "Rest & Recharge";
      if (t.match(/\bprep\b|\bmaintenance\b/)) return "Prep & Maintenance";
      if (t.match(/\bcreative\b|\bproject\b/)) return "Creative / Project Work";
      if (t.match(/\bhealth\b|\bgym\b|\brun\b|\byoga\b/)) return "Health";
      if (t.match(/\berrand\b|\blogistic\b|\bshop\b|\bgrocery\b/)) return "Errands & Logistics";
      if (t.match(/\bsocial\b|\brelationship\b|\bfriend\b|\bdinner\b|\bmeet\b/)) return "Social & Relationships";
      if (t.match(/\bflex\b/)) return "Flex";
      return null;
    }

    // Build sorted "area windows" from events that map to an area
    function areaWindows(events=[]){
      return (events||[])
        .map(ev=>{
          const area = ev.area || inferAreaFromTitle(ev.title);
          return (area && ev.start) ? { ...ev, area } : null;
        })
        .filter(Boolean)
        .sort((a,b)=> +new Date(a.start) - +new Date(b.start));
    }

    // Single active area (if overlaps, prefer the one with latest start)
    function findCurrentArea(events, now=new Date()){
      const wins = areaWindows(events);
      const active = wins.filter(w=>{
        const s = new Date(w.start);
        const e = w.end ? new Date(w.end) : null;
        return e ? (now >= s && now < e) : (now >= s);
      });
      if (!active.length) return null;
      return active.reduce((a,b)=> new Date(a.start) > new Date(b.start) ? a : b);
    }

    // Next scheduled area after now
    function findNextArea(events, now=new Date()){
      const wins = areaWindows(events);
      for (const w of wins){ if (new Date(w.start) > now) return w; }
      return null;
    }

    // Format the Area pill
    function areaPillHTML(label, s, e){
      // only show the area label, no time
      return `<span class="area-pill">${escapeHtml(label)}</span>`;
    }

    // Create the combined row: [Area pill]  [all-day lane -> pills...]
    function renderAreaRow(day, box){
      const row = document.createElement('div');
      row.className = 'area-row';
      row.setAttribute('data-arearow','1');

      // left: area pill placeholder
      const areaSlot = document.createElement('span');
      areaSlot.className = 'area-pill';
      areaSlot.setAttribute('data-areaslot','1');
      areaSlot.textContent = ''; // will be filled by updateAreaRow()

      // right: all-day lane container
      const lane = document.createElement('div');
      lane.className = 'allday-lane';
      lane.setAttribute('data-alldaylane','1');

      // fill all-day items horizontally to the right, excluding the focus label
      const focusLabel = day.focus || "";
      if (day.allDay && day.allDay.length){
        (day.allDay || [])
          .filter(a => a && a.title && a.title !== focusLabel && !/^\[FOCUS\]/i.test(a.title))
          .forEach(a=>{
            const pill = document.createElement('span');
            pill.className = 'allday-pill';
            pill.textContent = a.title;
            lane.appendChild(pill);
          });
      }

      row.appendChild(areaSlot);
      row.appendChild(lane);
      box.appendChild(row);

      // initial area fill
      updateAreaRow(day, row);
    }

    // Update only the left area pill content
    function updateAreaRow(day, row){
      if (!row) return;
      const slot = row.querySelector('[data-areaslot="1"]');
      if (!slot) return;

      const now = new Date();
      const isToday = +startOfDay(now) === +startOfDay(day.date);

      if (!isToday){
        // On non-today days: show first area if any, else a default Flex window (optional)
        const wins = areaWindows(day.events);
        if (wins.length){
          const first = wins[0];
          slot.outerHTML = areaPillHTML(first.area, new Date(first.start), first.end ? new Date(first.end) : null);
        }else{
          const ds = new Date(day.date); ds.setHours(9,0,0,0);
          const de = new Date(day.date); de.setHours(17,0,0,0);
          slot.outerHTML = areaPillHTML(AREA_FLEX, ds, de);
        }
        return;
      }

      // Today: only show the current area; if in a gap, show Flex until next area or EOD
      const current = findCurrentArea(day.events, now);
      if (current){
        slot.outerHTML = areaPillHTML(current.area, new Date(current.start), current.end ? new Date(current.end) : null);
      }else{
        const next = findNextArea(day.events, now);
        const flexStart = now;
        const flexEnd = next ? new Date(next.start)
          : new Date(day.date.getFullYear(), day.date.getMonth(), day.date.getDate(), 23, 59, 0, 0);
        slot.outerHTML = areaPillHTML(AREA_FLEX, flexStart, flexEnd);
      }
    }

    // Called by your timer to keep the area pill live
    function updateLiveArea(){
      const dayBox = document.querySelector('#agenda .agenda-day');
      if (!dayBox || !window.__CURRENT_DAY) return;
      const row = dayBox.querySelector('[data-arearow="1"]');
      if (!row) return;
      updateAreaRow(window.__CURRENT_DAY, row);
    }

    // ------------ Demo mode via URL parameter
    // Visit site normally for live mode, add ?demo=1 for demo mode
    // Simple flag for demo mode
    let DEMO = new URLSearchParams(window.location.search).has('demo');
    let CRASH_STATE = null;
    
    // In-memory storage for demo mode
    const DEMO_STORAGE = {};
    
    // ------------ Storage wrappers for demo vs live persistence
    // These wrappers provide a consistent interface for storage operations
    // In demo mode, they use memory storage that resets on page refresh
    // In live mode, they use localStorage for persistence
    
    // ------------ Storage wrappers for demo vs live persistence
    // These wrappers provide a consistent interface for storage operations
    // In demo mode, they use memory storage that resets on page refresh
    // In live mode, they use localStorage for persistence
    
    // Get a value from storage (localStorage in live mode, memory in demo mode)
    function storageGet(key) {
      if (DEMO) {
        return DEMO_STORAGE[key];
      } else {
        try {
          return JSON.parse(localStorage.getItem(key) || 'null');
        } catch {
          return null;
        }
      }
    }
    
    // Set a value in storage (localStorage in live mode, memory in demo mode)
    function storageSet(key, value) {
      if (DEMO) {
        DEMO_STORAGE[key] = value;
      } else {
        localStorage.setItem(key, JSON.stringify(value));
      }
    }
    
    // Remove a value from storage
    function storageRemove(key) {
      if (DEMO) {
        delete DEMO_STORAGE[key];
      } else {
        localStorage.removeItem(key);
      }
    }
    
    
    // ------------ Mock data
    function mockTop3(){
      return [
        { title: "cut front grass", due: "", completed: false},
        { title: "pay electric", due: "", completed: false},
        { title: "migrate webhook to tailscale", due: "", completed: false},
      ];
    }
    function mockCrash(){
  const now = new Date();
  const day = (n)=> addDays(now, n-1); // Day 1=today, Day 2=+1, etc.

  return [
    {
      day: 1,
      title: "Day 1 ‚Äì Core Finances",
      due: day(1),
      subtasks: [
        "Gather last 3‚Äì6 months bank statements",
        "Gather household bills (utilities, phone, internet, HOA, insurance)",
        "Print/save mortgage statements & lender letters"
      ]
    },
    {
      day: 2,
      title: "Day 2 ‚Äì Ledger + Food Stamps",
      due: day(2),
      subtasks: [
        "Finalize expense ledger (food, gas, health, debt)",
        "Apply for food stamps (use bank statements + ledger as proof)"
      ]
    },
    {
      day: 3,
      title: "Day 3 ‚Äì Mom‚Äôs Medical Packet (Part 1)",
      due: day(3),
      subtasks: [
        "Collect hospital/clinic records (copies/printouts)",
        "Gather prescriptions + receipts"
      ]
    },
    {
      day: 4,
      title: "Day 4 ‚Äì Mom‚Äôs Medical Packet (Part 2)",
      due: day(4),
      subtasks: [
        "Write daily function notes (3‚Äì5 days is enough)",
        "Request doctor‚Äôs letter (or confirm appointment/availability)"
      ]
    },
    {
      day: 5,
      title: "Day 5 ‚Äì Bankruptcy Packet (Part 1)",
      due: day(5),
      subtasks: [
        "Gather credit card + loan statements",
        "List creditors + balances",
        "List assets (truck, tools, furniture, gear)"
      ]
    },
    {
      day: 6,
      title: "Day 6 ‚Äì Bankruptcy Packet (Part 2)",
      due: day(6),
      subtasks: [
        "Review tax returns (last 2 years)",
        "Align ledger with tax numbers (rough match is fine)",
        "Organize everything into Shared Packet folder system"
      ]
    },
    {
      day: 7,
      title: "Day 7 ‚Äì Compile & Review",
      due: day(7),
      subtasks: [
        "Assemble Disability packet (Mom) ‚Äî submission ready",
        "Assemble Bankruptcy packet ‚Äî file-ready (hold unless needed)",
        "Double-check folders, label clearly (‚Äúready to send‚Äù)"
      ]
    }
  ];
}

    // --- Mock agenda data like your screenshots
    function mockAgenda(forDate = SELECTED){
      const d0 = startOfDay(forDate);
      const at = (d,h,m=0)=> new Date(d.getFullYear(), d.getMonth(), d.getDate(), h, m);
      const weekday = new Intl.DateTimeFormat(undefined, { weekday:'long' }).format(d0);

      return [{
        label: weekday,
        date: d0,
        focus: "Recovery Day",          // ‚Üê focus lives here
        allDay: [                       // ‚Üê birthdays, etc. (no focus here)
          { title: "" },
          // { title: "Pay bills" },
        ],
        events: [
          { title:"water plants",          start: at(d0,7,30),   color:"green" },
          { title:"precor stretch circuit",start: at(d0,9,30),   color:"blue" },
          { title:"grocery shop",                start: at(d0,11,0), end: at(d0,12,0), color:"gray" },
          { title:"mom dinner",            start: at(d0,19,30),  color:"purple" },
          { title:"sleep",                 start: at(d0,23,15),  color:"blue" },
        ]
      }];
    }

    // ------------ Live fetch helpers (wire these to your API later)
    async function apiGet(path){
      if(path==="/top3") return mockTop3();
      if(path==="/crash7") return mockCrash();
      if(path==="/agenda") return mockAgenda();
      return [];
    }
    async function apiPost(path, payload){
      return { ok:true };
    }

    // ------------ Renderers
    function renderTop3(items){
      const wrap = $('#top3List');
      wrap.innerHTML = "";

      items.forEach((it, idx)=>{
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div class="main">
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
          </div>
        `;

        // toggle complete
        row.querySelector('.chx').addEventListener('click', ()=>{
          row.classList.toggle('done');
        });

        wrap.appendChild(row);
      });
    }

    function renderCrash(items){
      const wrap = $('#crashList');
      wrap.innerHTML = "";
    
      items.forEach((it, dayIdx)=>{
        const due = it.due ? fmtDate(new Date(it.due)) : "‚Äî";
    
        // Day row (header)
        const row = document.createElement('div');
        row.className = 'item';
        row.innerHTML = `
          <label class="chx" aria-label="toggle day done">
            <span class="dot"></span>
          </label>
          <div class="main">
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">Due: ${due}</div>
          </div>
          <button class="btn ghost chev" type="button" aria-expanded="false">‚ñ∏</button>
        `;
    
        // Subtask list
        const sub = document.createElement('div');
        sub.className = 'sublist';
    
        (it.subtasks || []).forEach((st, subIdx)=>{
          const li = document.createElement('div');
          li.className = 'subitem' + (st.completed ? ' done' : '');
          li.innerHTML = `
            <span class="tick" aria-hidden="true"></span>
            <span class="subtxt">${escapeHtml(st.text || st)}</span>
          `;
    
          // Toggle a single subtask
          li.addEventListener('click', ()=>{
            const curr = CRASH_STATE[dayIdx].subtasks[subIdx];
            curr.completed = !curr.completed;
            li.classList.toggle('done', curr.completed);
            localStorage.setItem('crash7', JSON.stringify(CRASH_STATE));
          });
    
          sub.appendChild(li);
        });
    
        // Chevron expand/collapse
        const toggleBtn = row.querySelector('.chev');
        toggleBtn.addEventListener('click', ()=>{
          const open = sub.classList.toggle('open');
          toggleBtn.textContent = open ? '‚ñæ' : '‚ñ∏';
          toggleBtn.setAttribute('aria-expanded', String(open));
        });
    
        // Optional: mark whole day as done (visual only)
        row.querySelector('.chx').addEventListener('click', ()=>{
          row.classList.toggle('done');
        });
    
        wrap.appendChild(row);
        wrap.appendChild(sub);
      });
    }
    
    function getAgendaDone(){
      return storageGet('agendaDone') || {};
    }
    function setAgendaDone(map){
      storageSet('agendaDone', map || {});
    }
    function agendaKey(ev){
      // stable key per event instance
      const s = new Date(ev.start).toISOString();
      const e = ev.end ? new Date(ev.end).toISOString() : '';
      // Include the day in the key to scope it to the day
      const day = startOfDay(new Date(ev.start)).toISOString().split('T')[0];
      return `${day}|${s}|${e}|${ev.title}`;
    }
    
    function renderAgenda(days){
      const wrap = document.getElementById('agenda');
      wrap.innerHTML = "";

      days.forEach(day=>{
        const box = document.createElement('div');
        box.className = 'agenda-day';

        // ---- Header (Focus banner)
        const hd = document.createElement('div');
        hd.className = 'agenda-day-hd';
        const dow = new Intl.DateTimeFormat(undefined, { weekday:'long'}).format(day.date);
        const mdy = new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(day.date);
        hd.innerHTML = `<div>${escapeHtml(day.label)}</div><div class="date">${dow}, ${mdy}</div>`;
        box.appendChild(hd);

        // Replace left header text with focus (if present)
        // use ONLY the explicit focus
        const focus = day.focus || null;
        if (focus){
          hd.firstElementChild.textContent = focus;
          const right = hd.querySelector('.date');
          if (right) right.textContent = "";
        }

        // Add the area row with all-day items
        renderAreaRow(day, box);

        // ---- Timed events (sorted)
        const list = document.createElement('div');
        list.className = 'agenda-list';
        (day.events||[]).sort((a,b)=> +new Date(a.start) - +new Date(b.start));
        (day.events||[]).forEach(ev=>{
          const startStr = fmtTime(new Date(ev.start));
          const endStr   = ev.end ? fmtTime(new Date(ev.end)) : null;

          const row = document.createElement('div');
          row.className = 'agenda-row';
          row.dataset.start = new Date(ev.start).toISOString();
          if (ev.end) row.dataset.end = new Date(ev.end).toISOString();
          
          row.innerHTML = `
            <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
            <div>
              <div class="agenda-title">${escapeHtml(ev.title)}</div>
              <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
            </div>
            <label class="chx" aria-label="Mark ${escapeHtml(ev.title)} done">
              <span class="dot"></span>
            </label>
          `;

          const key = agendaKey(ev);
          const doneMap = getAgendaDone();
          if (doneMap[key]) row.classList.add('done');

          // toggle done on click (checkbox at right)
          row.querySelector('.chx').addEventListener('click', ()=>{
            row.classList.toggle('done');
            const m = getAgendaDone();
            m[key] = row.classList.contains('done');
            setAgendaDone(m);
          });

          list.appendChild(row);
        });
        box.appendChild(list);

        wrap.appendChild(box);
      });
    }

    function ensureNowIndicator(dayBox){
      let el = dayBox.querySelector('.now-indicator');
      if (!el){
        el = document.createElement('div');
        el.className = 'now-indicator';
        dayBox.appendChild(el);
      }
      return el;
    }

    /**
     * Places the 'now' line inside the first .agenda-day box based on time.
     * It interpolates between the DOM positions of the nearest events so it
     * glides smoothly even between rows of different heights.
     */
    function updateNowIndicator(){
      // Only show on the selected day if it is today
      const isToday = +startOfDay(new Date()) === +startOfDay(SELECTED);
      const dayBox = document.querySelector('#agenda .agenda-day');
      if (!dayBox){ return; }

      // Remove if not today
      if (!isToday){
        const old = dayBox.querySelector('.now-indicator');
        if (old) old.remove();
        return;
      }

      const list = dayBox.querySelector('.agenda-list');
      if (!list){ return; }

      const rows = Array.from(list.querySelectorAll('.agenda-row'));
      const now = new Date();

      // Build time ‚Üí y map from rows
      const points = rows.map(row => {
        const start = new Date(row.dataset.start);
        const end = row.dataset.end ? new Date(row.dataset.end) : null;
        const rect = row.getBoundingClientRect();
        const listTop = list.getBoundingClientRect().top + window.scrollY;
        return {
          start, end,
          yTop:  rect.top + window.scrollY - listTop,
          yBot:  rect.bottom + window.scrollY - listTop
        };
      });

      const indicator = ensureNowIndicator(dayBox);
      const listBoxTop = list.getBoundingClientRect().top + window.scrollY;

      // If no events, pin to the very top at current time
      if (points.length === 0){
        indicator.style.top = (listBoxTop + 8 - listBoxTop) + 'px';
        return;
      }

      // Find surrounding interval
      let prev = null, next = null;
      for (let i=0;i<points.length;i++){
        const p = points[i];
        const start = p.start;
        if (now < start){ next = p; break; }
        prev = p;
      }

      let topPx;

      if (!prev){                 // before first event
        const first = points[0];
        const dayStart = new Date(SELECTED); // 00:00 today
        const minutesSpan = (first.start - dayStart) / 60000;
        const prog = Math.min(Math.max((now - dayStart) / (first.start - dayStart), 0), 1);
        topPx = first.yTop * prog;
      } else if (!next){          // after last event
        const last = points[points.length - 1];
        const dayEnd = new Date(SELECTED); dayEnd.setHours(23,59,59,999);
        const prog = Math.min(Math.max((now - (last.end || last.start)) / (dayEnd - (last.end || last.start)), 0), 1);
        topPx = last.yBot + (list.scrollHeight - last.yBot) * prog;
      } else {                    // between prev and next
        const t0 = prev.end || prev.start;            // use end if present
        const t1 = next.start;
        const y0 = prev.yBot;
        const y1 = next.yTop;
        const prog = Math.min(Math.max((now - t0) / (t1 - t0), 0), 1);
        topPx = y0 + (y1 - y0) * prog;
      }

      // Apply position (relative to the agenda-day box)
      const dayTop = dayBox.getBoundingClientRect().top + window.scrollY;
      indicator.style.top = (listBoxTop - dayTop + topPx) + 'px';
    }

    // Kick the updater
    function startNowIndicator(){
      updateNowIndicator();
      updateLiveArea();                  // ‚Üê add
      clearInterval(window.__nowTimer);
      // smooth enough and cheap
      window.__nowTimer = setInterval(()=>{
        updateNowIndicator();
        updateLiveArea();                // ‚Üê add
      }, 60000); // every minute is fine
      // also recalc after resizes
      window.addEventListener('resize', updateNowIndicator);
      window.addEventListener('scroll', updateNowIndicator, { passive:true });
    }

    // ------------ Quick add
    document.addEventListener('DOMContentLoaded', () => {
      const top3Form = $('#top3Form');
      if (top3Form) {
        top3Form.addEventListener('submit', async (e)=>{
          e.preventDefault();
          const fd = new FormData(e.target);
          const title = String(fd.get('title')||'').trim();
          if(!title) return;
          if(DEMO){
            const items = mockTop3();
            items.unshift({title, due:"", completed:false, tag:"#QuickAdd"});
            renderTop3(items);
          }else{
            await apiPost('/reminder', { list:"Top 3", title });
            await loadTop3();
          }
          e.target.reset();
        });
      }
    });

    // ------------ Actions (simulate opening native apps)
    document.addEventListener('DOMContentLoaded', () => {
      const openReminders = $('#openReminders');
      
      if (openReminders) {
        openReminders.addEventListener('click', () => alert('Opening Reminders (simulated)‚Ä¶'));
      }
    });

    // ------------ Loaders
    async function loadTop3(){
      const items = DEMO ? mockTop3() : await apiGet('/top3');
      renderTop3(items);
    }
    async function loadCrash(){
      // try cache first
      if (CRASH_STATE === null) {
        CRASH_STATE = storageGet('crash7');
      }
    
      // fetch if no cache
      if (!Array.isArray(CRASH_STATE) || CRASH_STATE.length === 0) {
        CRASH_STATE = DEMO ? mockCrash() : await apiGet('/crash7');
      }
    
      // normalize: turn string subtasks into {text, completed:false}
      CRASH_STATE = CRASH_STATE.map(day=>{
        const subs = (day.subtasks || []).map(s => {
          return typeof s === 'string' ? { text: s, completed: false } : s;
        });
        return { ...day, subtasks: subs };
      });
    
      storageSet('crash7', CRASH_STATE);
      renderCrash(CRASH_STATE);
    }
    
    function startOfMonth(d){ return new Date(d.getFullYear(), d.getMonth(), 1); }
    function endOfMonth(d){ return new Date(d.getFullYear(), d.getMonth()+1, 0); }
    
    // Big digital clock (minutes; flip to seconds if you want)
    const SHOW_SECONDS = false;

    function renderClockOnce(){
      const box = document.getElementById('miniClock');
      if(!box) return;
      const now = new Date();
      const timeFmt = new Intl.DateTimeFormat(undefined, {
        hour: '2-digit', minute: '2-digit', ...(SHOW_SECONDS ? { second: '2-digit' } : {})
      });

      box.querySelector('.clk-time').textContent = timeFmt.format(now);
      box.querySelector('.clk-sub').textContent = '';
    }

    function startClock(){
      renderClockOnce();
      clearInterval(window.__clkTimer);
      // Update every second if showing seconds; otherwise every 30s to save cycles
      window.__clkTimer = setInterval(renderClockOnce, SHOW_SECONDS ? 1000 : 30000);
    }

    function updateMonthTitle(date) {
      const monthTitle = document.getElementById('monthTitle');
      if (monthTitle) {
        const monthYearFmt = new Intl.DateTimeFormat(undefined, { month: 'long', year: 'numeric' });
        monthTitle.textContent = monthYearFmt.format(date);
      }
    }
    
    function renderMiniMonth(anchor = SELECTED){
      const mount = document.getElementById('miniMonth');
      if(!mount) return;
      
      // Get or create the grid container
      let grid = document.getElementById('mmGrid');
      if (!grid) {
        grid = document.createElement('div');
        grid.id = 'mmGrid';
        mount.appendChild(grid);
      }
      grid.innerHTML = "";

      const monthStart = startOfMonth(anchor);
      const monthEnd   = endOfMonth(anchor);
      
      // Update month title
      updateMonthTitle(anchor);
      // Find grid start on Sunday (or your locale's week start)
      const gridStart = addDays(monthStart, -monthStart.getDay());
      // Headers
      "SMTWTFS".split("").forEach(ch=>{
        const h = document.createElement('div');
        h.className = 'mm-cell mm-head';
        h.textContent = ch;
        grid.appendChild(h);
      });
      // 6 weeks * 7 days
      for(let i=0;i<42;i++){
        const d = addDays(gridStart, i);
        const cell = document.createElement('div');
        cell.className = 'mm-cell';
        if(d.getMonth() !== anchor.getMonth()) cell.classList.add('mm-out');
        if(+startOfDay(d) === +startOfDay(TODAY)) cell.classList.add('mm-today');
        if(+startOfDay(d) === +startOfDay(SELECTED)) cell.classList.add('mm-sel');
        cell.textContent = d.getDate();
        cell.addEventListener('click', ()=>{
          SELECTED = startOfDay(d);
          updateDayTitle(SELECTED);
          loadAgenda();           // re-render agenda for that day
          renderMiniMonth(SELECTED); // re-render month selection
        });
        grid.appendChild(cell);
      }
    }
    
    // Setup day and month navigation after DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
      const dayPrevBtn = document.getElementById('dayPrev');
      const dayNextBtn = document.getElementById('dayNext');
      const monthPrevBtn = document.getElementById('monthPrev');
      const monthNextBtn = document.getElementById('monthNext');
      
      if (dayPrevBtn) {
        dayPrevBtn.addEventListener('click', () => {
          SELECTED = addDays(SELECTED, -1);
          loadAgenda();
          renderMiniMonth(SELECTED);
        });
      }
      
      if (dayNextBtn) {
        dayNextBtn.addEventListener('click', () => {
          SELECTED = addDays(SELECTED, +1);
          loadAgenda();
          renderMiniMonth(SELECTED);
        });
      }
      
      if (monthPrevBtn) {
        monthPrevBtn.addEventListener('click', () => {
          // Go to previous month (same day)
          const currentDay = SELECTED.getDate();
          SELECTED = new Date(SELECTED.getFullYear(), SELECTED.getMonth() - 1, 1);
          // Try to maintain the same day of month if possible
          const lastDayOfMonth = new Date(SELECTED.getFullYear(), SELECTED.getMonth() + 1, 0).getDate();
          SELECTED.setDate(Math.min(currentDay, lastDayOfMonth));
          renderMiniMonth(SELECTED);
        });
      }
      
      if (monthNextBtn) {
        monthNextBtn.addEventListener('click', () => {
          // Go to next month (same day)
          const currentDay = SELECTED.getDate();
          SELECTED = new Date(SELECTED.getFullYear(), SELECTED.getMonth() + 1, 1);
          // Try to maintain the same day of month if possible
          const lastDayOfMonth = new Date(SELECTED.getFullYear(), SELECTED.getMonth() + 1, 0).getDate();
          SELECTED.setDate(Math.min(currentDay, lastDayOfMonth));
          renderMiniMonth(SELECTED);
        });
      }
    });
    function updateDayTitle(d){
      const w = new Intl.DateTimeFormat(undefined,{ weekday:'long'}).format(d);
      const md = new Intl.DateTimeFormat(undefined,{ month:'short', day:'numeric'}).format(d);
      const dayTitle = document.getElementById('dayTitle');
      if (dayTitle) dayTitle.textContent = `${w} ‚Ä¢ ${md}`;
    }
    
    async function loadAgenda(){
      const days = DEMO ? mockAgenda(SELECTED) : await apiGet('/agenda');
      window.__CURRENT_DAY = days[0];  // keep a handle for live updates
      renderAgenda(days);
      updateDayTitle(SELECTED);
      startNowIndicator();   // <‚Äî add this
    }
    
    async function loadAll(){
      const now = new Date();
      const nowHint = $('#nowHint');
      const rangeHint = $('#rangeHint');
      const tzHint = $('#tzHint');
      
      if (nowHint) nowHint.textContent = fmtDate(now);
      if (rangeHint) rangeHint.textContent = `${fmtDate(SELECTED)} ‚Üí ${fmtDate(addDays(SELECTED,6))}`;
      if (tzHint) tzHint.textContent = `Local time: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`;
      
      await Promise.all([loadTop3(), loadCrash(), loadAgenda()]);
      renderMiniMonth(SELECTED);
      startClock();
      startNowIndicator();   // <‚Äî add this
    }

    // ------------ Misc
    document.addEventListener('DOMContentLoaded', () => {
      const yearEl = $('#year');
      if (yearEl) yearEl.textContent = new Date().getFullYear();
      
      // Add demo mode indicator if in demo mode
      if (DEMO) {
        const footer = document.querySelector('footer');
        if (footer) {
          const demoIndicator = document.createElement('div');
          demoIndicator.className = 'demo-indicator';
          demoIndicator.textContent = 'DEMO MODE';
          demoIndicator.style.color = 'var(--muted)';
          demoIndicator.style.fontWeight = 'bold';
          demoIndicator.style.marginTop = '8px';
          footer.appendChild(demoIndicator);
        }
      }
    });
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }

    // Init
    loadAll();
  </script>
</body>
</html>
</file>

</files>
</file>

<file path="scripts/pull_reminders_local.sh">
#!/bin/bash
# pull_reminders_local.sh
# Converts LifeOrganizer CSV reminders to JSON for Jenquin-site calendar

set -e

# Paths
SOURCE_DIR="/Volumes/storage/projects/LifeOrganizer/life_organizer/modules/organized_reminders/data/deduped_reminders"
OUTPUT_FILE="/Volumes/storage/projects/Jenquin-site/data/reminders.local.json"
TEMP_FILE="/tmp/reminders_processing.json"

echo "üîÑ Pulling reminders from LifeOrganizer..."

# Find the newest CSV file
NEWEST_CSV=$(find "$SOURCE_DIR" -name "*.csv" -type f | sort | tail -1)

if [ -z "$NEWEST_CSV" ]; then
    echo "‚ùå No CSV files found in $SOURCE_DIR"
    exit 1
fi

echo "üìÑ Processing: $(basename "$NEWEST_CSV")"

# Create temp directory for processing
mkdir -p "$(dirname "$TEMP_FILE")"

# Convert CSV to JSON using Python
export NEWEST_CSV
export TEMP_FILE
python3 << EOF
import csv
import json
import sys
from datetime import datetime
import os

source_file = os.environ['NEWEST_CSV']
temp_file = os.environ['TEMP_FILE']

items = []
count = 0
valid_count = 0

try:
    with open(source_file, 'r', encoding='utf-8') as csvfile:
        reader = csv.DictReader(csvfile)
        
        for row in reader:
            count += 1
            
            # Skip completed items
            if row.get('completed', '').lower() in ['yes', 'true', '1']:
                continue
                
            # Skip items with invalid due dates
            due_str = row.get('due', '').strip()
            if not due_str or 'Error:' in due_str or due_str == 'No':
                continue
                
            try:
                # Parse the due date
                due_dt = datetime.strptime(due_str, '%Y-%m-%d %H:%M:%S')
                due_iso = due_dt.isoformat()
                
                # Convert to expected format
                item = {
                    'title': row.get('title', 'Untitled').strip(),
                    'dueISO': due_iso,
                    'list': row.get('list', 'Default').strip(),
                    'flagged': False,  # CSV doesn't have flagged field
                    'priority': 0,     # CSV doesn't have priority field
                    'id': row.get('id', '').strip()
                }
                
                items.append(item)
                valid_count += 1
                
            except ValueError:
                # Skip items with unparseable dates
                continue
    
    # Sort by due date
    items.sort(key=lambda x: x['dueISO'])
    
    # Create output structure
    output = {
        'items': items,
        'count': valid_count,
        'total_processed': count,
        'exported_at': datetime.now().isoformat(),
        'source_file': os.path.basename(source_file)
    }
    
    # Write to temp file
    with open(temp_file, 'w', encoding='utf-8') as outfile:
        json.dump(output, outfile, indent=2, ensure_ascii=False)
    
    print(f"‚úÖ Processed {count} total rows, found {valid_count} valid scheduled reminders")

except Exception as e:
    print(f"‚ùå Error processing CSV: {e}")
    sys.exit(1)
EOF

# Check if Python processing succeeded
if [ $? -ne 0 ]; then
    echo "‚ùå Failed to process CSV data"
    exit 1
fi

# Ensure output directory exists
mkdir -p "$(dirname "$OUTPUT_FILE")"

# Move temp file to final location
mv "$TEMP_FILE" "$OUTPUT_FILE"

echo "üìÑ Output written to: $OUTPUT_FILE"
echo "üîç Preview:"
head -20 "$OUTPUT_FILE"

echo ""
echo "‚úÖ Reminders pull complete!"
echo "üí° Usage: python3 -m http.server 8080 from Jenquin-site root"
echo "üåê Then open: http://localhost:8080/sandbox_calendar_agenda_card.html"
</file>

<file path=".gitignore">
/data/
</file>

<file path="archive_sandbox/sanbox_1.2">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agenda Card ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.48}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris‚Äô Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris‚Äô Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [
  { label:"Prep & Maintenance",       start: at(7,30),  end: at(8,0),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(10,15), color: AREA_COLORS.health },
  { label:"Flex",                     start: at(11,0),  end: at(12,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Administrative",          start: at(14,0),  end: at(16,0),  color: AREA_COLORS.administrative },
  { label:"Social & Relationships",   start: at(19,30), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,15), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
  }
  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock ‚ÄúFlex ¬∑ 3:33 PM‚Äì7:30 PM‚Äù */
  (function seedAreaPill(){
    const p = document.getElementById('areaPill');
    const seg = ZONES[0];
    if (seg) p.textContent = `${seg.label} ¬∑ ${fmtTime(seg.start)}‚Äì${fmtTime(seg.end)}`;
  })();
</script>
</body>
</html>
</file>

<file path="archive_sandbox/sandbox_1.html">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agenda Card ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.22}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris‚Äô Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris‚Äô Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  const ZONES = [
    { label:"Flex",   start: at(12,47), end: at(19,30), color:'rgba(125,242,201,.45)' }, // example
    // add more segments if you like:
    // { label:"Review", start: at(9,0), end: at(12,30), color:'rgba(255,176,90,.45)' },
  ];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
  }
  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock ‚ÄúFlex ¬∑ 3:33 PM‚Äì7:30 PM‚Äù */
  (function seedAreaPill(){
    const p = document.getElementById('areaPill');
    const seg = ZONES[0];
    if (seg) p.textContent = `${seg.label} ¬∑ ${fmtTime(seg.start)}‚Äì${fmtTime(seg.end)}`;
  })();
</script>
</body>
</html>
</file>

<file path="archive_sandbox/sandbox.html">
<!doctype html>
<meta charset="utf-8" />
<title>Zone Tracker Wireframe</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  :root{
    --bg:#0b0c10; --panel:#111318; --text:#e9edf5; --muted:#7b8496; --border:#20232b;
    --ok:#76ff9b;
    --accent:#6ea8fe; --accent-2:#7df2c9;
  }
  body{margin:0;background:var(--bg);color:var(--text);font:14px/1.4 ui-sans-serif,system-ui}
  .panel{max-width:920px;margin:24px auto;padding:14px;border:1px solid var(--border);border-radius:14px;background:var(--panel)}
  .hd{display:flex;align-items:center;gap:10px;margin-bottom:8px}
  .hd h2{margin:0;font-size:14px;letter-spacing:.3px}
  /* --- Focus / zone tracker --- */
  .zone-wrap{display:flex;flex-direction:column;gap:8px;margin-bottom:10px}
  .zone-bar{
    position:relative;height:28px;border:1px solid var(--border);border-radius:999px;
    background:linear-gradient(180deg,rgba(255,255,255,.01),rgba(0,0,0,.06));
    overflow:hidden;
  }
  /* subtle segment bands */
  .zone-seg{position:absolute;top:0;bottom:0;opacity:.18}
  .seg-flex{background:#8aa0ff}
  .seg-review{background:#ffcc66}
  .seg-prep{background:#7df2c9}
  .seg-rest{background:#b38aff}
  /* progress fill */
  .zone-fill{
    position:absolute;inset:0 auto 0 0;width:0%;
    background:linear-gradient(90deg,rgba(255,255,255,.08),rgba(255,255,255,.02));
    backdrop-filter:saturate(120%) brightness(110%);
  }
  /* glow dot at "now" */
  .zone-dot{
    position:absolute;top:50%;transform:translate(-50%,-50%);
    width:8px;height:8px;border-radius:50%;
    background:rgba(255,255,255,.85);box-shadow:0 0 8px rgba(255,255,255,.45);
    left:0%;
  }
  /* labels row: current + upcoming */
  .zone-labels{display:flex;gap:8px;align-items:center}
  .pill{
    display:inline-flex;align-items:center;gap:6px;
    padding:6px 10px;border:1px solid var(--border);border-radius:999px;
    background:linear-gradient(180deg,rgba(255,255,255,.01),rgba(0,0,0,.05)); color:var(--muted);
    white-space:nowrap;font-size:12px;
  }
  .pill.current{border-color:rgba(255,255,255,.08);background:linear-gradient(180deg,rgba(255,255,255,.015),rgba(0,0,0,.12))}
  /* all-day row */
  .allday{display:flex;gap:8px;align-items:center;overflow:auto}
  .allday .pill{font-size:12px}
  /* agenda list (just for placement) */
  .row{display:grid;grid-template-columns:20px 1fr auto;gap:10px;align-items:center;
       padding:10px;border-top:1px solid var(--border)}
  .row:first-child{border-top:none}
  .dot{width:10px;height:10px;border-radius:50%;background:#6ea8fe;opacity:.9}
  .time{color:var(--muted);font-size:12px}
</style>

<div class="panel">
  <div class="hd"><h2>Saturday ‚Ä¢ Oct 11</h2></div>

  <!-- Focus + zone tracker -->
  <div class="zone-wrap">
    <div class="zone-bar" id="zoneBar">
      <!-- segments (left‚Üíright) will be positioned by JS -->
      <div class="zone-fill" id="zoneFill"></div>
      <div class="zone-dot" id="zoneDot"></div>
    </div>
    <!-- labels: current + upcoming -->
    <div class="zone-labels" id="zoneLabels"></div>
    <!-- all-day items -->
    <div class="allday" id="alldayLane"></div>
  </div>

  <!-- Minimal agenda just for context -->
  <div class="row"><span class="dot"></span><div>water plants<br><span class="time">7:30 AM</span></div><span class="time">7:30 AM</span></div>
  <div class="row"><span class="dot" style="background:#b38aff"></span><div>precor stretch circuit<br><span class="time">9:30 AM</span></div><span class="time">9:30 AM</span></div>
  <div class="row"><span class="dot" style="background:#9aa3b2"></span><div>grocery shop<br><span class="time">11:00 AM‚Äì12:00 PM</span></div><span class="time">11:00 AM</span></div>
</div>

<script>
  // ------- mock day + zones (change times to see effect)
  const day = new Date(); // today
  const at = (h,m=0)=> new Date(day.getFullYear(), day.getMonth(), day.getDate(), h, m);
  const ZONES = [
    { label:"Flex",            start: at(8,  0), end: at(12, 0), cls:"seg-flex"   },
    { label:"Review",          start: at(12, 0), end: at(18,30), cls:"seg-review" },
    { label:"Prep",            start: at(18,30), end: at(19,30), cls:"seg-prep"   },
    { label:"Rest",            start: at(19,30), end: at(21, 0), cls:"seg-rest"   },
  ];
  const ALLDAY = ["Kris‚Äô Birthday", "Anniversary"];

  const bar = document.getElementById('zoneBar');
  const fill = document.getElementById('zoneFill');
  const dot  = document.getElementById('zoneDot');
  const labels = document.getElementById('zoneLabels');
  const allday = document.getElementById('alldayLane');

  // render segments as absolute blocks
  function renderSegments(){
    const dayStart = new Date(day.getFullYear(), day.getMonth(), day.getDate(), 0,0,0);
    const dayEnd   = new Date(day.getFullYear(), day.getMonth(), day.getDate(), 24,0,0);
    const totalMs = dayEnd - dayStart;

    ZONES.forEach(z=>{
      const left = ((z.start - dayStart)/totalMs) * 100;
      const width = ((z.end - z.start)/totalMs) * 100;
      const seg = document.createElement('div');
      seg.className = `zone-seg ${z.cls}`;
      seg.style.left = left + '%';
      seg.style.width = width + '%';
      bar.appendChild(seg);
    });
  }

  // compute current + upcoming (simple)
  function currentZone(now=new Date()){
    return ZONES.find(z => now >= z.start && now < z.end) || null;
  }
  function upcomingZones(now=new Date(), n=3){
    const ups = ZONES.filter(z => z.start > now).map(z=>z.label);
    return ups.slice(0, n);
  }

  function updateBar(){
    const now = new Date();
    const dayStart = new Date(day.getFullYear(), day.getMonth(), day.getDate(), 0,0,0);
    const dayEnd   = new Date(day.getFullYear(), day.getMonth(), day.getDate(), 24,0,0);
    const totalMs = dayEnd - dayStart;
    const pct = Math.max(0, Math.min(1, (now - dayStart)/totalMs)) * 100;

    fill.style.width = pct + '%';
    dot.style.left = pct + '%';

    // labels row: current + next two
    labels.innerHTML = '';
    const cur = currentZone(now);
    const pill = (txt,isCurrent=false)=>{
      const el = document.createElement('span');
      el.className = 'pill' + (isCurrent ? ' current' : '');
      el.textContent = txt;
      return el;
    };
    labels.appendChild(pill(cur ? cur.label : 'Flex', true));
    upcomingZones(now, 2).forEach(lbl => labels.appendChild(pill(lbl)));
  }

  function renderAllday(){
    allday.innerHTML = '';
    ALLDAY.forEach(t=>{
      const p = document.createElement('span');
      p.className = 'pill';
      p.textContent = t;
      allday.appendChild(p);
    });
  }

  renderSegments();
  renderAllday();
  updateBar();
  // gentle updates
  setInterval(updateBar, 60000);
  window.addEventListener('resize', updateBar);
</script>
</file>

<file path="Backups/index_1.1.html">
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jenquin.io ‚Äî Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg: #0b0c10;
      --panel: #111318;
      --muted: #7b8496;
      --text: #e9edf5;
      --accent: #6ea8fe;
      --accent-2: #7df2c9;
      --danger: #ff7a7a;
      --ok: #76ff9b;
      --border: #20232b;
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 14px;
      --radius-sm: 10px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg: #f6f7fb;
        --panel: #ffffff;
        --muted: #6b7280;
        --text: #0f172a;
        --accent: #2556ff;
        --accent-2: #0ea5e9;
        --border: #e5e7eb;
        --shadow: 0 10px 24px rgba(0,0,0,.08);
      }
    }

    *{ box-sizing: border-box }
    html,body{ height:100% }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
                  radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%), var(--bg);
      color: var(--text);
      line-height:1.4;
    }

    /* Shell */
    .wrap{
      max-width: 1200px;
      margin: 0 auto;
      padding: 28px 18px 40px;
    }

    header{
      display:flex; align-items:center; justify-content:space-between;
      gap: 16px; margin-bottom: 22px;
    }
    .brand{
      display:flex; align-items:center; gap:14px;
    }
    .logo{
      width:44px; height:44px; border-radius:12px;
      background:
        radial-gradient(60% 100% at 30% 10%, rgba(125,242,201,.3), transparent 60%),
        linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: var(--shadow);
    }
    .brand h1{
      font-size: 20px; margin: 0;
      letter-spacing:.4px;
    }
    .brand .sub{ color: var(--muted); font-size:13px; margin-top:2px }
    .actions{ display:flex; align-items:center; gap:10px }
    .btn{
      appearance:none; border:1px solid var(--border); color:var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      padding:10px 14px; border-radius:12px; cursor:pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18) }
    .btn.primary{
      background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.05));
      border-color: rgba(110,168,254,.35); color: white;
    }
    .btn.ghost{ background: transparent; }

    /* Layout */
    .grid{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 18px;
    }
    @media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }

    /* Panel */
    .panel{
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: clip;
    }
    .panel .hd{
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      padding: 14px 16px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    }
    .panel .hd h2{ margin:0; font-size: 15px; letter-spacing:.3px }
    .panel .hd .hint{ color:var(--muted); font-size:12px }
    .panel .bd{ padding: 12px 16px }
    .panel .ft{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; flex-wrap:wrap }

    /* Lists */
    .list{ display:flex; flex-direction:column; gap:10px }
    .item{
      display:grid; grid-template-columns: 22px 1fr auto; align-items:center; gap: 10px;
      padding:10px; border:1px solid var(--border); border-radius: var(--radius-sm);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    }
    .chx{ width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer }
    .chx input{ display:none }
    .chx .dot{ width:10px; height:10px; border-radius:3px; background:transparent; }
    .item.done .title{ color: var(--muted); text-decoration: line-through }
    .item.done .chx .dot{ background: var(--ok); }
    .title{ font-size:14px; }
    .meta{ color: var(--muted); font-size:12px }
    .tag{
      font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border);
      color: var(--muted);
    }
    .kebab{ opacity:.7; }
    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }

    /* Quick add */
    .quick{
      display:flex; gap:10px; align-items:center; width:100%;
    }
    .in{
      flex:1; min-width: 160px;
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }
    .select{
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }

    /* Agenda (Apple-style list) */
    .agenda-day{
      border:1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      margin-bottom: 12px; overflow: hidden;
    }
    .agenda-day-hd{
      display:flex; justify-content:space-between; align-items:center;
      padding:10px 12px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      font-size:13px; letter-spacing:.2px;
    }
    .agenda-day-hd .date{ color: var(--muted) }
    .agenda-list{ display:flex; flex-direction:column }
    .agenda-row{
      display:grid; grid-template-columns: 20px 1fr auto; align-items:center;
      gap:10px; padding:10px 12px; border-top:1px solid var(--border);
    }
    .agenda-row:first-child{ border-top: none }
    .agenda-row .dot{
      width:10px; height:10px; border-radius:50%;
      border:2px solid var(--border);
    }
    .dot.blue{ background: rgba(110,168,254,.9) }
    .dot.green{ background: rgba(125,242,201,.95) }
    .dot.purple{ background: #b38aff }
    .dot.orange{ background: #ffb05a }
    .dot.gray{ background: #9aa3b2 }
    .agenda-title{ font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
    .agenda-meta{ color: var(--muted); font-size:12px }
    .agenda-badge{
      font-size:11px; padding:4px 8px; border-radius:999px;
      border:1px solid var(--border); color: var(--muted);
    }
    .agenda-allday{
      display:flex; gap:8px; padding:10px 12px; border-top:1px solid var(--border); flex-wrap:wrap;
    }
    .allday-pill{
      font-size:12px; padding:6px 10px; border-radius:999px;
      border:1px solid var(--border); background: rgba(255,255,255,.02);
      white-space:nowrap;
    }

    footer{
      margin-top: 24px; color: var(--muted); font-size:12px; text-align:center;
    }
    .sep{ height:1px; background: var(--border); margin: 8px 0 }
    .faded{ color: var(--muted) }
    .badge{
      font-size:11px; padding:3px 8px; border-radius:999px; background: rgba(110,168,254,.15); border:1px solid rgba(110,168,254,.35);
      color: #dbe9ff;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>jenquin.io</h1>
          <div class="sub">Jenquin ‚Ä¢ Personal Ops Dashboard</div>
        </div>
      </div>
      <div class="actions">
        <button class="btn ghost" id="toggleDemo">Demo: On</button>
        <button class="btn" id="openReminders">Open Reminders</button>
        <button class="btn primary" id="quickAddTop">+ Quick Add</button>
      </div>
    </header>

    <div class="grid">
      <!-- Left column: Top 3 + Crash 7 stacked -->
      <div class="stack">
        <section class="panel" id="top3Panel">
          <div class="hd">
            <h2>Top 3 Today</h2>
            <div class="row">
              <span class="badge" id="dayLabel">Today</span>
              <span class="hint" id="nowHint">‚Äî</span>
            </div>
          </div>
          <div class="bd">
            <div class="list" id="top3List"></div>
          </div>
          <div class="ft">
            <form class="quick" id="top3Form">
              <input class="in" type="text" placeholder="Quick add to Top 3‚Ä¶" name="title" required />
              <button class="btn" type="submit">Add</button>
              <button class="btn ghost" type="button" id="revealTop3">Reveal in Reminders</button>
            </form>
          </div>
        </section>

        <section class="panel" id="crashPanel" style="margin-top:18px;">
          <div class="hd">
            <h2>7-Day Crash Plan</h2>
            <div class="hint" id="rangeHint">‚Äî</div>
          </div>
          <div class="bd">
            <div class="list" id="crashList"></div>
          </div>
          <div class="ft">
            <button class="btn ghost" id="revealCrash">Reveal Crash Plan</button>
          </div>
        </section>
      </div>

      <!-- Right column: Agenda (Apple-style) -->
      <section class="panel" id="agendaPanel">
        <div class="hd">
          <h2>Agenda</h2>
          <div class="hint" id="tzHint">‚Äî</div>
        </div>
        <div class="bd">
          <div id="agenda"></div>
        </div>
        <div class="ft">
          <button class="btn ghost" id="openCalendar">Open Calendar</button>
        </div>
      </section>
    </div>

    <footer>
      ¬© <span id="year"></span> jenquin.io ‚Ä¢ v1 preview ¬∑ Data stays in Apple apps ¬∑ Clicks may open native apps
    </footer>
  </div>

  <script>
    // ------------ Utilities
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    function fmtTime(d){
      return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
    }
    function fmtDate(d){
      return new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(d);
    }
    function addDays(d, n){ const c = new Date(d); c.setDate(c.getDate()+n); return c; }

    // ------------ Demo toggle (mock vs live fetch)
    let DEMO = true;
    $('#toggleDemo').addEventListener('click', () => {
      DEMO = !DEMO;
      $('#toggleDemo').textContent = `Demo: ${DEMO ? 'On' : 'Off'}`;
      loadAll();
    });

    // ------------ Mock data
    function mockTop3(){
      return [
        { title: "cut front grass", due: "", completed: false, tag:"#prepandmaintenance" },
        { title: "pay electric", due: "", completed: false, tag:"#administrative" },
        { title: "migrate webhook to tailscale", due: "", completed: false, tag:"#projectwork" },
      ];
    }
    function mockCrash(){
  const now = new Date();
  const day = (n)=> addDays(now, n-1); // Day 1=today, Day 2=+1, etc.

  return [
    {
      day: 1,
      title: "Day 1 ‚Äì Core Finances",
      due: day(1),
      subtasks: [
        "Gather last 3‚Äì6 months bank statements",
        "Gather household bills (utilities, phone, internet, HOA, insurance)",
        "Print/save mortgage statements & lender letters"
      ]
    },
    {
      day: 2,
      title: "Day 2 ‚Äì Ledger + Food Stamps",
      due: day(2),
      subtasks: [
        "Finalize expense ledger (food, gas, health, debt)",
        "Apply for food stamps (use bank statements + ledger as proof)"
      ]
    },
    {
      day: 3,
      title: "Day 3 ‚Äì Mom‚Äôs Medical Packet (Part 1)",
      due: day(3),
      subtasks: [
        "Collect hospital/clinic records (copies/printouts)",
        "Gather prescriptions + receipts"
      ]
    },
    {
      day: 4,
      title: "Day 4 ‚Äì Mom‚Äôs Medical Packet (Part 2)",
      due: day(4),
      subtasks: [
        "Write daily function notes (3‚Äì5 days is enough)",
        "Request doctor‚Äôs letter (or confirm appointment/availability)"
      ]
    },
    {
      day: 5,
      title: "Day 5 ‚Äì Bankruptcy Packet (Part 1)",
      due: day(5),
      subtasks: [
        "Gather credit card + loan statements",
        "List creditors + balances",
        "List assets (truck, tools, furniture, gear)"
      ]
    },
    {
      day: 6,
      title: "Day 6 ‚Äì Bankruptcy Packet (Part 2)",
      due: day(6),
      subtasks: [
        "Review tax returns (last 2 years)",
        "Align ledger with tax numbers (rough match is fine)",
        "Organize everything into Shared Packet folder system"
      ]
    },
    {
      day: 7,
      title: "Day 7 ‚Äì Compile & Review",
      due: day(7),
      subtasks: [
        "Assemble Disability packet (Mom) ‚Äî submission ready",
        "Assemble Bankruptcy packet ‚Äî file-ready (hold unless needed)",
        "Double-check folders, label clearly (‚Äúready to send‚Äù)"
      ]
    }
  ];
}

    // --- Mock agenda data like your screenshots
    function mockAgenda(){
    const now = new Date();
    const d1 = new Date(now);
    d1.setDate(d1.getDate() + 1); // Example: Monday (tomorrow)
    const at = (d, h, m = 0) => new Date(d.getFullYear(), d.getMonth(), d.getDate(), h, m);

    return [
        {
        label: "Monday",
        date: d1,
        allDay: [{ title: "Recovery Focused" }],
        events: [
            
            { title: "water plants", start: at(d1, 7, 30), color: "green" },
            { title: "precor stretch circuit", start: at(d1, 9, 30), color: "blue" },
            { title: "Health", start: at(d1, 9, 30), end: at(d1, 10, 0), color: "gray" },
            { title: "mom dinner", start: at(d1, 19, 30), color: "purple" },
            { title: "sleep", start: at(d1, 23, 15), color: "blue" },
        ],
        },
    ];
    }

    // ------------ Live fetch helpers (wire these to your API later)
    async function apiGet(path){
      if(path==="/top3") return mockTop3();
      if(path==="/crash7") return mockCrash();
      if(path==="/agenda") return mockAgenda();
      return [];
    }
    async function apiPost(path, payload){
      return { ok:true };
    }

    // ------------ Renderers
    function renderTop3(items){
      const wrap = $('#top3List'); wrap.innerHTML = "";
      items.forEach((it, idx)=>{
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div>
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
          </div>
          <div class="row">
            <span class="tag">Top 3</span>
            <button class="btn ghost kebab" data-action="remove" title="Remove">‚ãØ</button>
          </div>
        `;
        row.querySelector('.chx').addEventListener('click', async ()=>{
          row.classList.toggle('done');
        });
        row.querySelector('[data-action="remove"]').addEventListener('click', async ()=>{
          row.style.opacity = .5;
          setTimeout(()=> row.remove(), 180);
        });
        wrap.appendChild(row);
      });
    }

    function renderCrash(items){
    const wrap = $('#crashList'); 
    wrap.innerHTML = "";

    items.forEach((it)=>{
        const due = it.due ? fmtDate(new Date(it.due)) : "‚Äî";

        // Row (day header)
        const row = document.createElement('div');
        row.className = 'item';
        row.innerHTML = `
        <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
        </label>
        <div>
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">Due: ${due}</div>
        </div>
        <div class="row">
            <span class="tag">Crash 7</span>
            <button class="btn ghost chev" type="button" aria-expanded="false">‚ñ∏</button>
        </div>
        `;

        // Subtask list (hidden by default)
        const sub = document.createElement('div');
        sub.className = 'sublist';
        (it.subtasks || []).forEach(txt=>{
        const li = document.createElement('div');
        li.className = 'subitem';
        li.innerHTML = `
            <span class="tick" aria-hidden="true"></span>
            <span class="subtxt">${escapeHtml(txt)}</span>
        `;
        sub.appendChild(li);
        });

        // Toggle
        const toggleBtn = row.querySelector('.chev');
        toggleBtn.addEventListener('click', ()=>{
        const open = sub.classList.toggle('open');
        toggleBtn.textContent = open ? '‚ñæ' : '‚ñ∏';
        toggleBtn.setAttribute('aria-expanded', String(open));
        });

        // Optional: strike-through the day when checkbox clicked
        row.querySelector('.chx').addEventListener('click', ()=>{
        row.classList.toggle('done');
        });

        wrap.appendChild(row);
        wrap.appendChild(sub);
    });
    }
    
    function renderAgenda(days){
    const wrap = document.getElementById('agenda');
    wrap.innerHTML = "";
    days.forEach(day=>{
        const box = document.createElement('div');
        box.className = 'agenda-day';

        const hd = document.createElement('div');
        hd.className = 'agenda-day-hd';
        const dow = new Intl.DateTimeFormat(undefined, { weekday:'long'}).format(day.date);
        const mdy = new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(day.date);
        hd.innerHTML = `<div>${escapeHtml(day.label)}</div><div class="date">${dow}, ${mdy}</div>`;
        box.appendChild(hd);

        // All-day pills
        if(day.allDay && day.allDay.length){
        const ad = document.createElement('div');
        ad.className = 'agenda-allday';
        day.allDay.forEach(a=>{
            const pill = document.createElement('span');
            pill.className = 'allday-pill';
            pill.textContent = a.title;
            ad.appendChild(pill);
        });
        box.appendChild(ad);
        }

        // Timed events (sorted)
        const list = document.createElement('div');
        list.className = 'agenda-list';
        (day.events||[]).sort((a,b)=> +new Date(a.start) - +new Date(b.start));
        (day.events||[]).forEach(ev=>{
        const startStr = fmtTime(new Date(ev.start));       // <-- exact time (e.g., 7:30 AM)
        const endStr   = ev.end ? fmtTime(new Date(ev.end)) : null;

        const row = document.createElement('div');
        row.className = 'agenda-row';
        row.innerHTML = `
            <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
            <div>
            <div class="agenda-title">${escapeHtml(ev.title)}</div>
            <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
            </div>
            <span class="agenda-badge">${startStr}</span>  <!-- matches left -->
        `;
        list.appendChild(row);
        });
        box.appendChild(list);

        wrap.appendChild(box);
    });
    }

    // ------------ Quick add
    $('#top3Form').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const fd = new FormData(e.target);
      const title = String(fd.get('title')||'').trim();
      if(!title) return;
      if(DEMO){
        const items = mockTop3();
        items.unshift({title, due:"", completed:false, tag:"#QuickAdd"});
        renderTop3(items);
      }else{
        await apiPost('/reminder', { list:"Top 3", title });
        await loadTop3();
      }
      e.target.reset();
    });

    // ------------ Actions (simulate opening native apps)
    $('#revealTop3').addEventListener('click', ()=> alert('Would call /open { list:"Top 3" } ‚Üí opens Reminders'));
    $('#revealCrash').addEventListener('click', ()=> alert('Would call /open { list:"Crash Plan" } ‚Üí opens Reminders'));
    $('#openCalendar').addEventListener('click', ()=> alert('Would call /open-calendar ‚Üí opens Calendar'));
    $('#openReminders').addEventListener('click', ()=> alert('Opening Reminders (simulated)‚Ä¶'));
    $('#quickAddTop').addEventListener('click', ()=> $('.in[name="title"]').focus());

    // ------------ Loaders
    async function loadTop3(){
      const items = DEMO ? mockTop3() : await apiGet('/top3');
      renderTop3(items);
    }
    async function loadCrash(){
      const items = DEMO ? mockCrash() : await apiGet('/crash7');
      renderCrash(items);
    }
    async function loadAgenda(){
      const days = DEMO ? mockAgenda() : await apiGet('/agenda');
      renderAgenda(days);
    }
    async function loadAll(){
      const now = new Date();
      $('#nowHint').textContent = fmtDate(now) + " ¬∑ " + fmtTime(now);
      $('#rangeHint').textContent = `${fmtDate(now)} ‚Üí ${fmtDate(addDays(now,6))}`;
      $('#tzHint').textContent = `Local time: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`;
      await Promise.all([loadTop3(), loadCrash(), loadAgenda()]);
    }

    // ------------ Misc
    $('#year').textContent = new Date().getFullYear();
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }

    // Init
    loadAll();
  </script>
</body>
</html>
</file>

<file path="Backups/index_1.2.html">
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jenquin.io ‚Äî Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg: #0b0c10;
      --panel: #111318;
      --muted: #7b8496;
      --text: #e9edf5;
      --accent: #6ea8fe;
      --accent-2: #7df2c9;
      --danger: #ff7a7a;
      --ok: #76ff9b;
      --border: #20232b;
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 14px;
      --radius-sm: 10px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg: #f6f7fb;
        --panel: #ffffff;
        --muted: #6b7280;
        --text: #0f172a;
        --accent: #2556ff;
        --accent-2: #0ea5e9;
        --border: #e5e7eb;
        --shadow: 0 10px 24px rgba(0,0,0,.08);
      }
    }

    *{ box-sizing: border-box }
    html,body{ height:100% }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
                  radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%), var(--bg);
      color: var(--text);
      line-height:1.4;
    }

    /* Shell */
    .wrap{
      max-width: 1200px;
      margin: 0 auto;
      padding: 28px 18px 40px;
    }

    header{
      display:flex; align-items:center; justify-content:space-between;
      gap: 16px; margin-bottom: 22px;
    }
    .brand{
      display:flex; align-items:center; gap:14px;
    }
    .logo{
      width:44px; height:44px; border-radius:12px;
      background:
        radial-gradient(60% 100% at 30% 10%, rgba(125,242,201,.3), transparent 60%),
        linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: var(--shadow);
    }
    .brand h1{
      font-size: 20px; margin: 0;
      letter-spacing:.4px;
    }
    .brand .sub{ color: var(--muted); font-size:13px; margin-top:2px }
    .actions{ display:flex; align-items:center; gap:10px }
    .btn{
      appearance:none; border:1px solid var(--border); color:var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      padding:10px 14px; border-radius:12px; cursor:pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18) }
    .btn.primary{
      background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.05));
      border-color: rgba(110,168,254,.35); color: white;
    }
    .btn.ghost{ background: transparent; }

    /* Layout */
    .grid{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 18px;
    }
    @media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }

    /* Panel */
    .panel{
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: clip;
    }
    .panel .hd{
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      padding: 14px 16px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    }
    .panel .hd h2{ margin:0; font-size: 15px; letter-spacing:.3px }
    .panel .hd .hint{ color:var(--muted); font-size:12px }
    .panel .bd{ padding: 12px 16px }
    .panel .ft{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; flex-wrap:wrap }

    /* Lists */
    .list{ display:flex; flex-direction:column; gap:10px }
    .item{
      display:grid; grid-template-columns: 22px 1fr auto; align-items:center; gap: 10px;
      padding:10px; border:1px solid var(--border); border-radius: var(--radius-sm);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    }
    .chx{ width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer }
    .chx input{ display:none }
    .chx .dot{ width:10px; height:10px; border-radius:3px; background:transparent; }
    .item.done .title{ color: var(--muted); text-decoration: line-through }
    .item.done .chx .dot{ background: var(--ok); }
    .title{ font-size:14px; }
    .meta{ color: var(--muted); font-size:12px }
    .tag{
      font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border);
      color: var(--muted);
    }
    .kebab{ opacity:.7; }
    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }

    /* Quick add */
    .quick{
      display:flex; gap:10px; align-items:center; width:100%;
    }
    .in{
      flex:1; min-width: 160px;
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }
    .select{
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }

    /* Agenda (Apple-style list) */
    .agenda-day{
      border:1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      margin-bottom: 12px; overflow: hidden;
    }
    .agenda-day-hd{
      display:flex; justify-content:space-between; align-items:center;
      padding:10px 12px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      font-size:13px; letter-spacing:.2px;
    }
    .agenda-day-hd .date{ color: var(--muted) }
    .agenda-list{ display:flex; flex-direction:column }
    .agenda-row{
      display:grid; grid-template-columns: 20px 1fr auto; align-items:center;
      gap:10px; padding:10px 12px; border-top:1px solid var(--border);
    }
    .agenda-row:first-child{ border-top: none }
    .agenda-row .dot{
      width:10px; height:10px; border-radius:50%;
      border:2px solid var(--border);
    }
    .dot.blue{ background: rgba(110,168,254,.9) }
    .dot.green{ background: rgba(125,242,201,.95) }
    .dot.purple{ background: #b38aff }
    .dot.orange{ background: #ffb05a }
    .dot.gray{ background: #9aa3b2 }
    .agenda-title{ font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
    .agenda-meta{ color: var(--muted); font-size:12px }
    .agenda-badge{
      font-size:11px; padding:4px 8px; border-radius:999px;
      border:1px solid var(--border); color: var(--muted);
    }
    .agenda-allday{
      display:flex; gap:8px; padding:10px 12px; border-top:1px solid var(--border); flex-wrap:wrap;
    }
    .allday-pill{
      font-size:12px; padding:6px 10px; border-radius:999px;
      border:1px solid var(--border); background: rgba(255,255,255,.02);
      white-space:nowrap;
    }

    footer{
      margin-top: 24px; color: var(--muted); font-size:12px; text-align:center;
    }
    .sep{ height:1px; background: var(--border); margin: 8px 0 }
    .faded{ color: var(--muted) }
    .badge{
      font-size:11px; padding:3px 8px; border-radius:999px; background: rgba(110,168,254,.15); border:1px solid rgba(110,168,254,.35);
      color: #dbe9ff;
    }
    
    /* Crash subtasks (accordion) */
    .chev{ font-size:14px; border:1px solid var(--border); border-radius:8px; padding:4px 8px; }
    .sublist{
      display:none; margin:8px 0 0 38px;
      padding:8px 10px; border-left:2px solid var(--border);
      display:none; gap:8px; flex-direction:column;
    }
    .sublist.open{ display:flex; }
    .subitem{ display:flex; align-items:center; gap:8px; font-size:13px; }
    .subitem .tick{ width:12px; height:12px; border-radius:3px; border:1px solid var(--border); background:rgba(0,0,0,.04); }
    .subitem.done .subtxt{ color:var(--muted); text-decoration:line-through; }
    
    .item .main{
      flex:1;
    }
    .item .chev{
      margin-left:auto;
      font-size:16px;
      border:none;
      background:transparent;
      color:var(--muted);
      cursor:pointer;
      padding:6px 10px;
    }
    .item .chev:hover{
      color:var(--accent);
      transform: translateY(-1px);
    }
    
    .item .main{ flex:1; }
    .item .kebab{
      margin-left:auto;
      border:none;
      background:transparent;
      color:var(--muted);
      padding:6px 10px;
    }
    .item .kebab:hover{ color:var(--accent); transform: translateY(-1px); }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>jenquin.io</h1>
          <div class="sub">Jenquin ‚Ä¢ Personal Ops Dashboard</div>
        </div>
      </div>
      <div class="actions">
        <button class="btn ghost" id="toggleDemo">Demo: On</button>
        <button class="btn" id="openReminders">Open Reminders</button>
        <button class="btn primary" id="quickAddTop">+ Quick Add</button>
      </div>
    </header>

    <div class="grid">
      <!-- Left column: Top 3 + Crash 7 stacked -->
      <div class="stack">
        <section class="panel" id="top3Panel">
          <div class="hd">
            <h2>Top 3 Today</h2>
            <div class="row">
              <span class="badge" id="dayLabel">Today</span>
              <span class="hint" id="nowHint">‚Äî</span>
            </div>
          </div>
          <div class="bd">
            <div class="list" id="top3List"></div>
          </div>
          <div class="ft">
            <form class="quick" id="top3Form">
              <input class="in" type="text" placeholder="Quick add to Top 3‚Ä¶" name="title" required />
              <button class="btn" type="submit">Add</button>
            </form>
          </div>
        </section>

        <!-- Crash Plan (no footer) -->
        <section class="panel" id="crashPanel" style="margin-top:18px;">
          <div class="hd">
            <h2>7-Day Crash Plan</h2>
            <div class="hint" id="rangeHint">‚Äî</div>
          </div>
          <div class="bd">
            <div class="list" id="crashList"></div>
          </div>
        </section>
      </div>

      <!-- Right column: Agenda (Apple-style) -->
      <section class="panel" id="agendaPanel">
        <div class="hd">
          <h2>FlowOs</h2>
          <div class="hint" id="tzHint">‚Äî</div>
        </div>
        <div class="bd">
          <div id="agenda"></div>
        </div>
        <div class="ft">
          <button class="btn ghost" id="openCalendar">Open Calendar</button>
        </div>
      </section>
    </div>

    <footer>
      ¬© <span id="year"></span> jenquin.io ‚Ä¢ v1 preview ¬∑ Data stays in Apple apps ¬∑ Clicks may open native apps
    </footer>
  </div>

  <script>
    // ------------ Utilities
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    function fmtTime(d){
      return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
    }
    function fmtDate(d){
      return new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(d);
    }
    function addDays(d, n){ const c = new Date(d); c.setDate(c.getDate()+n); return c; }

    // ------------ Demo toggle (mock vs live fetch)
    let DEMO = true;
    $('#toggleDemo').addEventListener('click', () => {
      DEMO = !DEMO;
      $('#toggleDemo').textContent = `Demo: ${DEMO ? 'On' : 'Off'}`;
      loadAll();
    });

    // ------------ Mock data
    function mockTop3(){
      return [
        { title: "cut front grass", due: "", completed: false},
        { title: "pay electric", due: "", completed: false},
        { title: "migrate webhook to tailscale", due: "", completed: false},
      ];
    }
    function mockCrash(){
  const now = new Date();
  const day = (n)=> addDays(now, n-1); // Day 1=today, Day 2=+1, etc.

  return [
    {
      day: 1,
      title: "Day 1 ‚Äì Core Finances",
      due: day(1),
      subtasks: [
        "Gather last 3‚Äì6 months bank statements",
        "Gather household bills (utilities, phone, internet, HOA, insurance)",
        "Print/save mortgage statements & lender letters"
      ]
    },
    {
      day: 2,
      title: "Day 2 ‚Äì Ledger + Food Stamps",
      due: day(2),
      subtasks: [
        "Finalize expense ledger (food, gas, health, debt)",
        "Apply for food stamps (use bank statements + ledger as proof)"
      ]
    },
    {
      day: 3,
      title: "Day 3 ‚Äì Mom‚Äôs Medical Packet (Part 1)",
      due: day(3),
      subtasks: [
        "Collect hospital/clinic records (copies/printouts)",
        "Gather prescriptions + receipts"
      ]
    },
    {
      day: 4,
      title: "Day 4 ‚Äì Mom‚Äôs Medical Packet (Part 2)",
      due: day(4),
      subtasks: [
        "Write daily function notes (3‚Äì5 days is enough)",
        "Request doctor‚Äôs letter (or confirm appointment/availability)"
      ]
    },
    {
      day: 5,
      title: "Day 5 ‚Äì Bankruptcy Packet (Part 1)",
      due: day(5),
      subtasks: [
        "Gather credit card + loan statements",
        "List creditors + balances",
        "List assets (truck, tools, furniture, gear)"
      ]
    },
    {
      day: 6,
      title: "Day 6 ‚Äì Bankruptcy Packet (Part 2)",
      due: day(6),
      subtasks: [
        "Review tax returns (last 2 years)",
        "Align ledger with tax numbers (rough match is fine)",
        "Organize everything into Shared Packet folder system"
      ]
    },
    {
      day: 7,
      title: "Day 7 ‚Äì Compile & Review",
      due: day(7),
      subtasks: [
        "Assemble Disability packet (Mom) ‚Äî submission ready",
        "Assemble Bankruptcy packet ‚Äî file-ready (hold unless needed)",
        "Double-check folders, label clearly (‚Äúready to send‚Äù)"
      ]
    }
  ];
}

    // --- Mock agenda data like your screenshots
    function mockAgenda(){
    const now = new Date();
    const d1 = new Date(now);
    d1.setDate(d1.getDate() + 1); // Example: Monday (tomorrow)
    const at = (d, h, m = 0) => new Date(d.getFullYear(), d.getMonth(), d.getDate(), h, m);

    return [
        {
        label: "Monday",
        date: d1,
        allDay: [{ title: "Recovery Focused" }],
        events: [
            
            { title: "water plants", start: at(d1, 7, 30), color: "green" },
            { title: "precor stretch circuit", start: at(d1, 9, 30), color: "blue" },
            { title: "Health", start: at(d1, 9, 30), end: at(d1, 10, 0), color: "gray" },
            { title: "mom dinner", start: at(d1, 19, 30), color: "purple" },
            { title: "sleep", start: at(d1, 23, 15), color: "blue" },
        ],
        },
    ];
    }

    // ------------ Live fetch helpers (wire these to your API later)
    async function apiGet(path){
      if(path==="/top3") return mockTop3();
      if(path==="/crash7") return mockCrash();
      if(path==="/agenda") return mockAgenda();
      return [];
    }
    async function apiPost(path, payload){
      return { ok:true };
    }

    // ------------ Renderers
    function renderTop3(items){
      const wrap = $('#top3List'); 
      wrap.innerHTML = "";

      items.forEach((it, idx)=>{
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div class="main">
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
          </div>
        `;

        // toggle complete
        row.querySelector('.chx').addEventListener('click', ()=>{
          row.classList.toggle('done');
        });

        wrap.appendChild(row);
      });
    }

    function renderCrash(items){
      const wrap = $('#crashList');
      wrap.innerHTML = "";

      items.forEach((it)=>{
        const due = it.due ? fmtDate(new Date(it.due)) : "‚Äî";

        // Row (day header)
        const row = document.createElement('div');
        row.className = 'item';
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div class="main">
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">Due: ${due}</div>
          </div>
          <button class="btn ghost chev" type="button" aria-expanded="false">‚ñ∏</button>
        `;

        // Subtask list (hidden by default)
        const sub = document.createElement('div');
        sub.className = 'sublist';
        (it.subtasks || []).forEach(txt=>{
          const li = document.createElement('div');
          li.className = 'subitem';
          li.innerHTML = `
            <span class="tick" aria-hidden="true"></span>
            <span class="subtxt">${escapeHtml(txt)}</span>
          `;
          sub.appendChild(li);
        });

        // Toggle subtasks open/closed
        const toggleBtn = row.querySelector('.chev');
        toggleBtn.addEventListener('click', ()=>{
          const open = sub.classList.toggle('open');
          toggleBtn.textContent = open ? '‚ñæ' : '‚ñ∏';
          toggleBtn.setAttribute('aria-expanded', String(open));
        });

        // Mark day as done
        row.querySelector('.chx').addEventListener('click', ()=>{
          row.classList.toggle('done');
        });

        wrap.appendChild(row);
        wrap.appendChild(sub);
      });
    }
    
    function renderAgenda(days){
    const wrap = document.getElementById('agenda');
    wrap.innerHTML = "";
    days.forEach(day=>{
        const box = document.createElement('div');
        box.className = 'agenda-day';

        const hd = document.createElement('div');
        hd.className = 'agenda-day-hd';
        const dow = new Intl.DateTimeFormat(undefined, { weekday:'long'}).format(day.date);
        const mdy = new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(day.date);
        hd.innerHTML = `<div>${escapeHtml(day.label)}</div><div class="date">${dow}, ${mdy}</div>`;
        box.appendChild(hd);

        // All-day pills
        if(day.allDay && day.allDay.length){
        const ad = document.createElement('div');
        ad.className = 'agenda-allday';
        day.allDay.forEach(a=>{
            const pill = document.createElement('span');
            pill.className = 'allday-pill';
            pill.textContent = a.title;
            ad.appendChild(pill);
        });
        box.appendChild(ad);
        }

        // Timed events (sorted)
        const list = document.createElement('div');
        list.className = 'agenda-list';
        (day.events||[]).sort((a,b)=> +new Date(a.start) - +new Date(b.start));
        (day.events||[]).forEach(ev=>{
        const startStr = fmtTime(new Date(ev.start));       // <-- exact time (e.g., 7:30 AM)
        const endStr   = ev.end ? fmtTime(new Date(ev.end)) : null;

        const row = document.createElement('div');
        row.className = 'agenda-row';
        row.innerHTML = `
            <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
            <div>
            <div class="agenda-title">${escapeHtml(ev.title)}</div>
            <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
            </div>
            <span class="agenda-badge">${startStr}</span>  <!-- matches left -->
        `;
        list.appendChild(row);
        });
        box.appendChild(list);

        wrap.appendChild(box);
    });
    }

    // ------------ Quick add
    $('#top3Form').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const fd = new FormData(e.target);
      const title = String(fd.get('title')||'').trim();
      if(!title) return;
      if(DEMO){
        const items = mockTop3();
        items.unshift({title, due:"", completed:false, tag:"#QuickAdd"});
        renderTop3(items);
      }else{
        await apiPost('/reminder', { list:"Top 3", title });
        await loadTop3();
      }
      e.target.reset();
    });

    // ------------ Actions (simulate opening native apps)
    $('#openCalendar').addEventListener('click', ()=> alert('Would call /open-calendar ‚Üí opens Calendar'));
    $('#openReminders').addEventListener('click', ()=> alert('Opening Reminders (simulated)‚Ä¶'));
    $('#quickAddTop').addEventListener('click', ()=> $('.in[name="title"]').focus());

    // ------------ Loaders
    async function loadTop3(){
      const items = DEMO ? mockTop3() : await apiGet('/top3');
      renderTop3(items);
    }
    async function loadCrash(){
      const items = DEMO ? mockCrash() : await apiGet('/crash7');
      renderCrash(items);
    }
    async function loadAgenda(){
      const days = DEMO ? mockAgenda() : await apiGet('/agenda');
      renderAgenda(days);
    }
    async function loadAll(){
      const now = new Date();
      $('#nowHint').textContent = fmtDate(now) + " ¬∑ " + fmtTime(now);
      $('#rangeHint').textContent = `${fmtDate(now)} ‚Üí ${fmtDate(addDays(now,6))}`;
      $('#tzHint').textContent = `Local time: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`;
      await Promise.all([loadTop3(), loadCrash(), loadAgenda()]);
    }

    // ------------ Misc
    $('#year').textContent = new Date().getFullYear();
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }

    // Init
    loadAll();
  </script>
</body>
</html>
</file>

<file path="Backups/index_1.html">
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jenquin.io ‚Äî Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg: #0b0c10;
      --panel: #111318;
      --muted: #7b8496;
      --text: #e9edf5;
      --accent: #6ea8fe;
      --accent-2: #7df2c9;
      --danger: #ff7a7a;
      --ok: #76ff9b;
      --border: #20232b;
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 14px;
      --radius-sm: 10px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg: #f6f7fb;
        --panel: #ffffff;
        --muted: #6b7280;
        --text: #0f172a;
        --accent: #2556ff;
        --accent-2: #0ea5e9;
        --border: #e5e7eb;
        --shadow: 0 10px 24px rgba(0,0,0,.08);
      }
    }

    *{ box-sizing: border-box }
    html,body{ height:100% }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
                  radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%), var(--bg);
      color: var(--text);
      line-height:1.4;
    }

    /* Shell */
    .wrap{
      max-width: 1200px;
      margin: 0 auto;
      padding: 28px 18px 40px;
    }

    header{
      display:flex; align-items:center; justify-content:space-between;
      gap: 16px; margin-bottom: 22px;
    }
    .brand{
      display:flex; align-items:center; gap:14px;
    }
    .logo{
      width:44px; height:44px; border-radius:12px;
      background:
        radial-gradient(60% 100% at 30% 10%, rgba(125,242,201,.3), transparent 60%),
        linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: var(--shadow);
    }
    .brand h1{
      font-size: 20px; margin: 0;
      letter-spacing:.4px;
    }
    .brand .sub{ color: var(--muted); font-size:13px; margin-top:2px }
    .actions{ display:flex; align-items:center; gap:10px }
    .btn{
      appearance:none; border:1px solid var(--border); color:var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      padding:10px 14px; border-radius:12px; cursor:pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18) }
    .btn.primary{
      background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.05));
      border-color: rgba(110,168,254,.35); color: white;
    }
    .btn.ghost{
      background: transparent;
    }

    /* Cards */
    .grid{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 18px;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
    }
    .panel{
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: clip;
    }
    .panel .hd{
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      padding: 14px 16px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    }
    .panel .hd h2{ margin:0; font-size: 15px; letter-spacing:.3px }
    .panel .hd .hint{ color:var(--muted); font-size:12px }
    .panel .bd{ padding: 12px 16px }
    .panel .ft{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; flex-wrap:wrap }

    /* Lists */
    .list{ display:flex; flex-direction:column; gap:10px }
    .item{
      display:grid; grid-template-columns: 22px 1fr auto; align-items:center; gap: 10px;
      padding:10px; border:1px solid var(--border); border-radius: var(--radius-sm);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    }
    .chx{ width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer }
    .chx input{ display:none }
    .chx .dot{ width:10px; height:10px; border-radius:3px; background:transparent; }
    .item.done .title{ color: var(--muted); text-decoration: line-through }
    .item.done .chx .dot{ background: var(--ok); }
    .title{ font-size:14px; }
    .meta{ color: var(--muted); font-size:12px }
    .tag{
      font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border);
      color: var(--muted);
    }
    .kebab{ opacity:.7; }
    .row{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap
    }

    /* Quick add */
    .quick{
      display:flex; gap:10px; align-items:center; width:100%;
    }
    .in{
      flex:1; min-width: 160px;
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }
    .select{
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }

    /* Calendar */
    .cal{
      display:grid; grid-template-columns: repeat(7,1fr); gap:10px;
    }
    @media (max-width: 860px){
      .cal{ grid-template-columns: repeat(3,1fr) }
    }
    @media (max-width: 560px){
      .cal{ grid-template-columns: repeat(2,1fr) }
    }
    .day{
      border:1px solid var(--border); border-radius:12px; padding:10px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      min-height:90px;
      display:flex; flex-direction:column; gap:6px;
    }
    .day .d{ font-size:12px; color: var(--muted) }
    .pill{
      font-size:12px; padding:6px 8px; border-radius:10px; border:1px solid var(--border);
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .pill.blue{ border-color: rgba(110,168,254,.4) }
    .pill.green{ border-color: rgba(125,242,201,.45) }

    footer{
      margin-top: 24px; color: var(--muted); font-size:12px; text-align:center;
    }

    .sep{ height:1px; background: var(--border); margin: 8px 0 }
    .faded{ color: var(--muted) }
    .badge{
      font-size:11px; padding:3px 8px; border-radius:999px; background: rgba(110,168,254,.15); border:1px solid rgba(110,168,254,.35);
      color: #dbe9ff;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>jenquin.io</h1>
          <div class="sub">Jenquin ‚Ä¢ Personal Ops Dashboard</div>
        </div>
      </div>
      <div class="actions">
        <button class="btn ghost" id="toggleDemo">Demo: On</button>
        <button class="btn" id="openReminders">Open Reminders</button>
        <button class="btn primary" id="quickAddTop">+ Quick Add</button>
      </div>
    </header>

    <div class="grid">
      <!-- Left column: Top 3 + Crash 7 stacked -->
      <div class="stack">
        <section class="panel" id="top3Panel">
          <div class="hd">
            <h2>Top 3 Today</h2>
            <div class="row">
              <span class="badge" id="dayLabel">Today</span>
              <span class="hint" id="nowHint">‚Äî</span>
            </div>
          </div>
          <div class="bd">
            <div class="list" id="top3List"></div>
          </div>
          <div class="ft">
            <form class="quick" id="top3Form">
              <input class="in" type="text" placeholder="Quick add to Top 3‚Ä¶" name="title" required />
              <button class="btn" type="submit">Add</button>
              <button class="btn ghost" type="button" id="revealTop3">Reveal in Reminders</button>
            </form>
          </div>
        </section>

        <section class="panel" id="crashPanel" style="margin-top:18px;">
          <div class="hd">
            <h2>7-Day Crash Plan</h2>
            <div class="hint" id="rangeHint">‚Äî</div>
          </div>
          <div class="bd">
            <div class="list" id="crashList"></div>
          </div>
          <div class="ft">
            <button class="btn ghost" id="revealCrash">Reveal Crash Plan</button>
          </div>
        </section>
      </div>

      <!-- Right column: Calendar glance -->
      <section class="panel">
        <div class="hd">
          <h2>Calendar (Next 7 Days)</h2>
          <div class="hint" id="tzHint">‚Äî</div>
        </div>
        <div class="bd">
          <div class="cal" id="calGrid"></div>
        </div>
        <div class="ft">
          <button class="btn ghost" id="openCalendar">Open Calendar</button>
        </div>
      </section>
    </div>

    <footer>
      ¬© <span id="year"></span> jenquin.io ‚Ä¢ v1 preview ¬∑ Data stays in Apple apps ¬∑ Clicks may open native apps
    </footer>
  </div>

  <script>
    // ------------ Utilities
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    function fmtTime(d){
      return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
    }
    function fmtDate(d){
      return new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(d);
    }
    function addDays(d, n){ const c = new Date(d); c.setDate(c.getDate()+n); return c; }

    // ------------ Demo toggle (mock vs live fetch)
    let DEMO = true;
    $('#toggleDemo').addEventListener('click', () => {
      DEMO = !DEMO;
      $('#toggleDemo').textContent = `Demo: ${DEMO ? 'On' : 'Off'}`;
      loadAll();
    });

    // ------------ Mock data
    function mockTop3(){
      return [
        { title: "Ship Jenquin v1 page", due: "", completed: false, tag:"#Admin" },
        { title: "Record 'Album Stream' bumper", due: "", completed: false, tag:"#Creative" },
        { title: "7-Day Crash pass ‚Üí prune tasks", due: "", completed: true, tag:"#Review" },
      ];
    }
    function mockCrash(){
      const now = new Date();
      return [
        { title: "Bank statements ‚Üí sort & tag", due: addDays(now,1), completed:false, tag:"#Finance"},
        { title: "Mom Log: weekly summary", due: addDays(now,2), completed:false, tag:"#Caregiving"},
        { title: "Raspberry Pi: stream loop", due: addDays(now,3), completed:false, tag:"#Infra"},
        { title: "Nova ‚Üí Quick Add Shortcut", due: addDays(now,4), completed:true, tag:"#Flow"},
      ];
    }
    function mockCalendar(){
      const now = new Date();
      return [...Array(7)].map((_,i)=>{
        const d = addDays(now, i);
        const events = [];
        if(i===0) events.push({ t:"Standup (self)", at: new Date(d.setHours(10,0)), color:"blue"});
        if(i===1) events.push({ t:"Studio hour", at: new Date(addDays(now,1).setHours(14,0)), color:"green"});
        if(i===2) events.push({ t:"Groceries + meal prep", at: new Date(addDays(now,2).setHours(18,0)), color:"blue"});
        return { date: addDays(new Date(),i), events };
      });
    }

    // ------------ Live fetch helpers (wire these to your API later)
    async function apiGet(path){
      // Example: return fetch(path).then(r=>r.json())
      // For now, return mock
      if(path==="/top3") return mockTop3();
      if(path==="/crash7") return mockCrash();
      if(path==="/calendar") return mockCalendar();
      return [];
    }
    async function apiPost(path, payload){
      // Example: return fetch(path,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)})
      // For demo, just pretend success:
      return { ok:true };
    }

    // ------------ Renderers
    function renderTop3(items){
      const wrap = $('#top3List'); wrap.innerHTML = "";
      items.forEach((it, idx)=>{
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div>
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
          </div>
          <div class="row">
            <span class="tag">Top 3</span>
            <button class="btn ghost kebab" data-action="remove" title="Remove">‚ãØ</button>
          </div>
        `;
        row.querySelector('.chx').addEventListener('click', async ()=>{
          row.classList.toggle('done');
          // later: await apiPost('/reminder/toggle', { list:'Top 3', index: idx })
        });
        row.querySelector('[data-action="remove"]').addEventListener('click', async ()=>{
          row.style.opacity = .5;
          // later: await apiPost('/reminder/delete', { list:'Top 3', index: idx })
          setTimeout(()=> row.remove(), 180);
        });
        wrap.appendChild(row);
      });
    }

    function renderCrash(items){
      const wrap = $('#crashList'); wrap.innerHTML = "";
      items.forEach((it, idx)=>{
        const due = it.due ? fmtDate(new Date(it.due)) : "‚Äî";
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div>
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">Due: ${due} ${it.tag ? '¬∑ ' + escapeHtml(it.tag) : ''}</div>
          </div>
          <span class="tag">Crash 7</span>
        `;
        row.querySelector('.chx').addEventListener('click', async ()=>{
          row.classList.toggle('done');
          // later: await apiPost('/reminder/toggle', { list:'Crash Plan', index: idx })
        });
        wrap.appendChild(row);
      });
    }

    function renderCal(days){
      const grid = $('#calGrid'); grid.innerHTML="";
      days.forEach(day=>{
        const div = document.createElement('div');
        div.className = 'day';
        div.innerHTML = `<div class="d">${fmtDate(new Date(day.date))}</div>`;
        if(day.events && day.events.length){
          day.events.forEach(ev=>{
            const pill = document.createElement('div');
            pill.className = 'pill ' + (ev.color || 'blue');
            pill.title = ev.t;
            pill.textContent = `${fmtTime(new Date(ev.at))} ‚Ä¢ ${ev.t}`;
            div.appendChild(pill);
          });
        } else {
          const none = document.createElement('div');
          none.className = 'faded'; none.textContent = '‚Äî';
          div.appendChild(none);
        }
        grid.appendChild(div);
      });
    }

    // ------------ Quick add
    $('#top3Form').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const fd = new FormData(e.target);
      const title = String(fd.get('title')||'').trim();
      if(!title) return;
      if(DEMO){
        const items = mockTop3();
        items.unshift({title, due:"", completed:false, tag:"#QuickAdd"});
        renderTop3(items);
      }else{
        await apiPost('/reminder', { list:"Top 3", title });
        await loadTop3();
      }
      e.target.reset();
    });

    // ------------ Actions (simulate opening native apps)
    $('#revealTop3').addEventListener('click', ()=> alert('Would call /open { list:"Top 3" } ‚Üí opens Reminders'));
    $('#revealCrash').addEventListener('click', ()=> alert('Would call /open { list:"Crash Plan" } ‚Üí opens Reminders'));
    $('#openCalendar').addEventListener('click', ()=> alert('Would call /open-calendar ‚Üí opens Calendar'));
    $('#openReminders').addEventListener('click', ()=> alert('Opening Reminders (simulated)‚Ä¶'));
    $('#quickAddTop').addEventListener('click', ()=> $('.in[name="title"]').focus());

    // ------------ Loaders
    async function loadTop3(){
      const items = DEMO ? mockTop3() : await apiGet('/top3');
      renderTop3(items);
    }
    async function loadCrash(){
      const items = DEMO ? mockCrash() : await apiGet('/crash7');
      renderCrash(items);
    }
    async function loadCalendar(){
      const days = DEMO ? mockCalendar() : await apiGet('/calendar');
      renderCal(days);
    }
    async function loadAll(){
      const now = new Date();
      $('#nowHint').textContent = fmtDate(now) + " ¬∑ " + fmtTime(now);
      $('#rangeHint').textContent = `${fmtDate(now)} ‚Üí ${fmtDate(addDays(now,6))}`;
      $('#tzHint').textContent = `Local time: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`;
      await Promise.all([loadTop3(), loadCrash(), loadCalendar()]);
    }

    // ------------ Misc
    $('#year').textContent = new Date().getFullYear();
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }

    // Init
    loadAll();
  </script>
</body>
</html>
</file>

<file path="Backups/sandbox_1.3.html">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agenda Card ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.25}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris‚Äô Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris‚Äô Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [

  { label:"Flex",                     start: at(7,30),  end: at(8,0),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(10,15), color: AREA_COLORS.health },
  { label:"Prep & Maintenance",       start: at(11,0),  end: at(12,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Administrative",           start: at(14,0),  end: at(16,0),  color: AREA_COLORS.administrative },
  { label:"Social & Relationships",   start: at(19,30), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,15), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
  }
  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock ‚ÄúFlex ¬∑ 3:33 PM‚Äì7:30 PM‚Äù */
  (function seedAreaPill(){
  const p = document.getElementById('areaPill');
  const seg = ZONES[0];
  if (seg) p.textContent = seg.label; // just the zone name, no time
})();
</script>
</body>
</html>
</file>

<file path="Backups/sandbox_digital_twin_oraclebackup.html">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Digital Twin Oracle ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.28}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}

  /* --- Digital Twin (Oracle) --- */
  .oracle-wrap{
    display:flex; align-items:center; justify-content:center;
    height: 260px; position:relative; overflow:hidden;
    background: radial-gradient(600px 320px at 50% -30%, rgba(125,242,201,.08), transparent 60%),
                radial-gradient(520px 280px at 120% 120%, rgba(110,168,254,.10), transparent 60%);
    border:1px solid var(--border); border-radius: var(--radius);
  }

  .oracle{
    position:relative; width: 160px; aspect-ratio: 3/5;
    filter: drop-shadow(0 12px 28px rgba(0,0,0,.45));
  }

  .oracle .aura{
    position:absolute; inset:-18%;
    border-radius: 30% 30% 36% 36% / 28% 28% 52% 52%;
    background: radial-gradient(60% 60% at 50% 35%, rgba(255,255,255,.35), transparent 60%),
                radial-gradient(80% 80% at 50% 50%, rgba(110,168,254,.25), transparent 65%);
    filter: blur(18px) saturate(1.1);
    animation: auraPulse 3.6s ease-in-out infinite;
    opacity:.9;
  }

  .oracle .body{
    position:absolute; inset:0; display:block;
    background:
      radial-gradient(45% 45% at 50% 20%, rgba(255,255,255,.85), rgba(255,255,255,.15) 60%),
      linear-gradient(180deg, rgba(110,168,254,.9), rgba(125,242,201,.7) 60%, rgba(110,168,254,.85));
    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
    mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
    border-radius: 18px;
    animation: subtleFloat 6s ease-in-out infinite;
  }

  /* Zone colors */
  .oracle[data-zone="Rest & Recharge"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(125,242,201,.30),transparent 65%)}
  .oracle[data-zone="Health"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(118,255,155,.30),transparent 65%);animation-duration:2.2s}
  .oracle[data-zone="Creative / Project Work"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(110,168,254,.30),transparent 65%)}
  .oracle[data-zone="Review & Planning"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(179,138,255,.28),transparent 65%)}
  .oracle[data-zone="Errands & Logistics"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,176,90,.30),transparent 65%)}
  .oracle[data-zone="Social & Relationships"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,122,122,.28),transparent 65%)}
  .oracle[data-zone="Flex"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(154,163,178,.28),transparent 65%)}

  /* Animations */
  @keyframes auraPulse{0%,100%{transform:scale(.96);opacity:.85}50%{transform:scale(1.03);opacity:1}}
  @keyframes subtleFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}

  .oracle-legend{margin-top:10px;font-size:12px;color:var(--muted);text-align:center}
  
  .hint{color:var(--muted);font-size:13px}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris' Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>

    <!-- Digital Twin (Oracle) Panel -->
    <section class="panel" id="oraclePanel" style="margin-top:18px;">
      <div class="hd">
        <h2>Digital Twin</h2>
        <div class="hint"><span id="oracleZoneHint">‚Äî</span></div>
      </div>
      <div class="bd">
        <div class="oracle-wrap">
          <div id="oracle" class="oracle" data-zone="Rest & Recharge" aria-label="Digital twin state">
            <div class="aura"></div>
            <div class="body"></div>
          </div>
        </div>
        <div class="oracle-legend">
          Mirrors your current Area (Rest &amp; Recharge, Health, Creative, etc.).
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris' Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [
  { label:"Health",                   start: at(0,0),  end: at(7,30), color: AREA_COLORS.health },
  { label:"Flex",                     start: at(7,30),  end: at(9,30),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(11,0), color: AREA_COLORS.health },
  { label:"Prep & Maintenance",       start: at(11,0),  end: at(14,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Administrative",           start: at(14,0),  end: at(18,0),  color: AREA_COLORS.administrative },
  { label:"Social & Relationships",   start: at(18,0), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,0), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Digital Twin wiring ---------- */
  function normalizeZone(area){
    const m = {
      "Rest & Recharge": "Rest & Recharge",
      "Health": "Health",
      "Creative / Project Work": "Creative / Project Work",
      "Review & Planning": "Review & Planning",
      "Errands & Logistics": "Errands & Logistics",
      "Social & Relationships": "Social & Relationships",
      "Flex": "Flex",
      "Prep & Maintenance": "Review & Planning"
    };
    return m[area] || "Flex";
  }

  function setOracleZone(zone){
    const el = document.getElementById('oracle');
    const hint = document.getElementById('oracleZoneHint');
    if (!el) return;
    el.setAttribute('data-zone', zone);
    if (hint) hint.textContent = zone;
  }

  function findCurrentArea(events, now) {
    // Mock implementation - find which zone we're currently in
    for (const zone of ZONES) {
      if (now >= zone.start && now < zone.end) {
        return { area: zone.label };
      }
    }
    return null;
  }

  function findNextArea(events, now) {
    // Mock implementation - find next zone
    for (const zone of ZONES) {
      if (now < zone.start) {
        return { area: zone.label };
      }
    }
    return null;
  }

  function updateOracleFromAgenda(){
    const day = window.__CURRENT_DAY || { events: ZONES };
    if (!day) return;
    const now = new Date();
    const current = findCurrentArea(day.events, now);
    if (current){
      setOracleZone(normalizeZone(current.area));
      return;
    }
    const next = findNextArea(day.events, now);
    setOracleZone(next ? "Flex" : "Flex");
  }

  function updateLiveArea() {
    // Mock function to simulate existing functionality
    updateOracleFromAgenda();
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
    updateOracleFromAgenda(); // Update oracle on each tick
  }

  document.addEventListener('DOMContentLoaded', ()=>{
    if (document.getElementById('oracle')){
      updateOracleFromAgenda();
    }
  });

  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock "Flex ¬∑ 3:33 PM‚Äì7:30 PM" */
  (function seedAreaPill(){
  const p = document.getElementById('areaPill');
  const seg = ZONES[0];
  if (seg) p.textContent = seg.label; // just the zone name, no time
})();
</script>
</body>
</html>
</file>

<file path="about.md">
# Jenquin.io ‚Äî v1 demo

This is a single-page **Jenquin Dashboard** mock that mirrors your Apple system:
- **Top 3 Today**
- **7-Day Crash Plan**
- **Calendar (next 7 days)**
- Quick Add + ‚ÄúReveal in Reminders/Calendar‚Äù (simulated)

## Run locally (no backend required)
Double-click `index.html` to open in your browser **or** run a local server:

```bash
cd jengquin_site
python3 -m http.server 8080
# open http://localhost:8080
```

## Hooking up a backend later
When your Flask/FastAPI endpoints are ready:
1. Replace `apiGet`/`apiPost` in `script.js` to call real endpoints.
2. Wire buttons (Reveal/Open) to routes that trigger AppleScript on your Mac.

## Deploy via Tailscale (optional)
Expose your local port (e.g., 8080) with **Tailscale Funnel**:

```bash
tailscale funnel 8080
```

Keep ACLs private unless you intend to share publicly.
</file>

<file path="favicon.svg">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
  <defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#6ea8fe"/><stop offset="100%" stop-color="#7df2c9"/></linearGradient></defs>
  <rect x="4" y="4" width="56" height="56" rx="14" fill="url(#g)"/>
  <circle cx="32" cy="32" r="10" fill="white" opacity="0.9"/>
</svg>
</file>

<file path="instructions_digital_twin.md">
# Digital Twin Oracle - Integration Instructions

## Overview
The Digital Twin Oracle displays a glowing humanoid figure that changes color based on your current FlowOS zone (Rest & Recharge, Health, Creative, etc.).

## Integration Steps

### 1Ô∏è‚É£ CSS Integration
Add this CSS block to your main `<style>` section (before the closing `</style>` tag):

```css
/* --- Digital Twin (Oracle) --- */
.oracle-wrap{
  display:flex; align-items:center; justify-content:center;
  height: 260px; position:relative; overflow:hidden;
  background: radial-gradient(600px 320px at 50% -30%, rgba(125,242,201,.08), transparent 60%),
              radial-gradient(520px 280px at 120% 120%, rgba(110,168,254,.10), transparent 60%);
  border:1px solid var(--border); border-radius: var(--radius);
}

.oracle{
  position:relative; width: 160px; aspect-ratio: 3/5;
  filter: drop-shadow(0 12px 28px rgba(0,0,0,.45));
}

.oracle .aura{
  position:absolute; inset:-18%;
  border-radius: 30% 30% 36% 36% / 28% 28% 52% 52%;
  background: radial-gradient(60% 60% at 50% 35%, rgba(255,255,255,.35), transparent 60%),
              radial-gradient(80% 80% at 50% 50%, rgba(110,168,254,.25), transparent 65%);
  filter: blur(18px) saturate(1.1);
  animation: auraPulse 3.6s ease-in-out infinite;
  opacity:.9;
}

.oracle .body{
  position:absolute; inset:0; display:block;
  background:
    radial-gradient(45% 45% at 50% 20%, rgba(255,255,255,.85), rgba(255,255,255,.15) 60%),
    linear-gradient(180deg, rgba(110,168,254,.9), rgba(125,242,201,.7) 60%, rgba(110,168,254,.85));
  -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
  mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
  border-radius: 18px;
  animation: subtleFloat 6s ease-in-out infinite;
}

/* Zone colors */
.oracle[data-zone="Rest & Recharge"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(125,242,201,.30),transparent 65%)}
.oracle[data-zone="Health"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(118,255,155,.30),transparent 65%);animation-duration:2.2s}
.oracle[data-zone="Creative / Project Work"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(110,168,254,.30),transparent 65%)}
.oracle[data-zone="Review & Planning"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(179,138,255,.28),transparent 65%)}
.oracle[data-zone="Errands & Logistics"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,176,90,.30),transparent 65%)}
.oracle[data-zone="Social & Relationships"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,122,122,.28),transparent 65%)}
.oracle[data-zone="Flex"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(154,163,178,.28),transparent 65%)}

/* Animations */
@keyframes auraPulse{0%,100%{transform:scale(.96);opacity:.85}50%{transform:scale(1.03);opacity:1}}
@keyframes subtleFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}

.oracle-legend{margin-top:10px;font-size:12px;color:var(--muted);text-align:center}
```

### 2Ô∏è‚É£ HTML Integration
Add this panel after your existing panels (e.g., after "Crash Plan"):

```html
<!-- Digital Twin (Oracle) Panel -->
<section class="panel" id="oraclePanel" style="margin-top:18px;">
  <div class="hd">
    <h2>Digital Twin</h2>
    <div class="hint"><span id="oracleZoneHint">‚Äî</span></div>
  </div>
  <div class="bd">
    <div class="oracle-wrap">
      <div id="oracle" class="oracle" data-zone="Rest & Recharge" aria-label="Digital twin state">
        <div class="aura"></div>
        <div class="body"></div>
      </div>
    </div>
    <div class="oracle-legend">
      Mirrors your current Area (Rest &amp; Recharge, Health, Creative, etc.).
    </div>
  </div>
</section>
```

### 3Ô∏è‚É£ JavaScript Integration
Add these functions before your closing `</script>` tag:

```javascript
/* ---------- Digital Twin wiring ---------- */
function normalizeZone(area){
  const m = {
    "Rest & Recharge": "Rest & Recharge",
    "Health": "Health",
    "Creative / Project Work": "Creative / Project Work",
    "Review & Planning": "Review & Planning",
    "Errands & Logistics": "Errands & Logistics",
    "Social & Relationships": "Social & Relationships",
    "Flex": "Flex",
    "Prep & Maintenance": "Review & Planning"
  };
  return m[area] || "Flex";
}

function setOracleZone(zone){
  const el = document.getElementById('oracle');
  const hint = document.getElementById('oracleZoneHint');
  if (!el) return;
  el.setAttribute('data-zone', zone);
  if (hint) hint.textContent = zone;
}

function updateOracleFromAgenda(){
  const day = window.__CURRENT_DAY;
  if (!day) return;
  const now = new Date();
  const current = findCurrentArea(day.events, now);
  if (current){
    setOracleZone(normalizeZone(current.area));
    return;
  }
  const next = findNextArea(day.events, now);
  setOracleZone(next ? "Flex" : "Flex");
}

document.addEventListener('DOMContentLoaded', ()=>{
  if (document.getElementById('oracle')){
    updateOracleFromAgenda();
  }
});

const __oldUpdateLiveArea = updateLiveArea;
updateLiveArea = function(){
  try{ __oldUpdateLiveArea(); }catch(_){}
  updateOracleFromAgenda();
};
```

## Features

‚úÖ **Real-time Zone Detection**: Automatically detects and displays current FlowOS zone  
‚úÖ **Dynamic Color Auras**: Each zone has its unique color scheme  
‚úÖ **Smooth Animations**: Subtle floating and pulsing effects  
‚úÖ **Accessibility**: Proper ARIA labels and semantic HTML  
‚úÖ **Responsive Design**: Adapts to different screen sizes  

## Zone Color Mapping

- **Rest & Recharge**: Mint green aura
- **Health**: Bright green aura (faster pulse)
- **Creative / Project Work**: Blue aura
- **Review & Planning**: Purple aura
- **Errands & Logistics**: Orange aura
- **Social & Relationships**: Red/pink aura
- **Flex**: Gray aura

## Testing

The sandbox file `sandbox_digital_twin_oracle.html` is ready for testing and demonstrates the full functionality.
</file>

<file path="logo.svg">
<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 64 64">
  <defs>
    <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#6ea8fe"/>
      <stop offset="100%" stop-color="#7df2c9"/>
    </linearGradient>
  </defs>
  <rect x="4" y="4" width="56" height="56" rx="14" fill="url(#g)"/>
  <g fill="white" opacity="0.95">
    <path d="M20 40c0-8 6-14 14-14h6v6h-6c-4.4 0-8 3.6-8 8v6h-6v-6z"/>
    <path d="M34 18h10v10h-6a4 4 0 0 1-4-4v-6z" opacity="0.85"/>
  </g>
</svg>
</file>

<file path="oracle_twin_merge_snippet.html">
<!-- =======================================================
     DIGITAL TWIN ORACLE - MERGE-READY SNIPPET
     =======================================================
     
     Instructions for integrating into index.html:
     
     1. Add the CSS block to your main <style> section (before closing </style>)
     2. Add the HTML panel after any existing panel (e.g., after "Crash Plan")  
     3. Add the JavaScript functions before your closing </script> tag
     
     ======================================================= -->

<!-- 1Ô∏è‚É£ CSS - Add this to your main <style> section -->
<style>
/* --- Digital Twin (Oracle) --- */
.oracle-wrap{
  display:flex; align-items:center; justify-content:center;
  height: 260px; position:relative; overflow:hidden;
  background: radial-gradient(600px 320px at 50% -30%, rgba(125,242,201,.08), transparent 60%),
              radial-gradient(520px 280px at 120% 120%, rgba(110,168,254,.10), transparent 60%);
  border:1px solid var(--border); border-radius: var(--radius);
}

.oracle{
  position:relative; width: 160px; aspect-ratio: 3/5;
  filter: drop-shadow(0 12px 28px rgba(0,0,0,.45));
}

.oracle .aura{
  position:absolute; inset:-18%;
  border-radius: 30% 30% 36% 36% / 28% 28% 52% 52%;
  background: radial-gradient(60% 60% at 50% 35%, rgba(255,255,255,.35), transparent 60%),
              radial-gradient(80% 80% at 50% 50%, rgba(110,168,254,.25), transparent 65%);
  filter: blur(18px) saturate(1.1);
  animation: auraPulse 3.6s ease-in-out infinite;
  opacity:.9;
}

.oracle .body{
  position:absolute; inset:0; display:block;
  background:
    radial-gradient(45% 45% at 50% 20%, rgba(255,255,255,.85), rgba(255,255,255,.15) 60%),
    linear-gradient(180deg, rgba(110,168,254,.9), rgba(125,242,201,.7) 60%, rgba(110,168,254,.85));
  -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
  mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
  border-radius: 18px;
  animation: subtleFloat 6s ease-in-out infinite;
}

/* Zone colors */
.oracle[data-zone="Rest & Recharge"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(125,242,201,.30),transparent 65%)}
.oracle[data-zone="Health"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(118,255,155,.30),transparent 65%);animation-duration:2.2s}
.oracle[data-zone="Creative / Project Work"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(110,168,254,.30),transparent 65%)}
.oracle[data-zone="Review & Planning"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(179,138,255,.28),transparent 65%)}
.oracle[data-zone="Errands & Logistics"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,176,90,.30),transparent 65%)}
.oracle[data-zone="Social & Relationships"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,122,122,.28),transparent 65%)}
.oracle[data-zone="Flex"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(154,163,178,.28),transparent 65%)}

/* Animations */
@keyframes auraPulse{0%,100%{transform:scale(.96);opacity:.85}50%{transform:scale(1.03);opacity:1}}
@keyframes subtleFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}

.oracle-legend{margin-top:10px;font-size:12px;color:var(--muted);text-align:center}
</style>

<!-- 2Ô∏è‚É£ HTML - Add this panel after your existing panels -->
<!-- Digital Twin (Oracle) Panel -->
<section class="panel" id="oraclePanel" style="margin-top:18px;">
  <div class="hd">
    <h2>Digital Twin</h2>
    <div class="hint"><span id="oracleZoneHint">‚Äî</span></div>
  </div>
  <div class="bd">
    <div class="oracle-wrap">
      <div id="oracle" class="oracle" data-zone="Rest & Recharge" aria-label="Digital twin state">
        <div class="aura"></div>
        <div class="body"></div>
      </div>
    </div>
    <div class="oracle-legend">
      Mirrors your current Area (Rest &amp; Recharge, Health, Creative, etc.).
    </div>
  </div>
</section>

<script>
/* 3Ô∏è‚É£ JAVASCRIPT - Add these functions before your closing </script> tag */

/* ---------- Digital Twin wiring ---------- */
function normalizeZone(area){
  const m = {
    "Rest & Recharge": "Rest & Recharge",
    "Health": "Health",
    "Creative / Project Work": "Creative / Project Work",
    "Review & Planning": "Review & Planning",
    "Errands & Logistics": "Errands & Logistics",
    "Social & Relationships": "Social & Relationships",
    "Flex": "Flex",
    "Prep & Maintenance": "Review & Planning"
  };
  return m[area] || "Flex";
}

function setOracleZone(zone){
  const el = document.getElementById('oracle');
  const hint = document.getElementById('oracleZoneHint');
  if (!el) return;
  el.setAttribute('data-zone', zone);
  if (hint) hint.textContent = zone;
}

function updateOracleFromAgenda(){
  const day = window.__CURRENT_DAY;
  if (!day) return;
  const now = new Date();
  const current = findCurrentArea(day.events, now);
  if (current){
    setOracleZone(normalizeZone(current.area));
    return;
  }
  const next = findNextArea(day.events, now);
  setOracleZone(next ? "Flex" : "Flex");
}

document.addEventListener('DOMContentLoaded', ()=>{
  if (document.getElementById('oracle')){
    updateOracleFromAgenda();
  }
});

const __oldUpdateLiveArea = updateLiveArea;
updateLiveArea = function(){
  try{ __oldUpdateLiveArea(); }catch(_){}
  updateOracleFromAgenda();
};
</script>
</file>

<file path="sandbox_calendar_agenda_card.html">
<!doctype html>
<html lang="en">
<head>
<!-- Reminders wiring patch: use local JSON, scheduled-only -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agenda Card ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.28}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris‚Äô Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- Data status indicator -->
          <div id="dataStatus" style="padding:8px 12px;font-size:11px;color:var(--muted);text-align:center;border-top:1px solid var(--border);">
            Loading reminders...
          </div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Day context ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  /* ---------- Reminders (scheduled only) loader ---------- */
  async function loadRemindersScheduled() {
    const statusEl = document.getElementById('dataStatus');
    if (statusEl) statusEl.textContent = 'Loading reminders...';
    
    // served locally; never pushed. See .gitignore (/data/)
    const url = 'data/reminders.local.json?ts=' + Date.now();
    try {
      const res = await fetch(url, { cache: 'no-store' });
      if (!res.ok) throw new Error('HTTP ' + res.status);
      const data = await res.json();
      const { items = [], count = 0 } = data;

      // Map Reminders ‚Üí UI model: timed EVENTS + ALLDAY pills
      const EVENTS = [];
      const ALLDAY = [];
      for (const it of items) {
        if (!it?.dueISO) continue; // scheduled only
        const d = new Date(it.dueISO);
        const hasTime = !(d.getHours() === 0 && d.getMinutes() === 0);
        if (hasTime) {
          EVENTS.push({
            title: it.title,
            start: d,
            color: it.priority === 1 ? 'purple' : it.flagged ? 'blue' : 'green'
          });
        } else {
          // scheduled all-day item
          ALLDAY.push(it.title);
        }
      }
      // expose
      window.__REM_EVENTS = EVENTS.sort((a,b)=>+a.start-+b.start);
      window.__REM_ALLDAY = ALLDAY;
      
      // Update status
      if (statusEl) {
        statusEl.textContent = `‚úÖ Loaded ${count} reminders (${EVENTS.length} timed, ${ALLDAY.length} all-day)`;
      }
    } catch (err) {
      console.warn('Reminders fetch failed:', err);
      window.__REM_EVENTS = [];
      window.__REM_ALLDAY = ['Reminders unavailable'];
      if (statusEl) {
        statusEl.textContent = `‚ùå Failed to load reminders: ${err.message}`;
      }
    }
  }

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [
  { label:"Health",                   start: at(0,0),  end: at(7,30), color: AREA_COLORS.health },
  { label:"Flex",                     start: at(7,30),  end: at(9,30),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(11,0), color: AREA_COLORS.health },
  { label:"Prep & Maintenance",       start: at(11,0),  end: at(14,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Administrative",           start: at(14,0),  end: at(18,0),  color: AREA_COLORS.administrative },
  { label:"Social & Relationships",   start: at(18,0), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,0), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Hydrate UI from Reminders ---------- */
  async function hydrateCalendarFromReminders() {
    // load scheduled reminders
    await loadRemindersScheduled();

    // 1) All-day lane
    const lane = document.getElementById('alldayLane');
    lane.innerHTML = '';
    (window.__REM_ALLDAY || []).forEach(t=>{
      const p = document.createElement('span');
      p.className = 'allday-pill';
      p.textContent = t;
      lane.appendChild(p);
    });

    // 2) Timed events list
    const list = document.getElementById('agendaList');
    list.innerHTML = '';
    (window.__REM_EVENTS || []).forEach(ev=>{
      const row = document.createElement('div');
      row.className = 'agenda-row';
      row.dataset.start = ev.start.toISOString();
      const startStr = fmtTime(ev.start);
      row.innerHTML = `
        <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
        <div>
          <div class="agenda-title">${ev.title}</div>
          <div class="agenda-meta">${startStr}</div>
        </div>
        <label class="chx"><span class="inner"></span></label>
      `;
      row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
      list.appendChild(row);
    });

    // 3) refresh dynamics
    if (typeof updateNowLine === 'function') updateNowLine();
    if (typeof updateZoneBar === 'function') updateZoneBar(new Date());
  }

  /* ---------- Focus pill / header ---------- */
  const FOCUS = "Today";
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = "";
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Boot + timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
  }

  document.addEventListener('DOMContentLoaded', async ()=>{
    await hydrateCalendarFromReminders(); // initial render from Reminders
    tick();
  });

  // refresh UI every minute; refresh data every 10 minutes
  setInterval(tick, 60 * 1000);
  setInterval(hydrateCalendarFromReminders, 10 * 60 * 1000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock "Flex ¬∑ 3:33 PM‚Äì7:30 PM" */
  (function seedAreaPill(){
    const p = document.getElementById('areaPill');
    const seg = ZONES[0];
    if (seg) p.textContent = seg.label; // just the zone name, no time
  })();
</script>
</body>
</html>
</file>

<file path="sandbox_digital_twin_oracle.html">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Digital Twin Oracle ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.28}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}

  /* --- Digital Twin (Oracle) --- */
  .oracle-wrap{
    display:flex; align-items:center; justify-content:center;
    height: 260px; position:relative; overflow:hidden;
    background: radial-gradient(600px 320px at 50% -30%, rgba(125,242,201,.08), transparent 60%),
                radial-gradient(520px 280px at 120% 120%, rgba(110,168,254,.10), transparent 60%);
    border:1px solid var(--border); border-radius: var(--radius);
  }

  .oracle{
    position:relative; width: 160px; aspect-ratio: 3/5;
    filter: drop-shadow(0 12px 28px rgba(0,0,0,.45));
  }

  .oracle .aura{
    position:absolute; inset:-18%;
    border-radius: 30% 30% 36% 36% / 28% 28% 52% 52%;
    background: radial-gradient(60% 60% at 50% 35%, rgba(255,255,255,.35), transparent 60%),
                radial-gradient(80% 80% at 50% 50%, rgba(110,168,254,.25), transparent 65%);
    filter: blur(18px) saturate(1.1);
    animation: auraPulse 3.6s ease-in-out infinite;
    opacity:.9;
  }

  .oracle .body{
    position:absolute; inset:0; display:block;
    background:
      radial-gradient(45% 45% at 50% 20%, rgba(255,255,255,.85), rgba(255,255,255,.15) 60%),
      linear-gradient(180deg, rgba(110,168,254,.9), rgba(125,242,201,.7) 60%, rgba(110,168,254,.85));
    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
    mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
    border-radius: 18px;
    animation: subtleFloat 6s ease-in-out infinite;
  }

  /* Zone colors */
  .oracle[data-zone="Rest & Recharge"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(125,242,201,.30),transparent 65%)}
  .oracle[data-zone="Health"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(118,255,155,.30),transparent 65%);animation-duration:2.2s}
  .oracle[data-zone="Creative / Project Work"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(110,168,254,.30),transparent 65%)}
  .oracle[data-zone="Review & Planning"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(179,138,255,.28),transparent 65%)}
  .oracle[data-zone="Errands & Logistics"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,176,90,.30),transparent 65%)}
  .oracle[data-zone="Social & Relationships"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,122,122,.28),transparent 65%)}
  .oracle[data-zone="Flex"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(154,163,178,.28),transparent 65%)}

  /* Animations */
  @keyframes auraPulse{0%,100%{transform:scale(.96);opacity:.85}50%{transform:scale(1.03);opacity:1}}
  @keyframes subtleFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}

  .oracle-legend{margin-top:10px;font-size:12px;color:var(--muted);text-align:center}
  
  .hint{color:var(--muted);font-size:13px}

  /* ===== Hologram look (full-body) ===== */
  .oracle.holo{
    --holo-a: 180;            /* base hue; gets overridden per zone below */
    --holo-s: 90%;
    --holo-l: 60%;
    --holo-glow: hsla(var(--holo-a), var(--holo-s), var(--holo-l), .55);
    --holo-glow-2: hsla(calc(var(--holo-a) + 30), 80%, 65%, .35);
    --holo-line: hsla(var(--holo-a), 95%, 75%, .95);
    --holo-scan: hsla(var(--holo-a), 95%, 75%, .2);
    --holo-grain: rgba(255,255,255,.08);
    width: 200px; aspect-ratio: 3/5;
    position: relative;
    isolation: isolate;            /* keep blending tidy */
  }

  /* zone hues -> hologram palette */
  .oracle.holo[data-zone="Rest & Recharge"]{ --holo-a: 175 }
  .oracle.holo[data-zone="Health"]{ --holo-a: 155 }
  .oracle.holo[data-zone="Creative / Project Work"]{ --holo-a: 210 }
  .oracle.holo[data-zone="Review & Planning"]{ --holo-a: 265 }
  .oracle.holo[data-zone="Errands & Logistics"]{ --holo-a: 35 }
  .oracle.holo[data-zone="Social & Relationships"]{ --holo-a: 320 }
  .oracle.holo[data-zone="Flex"]{ --holo-a: 220 }

  /* big soft glow behind the figure */
  .holo .holo-glow{
    position:absolute; inset:-24%;
    background:
      radial-gradient(60% 50% at 50% 35%, var(--holo-glow), transparent 60%),
      radial-gradient(75% 60% at 50% 60%, var(--holo-glow-2), transparent 70%);
    filter: blur(18px) saturate(1.15);
    animation: holoPulse 3.8s ease-in-out infinite;
  }

  /* full-body mask (SVG in data URL) */
  .holo .holo-body{
    position:absolute; inset:0;
    background:
      linear-gradient(180deg,
        hsla(var(--holo-a), 85%, 78%, .95) 0%,
        hsla(var(--holo-a), 85%, 68%, .85) 45%,
        hsla(var(--holo-a), 85%, 58%, .90) 100%);
    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 200"><g fill="black"><circle cx="60" cy="26" r="16"/><path d="M36 48h48v30c0 10-8 18-18 18H54c-9 0-18-8-18-18V48z"/><rect x="22" y="70" width="20" height="46" rx="10"/><rect x="78" y="70" width="20" height="46" rx="10"/><path d="M46 96h28v60H46z"/><path d="M46 156h20v40H46z"/><path d="M66 156h20v40H66z"/></g></svg>') center/80% 100% no-repeat;
    mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 200"><g fill="black"><circle cx="60" cy="26" r="16"/><path d="M36 48h48v30c0 10-8 18-18 18H54c-9 0-18-8-18-18V48z"/><rect x="22" y="70" width="20" height="46" rx="10"/><rect x="78" y="70" width="20" height="46" rx="10"/><path d="M46 96h28v60H46z"/><path d="M46 156h20v40H46z"/><path d="M66 156h20v40H66z"/></g></svg>') center/80% 100% no-repeat;
    border-radius: 18px;
    box-shadow:
      0 0 12px var(--holo-glow),
      0 0 28px var(--holo-glow-2);
    animation: holoFloat 6s ease-in-out infinite;
  }

  /* edge glow / chromatic fringe */
  .holo .holo-edge{
    position:absolute; inset:0;
    background:
      radial-gradient(120% 110% at 50% 40%,
        transparent 45%,
        hsla(var(--holo-a), 100%, 85%, .5) 65%,
        transparent 80%) ;
    mix-blend-mode: screen;
    filter: blur(2.5px) saturate(1.2);
    pointer-events:none;
  }

  /* scanlines + shimmer sweep */
  .holo .holo-scan{
    position:absolute; inset:0;
    background:
      repeating-linear-gradient( to bottom,
        transparent 0 3px,
        var(--holo-scan) 3px 4px),
      linear-gradient( to bottom,
        transparent 0%,
        rgba(255,255,255,.05) 40%,
        rgba(255,255,255,.12) 50%,
        transparent 60%);
    -webkit-mask: inherit; mask: inherit;
    mix-blend-mode: screen;
    animation: holoScan 4.8s linear infinite;
  }

  /* particles */
  .holo .holo-particles{ position:absolute; inset:0; pointer-events:none; }
  .holo .holo-particles span{
    --sz: 3px; --x: 50%; --y: 50%; --t: 6s;
    position:absolute; width:var(--sz); height:var(--sz); border-radius:50%;
    background: var(--holo-line);
    left: var(--x); top: var(--y);
    filter: drop-shadow(0 0 6px var(--holo-line));
    animation: floatDot var(--t) ease-in-out infinite;
  }
  /* sprinkle positions */
  .holo .holo-particles span:nth-child(1){ --x:14%; --y:18%; --t:7s }
  .holo .holo-particles span:nth-child(2){ --x:78%; --y:22%; --t:6.3s }
  .holo .holo-particles span:nth-child(3){ --x:20%; --y:62%; --t:7.6s }
  .holo .holo-particles span:nth-child(4){ --x:84%; --y:68%; --t:5.8s }
  .holo .holo-particles span:nth-child(5){ --x:52%; --y:86%; --t:6.8s }
  .holo .holo-particles span:nth-child(6){ --x:36%; --y:40%; --t:6.1s }
  .holo .holo-particles span:nth-child(7){ --x:66%; --y:46%; --t:7.2s }
  .holo .holo-particles span:nth-child(8){ --x:30%; --y:84%; --t:5.9s }
  .holo .holo-particles span:nth-child(9){ --x:72%; --y:82%; --t:7.4s }
  .holo .holo-particles span:nth-child(10){ --x:44%; --y:12%; --t:6.6s }

  /* animations */
  @keyframes holoPulse{ 0%,100%{transform:scale(.96);opacity:.85} 50%{transform:scale(1.03);opacity:1} }
  @keyframes holoFloat{ 0%,100%{ transform: translateY(0) } 50%{ transform: translateY(-4px) } }
  @keyframes holoScan{
    0%{ background-position: 0 -120px, 0 -120px }
    100%{ background-position: 0 160px, 0 160px }
  }
  @keyframes floatDot{
    0%,100%{ transform: translateY(0) scale(1) ; opacity:.85}
    50%{ transform: translateY(-6px) scale(1.15); opacity:1}
  }

  /* ===== Wireframe + Nodes layer (masked to the body) ===== */
  .holo .holo-net{
    position:absolute; inset:0; mix-blend-mode:screen; opacity:.95;
    -webkit-mask: inherit; mask: inherit;
    background:
      /* base grid */
      url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><defs><linearGradient id="lg" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="white" stop-opacity="0.55"/><stop offset="100%" stop-color="white" stop-opacity="0.15"/></linearGradient></defs><g stroke="white" stroke-opacity="0.25" stroke-width="0.6"><!-- vertical lines --><path d="M10 0 V200 M30 0 V200 M50 0 V200 M70 0 V200 M90 0 V200 M110 0 V200 M130 0 V200 M150 0 V200 M170 0 V200 M190 0 V200"/><!-- horizontal lines --><path d="M0 10 H200 M0 30 H200 M0 50 H200 M0 70 H200 M0 90 H200 M0 110 H200 M0 130 H200 M0 150 H200 M0 170 H200 M0 190 H200"/><!-- diagonals --><g opacity="0.35"><path d="M-40 0 L200 240"/><path d="M-20 0 L220 240"/><path d="M0 0 L240 240"/><path d="M0 -40 L240 200"/><path d="M0 -20 L240 220"/></g></g><!-- nodes (small glowing points) --><g fill="white"><circle cx="22" cy="18" r="1.7"/><circle cx="58" cy="32" r="1.4"/><circle cx="96" cy="26" r="1.6"/><circle cx="142" cy="44" r="1.5"/><circle cx="176" cy="20" r="1.9"/><circle cx="34" cy="74" r="1.6"/><circle cx="86" cy="92" r="1.5"/><circle cx="126" cy="80" r="1.7"/><circle cx="164" cy="96" r="1.6"/><circle cx="52" cy="124" r="1.5"/><circle cx="96" cy="136" r="1.7"/><circle cx="144" cy="132" r="1.6"/><circle cx="70" cy="168" r="1.5"/><circle cx="118" cy="176" r="1.8"/></g></svg>') center/180px 180px repeat;

    /* subtle parallax to keep it alive */
    animation: netDrift 14s ease-in-out infinite;
    filter: drop-shadow(0 0 6px hsla(var(--holo-a),95%,75%,.55));
  }

  /* vary opacity by zone for mood */
  .oracle.holo[data-zone="Rest & Recharge"] .holo-net{ opacity:.90 }
  .oracle.holo[data-zone="Health"] .holo-net{ opacity:.98 }
  .oracle.holo[data-zone="Creative / Project Work"] .holo-net{ opacity:.95 }
  .oracle.holo[data-zone="Review & Planning"] .holo-net{ opacity:.92 }

  /* vertical "spine" core glow */
  .holo .holo-core{
    position:absolute; inset:6% 30%;
    background:
      radial-gradient(60% 100% at 50% 0%, hsla(var(--holo-a),95%,75%,.55), transparent 60%),
      linear-gradient(180deg, hsla(var(--holo-a),95%,75%,.9), transparent 60%);
    filter: blur(2px) saturate(1.1);
    opacity:.85; mix-blend-mode:screen;
    -webkit-mask: inherit; mask: inherit;
    animation: corePulse 3.6s ease-in-out infinite;
  }

  /* gentle motion */
  @keyframes netDrift{
    0%{ background-position: 0 0 }
    50%{ background-position: 12px -10px }
    100%{ background-position: 0 0 }
  }
  @keyframes corePulse{
    0%,100%{ opacity:.75; transform: translateY(0) }
    50%{ opacity:1; transform: translateY(-2px) }
  }

  /* ===== Anatomical full-body silhouette (neutral athletic) ===== */
  .holo .holo-body.anat{
    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 200"><!-- Head --><circle cx="60" cy="22" r="12" fill="black"/><!-- Neck --><rect x="54" y="34" width="12" height="8" rx="3" fill="black"/><!-- Torso + shoulders (curved) --><path fill="black" d="M30,55 C34,42 44,36 60,36 C76,36 86,42 90,55 L92,78 C92,96 80,110 60,110 C40,110 28,96 28,78 Z"/><!-- Arms (slight natural bend) --><path fill="black" d="M28,58 C23,70 24,84 28,94 C30,100 36,104 40,103 C43,102 44,98 42,95 C39,90 38,84 38,78 L38,60 C36,58 32,57 28,58 Z"/><path fill="black" d="M92,58 C97,70 96,84 92,94 C90,100 84,104 80,103 C77,102 76,98 78,95 C81,90 82,84 82,78 L82,60 C84,58 88,57 92,58 Z"/><!-- Pelvis --><path fill="black" d="M46,110 C46,118 50,124 60,124 C70,124 74,118 74,110 Z"/><!-- Left leg --><path fill="black" d="M50,124 C48,140 48,156 49,172 C49.5,180 48,188 46,196 L56,196 C58,188 59,180 59,172 C59,156 60,140 62,124 Z"/><!-- Right leg --><path fill="black" d="M70,124 C72,140 72,156 71,172 C70.5,180 72,188 74,196 L64,196 C62,188 61,180 61,172 C61,156 60,140 58,124 Z"/></svg>') center/80% 100% no-repeat;
    mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 200"><circle cx="60" cy="22" r="12" fill="black"/><rect x="54" y="34" width="12" height="8" rx="3" fill="black"/><path fill="black" d="M30,55 C34,42 44,36 60,36 C76,36 86,42 90,55 L92,78 C92,96 80,110 60,110 C40,110 28,96 28,78 Z"/><path fill="black" d="M28,58 C23,70 24,84 28,94 C30,100 36,104 40,103 C43,102 44,98 42,95 C39,90 38,84 38,78 L38,60 C36,58 32,57 28,58 Z"/><path fill="black" d="M92,58 C97,70 96,84 92,94 C90,100 84,104 80,103 C77,102 76,98 78,95 C81,90 82,84 82,78 L82,60 C84,58 88,57 92,58 Z"/><path fill="black" d="M46,110 C46,118 50,124 60,124 C70,124 74,118 74,110 Z"/><path fill="black" d="M50,124 C48,140 48,156 49,172 C49.5,180 48,188 46,196 L56,196 C58,188 59,180 59,172 C59,156 60,140 62,124 Z"/><path fill="black" d="M70,124 C72,140 72,156 71,172 C70.5,180 72,188 74,196 L64,196 C62,188 61,180 61,172 C61,156 60,140 58,124 Z"/></svg>') center/80% 100% no-repeat;
  }

  /* Optional: a slimmer neutral variant‚Äîjust toggle .slim instead of .anat */
  .holo .holo-body.slim{
    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 200"><circle cx="60" cy="22" r="11" fill="black"/><rect x="55" y="33" width="10" height="7" rx="3" fill="black"/><path fill="black" d="M34,56 C38,44 46,38 60,38 C74,38 82,44 86,56 L88,78 C88,96 78,108 60,108 C42,108 32,96 32,78 Z"/><path fill="black" d="M32,59 C28,70 30,84 33,92 C35,97 39,100 42,99 C44,98 45,96 44,93 C42,89 40,83 40,77 L40,62 C38,60 35,59 32,59 Z"/><path fill="black" d="M88,59 C92,70 90,84 87,92 C85,97 81,100 78,99 C76,98 75,96 76,93 C78,89 80,83 80,77 L80,62 C82,60 85,59 88,59 Z"/><path fill="black" d="M48,108 C48,116 52,121 60,121 C68,121 72,116 72,108 Z"/><path fill="black" d="M52,121 C50,138 51,156 52,172 C52.5,180 51,188 49,196 L57,196 C59,188 60,180 60,172 C60,156 60,138 61,121 Z"/><path fill="black" d="M68,121 C70,138 69,156 68,172 C67.5,180 69,188 71,196 L63,196 C61,188 60,180 60,172 C60,156 60,138 59,121 Z"/></svg>') center/78% 100% no-repeat;
    mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 200"><circle cx="60" cy="22" r="11" fill="black"/><rect x="55" y="33" width="10" height="7" rx="3" fill="black"/><path fill="black" d="M34,56 C38,44 46,38 60,38 C74,38 82,44 86,56 L88,78 C88,96 78,108 60,108 C42,108 32,96 32,78 Z"/><path fill="black" d="M32,59 C28,70 30,84 33,92 C35,97 39,100 42,99 C44,98 45,96 44,93 C42,89 40,83 40,77 L40,62 C38,60 35,59 32,59 Z"/><path fill="black" d="M88,59 C92,70 90,84 87,92 C85,97 81,100 78,99 C76,98 75,96 76,93 C78,89 80,83 80,77 L80,62 C82,60 85,59 88,59 Z"/><path fill="black" d="M48,108 C48,116 52,121 60,121 C68,121 72,116 72,108 Z"/><path fill="black" d="M52,121 C50,138 51,156 52,172 C52.5,180 51,188 49,196 L57,196 C59,188 60,180 60,172 C60,156 60,138 61,121 Z"/><path fill="black" d="M68,121 C70,138 69,156 68,172 C67.5,180 69,188 71,196 L63,196 C61,188 60,180 60,172 C60,156 60,138 59,121 Z"/></svg>') center/78% 100% no-repeat;
  }
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris' Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>

    <!-- Digital Twin (Oracle) Panel -->
    <section class="panel" id="oraclePanel" style="margin-top:18px;">
      <div class="hd">
        <h2>Digital Twin</h2>
        <div class="hint"><span id="oracleZoneHint">‚Äî</span></div>
      </div>
      <div class="bd">
        <div class="oracle-wrap">
          <div id="oracle" class="oracle holo" data-zone="Rest & Recharge" aria-label="Digital twin state">
            <div class="holo-glow"></div>
            <div class="holo-body anat"></div>

            <!-- NEW: wireframe grid + nodes clipped to the body -->
            <div class="holo-net"></div>

            <!-- vertical core glow (spine-like) -->
            <div class="holo-core"></div>

            <!-- edge + scan + particles stay for hologram vibe -->
            <div class="holo-edge"></div>
            <div class="holo-scan"></div>
            <div class="holo-particles">
              <span></span><span></span><span></span><span></span><span></span>
              <span></span><span></span><span></span><span></span><span></span>
            </div>
          </div>
        </div>
        <div class="oracle-legend">
          Mirrors your current Area (Rest &amp; Recharge, Health, Creative, etc.).
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris' Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [
  { label:"Health",                   start: at(0,0),  end: at(7,30), color: AREA_COLORS.health },
  { label:"Flex",                     start: at(7,30),  end: at(9,30),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(11,0), color: AREA_COLORS.health },
  { label:"Prep & Maintenance",       start: at(11,0),  end: at(14,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Administrative",           start: at(14,0),  end: at(18,0),  color: AREA_COLORS.administrative },
  { label:"Social & Relationships",   start: at(18,0), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,0), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Digital Twin wiring ---------- */
  function normalizeZone(area){
    const m = {
      "Rest & Recharge": "Rest & Recharge",
      "Health": "Health",
      "Creative / Project Work": "Creative / Project Work",
      "Review & Planning": "Review & Planning",
      "Errands & Logistics": "Errands & Logistics",
      "Social & Relationships": "Social & Relationships",
      "Flex": "Flex",
      "Prep & Maintenance": "Review & Planning"
    };
    return m[area] || "Flex";
  }

  function setOracleZone(zone){
    const el = document.getElementById('oracle');
    const hint = document.getElementById('oracleZoneHint');
    if (!el) return;
    el.setAttribute('data-zone', zone);
    if (hint) hint.textContent = zone;
  }

  function findCurrentArea(events, now) {
    // Mock implementation - find which zone we're currently in
    for (const zone of ZONES) {
      if (now >= zone.start && now < zone.end) {
        return { area: zone.label };
      }
    }
    return null;
  }

  function findNextArea(events, now) {
    // Mock implementation - find next zone
    for (const zone of ZONES) {
      if (now < zone.start) {
        return { area: zone.label };
      }
    }
    return null;
  }

  function updateOracleFromAgenda(){
    const day = window.__CURRENT_DAY || { events: ZONES };
    if (!day) return;
    const now = new Date();
    const current = findCurrentArea(day.events, now);
    if (current){
      setOracleZone(normalizeZone(current.area));
      return;
    }
    const next = findNextArea(day.events, now);
    setOracleZone(next ? "Flex" : "Flex");
  }

  function updateLiveArea() {
    // Mock function to simulate existing functionality
    updateOracleFromAgenda();
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
    updateOracleFromAgenda(); // Update oracle on each tick
  }

  document.addEventListener('DOMContentLoaded', ()=>{
    if (document.getElementById('oracle')){
      updateOracleFromAgenda();
    }
  });

  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock "Flex ¬∑ 3:33 PM‚Äì7:30 PM" */
  (function seedAreaPill(){
  const p = document.getElementById('areaPill');
  const seg = ZONES[0];
  if (seg) p.textContent = seg.label; // just the zone name, no time
})();
</script>
</body>
</html>
</file>

<file path="script.js">
// jengquin.io v1 demo script

const $ = sel => document.querySelector(sel);
const $$ = sel => Array.from(document.querySelectorAll(sel));

function fmtTime(d){
  return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
}
function fmtDate(d){
  return new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(d);
}
function addDays(d, n){ const c = new Date(d); c.setDate(c.getDate()+n); return c; }
function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }

let DEMO = true;

// ------------ Mock data
function mockTop3(){
  return [
    { title: "Ship GenCoin v1 page", due: "", completed: false, tag:"#Admin" },
    { title: "Record 'Album Stream' bumper", due: "", completed: false, tag:"#Creative" },
    { title: "7-Day Crash pass ‚Üí prune tasks", due: "", completed: true, tag:"#Review" },
  ];
}
function mockCrash(){
  const now = new Date();
  return [
    { title: "Bank statements ‚Üí sort & tag", due: addDays(now,1), completed:false, tag:"#Finance"},
    { title: "Mom Log: weekly summary", due: addDays(now,2), completed:false, tag:"#Caregiving"},
    { title: "Raspberry Pi: stream loop", due: addDays(now,3), completed:false, tag:"#Infra"},
    { title: "Nova ‚Üí Quick Add Shortcut", due: addDays(now,4), completed:true, tag:"#Flow"},
  ];
}
function mockCalendar(){
  const now = new Date();
  return [...Array(7)].map((_,i)=>{
    const d = addDays(now, i);
    const events = [];
    if(i===0) events.push({ t:"Standup (self)", at: new Date(d.setHours(10,0)), color:"blue"});
    if(i===1) events.push({ t:"Studio hour", at: new Date(addDays(now,1).setHours(14,0)), color:"green"});
    if(i===2) events.push({ t:"Groceries + meal prep", at: new Date(addDays(now,2).setHours(18,0)), color:"blue"});
    return { date: addDays(new Date(),i), events };
  });
}

// ------------ Live fetch helpers (wire these to your API later)
async function apiGet(path){
  // Replace with: return fetch(path).then(r=>r.json())
  if(path==="/top3") return mockTop3();
  if(path==="/crash7") return mockCrash();
  if(path==="/calendar") return mockCalendar();
  return [];
}
async function apiPost(path, payload){
  // Replace with real fetch POST when backend is ready
  return { ok:true };
}

// ------------ Renderers
function renderTop3(items){
  const wrap = $('#top3List'); wrap.innerHTML = "";
  items.forEach((it, idx)=>{
    const row = document.createElement('div');
    row.className = 'item' + (it.completed ? ' done' : '');
    row.innerHTML = `
      <label class="chx" aria-label="toggle done"><span class="dot"></span></label>
      <div>
        <div class="title">${escapeHtml(it.title)}</div>
        <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
      </div>
      <div class="row">
        <span class="tag">Top 3</span>
        <button class="btn ghost kebab" data-action="remove" title="Remove">‚ãØ</button>
      </div>`;
    row.querySelector('.chx').addEventListener('click', async ()=>{
      row.classList.toggle('done');
      // later: await apiPost('/reminder/toggle', { list:'Top 3', index: idx })
    });
    row.querySelector('[data-action="remove"]').addEventListener('click', async ()=>{
      row.style.opacity = .5;
      // later: await apiPost('/reminder/delete', { list:'Top 3', index: idx })
      setTimeout(()=> row.remove(), 180);
    });
    wrap.appendChild(row);
  });
}

function renderCrash(items){
  const wrap = $('#crashList'); wrap.innerHTML = "";
  items.forEach((it, idx)=>{
    const due = it.due ? fmtDate(new Date(it.due)) : "‚Äî";
    const row = document.createElement('div');
    row.className = 'item' + (it.completed ? ' done' : '');
    row.innerHTML = `
      <label class="chx" aria-label="toggle done"><span class="dot"></span></label>
      <div>
        <div class="title">${escapeHtml(it.title)}</div>
        <div class="meta">Due: ${due} ${it.tag ? '¬∑ ' + escapeHtml(it.tag) : ''}</div>
      </div>
      <span class="tag">Crash 7</span>`;
    row.querySelector('.chx').addEventListener('click', async ()=>{
      row.classList.toggle('done');
      // later: await apiPost('/reminder/toggle', { list:'Crash Plan', index: idx })
    });
    wrap.appendChild(row);
  });
}

function renderCal(days){
  const grid = $('#calGrid'); grid.innerHTML="";
  days.forEach(day=>{
    const div = document.createElement('div');
    div.className = 'day';
    div.innerHTML = `<div class="d">${fmtDate(new Date(day.date))}</div>`;
    if(day.events && day.events.length){
      day.events.forEach(ev=>{
        const pill = document.createElement('div');
        pill.className = 'pill ' + (ev.color || 'blue');
        pill.title = ev.t;
        pill.textContent = `${fmtTime(new Date(ev.at))} ‚Ä¢ ${ev.t}`;
        div.appendChild(pill);
      });
    } else {
      const none = document.createElement('div');
      none.className = 'faded'; none.textContent = '‚Äî';
      div.appendChild(none);
    }
    grid.appendChild(div);
  });
}

// ------------ Quick add
function wireEvents(){
  $('#top3Form').addEventListener('submit', async (e)=>{
    e.preventDefault();
    const fd = new FormData(e.target);
    const title = String(fd.get('title')||'').trim();
    if(!title) return;
    if(DEMO){
      const items = mockTop3();
      items.unshift({title, due:"", completed:false, tag:"#QuickAdd"});
      renderTop3(items);
    }else{
      await apiPost('/reminder', { list:"Top 3", title });
      await loadTop3();
    }
    e.target.reset();
  });

  // Simulated native app actions
  $('#revealTop3').addEventListener('click', ()=> alert('Would call /open { list:"Top 3" } ‚Üí opens Reminders'));
  $('#revealCrash').addEventListener('click', ()=> alert('Would call /open { list:"Crash Plan" } ‚Üí opens Reminders'));
  $('#openCalendar').addEventListener('click', ()=> alert('Would call /open-calendar ‚Üí opens Calendar'));
  $('#openReminders').addEventListener('click', ()=> alert('Opening Reminders (simulated)‚Ä¶'));
  $('#quickAddTop').addEventListener('click', ()=> $('.in[name="title"]').focus());

  // Demo toggle
  $('#toggleDemo').addEventListener('click', () => {
    DEMO = !DEMO;
    $('#toggleDemo').textContent = `Demo: ${DEMO ? 'Demo: On' : 'Demo: Off'}`;
    loadAll();
  });
}

// ------------ Loaders
async function loadTop3(){
  const items = DEMO ? mockTop3() : await apiGet('/top3');
  renderTop3(items);
}
async function loadCrash(){
  const items = DEMO ? mockCrash() : await apiGet('/crash7');
  renderCrash(items);
}
async function loadCalendar(){
  const days = DEMO ? mockCalendar() : await apiGet('/calendar');
  renderCal(days);
}
async function loadAll(){
  const now = new Date();
  $('#nowHint').textContent = fmtDate(now) + " ¬∑ " + fmtTime(now);
  $('#rangeHint').textContent = `${fmtDate(now)} ‚Üí ${fmtDate(addDays(now,6))}`;
  $('#tzHint').textContent = `Local time: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`;
  $('#year').textContent = new Date().getFullYear();
  await Promise.all([loadTop3(), loadCrash(), loadCalendar()]);
}

// Init
document.addEventListener('DOMContentLoaded', ()=>{
  wireEvents();
  loadAll();
});
</file>

<file path="site-urls.txt">
Jenquin Site URLs:

Live Site: https://jenquin813.github.io/jenquin.github.io/
Demo Mode: https://jenquin813.github.io/jenquin.github.io/?demo=1
</file>

<file path="test-top3.html">
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Top 3 Form</title>
  <style>
    body { font-family: system-ui, sans-serif; padding: 20px; }
    .panel { border: 1px solid #ccc; border-radius: 8px; padding: 15px; max-width: 500px; }
    .hd { margin-bottom: 10px; }
    .bd { margin-bottom: 15px; }
    .ft { border-top: 1px solid #eee; padding-top: 10px; }
    .list { min-height: 50px; }
    .item { display: flex; padding: 8px 0; border-bottom: 1px solid #eee; }
    .chx { margin-right: 10px; cursor: pointer; }
    .dot { display: inline-block; width: 16px; height: 16px; border: 2px solid #999; border-radius: 50%; }
    .done .dot { background-color: #999; }
    .title { font-weight: 500; }
    .meta { font-size: 0.8em; color: #666; }
    .quick { display: flex; }
    .in { flex: 1; padding: 8px; border: 1px solid #ccc; border-radius: 4px; margin-right: 8px; }
    .btn { padding: 8px 16px; background: #0066cc; color: white; border: none; border-radius: 4px; cursor: pointer; }
  </style>
</head>
<body>
  <section class="panel" id="top3Panel">
    <div class="hd">
      <h2>Top 3 Today</h2>
      <div class="row">
        <span class="badge" id="dayLabel">Today</span>
        <span class="hint" id="nowHint">‚Äî</span>
      </div>
    </div>
    <div class="bd">
      <div class="list" id="top3List"></div>
    </div>
    <div class="ft">
      <form class="quick" id="top3Form">
        <input class="in" type="text" placeholder="Quick add to Top 3‚Ä¶" name="title" required />
        <button class="btn" type="submit">Add</button>
      </form>
    </div>
  </section>

  <script>
    // Utilities
    const $ = sel => document.querySelector(sel);
    
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }
    
    // Demo mode
    let DEMO = true;
    
    // Mock data
    function mockTop3() {
      return [
        { title: "cut front grass", due: "", completed: false},
        { title: "pay electric", due: "", completed: false},
        { title: "migrate webhook to tailscale", due: "", completed: false},
      ];
    }
    
    // Renderer
    function renderTop3(items) {
      const wrap = $('#top3List'); 
      wrap.innerHTML = "";
      
      items.forEach((it, idx) => {
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div class="main">
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
          </div>
        `;
        
        // toggle complete
        row.querySelector('.chx').addEventListener('click', () => {
          row.classList.toggle('done');
        });
        
        wrap.appendChild(row);
      });
    }
    
    // Initial load
    function loadTop3() {
      const items = mockTop3();
      renderTop3(items);
    }
    
    // Form handler
    document.addEventListener('DOMContentLoaded', () => {
      console.log("DOM loaded, setting up form handler");
      const top3Form = $('#top3Form');
      console.log("Form element:", top3Form);
      
      if (top3Form) {
        top3Form.addEventListener('submit', (e) => {
          console.log("Form submitted");
          e.preventDefault();
          const fd = new FormData(e.target);
          const title = String(fd.get('title') || '').trim();
          console.log("Title:", title);
          
          if (!title) return;
          
          const items = mockTop3();
          items.unshift({title, due: "", completed: false, tag: "#QuickAdd"});
          renderTop3(items);
          e.target.reset();
        });
      }
    });
    
    // Initialize
    loadTop3();
  </script>
</body>
</html>
</file>

<file path="demo.html">
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Redirecting to Demo Mode</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      background-color: #1e1e1e;
      color: white;
      text-align: center;
    }
    h1 {
      margin-bottom: 1rem;
    }
    p {
      margin-bottom: 2rem;
      max-width: 600px;
    }
    .loader {
      border: 5px solid #f3f3f3;
      border-top: 5px solid #3498db;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin-bottom: 2rem;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <h1>Redirecting to Demo Mode</h1>
  <div class="loader"></div>
  <p>You will be automatically redirected to the jenquin.io dashboard in demo mode...</p>
  <script>
    // Ensure we're always in demo mode
    function redirectToDemo() {
      // Get the current URL
      var currentUrl = window.location.href;
      var baseUrl = './index.html';
      
      // Check if we're already on index.html
      if (currentUrl.includes('index.html')) {
        baseUrl = currentUrl.split('?')[0]; // Get the URL without parameters
      }
      
      // Add or update the demo parameter
      var targetUrl = baseUrl + (baseUrl.includes('?') ? '&' : '?') + 'demo=1';
      
      // Redirect to the demo URL
      window.location.href = targetUrl;
    }
    
    // Redirect after a short delay for the loading animation
    setTimeout(redirectToDemo, 1500);
  </script>
</body>
</html>
</file>

<file path="README.md">
# Jenquin.io

Personal Ops Dashboard

## Access URLs

- **Live Site**: https://jenquin813.github.io/jenquin.github.io/
- **Demo Mode**: https://jenquin813.github.io/jenquin.github.io/?demo=1

## Features

- Top 3 Today task management
- 7-Day Crash Plan
- Daily Agenda view
- Mini calendar with month navigation
- Digital clock
- Quick Add functionality
- Demo mode (via URL parameter)

| Layer | Description |
|------|-------------|
| **Backend (Private Repo)** | Handles the ‚Äúthinking‚Äù: logic, scheduling, data processing, and decision-making. |
| **Frontend (`jenquin-site`)** | Handles the ‚Äúfeeling‚Äù: what users see, click, and experience visually. |

This separation allows for clean modular growth ‚Äî keeping the system secure, adaptable, and easy to evolve over time.

## üß≠ Concept Diagram (Aligned & Consistent)
A high-level view of how **Jenquin Site** fits into the broader system with consistent, parallel labels:

```
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ        Jenquin UI        ‚îÇ
                     ‚îÇ  (jenquin-site frontend) ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                         [User Interaction Layer]
                                   ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ       Voice Gateway      ‚îÇ
                     ‚îÇ    (Siri / Mic Input)    ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                           [Input Interpretation]
                                   ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ       AI Assistant       ‚îÇ
                     ‚îÇ  (Nova ‚Äî Router/Agent)   ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                         [Intent Routing & Orchestration]
                                   ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ     Language Model(s)    ‚îÇ
                     ‚îÇ (LLM Engine ‚Äî Reasoning) ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                          [Structured Commands]
                                   ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ      Jenquin Backend     ‚îÇ
                     ‚îÇ (Data & Automation Core) ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                         [Memory & Long-Term Data]
                                   ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ    FlowOS / SelfOS Stack ‚îÇ
                     ‚îÇ   (Personal System Memory)‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Alignment notes:**
- **Voice Gateway** parallels **AI Assistant** in label style (top role + subtitle in parentheses).
- **AI Assistant** is the title; **Nova** is specified as the implementation (Router/Agent).
- **Language Model(s)** mirrors this pattern (title + role in parentheses).
- **Backend** and **FlowOS** use consistent ‚Äútitle + role‚Äù phrasing.

## üéØ Goals
- Present a **functional and visually clear** concept site.
- Prototype UI elements such as dashboards, top tasks, and flow navigation.
- Serve as the **public face** of the Jenquin project while backend logic develops privately.
- Evolve into a unified web or app experience that integrates voice, reminders, and adaptive interfaces.

## üîÑ Future Vision
Jenquin isn‚Äôt just a site ‚Äî it‚Äôs the start of a connected ecosystem. Over time, this front-end layer will become a **gateway** into a broader platform that blends:
- **automation**
- **data awareness**
- **voice input**
- **flow-based productivity**

The goal is to make technology feel *invisible but intelligent* ‚Äî helping people stay organized and in flow without needing to manage every detail manually.

## üß∞ Built With
- **HTML5 / CSS3**
- **JavaScript (Vanilla)**
- *(Optional future frameworks: React, Vue, or Svelte)*

## üöÄ Getting Started
To preview locally:
```bash
git clone https://github.com/<yourusername>/jenquin-site.git
cd jenquin-site
open index.html
```
Or view live on GitHub Pages (after enabling it in repo settings).

## üñºÔ∏è Showcase / Screenshots (placeholder)
- `docs/screenshots/` folder for UI previews and GIFs (add when ready).
- Example sections to show later: **Reveal Crash Plan**, **Top 3 / Top 7**, **Flow Navigation**.

## ü™∂ License
This project is currently under personal development and not licensed for redistribution.
Future licensing will be added once the full system architecture is ready for collaboration.
</file>

<file path="run_commands">
add the modified files:
git add 

commit the changes:
git commit -m ""

push the changes to the remote repository:
git push origin master

create a zip backup with a timestamp in the Backups folder:
mkdir -p Backups && zip -r "Backups/jenquin-site-backup-$(date +%Y%m%d-%H%M%S).zip" . -x "*.git*" -x "Backups/*"



http://localhost:8080/sandbox_calendar_agenda_card.html


file:///Volumes/storage/projects/Jenquin-site/sandbox_digital_twin_oracle.html


#5) Local run + bookmark
#Start server:
cd /Volumes/storage/projects/Jenquin-site
python3 -m http.server 8080

Open + bookmark:
http://localhost:8080/sandbox_calendar_agenda_card.html
</file>

<file path="style.css">
:root{
  --bg: #0b0c10;
  --panel: #111318;
  --muted: #7b8496;
  --text: #e9edf5;
  --accent: #6ea8fe;
  --accent-2: #7df2c9;
  --danger: #ff7a7a;
  --ok: #76ff9b;
  --border: #20232b;
  --shadow: 0 8px 24px rgba(0,0,0,.35);
  --radius: 14px;
  --radius-sm: 10px;
}
@media (prefers-color-scheme: light){
  :root{
    --bg: #f6f7fb;
    --panel: #ffffff;
    --muted: #6b7280;
    --text: #0f172a;
    --accent: #2556ff;
    --accent-2: #0ea5e9;
    --border: #e5e7eb;
    --shadow: 0 10px 24px rgba(0,0,0,.08);
  }
}
*{ box-sizing: border-box }
html,body{ height:100% }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  background: radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
              radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%), var(--bg);
  color: var(--text);
  line-height:1.4;
}
.wrap{ max-width: 1200px; margin: 0 auto; padding: 28px 18px 40px; }
header{ display:flex; align-items:center; justify-content:space-between; gap: 16px; margin-bottom: 22px; }
.brand{ display:flex; align-items:center; gap:14px; }
.logo{ width:44px; height:44px; border-radius:12px; box-shadow: var(--shadow); }
.brand h1{ font-size: 20px; margin: 0; letter-spacing:.4px }
.brand .sub{ color: var(--muted); font-size:13px; margin-top:2px }
.actions{ display:flex; align-items:center; gap:8px }
.btn{
  appearance:none; border:1px solid var(--border); color:var(--text);
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  padding:10px 14px; border-radius:12px; cursor:pointer;
  transition: transform .08s ease, background .2s ease, border-color .2s ease;
}
.btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18) }
.btn.primary{ background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.05)); border-color: rgba(110,168,254,.35); color: white; }
.btn.ghost{ background: transparent; }
.grid{ display:grid; grid-template-columns: 1.1fr 1fr; gap: 18px; }
@media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }
.panel{
  background: var(--panel); border: 1px solid var(--border); border-radius: var(--radius);
  box-shadow: var(--shadow); overflow: clip;
}
.panel .hd{ display:flex; align-items:center; justify-content:space-between; gap: 10px; padding: 14px 16px; border-bottom:1px solid var(--border);
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06)); }
.panel .hd h2{ margin:0; font-size: 15px; letter-spacing:.3px }
.panel .hd .hint{ color: var(--muted); font-size:12px }
.panel .bd{ padding: 12px 16px }
.panel .ft{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; flex-wrap:wrap }
.list{ display:flex; flex-direction:column; gap:10px }
.item{
  display:grid; grid-template-columns: 22px 1fr auto; align-items:center; gap: 10px;
  padding:10px; border:1px solid var(--border); border-radius: var(--radius-sm);
  background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
}
.chx{ width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer }
.chx input{ display:none }
.chx .dot{ width:10px; height:10px; border-radius:3px; background:transparent; }
.item.done .title{ color: var(--muted); text-decoration: line-through }
.item.done .chx .dot{ background: var(--ok); }
.title{ font-size:14px; }
.meta{ color: var(--muted); font-size:12px }
.tag{ font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border); color: var(--muted); }
.kebab{ opacity:.7; }
.row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }
.quick{ display:flex; gap:10px; align-items:center; width:100%; }
.in{
  flex:1; min-width: 160px;
  border:1px solid var(--border); border-radius:12px; padding:10px 12px;
  background: rgba(0,0,0,.04); color: var(--text);
}
.select{
  border:1px solid var(--border); border-radius:12px; padding:10px 12px;
  background: rgba(0,0,0,.04); color: var(--text);
}
.cal{ display:grid; grid-template-columns: repeat(7,1fr); gap:10px; }
@media (max-width: 860px){ .cal{ grid-template-columns: repeat(3,1fr) } }
@media (max-width: 560px){ .cal{ grid-template-columns: repeat(2,1fr) } }
.day{
  border:1px solid var(--border); border-radius:12px; padding:10px;
  background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  min-height:90px; display:flex; flex-direction:column; gap:6px;
}
.day .d{ font-size:12px; color: var(--muted) }
.pill{
  font-size:12px; padding:6px 8px; border-radius:10px; border:1px solid var(--border);
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.pill.blue{ border-color: rgba(110,168,254,.4) }
.pill.green{ border-color: rgba(125,242,201,.45) }
footer{ margin-top: 24px; color: var(--muted); font-size:12px; text-align:center; }
.sep{ height:1px; background: var(--border); margin: 8px 0 }
.faded{ color: var(--muted) }
.badge{
  font-size:11px; padding:3px 8px; border-radius:999px; background: rgba(110,168,254,.15); border:1px solid rgba(110,168,254,.35);
  color: #dbe9ff;
}

/* Crash subtasks (accordion) */
.chev{ font-size:14px; border:1px solid var(--border); border-radius:8px; padding:4px 8px; }
.sublist{
  display:none; margin:8px 0 0 38px;
  padding:8px 10px; border-left:2px solid var(--border);
  display:none; gap:8px; flex-direction:column;
}
.sublist.open{ display:flex; }
.subitem{ display:flex; align-items:center; gap:8px; font-size:13px; }
.subitem .tick{ width:12px; height:12px; border-radius:3px; border:1px solid var(--border); background:rgba(0,0,0,.04); }
.subitem.done .subtxt{ color:var(--muted); text-decoration:line-through; }
</file>

<file path="index.html">
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jenquin.io ‚Äî Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg: #0b0c10;
      --panel: #111318;
      --muted: #7b8496;
      --text: #e9edf5;
      --accent: #6ea8fe;
      --accent-2: #7df2c9;
      --danger: #ff7a7a;
      --ok: #76ff9b;
      --border: #20232b;
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 14px;
      --radius-sm: 10px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg: #f6f7fb;
        --panel: #ffffff;
        --muted: #6b7280;
        --text: #0f172a;
        --accent: #2556ff;
        --accent-2: #0ea5e9;
        --border: #e5e7eb;
        --shadow: 0 10px 24px rgba(0,0,0,.08);
      }
    }

    *{ box-sizing: border-box }
    html,body{ height:100% }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
                  radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%), var(--bg);
      color: var(--text);
      line-height:1.4;
    }

    /* Shell */
    .wrap{
      max-width: 1200px;
      margin: 0 auto;
      padding: 28px 18px 40px;
    }

    header{
      display:flex; align-items:center; justify-content:space-between;
      gap: 16px; margin-bottom: 22px;
    }
    .brand{
      display:flex; align-items:center; gap:14px;
    }
    .logo{
      width:44px; height:44px; border-radius:12px;
      background:
        radial-gradient(60% 100% at 30% 10%, rgba(125,242,201,.3), transparent 60%),
        linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: var(--shadow);
    }
    .brand h1{
      font-size: 20px; margin: 0;
      letter-spacing:.4px;
    }
    .brand .sub{ color: var(--muted); font-size:13px; margin-top:2px }
    .actions{ display:flex; align-items:center; gap:10px }
    .btn{
      appearance:none; border:1px solid var(--border); color:var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      padding:10px 14px; border-radius:12px; cursor:pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18) }
    .btn.primary{
      background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.05));
      border-color: rgba(110,168,254,.35); color: white;
    }
    .btn.ghost{ background: transparent; }

    /* Layout */
    .grid{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 18px;
    }
    @media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }

    /* Panel */
    .panel{
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: clip;
    }
    .panel .hd{
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      padding: 14px 16px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    }
    .panel .hd h2{ margin:0; font-size: 15px; letter-spacing:.3px }
    .panel .hd .hint{ color:var(--muted); font-size:12px }
    .panel .bd{ padding: 12px 16px }
    .panel .ft{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; flex-wrap:wrap }

    /* Lists */
    .list{ display:flex; flex-direction:column; gap:10px }
    .item{
      display:grid; grid-template-columns: 22px 1fr auto; align-items:center; gap: 10px;
      padding:10px; border:1px solid var(--border); border-radius: var(--radius-sm);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    }
    .chx{ width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer }
    .chx input{ display:none }
    .chx .dot{ width:10px; height:10px; border-radius:3px; background:transparent; }
    .item.done .title{ color: var(--muted); text-decoration: line-through }
    .item.done .chx .dot{ background: var(--ok); }
    .title{ font-size:14px; }
    .meta{ color: var(--muted); font-size:12px }
    .tag{
      font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border);
      color: var(--muted);
    }
    .kebab{ opacity:.7; }
    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }

    /* Quick add */
    .quick{
      display:flex; gap:10px; align-items:center; width:100%;
    }
    .in{
      flex:1; min-width: 160px;
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }
    .select{
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }

    /* Agenda (Apple-style list) */
    .agenda-day{
      border:1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      margin-bottom: 12px; overflow: hidden;
      position: relative;
    }

    /* Live 'now' line inside a day box */
    .now-indicator {
      position: absolute;
      left: 12px;           /* aligns with agenda padding */
      right: 12px;
      height: 2px;
      background: rgba(255,255,255,.35);   /* subtle gray on dark */
      border-radius: 2px;
      pointer-events: none;
      z-index: 20;
      transition: top .2s ease-out;        /* smooth nudges */
    }

    /* optional tiny dot on the left edge */
    .now-indicator::before{
      content:"";
      position:absolute;
      left:-4px; top:-3px;
      width:8px; height:8px; border-radius:50%;
      background: rgba(255,255,255,.6);
      box-shadow: 0 0 6px rgba(255,255,255,.25);
    }
    @media (prefers-color-scheme: light){
      .now-indicator{ background: rgba(0,0,0,.25); }
      .now-indicator::before{ background: rgba(0,0,0,.45); }
    }
    .agenda-day-hd{
      display:flex; justify-content:space-between; align-items:center;
      padding:10px 12px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      font-size:13px; letter-spacing:.2px;
    }
    .agenda-day-hd .date{ color: var(--muted) }
    
    /* Make the left item in the small day header look like a pill */
    /* Softer, more blended focus pill ‚Äî matches card background */
    /* Softer, muted-gray focus pill */
    .agenda-day-hd > :first-child{
      display:inline-block;
      padding:6px 10px;
      border:1px solid rgba(255,255,255,.05);
      border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
      font-weight:400;
      font-size:12px;
      letter-spacing:.2px;
      color: var(--muted);         /* ‚Üê makes text match your time gray */
      box-shadow: inset 0 0 2px rgba(0,0,0,.25);
    }

    @media (prefers-color-scheme: light){
      .agenda-day-hd > :first-child{
        border:1px solid rgba(0,0,0,.05);
        background: linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
        color: var(--muted);       /* still use muted tone in light mode */
      }
    }
    .agenda-list{ display:flex; flex-direction:column }
    .agenda-row{
      display:grid; grid-template-columns: 20px 1fr auto; align-items:center;
      gap:10px; padding:10px 12px; border-top:1px solid var(--border);
    }
    .agenda-row:first-child{ border-top: none }
    .agenda-row .dot{
      width:10px; height:10px; border-radius:50%;
      border:2px solid var(--border);
    }
    .dot.blue{ background: rgba(110,168,254,.9) }
    .dot.green{ background: rgba(125,242,201,.95) }
    .dot.purple{ background: #b38aff }
    .dot.orange{ background: #ffb05a }
    .dot.gray{ background: #9aa3b2 }
    .agenda-title{ font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
    .agenda-meta{ color: var(--muted); font-size:12px }
    .agenda-badge{
      font-size:11px; padding:4px 8px; border-radius:999px;
      border:1px solid var(--border); color: var(--muted);
    }

    /* Agenda checkbox = exactly like Top 3 / Crash */
    .agenda-row .chx{
      width:18px; height:18px;
      border-radius:6px;
      border:1px solid var(--border);
      display:inline-grid; place-items:center;
      cursor:pointer;
      background: transparent;            /* <- no gray fill */
    }

    /* Hide the inner square when unchecked (no "box in box") */
    .agenda-row .chx .dot{
      width:10px; height:10px;
      border-radius:3px;
      background: transparent;
      border: none;                        /* <- ensure no outline */
      opacity: 0;                          /* <- invisible when unchecked */
    }

    /* Checked state = same green fill you already use */
    .agenda-row.done .chx .dot{
      opacity: 1;
      background: var(--ok);
    }

    /* Strike-through title when done (already added, keep) */
    .agenda-row.done .agenda-title{
      color: var(--muted);
      text-decoration: line-through;
    }

    /* Optional: nudge the right cell a hair */
    .agenda-row > .chx{ margin-left: 8px; }

    /* All-day lane: single line, scrolls left‚Üíright */
    .agenda-allday{
      display:flex;
      gap:8px;
      padding:10px 12px;
      border-top:1px solid var(--border);
      overflow-x:auto;
      white-space:nowrap;
      scrollbar-width: thin;
    }
    .agenda-allday::-webkit-scrollbar{ height:6px; }
    .agenda-allday::-webkit-scrollbar-thumb{
      background: rgba(255,255,255,.1);
      border-radius: 999px;
    }

    /* Subtle all-day pills */
    .allday-pill{
      display:inline-flex; align-items:center;
      padding:6px 10px;
      border:1px solid var(--border);
      border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      color: var(--muted);
      font-size:12px;
      white-space:nowrap;
    }

    /* Row directly under the focus banner: Area (left) + All-day items (right) */
    .area-row{
      display:flex; align-items:center; gap:8px;
      padding:10px 12px;
      border-top:1px solid var(--border);
      overflow-x:auto; /* if lots of all-day pills */
    }
    .area-row::-webkit-scrollbar{ height:6px; }
    .area-row::-webkit-scrollbar-thumb{
      background: rgba(255,255,255,.1);
      border-radius:999px;
    }

    /* Left pill = current Area (soft, blended) */
    .area-pill{
      display:inline-flex; align-items:center;
      padding:6px 10px;
      border:1px solid rgba(255,255,255,.05);
      border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
      color: var(--muted);
      font-size:12px;
      box-shadow: inset 0 0 2px rgba(0,0,0,.25);
      white-space:nowrap;
    }

    /* Right lane container for all-day items */
    .allday-lane{
      display:flex; gap:8px;
      margin-left:6px;
    }

    /* Reuse your subtle all-day pill look */
    .allday-pill{
      display:inline-flex; align-items:center;
      padding:6px 10px;
      border:1px solid var(--border);
      border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      color: var(--muted);
      font-size:12px;
      white-space:nowrap;
    }

    @media (prefers-color-scheme: light){
      .area-pill{
        border:1px solid rgba(0,0,0,.05);
        background: linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      }
    }

    footer{
      margin-top: 24px; color: var(--muted); font-size:12px; text-align:center;
    }
    .sep{ height:1px; background: var(--border); margin: 8px 0 }
    .faded{ color: var(--muted) }
    .badge{
      font-size:11px; padding:3px 8px; border-radius:999px; background: rgba(110,168,254,.15); border:1px solid rgba(110,168,254,.35);
      color: #dbe9ff;
    }
    
    /* Crash subtasks (accordion) */
    .chev{ font-size:14px; border:1px solid var(--border); border-radius:8px; padding:4px 8px; }
    .sublist{
      display:none; margin:8px 0 0 38px;
      padding:8px 10px; border-left:2px solid var(--border);
      display:none; gap:8px; flex-direction:column;
    }
    .sublist.open{ display:flex; }
    .subitem{ display:flex; align-items:center; gap:8px; font-size:13px; }
    .subitem .tick{ width:12px; height:12px; border-radius:3px; border:1px solid var(--border); background:rgba(0,0,0,.04); }
    .subitem.done .subtxt{ color:var(--muted); text-decoration:line-through; }
    .subitem{ cursor:pointer; }
    .subitem.done .tick{
      background: var(--ok);
      border-color: rgba(118,255,155,.7);
    }
    
    .item .main{
      flex:1;
    }
    .item .chev{
      margin-left:auto;
      font-size:16px;
      border:none;
      background:transparent;
      color:var(--muted);
      cursor:pointer;
      padding:6px 10px;
    }
    .item .chev:hover{
      color:var(--accent);
      transform: translateY(-1px);
    }
    
    .item .main{ flex:1; }
    .item .kebab{
      margin-left:auto;
      border:none;
      background:transparent;
      color:var(--muted);
      padding:6px 10px;
    }
    .item .kebab:hover{ color:var(--accent); transform: translateY(-1px); }
    
    .btn.mini{ padding:6px 10px; border-radius:10px }
    #miniMonth{
      display:grid; gap:6px;
      grid-template-columns: repeat(7, 1fr);
      width:100%;
    }
    .mm-cell{
      text-align:center; font-size:12px; padding:6px 0;
      border:1px solid var(--border); border-radius:8px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.04));
      cursor:pointer; user-select:none;
    }
    .mm-head{ font-weight:600; color:var(--muted); cursor:default; }
    .mm-out{ opacity:.45 }
    .mm-today{ outline:2px solid var(--accent); }
    .mm-sel{ background: rgba(110,168,254,.18); border-color: rgba(110,168,254,.45); }
    
    .month-nav {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-bottom: 10px;
    }
    
    .month-nav h3 {
      margin: 0;
      font-size: 14px;
      font-weight: 600;
      text-align: center;
      min-width: 100px;
    }
    
    .mini-row{
      display:grid; grid-template-columns: 1fr 1fr; gap:12px; align-items:stretch; width:100%;
      height: 180px;  /* match the clock box height */
    }
    @media (max-width: 860px){
      .mini-row{ grid-template-columns: 1fr; } /* stack on small screens */
    }

    /* Updated miniMonth styles */
    #miniMonth {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 6px 6px 8px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      box-shadow: var(--shadow);
    }

    /* Month header (keep small) */
    .mm-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2px; /* tighten spacing */
      font-size: 11px;
    }
    .mm-nav-btn {
      font-size: 11px;
      padding: 2px 6px;
    }
    .mm-nav-title {
      font-size: 11px;
    }

    /* Days grid scaled down */
    #mmGrid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 3px;
      flex: 1;
    }
    .mm-cell {
      font-size: 10px;
      padding: 3px 0;
    }

    /* Clock card */
    #miniClock{
      display:flex; flex-direction:column; justify-content:center; align-items:center;
      border:1px solid var(--border); border-radius:12px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      box-shadow: var(--shadow); height:100%;
      font-size: 48px;
    }
    .clk-time{
      font-variant-numeric: tabular-nums;
      font-size:46px; line-height:1; letter-spacing:1px;
    }
    .clk-sub{ margin-top:6px; color:var(--muted); font-size:12px; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>jenquin.io</h1>
          <div class="sub">Jenquin ‚Ä¢ Personal Ops Dashboard</div>
        </div>
      </div>
      <div class="actions">
        <button class="btn" id="openReminders">Open Reminders</button>
      </div>
    </header>

    <div class="grid">
      <!-- Left column: Top 3 + Crash 7 stacked -->
      <div class="stack">
        <section class="panel" id="top3Panel">
          <div class="hd">
            <h2>Top 3 Today</h2>
            <div class="row">
              <span class="badge" id="dayLabel">Today</span>
              <span class="hint" id="nowHint">‚Äî</span>
            </div>
          </div>
          <div class="bd">
            <div class="list" id="top3List"></div>
          </div>
          <div class="ft">
            <form class="quick" id="top3Form">
              <input class="in" type="text" placeholder="Quick add to Top 3‚Ä¶" name="title" required />
              <button class="btn" type="submit">Add</button>
            </form>
          </div>
        </section>

        <!-- Crash Plan (no footer) -->
        <section class="panel" id="crashPanel" style="margin-top:18px;">
          <div class="hd">
            <h2>7-Day Crash Plan</h2>
            <div class="hint" id="rangeHint">‚Äî</div>
          </div>
          <div class="bd">
            <div class="list" id="crashList"></div>
          </div>
        </section>
      </div>

      <!-- Right column: Agenda (Apple-style) -->
      <section class="panel" id="agendaPanel">
        <div class="hd" id="flowHd">
          <button class="btn ghost mini" id="dayPrev" aria-label="Previous day">‚Üê</button>
          <h2 id="dayTitle" style="margin:0 auto;">‚Äî</h2>
          <button class="btn ghost mini" id="dayNext" aria-label="Next day">‚Üí</button>
        </div>
        <div class="bd">
          <div id="agenda"></div>
        </div>
        <div class="ft">
          <div class="mini-row">
            <div id="miniMonth">
              <div class="mm-nav">
                <button class="mm-nav-btn" id="monthPrev" aria-label="Previous month">‚óÑ</button>
                <span class="mm-nav-title" id="monthTitle">Month</span>
                <button class="mm-nav-btn" id="monthNext" aria-label="Next month">‚ñ∫</button>
              </div>
              <div id="mmGrid"></div>
            </div>
            <div id="miniClock" aria-label="Current time">
              <div class="clk-time">--:--</div>
              <div class="clk-sub">‚Äî</div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <footer>
      ¬© <span id="year"></span> jenquin.io ‚Ä¢ v1 preview ¬∑ Data stays in Apple apps ¬∑ Clicks may open native apps
    </footer>
  </div>

  <script>
    // ------------ Utilities
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));
    
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function fmtTime(d){
      return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
    }
    function fmtDate(d){
      return new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(d);
    }
    function addDays(d, n){ const c = new Date(d); c.setDate(c.getDate()+n); return c; }
    
    // ----- Date anchors
    function startOfDay(d){ return new Date(d.getFullYear(), d.getMonth(), d.getDate()); }
    const TODAY = startOfDay(new Date());
    let SELECTED = TODAY; // ‚Üê the day your FlowOS panel shows

    // --- AREA detection (minimal; explicit ev.area preferred, else infer by title)
    const AREA_FLEX = "Flex";
    const AREA_NAMES = [
      "Prep & Maintenance",
      "Review & Planning",
      "Rest & Recharge",
      "Creative / Project Work",
      "Health",
      "Errands & Logistics",
      "Social & Relationships",
      "Flex"
    ];

    function inferAreaFromTitle(title=""){
      const t = title.toLowerCase();
      if (t.match(/\breview\b|\bplanning\b/)) return "Review & Planning";
      if (t.match(/\brest\b|\brecharge\b/)) return "Rest & Recharge";
      if (t.match(/\bprep\b|\bmaintenance\b/)) return "Prep & Maintenance";
      if (t.match(/\bcreative\b|\bproject\b/)) return "Creative / Project Work";
      if (t.match(/\bhealth\b|\bgym\b|\brun\b|\byoga\b/)) return "Health";
      if (t.match(/\berrand\b|\blogistic\b|\bshop\b|\bgrocery\b/)) return "Errands & Logistics";
      if (t.match(/\bsocial\b|\brelationship\b|\bfriend\b|\bdinner\b|\bmeet\b/)) return "Social & Relationships";
      if (t.match(/\bflex\b/)) return "Flex";
      return null;
    }

    // Build sorted "area windows" from events that map to an area
    function areaWindows(events=[]){
      return (events||[])
        .map(ev=>{
          const area = ev.area || inferAreaFromTitle(ev.title);
          return (area && ev.start) ? { ...ev, area } : null;
        })
        .filter(Boolean)
        .sort((a,b)=> +new Date(a.start) - +new Date(b.start));
    }

    // Single active area (if overlaps, prefer the one with latest start)
    function findCurrentArea(events, now=new Date()){
      const wins = areaWindows(events);
      const active = wins.filter(w=>{
        const s = new Date(w.start);
        const e = w.end ? new Date(w.end) : null;
        return e ? (now >= s && now < e) : (now >= s);
      });
      if (!active.length) return null;
      return active.reduce((a,b)=> new Date(a.start) > new Date(b.start) ? a : b);
    }

    // Next scheduled area after now
    function findNextArea(events, now=new Date()){
      const wins = areaWindows(events);
      for (const w of wins){ if (new Date(w.start) > now) return w; }
      return null;
    }

    // Format the Area pill
    function areaPillHTML(label, s, e){
      // only show the area label, no time
      return `<span class="area-pill">${escapeHtml(label)}</span>`;
    }

    // Create the combined row: [Area pill]  [all-day lane -> pills...]
    function renderAreaRow(day, box){
      const row = document.createElement('div');
      row.className = 'area-row';
      row.setAttribute('data-arearow','1');

      // left: area pill placeholder
      const areaSlot = document.createElement('span');
      areaSlot.className = 'area-pill';
      areaSlot.setAttribute('data-areaslot','1');
      areaSlot.textContent = ''; // will be filled by updateAreaRow()

      // right: all-day lane container
      const lane = document.createElement('div');
      lane.className = 'allday-lane';
      lane.setAttribute('data-alldaylane','1');

      // fill all-day items horizontally to the right, excluding the focus label
      const focusLabel = day.focus || "";
      if (day.allDay && day.allDay.length){
        (day.allDay || [])
          .filter(a => a && a.title && a.title !== focusLabel && !/^\[FOCUS\]/i.test(a.title))
          .forEach(a=>{
            const pill = document.createElement('span');
            pill.className = 'allday-pill';
            pill.textContent = a.title;
            lane.appendChild(pill);
          });
      }

      row.appendChild(areaSlot);
      row.appendChild(lane);
      box.appendChild(row);

      // initial area fill
      updateAreaRow(day, row);
    }

    // Update only the left area pill content
    function updateAreaRow(day, row){
      if (!row) return;
      const slot = row.querySelector('[data-areaslot="1"]');
      if (!slot) return;

      const now = new Date();
      const isToday = +startOfDay(now) === +startOfDay(day.date);

      if (!isToday){
        // On non-today days: show first area if any, else a default Flex window (optional)
        const wins = areaWindows(day.events);
        if (wins.length){
          const first = wins[0];
          slot.outerHTML = areaPillHTML(first.area, new Date(first.start), first.end ? new Date(first.end) : null);
        }else{
          const ds = new Date(day.date); ds.setHours(9,0,0,0);
          const de = new Date(day.date); de.setHours(17,0,0,0);
          slot.outerHTML = areaPillHTML(AREA_FLEX, ds, de);
        }
        return;
      }

      // Today: only show the current area; if in a gap, show Flex until next area or EOD
      const current = findCurrentArea(day.events, now);
      if (current){
        slot.outerHTML = areaPillHTML(current.area, new Date(current.start), current.end ? new Date(current.end) : null);
      }else{
        const next = findNextArea(day.events, now);
        const flexStart = now;
        const flexEnd = next ? new Date(next.start)
          : new Date(day.date.getFullYear(), day.date.getMonth(), day.date.getDate(), 23, 59, 0, 0);
        slot.outerHTML = areaPillHTML(AREA_FLEX, flexStart, flexEnd);
      }
    }

    // Called by your timer to keep the area pill live
    function updateLiveArea(){
      const dayBox = document.querySelector('#agenda .agenda-day');
      if (!dayBox || !window.__CURRENT_DAY) return;
      const row = dayBox.querySelector('[data-arearow="1"]');
      if (!row) return;
      updateAreaRow(window.__CURRENT_DAY, row);
    }

    // ------------ Demo mode via URL parameter
    // Visit site normally for live mode, add ?demo=1 for demo mode
    // Simple flag for demo mode
    let DEMO = new URLSearchParams(window.location.search).has('demo');
    let CRASH_STATE = null;
    
    // In-memory storage for demo mode
    const DEMO_STORAGE = {};
    
    // ------------ Storage wrappers for demo vs live persistence
    // These wrappers provide a consistent interface for storage operations
    // In demo mode, they use memory storage that resets on page refresh
    // In live mode, they use localStorage for persistence
    
    // ------------ Storage wrappers for demo vs live persistence
    // These wrappers provide a consistent interface for storage operations
    // In demo mode, they use memory storage that resets on page refresh
    // In live mode, they use localStorage for persistence
    
    // Get a value from storage (localStorage in live mode, memory in demo mode)
    function storageGet(key) {
      if (DEMO) {
        return DEMO_STORAGE[key];
      } else {
        try {
          return JSON.parse(localStorage.getItem(key) || 'null');
        } catch {
          return null;
        }
      }
    }
    
    // Set a value in storage (localStorage in live mode, memory in demo mode)
    function storageSet(key, value) {
      if (DEMO) {
        DEMO_STORAGE[key] = value;
      } else {
        localStorage.setItem(key, JSON.stringify(value));
      }
    }
    
    // Remove a value from storage
    function storageRemove(key) {
      if (DEMO) {
        delete DEMO_STORAGE[key];
      } else {
        localStorage.removeItem(key);
      }
    }
    
    
    // ------------ Mock data
    function mockTop3(){
      return [
        { title: "cut front grass", due: "", completed: false},
        { title: "pay electric", due: "", completed: false},
        { title: "migrate webhook to tailscale", due: "", completed: false},
      ];
    }
    function mockCrash(){
  const now = new Date();
  const day = (n)=> addDays(now, n-1); // Day 1=today, Day 2=+1, etc.

  return [
    {
      day: 1,
      title: "Day 1 ‚Äì Core Finances",
      due: day(1),
      subtasks: [
        "Gather last 3‚Äì6 months bank statements",
        "Gather household bills (utilities, phone, internet, HOA, insurance)",
        "Print/save mortgage statements & lender letters"
      ]
    },
    {
      day: 2,
      title: "Day 2 ‚Äì Ledger + Food Stamps",
      due: day(2),
      subtasks: [
        "Finalize expense ledger (food, gas, health, debt)",
        "Apply for food stamps (use bank statements + ledger as proof)"
      ]
    },
    {
      day: 3,
      title: "Day 3 ‚Äì Mom‚Äôs Medical Packet (Part 1)",
      due: day(3),
      subtasks: [
        "Collect hospital/clinic records (copies/printouts)",
        "Gather prescriptions + receipts"
      ]
    },
    {
      day: 4,
      title: "Day 4 ‚Äì Mom‚Äôs Medical Packet (Part 2)",
      due: day(4),
      subtasks: [
        "Write daily function notes (3‚Äì5 days is enough)",
        "Request doctor‚Äôs letter (or confirm appointment/availability)"
      ]
    },
    {
      day: 5,
      title: "Day 5 ‚Äì Bankruptcy Packet (Part 1)",
      due: day(5),
      subtasks: [
        "Gather credit card + loan statements",
        "List creditors + balances",
        "List assets (truck, tools, furniture, gear)"
      ]
    },
    {
      day: 6,
      title: "Day 6 ‚Äì Bankruptcy Packet (Part 2)",
      due: day(6),
      subtasks: [
        "Review tax returns (last 2 years)",
        "Align ledger with tax numbers (rough match is fine)",
        "Organize everything into Shared Packet folder system"
      ]
    },
    {
      day: 7,
      title: "Day 7 ‚Äì Compile & Review",
      due: day(7),
      subtasks: [
        "Assemble Disability packet (Mom) ‚Äî submission ready",
        "Assemble Bankruptcy packet ‚Äî file-ready (hold unless needed)",
        "Double-check folders, label clearly (‚Äúready to send‚Äù)"
      ]
    }
  ];
}

    // --- Mock agenda data like your screenshots
    function mockAgenda(forDate = SELECTED){
      const d0 = startOfDay(forDate);
      const at = (d,h,m=0)=> new Date(d.getFullYear(), d.getMonth(), d.getDate(), h, m);
      const weekday = new Intl.DateTimeFormat(undefined, { weekday:'long' }).format(d0);

      return [{
        label: weekday,
        date: d0,
        focus: "Recovery Day",          // ‚Üê focus lives here
        allDay: [                       // ‚Üê birthdays, etc. (no focus here)
          { title: "" },
          // { title: "Pay bills" },
        ],
        events: [
          { title:"water plants",          start: at(d0,7,30),   color:"green" },
          { title:"precor stretch circuit",start: at(d0,9,30),   color:"blue" },
          { title:"grocery shop",                start: at(d0,11,0), end: at(d0,12,0), color:"gray" },
          { title:"mom dinner",            start: at(d0,19,30),  color:"purple" },
          { title:"sleep",                 start: at(d0,23,15),  color:"blue" },
        ]
      }];
    }

    // ------------ Live fetch helpers (wire these to your API later)
    async function apiGet(path){
      if(path==="/top3") return mockTop3();
      if(path==="/crash7") return mockCrash();
      if(path==="/agenda") return mockAgenda();
      return [];
    }
    async function apiPost(path, payload){
      return { ok:true };
    }

    // ------------ Renderers
    function renderTop3(items){
      const wrap = $('#top3List');
      wrap.innerHTML = "";

      items.forEach((it, idx)=>{
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div class="main">
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
          </div>
        `;

        // toggle complete
        row.querySelector('.chx').addEventListener('click', ()=>{
          row.classList.toggle('done');
        });

        wrap.appendChild(row);
      });
    }

    function renderCrash(items){
      const wrap = $('#crashList');
      wrap.innerHTML = "";
    
      items.forEach((it, dayIdx)=>{
        const due = it.due ? fmtDate(new Date(it.due)) : "‚Äî";
    
        // Day row (header)
        const row = document.createElement('div');
        row.className = 'item';
        row.innerHTML = `
          <label class="chx" aria-label="toggle day done">
            <span class="dot"></span>
          </label>
          <div class="main">
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">Due: ${due}</div>
          </div>
          <button class="btn ghost chev" type="button" aria-expanded="false">‚ñ∏</button>
        `;
    
        // Subtask list
        const sub = document.createElement('div');
        sub.className = 'sublist';
    
        (it.subtasks || []).forEach((st, subIdx)=>{
          const li = document.createElement('div');
          li.className = 'subitem' + (st.completed ? ' done' : '');
          li.innerHTML = `
            <span class="tick" aria-hidden="true"></span>
            <span class="subtxt">${escapeHtml(st.text || st)}</span>
          `;
    
          // Toggle a single subtask
          li.addEventListener('click', ()=>{
            const curr = CRASH_STATE[dayIdx].subtasks[subIdx];
            curr.completed = !curr.completed;
            li.classList.toggle('done', curr.completed);
            localStorage.setItem('crash7', JSON.stringify(CRASH_STATE));
          });
    
          sub.appendChild(li);
        });
    
        // Chevron expand/collapse
        const toggleBtn = row.querySelector('.chev');
        toggleBtn.addEventListener('click', ()=>{
          const open = sub.classList.toggle('open');
          toggleBtn.textContent = open ? '‚ñæ' : '‚ñ∏';
          toggleBtn.setAttribute('aria-expanded', String(open));
        });
    
        // Optional: mark whole day as done (visual only)
        row.querySelector('.chx').addEventListener('click', ()=>{
          row.classList.toggle('done');
        });
    
        wrap.appendChild(row);
        wrap.appendChild(sub);
      });
    }
    
    function getAgendaDone(){
      return storageGet('agendaDone') || {};
    }
    function setAgendaDone(map){
      storageSet('agendaDone', map || {});
    }
    function agendaKey(ev){
      // stable key per event instance
      const s = new Date(ev.start).toISOString();
      const e = ev.end ? new Date(ev.end).toISOString() : '';
      // Include the day in the key to scope it to the day
      const day = startOfDay(new Date(ev.start)).toISOString().split('T')[0];
      return `${day}|${s}|${e}|${ev.title}`;
    }
    
    function renderAgenda(days){
      const wrap = document.getElementById('agenda');
      wrap.innerHTML = "";

      days.forEach(day=>{
        const box = document.createElement('div');
        box.className = 'agenda-day';

        // ---- Header (Focus banner)
        const hd = document.createElement('div');
        hd.className = 'agenda-day-hd';
        const dow = new Intl.DateTimeFormat(undefined, { weekday:'long'}).format(day.date);
        const mdy = new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(day.date);
        hd.innerHTML = `<div>${escapeHtml(day.label)}</div><div class="date">${dow}, ${mdy}</div>`;
        box.appendChild(hd);

        // Replace left header text with focus (if present)
        // use ONLY the explicit focus
        const focus = day.focus || null;
        if (focus){
          hd.firstElementChild.textContent = focus;
          const right = hd.querySelector('.date');
          if (right) right.textContent = "";
        }

        // Add the area row with all-day items
        renderAreaRow(day, box);

        // ---- Timed events (sorted)
        const list = document.createElement('div');
        list.className = 'agenda-list';
        (day.events||[]).sort((a,b)=> +new Date(a.start) - +new Date(b.start));
        (day.events||[]).forEach(ev=>{
          const startStr = fmtTime(new Date(ev.start));
          const endStr   = ev.end ? fmtTime(new Date(ev.end)) : null;

          const row = document.createElement('div');
          row.className = 'agenda-row';
          row.dataset.start = new Date(ev.start).toISOString();
          if (ev.end) row.dataset.end = new Date(ev.end).toISOString();
          
          row.innerHTML = `
            <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
            <div>
              <div class="agenda-title">${escapeHtml(ev.title)}</div>
              <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
            </div>
            <label class="chx" aria-label="Mark ${escapeHtml(ev.title)} done">
              <span class="dot"></span>
            </label>
          `;

          const key = agendaKey(ev);
          const doneMap = getAgendaDone();
          if (doneMap[key]) row.classList.add('done');

          // toggle done on click (checkbox at right)
          row.querySelector('.chx').addEventListener('click', ()=>{
            row.classList.toggle('done');
            const m = getAgendaDone();
            m[key] = row.classList.contains('done');
            setAgendaDone(m);
          });

          list.appendChild(row);
        });
        box.appendChild(list);

        wrap.appendChild(box);
      });
    }

    function ensureNowIndicator(dayBox){
      let el = dayBox.querySelector('.now-indicator');
      if (!el){
        el = document.createElement('div');
        el.className = 'now-indicator';
        dayBox.appendChild(el);
      }
      return el;
    }

    /**
     * Places the 'now' line inside the first .agenda-day box based on time.
     * It interpolates between the DOM positions of the nearest events so it
     * glides smoothly even between rows of different heights.
     */
    function updateNowIndicator(){
      // Only show on the selected day if it is today
      const isToday = +startOfDay(new Date()) === +startOfDay(SELECTED);
      const dayBox = document.querySelector('#agenda .agenda-day');
      if (!dayBox){ return; }

      // Remove if not today
      if (!isToday){
        const old = dayBox.querySelector('.now-indicator');
        if (old) old.remove();
        return;
      }

      const list = dayBox.querySelector('.agenda-list');
      if (!list){ return; }

      const rows = Array.from(list.querySelectorAll('.agenda-row'));
      const now = new Date();

      // Build time ‚Üí y map from rows
      const points = rows.map(row => {
        const start = new Date(row.dataset.start);
        const end = row.dataset.end ? new Date(row.dataset.end) : null;
        const rect = row.getBoundingClientRect();
        const listTop = list.getBoundingClientRect().top + window.scrollY;
        return {
          start, end,
          yTop:  rect.top + window.scrollY - listTop,
          yBot:  rect.bottom + window.scrollY - listTop
        };
      });

      const indicator = ensureNowIndicator(dayBox);
      const listBoxTop = list.getBoundingClientRect().top + window.scrollY;

      // If no events, pin to the very top at current time
      if (points.length === 0){
        indicator.style.top = (listBoxTop + 8 - listBoxTop) + 'px';
        return;
      }

      // Find surrounding interval
      let prev = null, next = null;
      for (let i=0;i<points.length;i++){
        const p = points[i];
        const start = p.start;
        if (now < start){ next = p; break; }
        prev = p;
      }

      let topPx;

      if (!prev){                 // before first event
        const first = points[0];
        const dayStart = new Date(SELECTED); // 00:00 today
        const minutesSpan = (first.start - dayStart) / 60000;
        const prog = Math.min(Math.max((now - dayStart) / (first.start - dayStart), 0), 1);
        topPx = first.yTop * prog;
      } else if (!next){          // after last event
        const last = points[points.length - 1];
        const dayEnd = new Date(SELECTED); dayEnd.setHours(23,59,59,999);
        const prog = Math.min(Math.max((now - (last.end || last.start)) / (dayEnd - (last.end || last.start)), 0), 1);
        topPx = last.yBot + (list.scrollHeight - last.yBot) * prog;
      } else {                    // between prev and next
        const t0 = prev.end || prev.start;            // use end if present
        const t1 = next.start;
        const y0 = prev.yBot;
        const y1 = next.yTop;
        const prog = Math.min(Math.max((now - t0) / (t1 - t0), 0), 1);
        topPx = y0 + (y1 - y0) * prog;
      }

      // Apply position (relative to the agenda-day box)
      const dayTop = dayBox.getBoundingClientRect().top + window.scrollY;
      indicator.style.top = (listBoxTop - dayTop + topPx) + 'px';
    }

    // Kick the updater
    function startNowIndicator(){
      updateNowIndicator();
      updateLiveArea();                  // ‚Üê add
      clearInterval(window.__nowTimer);
      // smooth enough and cheap
      window.__nowTimer = setInterval(()=>{
        updateNowIndicator();
        updateLiveArea();                // ‚Üê add
      }, 60000); // every minute is fine
      // also recalc after resizes
      window.addEventListener('resize', updateNowIndicator);
      window.addEventListener('scroll', updateNowIndicator, { passive:true });
    }

    // ------------ Quick add
    document.addEventListener('DOMContentLoaded', () => {
      const top3Form = $('#top3Form');
      if (top3Form) {
        top3Form.addEventListener('submit', async (e)=>{
          e.preventDefault();
          const fd = new FormData(e.target);
          const title = String(fd.get('title')||'').trim();
          if(!title) return;
          if(DEMO){
            const items = mockTop3();
            items.unshift({title, due:"", completed:false, tag:"#QuickAdd"});
            renderTop3(items);
          }else{
            await apiPost('/reminder', { list:"Top 3", title });
            await loadTop3();
          }
          e.target.reset();
        });
      }
    });

    // ------------ Actions (simulate opening native apps)
    document.addEventListener('DOMContentLoaded', () => {
      const openReminders = $('#openReminders');
      
      if (openReminders) {
        openReminders.addEventListener('click', () => alert('Opening Reminders (simulated)‚Ä¶'));
      }
    });

    // ------------ Loaders
    async function loadTop3(){
      const items = DEMO ? mockTop3() : await apiGet('/top3');
      renderTop3(items);
    }
    async function loadCrash(){
      // try cache first
      if (CRASH_STATE === null) {
        CRASH_STATE = storageGet('crash7');
      }
    
      // fetch if no cache
      if (!Array.isArray(CRASH_STATE) || CRASH_STATE.length === 0) {
        CRASH_STATE = DEMO ? mockCrash() : await apiGet('/crash7');
      }
    
      // normalize: turn string subtasks into {text, completed:false}
      CRASH_STATE = CRASH_STATE.map(day=>{
        const subs = (day.subtasks || []).map(s => {
          return typeof s === 'string' ? { text: s, completed: false } : s;
        });
        return { ...day, subtasks: subs };
      });
    
      storageSet('crash7', CRASH_STATE);
      renderCrash(CRASH_STATE);
    }
    
    function startOfMonth(d){ return new Date(d.getFullYear(), d.getMonth(), 1); }
    function endOfMonth(d){ return new Date(d.getFullYear(), d.getMonth()+1, 0); }
    
    // Big digital clock (minutes; flip to seconds if you want)
    const SHOW_SECONDS = false;

    function renderClockOnce(){
      const box = document.getElementById('miniClock');
      if(!box) return;
      const now = new Date();
      const timeFmt = new Intl.DateTimeFormat(undefined, {
        hour: '2-digit', minute: '2-digit', ...(SHOW_SECONDS ? { second: '2-digit' } : {})
      });

      box.querySelector('.clk-time').textContent = timeFmt.format(now);
      box.querySelector('.clk-sub').textContent = '';
    }

    function startClock(){
      renderClockOnce();
      clearInterval(window.__clkTimer);
      // Update every second if showing seconds; otherwise every 30s to save cycles
      window.__clkTimer = setInterval(renderClockOnce, SHOW_SECONDS ? 1000 : 30000);
    }

    function updateMonthTitle(date) {
      const monthTitle = document.getElementById('monthTitle');
      if (monthTitle) {
        const monthYearFmt = new Intl.DateTimeFormat(undefined, { month: 'long', year: 'numeric' });
        monthTitle.textContent = monthYearFmt.format(date);
      }
    }
    
    function renderMiniMonth(anchor = SELECTED){
      const mount = document.getElementById('miniMonth');
      if(!mount) return;
      
      // Get or create the grid container
      let grid = document.getElementById('mmGrid');
      if (!grid) {
        grid = document.createElement('div');
        grid.id = 'mmGrid';
        mount.appendChild(grid);
      }
      grid.innerHTML = "";

      const monthStart = startOfMonth(anchor);
      const monthEnd   = endOfMonth(anchor);
      
      // Update month title
      updateMonthTitle(anchor);
      // Find grid start on Sunday (or your locale's week start)
      const gridStart = addDays(monthStart, -monthStart.getDay());
      // Headers
      "SMTWTFS".split("").forEach(ch=>{
        const h = document.createElement('div');
        h.className = 'mm-cell mm-head';
        h.textContent = ch;
        grid.appendChild(h);
      });
      // 6 weeks * 7 days
      for(let i=0;i<42;i++){
        const d = addDays(gridStart, i);
        const cell = document.createElement('div');
        cell.className = 'mm-cell';
        if(d.getMonth() !== anchor.getMonth()) cell.classList.add('mm-out');
        if(+startOfDay(d) === +startOfDay(TODAY)) cell.classList.add('mm-today');
        if(+startOfDay(d) === +startOfDay(SELECTED)) cell.classList.add('mm-sel');
        cell.textContent = d.getDate();
        cell.addEventListener('click', ()=>{
          SELECTED = startOfDay(d);
          updateDayTitle(SELECTED);
          loadAgenda();           // re-render agenda for that day
          renderMiniMonth(SELECTED); // re-render month selection
        });
        grid.appendChild(cell);
      }
    }
    
    // Setup day and month navigation after DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
      const dayPrevBtn = document.getElementById('dayPrev');
      const dayNextBtn = document.getElementById('dayNext');
      const monthPrevBtn = document.getElementById('monthPrev');
      const monthNextBtn = document.getElementById('monthNext');
      
      if (dayPrevBtn) {
        dayPrevBtn.addEventListener('click', () => {
          SELECTED = addDays(SELECTED, -1);
          loadAgenda();
          renderMiniMonth(SELECTED);
        });
      }
      
      if (dayNextBtn) {
        dayNextBtn.addEventListener('click', () => {
          SELECTED = addDays(SELECTED, +1);
          loadAgenda();
          renderMiniMonth(SELECTED);
        });
      }
      
      if (monthPrevBtn) {
        monthPrevBtn.addEventListener('click', () => {
          // Go to previous month (same day)
          const currentDay = SELECTED.getDate();
          SELECTED = new Date(SELECTED.getFullYear(), SELECTED.getMonth() - 1, 1);
          // Try to maintain the same day of month if possible
          const lastDayOfMonth = new Date(SELECTED.getFullYear(), SELECTED.getMonth() + 1, 0).getDate();
          SELECTED.setDate(Math.min(currentDay, lastDayOfMonth));
          renderMiniMonth(SELECTED);
        });
      }
      
      if (monthNextBtn) {
        monthNextBtn.addEventListener('click', () => {
          // Go to next month (same day)
          const currentDay = SELECTED.getDate();
          SELECTED = new Date(SELECTED.getFullYear(), SELECTED.getMonth() + 1, 1);
          // Try to maintain the same day of month if possible
          const lastDayOfMonth = new Date(SELECTED.getFullYear(), SELECTED.getMonth() + 1, 0).getDate();
          SELECTED.setDate(Math.min(currentDay, lastDayOfMonth));
          renderMiniMonth(SELECTED);
        });
      }
    });
    function updateDayTitle(d){
      const w = new Intl.DateTimeFormat(undefined,{ weekday:'long'}).format(d);
      const md = new Intl.DateTimeFormat(undefined,{ month:'short', day:'numeric'}).format(d);
      const dayTitle = document.getElementById('dayTitle');
      if (dayTitle) dayTitle.textContent = `${w} ‚Ä¢ ${md}`;
    }
    
    async function loadAgenda(){
      const days = DEMO ? mockAgenda(SELECTED) : await apiGet('/agenda');
      window.__CURRENT_DAY = days[0];  // keep a handle for live updates
      renderAgenda(days);
      updateDayTitle(SELECTED);
      startNowIndicator();   // <‚Äî add this
    }
    
    async function loadAll(){
      const now = new Date();
      const nowHint = $('#nowHint');
      const rangeHint = $('#rangeHint');
      const tzHint = $('#tzHint');
      
      if (nowHint) nowHint.textContent = fmtDate(now);
      if (rangeHint) rangeHint.textContent = `${fmtDate(SELECTED)} ‚Üí ${fmtDate(addDays(SELECTED,6))}`;
      if (tzHint) tzHint.textContent = `Local time: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`;
      
      await Promise.all([loadTop3(), loadCrash(), loadAgenda()]);
      renderMiniMonth(SELECTED);
      startClock();
      startNowIndicator();   // <‚Äî add this
    }

    // ------------ Misc
    document.addEventListener('DOMContentLoaded', () => {
      const yearEl = $('#year');
      if (yearEl) yearEl.textContent = new Date().getFullYear();
      
      // Add demo mode indicator if in demo mode
      if (DEMO) {
        const footer = document.querySelector('footer');
        if (footer) {
          const demoIndicator = document.createElement('div');
          demoIndicator.className = 'demo-indicator';
          demoIndicator.textContent = 'DEMO MODE';
          demoIndicator.style.color = 'var(--muted)';
          demoIndicator.style.fontWeight = 'bold';
          demoIndicator.style.marginTop = '8px';
          footer.appendChild(demoIndicator);
        }
      }
    });
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }

    // Init
    loadAll();
  </script>
</body>
</html>
</file>

</files>
</file>

<file path="Backups/sandbox_1.3.html">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agenda Card ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.25}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris‚Äô Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris‚Äô Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [

  { label:"Flex",                     start: at(7,30),  end: at(8,0),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(10,15), color: AREA_COLORS.health },
  { label:"Prep & Maintenance",       start: at(11,0),  end: at(12,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Administrative",           start: at(14,0),  end: at(16,0),  color: AREA_COLORS.administrative },
  { label:"Social & Relationships",   start: at(19,30), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,15), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
  }
  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock ‚ÄúFlex ¬∑ 3:33 PM‚Äì7:30 PM‚Äù */
  (function seedAreaPill(){
  const p = document.getElementById('areaPill');
  const seg = ZONES[0];
  if (seg) p.textContent = seg.label; // just the zone name, no time
})();
</script>
</body>
</html>
</file>

<file path="Backups/sandbox_digital_twin_oraclebackup.html">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Digital Twin Oracle ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.28}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}

  /* --- Digital Twin (Oracle) --- */
  .oracle-wrap{
    display:flex; align-items:center; justify-content:center;
    height: 260px; position:relative; overflow:hidden;
    background: radial-gradient(600px 320px at 50% -30%, rgba(125,242,201,.08), transparent 60%),
                radial-gradient(520px 280px at 120% 120%, rgba(110,168,254,.10), transparent 60%);
    border:1px solid var(--border); border-radius: var(--radius);
  }

  .oracle{
    position:relative; width: 160px; aspect-ratio: 3/5;
    filter: drop-shadow(0 12px 28px rgba(0,0,0,.45));
  }

  .oracle .aura{
    position:absolute; inset:-18%;
    border-radius: 30% 30% 36% 36% / 28% 28% 52% 52%;
    background: radial-gradient(60% 60% at 50% 35%, rgba(255,255,255,.35), transparent 60%),
                radial-gradient(80% 80% at 50% 50%, rgba(110,168,254,.25), transparent 65%);
    filter: blur(18px) saturate(1.1);
    animation: auraPulse 3.6s ease-in-out infinite;
    opacity:.9;
  }

  .oracle .body{
    position:absolute; inset:0; display:block;
    background:
      radial-gradient(45% 45% at 50% 20%, rgba(255,255,255,.85), rgba(255,255,255,.15) 60%),
      linear-gradient(180deg, rgba(110,168,254,.9), rgba(125,242,201,.7) 60%, rgba(110,168,254,.85));
    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
    mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
    border-radius: 18px;
    animation: subtleFloat 6s ease-in-out infinite;
  }

  /* Zone colors */
  .oracle[data-zone="Rest & Recharge"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(125,242,201,.30),transparent 65%)}
  .oracle[data-zone="Health"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(118,255,155,.30),transparent 65%);animation-duration:2.2s}
  .oracle[data-zone="Creative / Project Work"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(110,168,254,.30),transparent 65%)}
  .oracle[data-zone="Review & Planning"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(179,138,255,.28),transparent 65%)}
  .oracle[data-zone="Errands & Logistics"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,176,90,.30),transparent 65%)}
  .oracle[data-zone="Social & Relationships"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,122,122,.28),transparent 65%)}
  .oracle[data-zone="Flex"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(154,163,178,.28),transparent 65%)}

  /* Animations */
  @keyframes auraPulse{0%,100%{transform:scale(.96);opacity:.85}50%{transform:scale(1.03);opacity:1}}
  @keyframes subtleFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}

  .oracle-legend{margin-top:10px;font-size:12px;color:var(--muted);text-align:center}
  
  .hint{color:var(--muted);font-size:13px}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris' Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>

    <!-- Digital Twin (Oracle) Panel -->
    <section class="panel" id="oraclePanel" style="margin-top:18px;">
      <div class="hd">
        <h2>Digital Twin</h2>
        <div class="hint"><span id="oracleZoneHint">‚Äî</span></div>
      </div>
      <div class="bd">
        <div class="oracle-wrap">
          <div id="oracle" class="oracle" data-zone="Rest & Recharge" aria-label="Digital twin state">
            <div class="aura"></div>
            <div class="body"></div>
          </div>
        </div>
        <div class="oracle-legend">
          Mirrors your current Area (Rest &amp; Recharge, Health, Creative, etc.).
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris' Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [
  { label:"Health",                   start: at(0,0),  end: at(7,30), color: AREA_COLORS.health },
  { label:"Flex",                     start: at(7,30),  end: at(9,30),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(11,0), color: AREA_COLORS.health },
  { label:"Prep & Maintenance",       start: at(11,0),  end: at(14,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Administrative",           start: at(14,0),  end: at(18,0),  color: AREA_COLORS.administrative },
  { label:"Social & Relationships",   start: at(18,0), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,0), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Digital Twin wiring ---------- */
  function normalizeZone(area){
    const m = {
      "Rest & Recharge": "Rest & Recharge",
      "Health": "Health",
      "Creative / Project Work": "Creative / Project Work",
      "Review & Planning": "Review & Planning",
      "Errands & Logistics": "Errands & Logistics",
      "Social & Relationships": "Social & Relationships",
      "Flex": "Flex",
      "Prep & Maintenance": "Review & Planning"
    };
    return m[area] || "Flex";
  }

  function setOracleZone(zone){
    const el = document.getElementById('oracle');
    const hint = document.getElementById('oracleZoneHint');
    if (!el) return;
    el.setAttribute('data-zone', zone);
    if (hint) hint.textContent = zone;
  }

  function findCurrentArea(events, now) {
    // Mock implementation - find which zone we're currently in
    for (const zone of ZONES) {
      if (now >= zone.start && now < zone.end) {
        return { area: zone.label };
      }
    }
    return null;
  }

  function findNextArea(events, now) {
    // Mock implementation - find next zone
    for (const zone of ZONES) {
      if (now < zone.start) {
        return { area: zone.label };
      }
    }
    return null;
  }

  function updateOracleFromAgenda(){
    const day = window.__CURRENT_DAY || { events: ZONES };
    if (!day) return;
    const now = new Date();
    const current = findCurrentArea(day.events, now);
    if (current){
      setOracleZone(normalizeZone(current.area));
      return;
    }
    const next = findNextArea(day.events, now);
    setOracleZone(next ? "Flex" : "Flex");
  }

  function updateLiveArea() {
    // Mock function to simulate existing functionality
    updateOracleFromAgenda();
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
    updateOracleFromAgenda(); // Update oracle on each tick
  }

  document.addEventListener('DOMContentLoaded', ()=>{
    if (document.getElementById('oracle')){
      updateOracleFromAgenda();
    }
  });

  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock "Flex ¬∑ 3:33 PM‚Äì7:30 PM" */
  (function seedAreaPill(){
  const p = document.getElementById('areaPill');
  const seg = ZONES[0];
  if (seg) p.textContent = seg.label; // just the zone name, no time
})();
</script>
</body>
</html>
</file>

<file path="scripts/pull_reminders_local.sh">
#!/bin/bash
# pull_reminders_local.sh
# Converts LifeOrganizer CSV reminders to JSON for Jenquin-site calendar

set -e

# Paths
SOURCE_DIR="/Volumes/storage/projects/LifeOrganizer/life_organizer/modules/organized_reminders/data/deduped_reminders"
OUTPUT_FILE="/Volumes/storage/projects/Jenquin-site/data/reminders.local.json"
TEMP_FILE="/tmp/reminders_processing.json"

echo "üîÑ Pulling reminders from LifeOrganizer..."

# Find the newest CSV file
NEWEST_CSV=$(find "$SOURCE_DIR" -name "*.csv" -type f | sort | tail -1)

if [ -z "$NEWEST_CSV" ]; then
    echo "‚ùå No CSV files found in $SOURCE_DIR"
    exit 1
fi

echo "üìÑ Processing: $(basename "$NEWEST_CSV")"

# Create temp directory for processing
mkdir -p "$(dirname "$TEMP_FILE")"

# Convert CSV to JSON using Python
export NEWEST_CSV
export TEMP_FILE
python3 << EOF
import csv
import json
import sys
from datetime import datetime
import os

source_file = os.environ['NEWEST_CSV']
temp_file = os.environ['TEMP_FILE']

items = []
count = 0
valid_count = 0

try:
    with open(source_file, 'r', encoding='utf-8') as csvfile:
        reader = csv.DictReader(csvfile)
        
        for row in reader:
            count += 1
            
            # Skip completed items
            if row.get('completed', '').lower() in ['yes', 'true', '1']:
                continue
                
            # Skip items with invalid due dates
            due_str = row.get('due', '').strip()
            if not due_str or 'Error:' in due_str or due_str == 'No':
                continue
                
            try:
                # Parse the due date
                due_dt = datetime.strptime(due_str, '%Y-%m-%d %H:%M:%S')
                due_iso = due_dt.isoformat()
                
                # Convert to expected format
                item = {
                    'title': row.get('title', 'Untitled').strip(),
                    'dueISO': due_iso,
                    'list': row.get('list', 'Default').strip(),
                    'flagged': False,  # CSV doesn't have flagged field
                    'priority': 0,     # CSV doesn't have priority field
                    'id': row.get('id', '').strip()
                }
                
                items.append(item)
                valid_count += 1
                
            except ValueError:
                # Skip items with unparseable dates
                continue
    
    # Sort by due date
    items.sort(key=lambda x: x['dueISO'])
    
    # Create output structure
    output = {
        'items': items,
        'count': valid_count,
        'total_processed': count,
        'exported_at': datetime.now().isoformat(),
        'source_file': os.path.basename(source_file)
    }
    
    # Write to temp file
    with open(temp_file, 'w', encoding='utf-8') as outfile:
        json.dump(output, outfile, indent=2, ensure_ascii=False)
    
    print(f"‚úÖ Processed {count} total rows, found {valid_count} valid scheduled reminders")

except Exception as e:
    print(f"‚ùå Error processing CSV: {e}")
    sys.exit(1)
EOF

# Check if Python processing succeeded
if [ $? -ne 0 ]; then
    echo "‚ùå Failed to process CSV data"
    exit 1
fi

# Ensure output directory exists
mkdir -p "$(dirname "$OUTPUT_FILE")"

# Move temp file to final location
mv "$TEMP_FILE" "$OUTPUT_FILE"

echo "üìÑ Output written to: $OUTPUT_FILE"
echo "üîç Preview:"
head -20 "$OUTPUT_FILE"

echo ""
echo "‚úÖ Reminders pull complete!"
echo "üí° Usage: python3 -m http.server 8080 from Jenquin-site root"
echo "üåê Then open: http://localhost:8080/sandbox_calendar_agenda_card.html"
</file>

<file path=".gitignore">
/data/
</file>

<file path="about.md">
# Jenquin.io ‚Äî v1 demo

This is a single-page **Jenquin Dashboard** mock that mirrors your Apple system:
- **Top 3 Today**
- **7-Day Crash Plan**
- **Calendar (next 7 days)**
- Quick Add + ‚ÄúReveal in Reminders/Calendar‚Äù (simulated)

## Run locally (no backend required)
Double-click `index.html` to open in your browser **or** run a local server:

```bash
cd jengquin_site
python3 -m http.server 8080
# open http://localhost:8080
```

## Hooking up a backend later
When your Flask/FastAPI endpoints are ready:
1. Replace `apiGet`/`apiPost` in `script.js` to call real endpoints.
2. Wire buttons (Reveal/Open) to routes that trigger AppleScript on your Mac.

## Deploy via Tailscale (optional)
Expose your local port (e.g., 8080) with **Tailscale Funnel**:

```bash
tailscale funnel 8080
```

Keep ACLs private unless you intend to share publicly.
</file>

<file path="favicon.svg">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
  <defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#6ea8fe"/><stop offset="100%" stop-color="#7df2c9"/></linearGradient></defs>
  <rect x="4" y="4" width="56" height="56" rx="14" fill="url(#g)"/>
  <circle cx="32" cy="32" r="10" fill="white" opacity="0.9"/>
</svg>
</file>

<file path="instructions_digital_twin.md">
# Digital Twin Oracle - Integration Instructions

## Overview
The Digital Twin Oracle displays a glowing humanoid figure that changes color based on your current FlowOS zone (Rest & Recharge, Health, Creative, etc.).

## Integration Steps

### 1Ô∏è‚É£ CSS Integration
Add this CSS block to your main `<style>` section (before the closing `</style>` tag):

```css
/* --- Digital Twin (Oracle) --- */
.oracle-wrap{
  display:flex; align-items:center; justify-content:center;
  height: 260px; position:relative; overflow:hidden;
  background: radial-gradient(600px 320px at 50% -30%, rgba(125,242,201,.08), transparent 60%),
              radial-gradient(520px 280px at 120% 120%, rgba(110,168,254,.10), transparent 60%);
  border:1px solid var(--border); border-radius: var(--radius);
}

.oracle{
  position:relative; width: 160px; aspect-ratio: 3/5;
  filter: drop-shadow(0 12px 28px rgba(0,0,0,.45));
}

.oracle .aura{
  position:absolute; inset:-18%;
  border-radius: 30% 30% 36% 36% / 28% 28% 52% 52%;
  background: radial-gradient(60% 60% at 50% 35%, rgba(255,255,255,.35), transparent 60%),
              radial-gradient(80% 80% at 50% 50%, rgba(110,168,254,.25), transparent 65%);
  filter: blur(18px) saturate(1.1);
  animation: auraPulse 3.6s ease-in-out infinite;
  opacity:.9;
}

.oracle .body{
  position:absolute; inset:0; display:block;
  background:
    radial-gradient(45% 45% at 50% 20%, rgba(255,255,255,.85), rgba(255,255,255,.15) 60%),
    linear-gradient(180deg, rgba(110,168,254,.9), rgba(125,242,201,.7) 60%, rgba(110,168,254,.85));
  -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
  mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
  border-radius: 18px;
  animation: subtleFloat 6s ease-in-out infinite;
}

/* Zone colors */
.oracle[data-zone="Rest & Recharge"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(125,242,201,.30),transparent 65%)}
.oracle[data-zone="Health"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(118,255,155,.30),transparent 65%);animation-duration:2.2s}
.oracle[data-zone="Creative / Project Work"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(110,168,254,.30),transparent 65%)}
.oracle[data-zone="Review & Planning"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(179,138,255,.28),transparent 65%)}
.oracle[data-zone="Errands & Logistics"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,176,90,.30),transparent 65%)}
.oracle[data-zone="Social & Relationships"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,122,122,.28),transparent 65%)}
.oracle[data-zone="Flex"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(154,163,178,.28),transparent 65%)}

/* Animations */
@keyframes auraPulse{0%,100%{transform:scale(.96);opacity:.85}50%{transform:scale(1.03);opacity:1}}
@keyframes subtleFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}

.oracle-legend{margin-top:10px;font-size:12px;color:var(--muted);text-align:center}
```

### 2Ô∏è‚É£ HTML Integration
Add this panel after your existing panels (e.g., after "Crash Plan"):

```html
<!-- Digital Twin (Oracle) Panel -->
<section class="panel" id="oraclePanel" style="margin-top:18px;">
  <div class="hd">
    <h2>Digital Twin</h2>
    <div class="hint"><span id="oracleZoneHint">‚Äî</span></div>
  </div>
  <div class="bd">
    <div class="oracle-wrap">
      <div id="oracle" class="oracle" data-zone="Rest & Recharge" aria-label="Digital twin state">
        <div class="aura"></div>
        <div class="body"></div>
      </div>
    </div>
    <div class="oracle-legend">
      Mirrors your current Area (Rest &amp; Recharge, Health, Creative, etc.).
    </div>
  </div>
</section>
```

### 3Ô∏è‚É£ JavaScript Integration
Add these functions before your closing `</script>` tag:

```javascript
/* ---------- Digital Twin wiring ---------- */
function normalizeZone(area){
  const m = {
    "Rest & Recharge": "Rest & Recharge",
    "Health": "Health",
    "Creative / Project Work": "Creative / Project Work",
    "Review & Planning": "Review & Planning",
    "Errands & Logistics": "Errands & Logistics",
    "Social & Relationships": "Social & Relationships",
    "Flex": "Flex",
    "Prep & Maintenance": "Review & Planning"
  };
  return m[area] || "Flex";
}

function setOracleZone(zone){
  const el = document.getElementById('oracle');
  const hint = document.getElementById('oracleZoneHint');
  if (!el) return;
  el.setAttribute('data-zone', zone);
  if (hint) hint.textContent = zone;
}

function updateOracleFromAgenda(){
  const day = window.__CURRENT_DAY;
  if (!day) return;
  const now = new Date();
  const current = findCurrentArea(day.events, now);
  if (current){
    setOracleZone(normalizeZone(current.area));
    return;
  }
  const next = findNextArea(day.events, now);
  setOracleZone(next ? "Flex" : "Flex");
}

document.addEventListener('DOMContentLoaded', ()=>{
  if (document.getElementById('oracle')){
    updateOracleFromAgenda();
  }
});

const __oldUpdateLiveArea = updateLiveArea;
updateLiveArea = function(){
  try{ __oldUpdateLiveArea(); }catch(_){}
  updateOracleFromAgenda();
};
```

## Features

‚úÖ **Real-time Zone Detection**: Automatically detects and displays current FlowOS zone  
‚úÖ **Dynamic Color Auras**: Each zone has its unique color scheme  
‚úÖ **Smooth Animations**: Subtle floating and pulsing effects  
‚úÖ **Accessibility**: Proper ARIA labels and semantic HTML  
‚úÖ **Responsive Design**: Adapts to different screen sizes  

## Zone Color Mapping

- **Rest & Recharge**: Mint green aura
- **Health**: Bright green aura (faster pulse)
- **Creative / Project Work**: Blue aura
- **Review & Planning**: Purple aura
- **Errands & Logistics**: Orange aura
- **Social & Relationships**: Red/pink aura
- **Flex**: Gray aura

## Testing

The sandbox file `sandbox_digital_twin_oracle.html` is ready for testing and demonstrates the full functionality.
</file>

<file path="logo.svg">
<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 64 64">
  <defs>
    <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#6ea8fe"/>
      <stop offset="100%" stop-color="#7df2c9"/>
    </linearGradient>
  </defs>
  <rect x="4" y="4" width="56" height="56" rx="14" fill="url(#g)"/>
  <g fill="white" opacity="0.95">
    <path d="M20 40c0-8 6-14 14-14h6v6h-6c-4.4 0-8 3.6-8 8v6h-6v-6z"/>
    <path d="M34 18h10v10h-6a4 4 0 0 1-4-4v-6z" opacity="0.85"/>
  </g>
</svg>
</file>

<file path="oracle_twin_merge_snippet.html">
<!-- =======================================================
     DIGITAL TWIN ORACLE - MERGE-READY SNIPPET
     =======================================================
     
     Instructions for integrating into index.html:
     
     1. Add the CSS block to your main <style> section (before closing </style>)
     2. Add the HTML panel after any existing panel (e.g., after "Crash Plan")  
     3. Add the JavaScript functions before your closing </script> tag
     
     ======================================================= -->

<!-- 1Ô∏è‚É£ CSS - Add this to your main <style> section -->
<style>
/* --- Digital Twin (Oracle) --- */
.oracle-wrap{
  display:flex; align-items:center; justify-content:center;
  height: 260px; position:relative; overflow:hidden;
  background: radial-gradient(600px 320px at 50% -30%, rgba(125,242,201,.08), transparent 60%),
              radial-gradient(520px 280px at 120% 120%, rgba(110,168,254,.10), transparent 60%);
  border:1px solid var(--border); border-radius: var(--radius);
}

.oracle{
  position:relative; width: 160px; aspect-ratio: 3/5;
  filter: drop-shadow(0 12px 28px rgba(0,0,0,.45));
}

.oracle .aura{
  position:absolute; inset:-18%;
  border-radius: 30% 30% 36% 36% / 28% 28% 52% 52%;
  background: radial-gradient(60% 60% at 50% 35%, rgba(255,255,255,.35), transparent 60%),
              radial-gradient(80% 80% at 50% 50%, rgba(110,168,254,.25), transparent 65%);
  filter: blur(18px) saturate(1.1);
  animation: auraPulse 3.6s ease-in-out infinite;
  opacity:.9;
}

.oracle .body{
  position:absolute; inset:0; display:block;
  background:
    radial-gradient(45% 45% at 50% 20%, rgba(255,255,255,.85), rgba(255,255,255,.15) 60%),
    linear-gradient(180deg, rgba(110,168,254,.9), rgba(125,242,201,.7) 60%, rgba(110,168,254,.85));
  -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
  mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
  border-radius: 18px;
  animation: subtleFloat 6s ease-in-out infinite;
}

/* Zone colors */
.oracle[data-zone="Rest & Recharge"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(125,242,201,.30),transparent 65%)}
.oracle[data-zone="Health"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(118,255,155,.30),transparent 65%);animation-duration:2.2s}
.oracle[data-zone="Creative / Project Work"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(110,168,254,.30),transparent 65%)}
.oracle[data-zone="Review & Planning"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(179,138,255,.28),transparent 65%)}
.oracle[data-zone="Errands & Logistics"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,176,90,.30),transparent 65%)}
.oracle[data-zone="Social & Relationships"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,122,122,.28),transparent 65%)}
.oracle[data-zone="Flex"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(154,163,178,.28),transparent 65%)}

/* Animations */
@keyframes auraPulse{0%,100%{transform:scale(.96);opacity:.85}50%{transform:scale(1.03);opacity:1}}
@keyframes subtleFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}

.oracle-legend{margin-top:10px;font-size:12px;color:var(--muted);text-align:center}
</style>

<!-- 2Ô∏è‚É£ HTML - Add this panel after your existing panels -->
<!-- Digital Twin (Oracle) Panel -->
<section class="panel" id="oraclePanel" style="margin-top:18px;">
  <div class="hd">
    <h2>Digital Twin</h2>
    <div class="hint"><span id="oracleZoneHint">‚Äî</span></div>
  </div>
  <div class="bd">
    <div class="oracle-wrap">
      <div id="oracle" class="oracle" data-zone="Rest & Recharge" aria-label="Digital twin state">
        <div class="aura"></div>
        <div class="body"></div>
      </div>
    </div>
    <div class="oracle-legend">
      Mirrors your current Area (Rest &amp; Recharge, Health, Creative, etc.).
    </div>
  </div>
</section>

<script>
/* 3Ô∏è‚É£ JAVASCRIPT - Add these functions before your closing </script> tag */

/* ---------- Digital Twin wiring ---------- */
function normalizeZone(area){
  const m = {
    "Rest & Recharge": "Rest & Recharge",
    "Health": "Health",
    "Creative / Project Work": "Creative / Project Work",
    "Review & Planning": "Review & Planning",
    "Errands & Logistics": "Errands & Logistics",
    "Social & Relationships": "Social & Relationships",
    "Flex": "Flex",
    "Prep & Maintenance": "Review & Planning"
  };
  return m[area] || "Flex";
}

function setOracleZone(zone){
  const el = document.getElementById('oracle');
  const hint = document.getElementById('oracleZoneHint');
  if (!el) return;
  el.setAttribute('data-zone', zone);
  if (hint) hint.textContent = zone;
}

function updateOracleFromAgenda(){
  const day = window.__CURRENT_DAY;
  if (!day) return;
  const now = new Date();
  const current = findCurrentArea(day.events, now);
  if (current){
    setOracleZone(normalizeZone(current.area));
    return;
  }
  const next = findNextArea(day.events, now);
  setOracleZone(next ? "Flex" : "Flex");
}

document.addEventListener('DOMContentLoaded', ()=>{
  if (document.getElementById('oracle')){
    updateOracleFromAgenda();
  }
});

const __oldUpdateLiveArea = updateLiveArea;
updateLiveArea = function(){
  try{ __oldUpdateLiveArea(); }catch(_){}
  updateOracleFromAgenda();
};
</script>
</file>

<file path="sandbox_digital_twin_oracle.html">
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Digital Twin Oracle ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.28}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}

  /* --- Digital Twin (Oracle) --- */
  .oracle-wrap{
    display:flex; align-items:center; justify-content:center;
    height: 260px; position:relative; overflow:hidden;
    background: radial-gradient(600px 320px at 50% -30%, rgba(125,242,201,.08), transparent 60%),
                radial-gradient(520px 280px at 120% 120%, rgba(110,168,254,.10), transparent 60%);
    border:1px solid var(--border); border-radius: var(--radius);
  }

  .oracle{
    position:relative; width: 160px; aspect-ratio: 3/5;
    filter: drop-shadow(0 12px 28px rgba(0,0,0,.45));
  }

  .oracle .aura{
    position:absolute; inset:-18%;
    border-radius: 30% 30% 36% 36% / 28% 28% 52% 52%;
    background: radial-gradient(60% 60% at 50% 35%, rgba(255,255,255,.35), transparent 60%),
                radial-gradient(80% 80% at 50% 50%, rgba(110,168,254,.25), transparent 65%);
    filter: blur(18px) saturate(1.1);
    animation: auraPulse 3.6s ease-in-out infinite;
    opacity:.9;
  }

  .oracle .body{
    position:absolute; inset:0; display:block;
    background:
      radial-gradient(45% 45% at 50% 20%, rgba(255,255,255,.85), rgba(255,255,255,.15) 60%),
      linear-gradient(180deg, rgba(110,168,254,.9), rgba(125,242,201,.7) 60%, rgba(110,168,254,.85));
    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
    mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 160"><path d="M50 12c12 0 22 10 22 22s-10 22-22 22-22-10-22-22S38 12 50 12zM32 73c12-6 24-6 36 0 14 7 22 20 22 36v38H10v-38c0-16 8-29 22-36z"/></svg>') center/contain no-repeat;
    border-radius: 18px;
    animation: subtleFloat 6s ease-in-out infinite;
  }

  /* Zone colors */
  .oracle[data-zone="Rest & Recharge"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(125,242,201,.30),transparent 65%)}
  .oracle[data-zone="Health"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(118,255,155,.30),transparent 65%);animation-duration:2.2s}
  .oracle[data-zone="Creative / Project Work"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(110,168,254,.30),transparent 65%)}
  .oracle[data-zone="Review & Planning"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(179,138,255,.28),transparent 65%)}
  .oracle[data-zone="Errands & Logistics"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,176,90,.30),transparent 65%)}
  .oracle[data-zone="Social & Relationships"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(255,122,122,.28),transparent 65%)}
  .oracle[data-zone="Flex"] .aura{background:radial-gradient(60% 60% at 50% 35%,rgba(255,255,255,.35),transparent 60%),radial-gradient(80% 80% at 50% 50%,rgba(154,163,178,.28),transparent 65%)}

  /* Animations */
  @keyframes auraPulse{0%,100%{transform:scale(.96);opacity:.85}50%{transform:scale(1.03);opacity:1}}
  @keyframes subtleFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}

  .oracle-legend{margin-top:10px;font-size:12px;color:var(--muted);text-align:center}
  
  .hint{color:var(--muted);font-size:13px}

  /* ===== Hologram look (full-body) ===== */
  .oracle.holo{
    --holo-a: 180;            /* base hue; gets overridden per zone below */
    --holo-s: 90%;
    --holo-l: 60%;
    --holo-glow: hsla(var(--holo-a), var(--holo-s), var(--holo-l), .55);
    --holo-glow-2: hsla(calc(var(--holo-a) + 30), 80%, 65%, .35);
    --holo-line: hsla(var(--holo-a), 95%, 75%, .95);
    --holo-scan: hsla(var(--holo-a), 95%, 75%, .2);
    --holo-grain: rgba(255,255,255,.08);
    width: 200px; aspect-ratio: 3/5;
    position: relative;
    isolation: isolate;            /* keep blending tidy */
  }

  /* zone hues -> hologram palette */
  .oracle.holo[data-zone="Rest & Recharge"]{ --holo-a: 175 }
  .oracle.holo[data-zone="Health"]{ --holo-a: 155 }
  .oracle.holo[data-zone="Creative / Project Work"]{ --holo-a: 210 }
  .oracle.holo[data-zone="Review & Planning"]{ --holo-a: 265 }
  .oracle.holo[data-zone="Errands & Logistics"]{ --holo-a: 35 }
  .oracle.holo[data-zone="Social & Relationships"]{ --holo-a: 320 }
  .oracle.holo[data-zone="Flex"]{ --holo-a: 220 }

  /* big soft glow behind the figure */
  .holo .holo-glow{
    position:absolute; inset:-24%;
    background:
      radial-gradient(60% 50% at 50% 35%, var(--holo-glow), transparent 60%),
      radial-gradient(75% 60% at 50% 60%, var(--holo-glow-2), transparent 70%);
    filter: blur(18px) saturate(1.15);
    animation: holoPulse 3.8s ease-in-out infinite;
  }

  /* full-body mask (SVG in data URL) */
  .holo .holo-body{
    position:absolute; inset:0;
    background:
      linear-gradient(180deg,
        hsla(var(--holo-a), 85%, 78%, .95) 0%,
        hsla(var(--holo-a), 85%, 68%, .85) 45%,
        hsla(var(--holo-a), 85%, 58%, .90) 100%);
    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 200"><g fill="black"><circle cx="60" cy="26" r="16"/><path d="M36 48h48v30c0 10-8 18-18 18H54c-9 0-18-8-18-18V48z"/><rect x="22" y="70" width="20" height="46" rx="10"/><rect x="78" y="70" width="20" height="46" rx="10"/><path d="M46 96h28v60H46z"/><path d="M46 156h20v40H46z"/><path d="M66 156h20v40H66z"/></g></svg>') center/80% 100% no-repeat;
    mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 200"><g fill="black"><circle cx="60" cy="26" r="16"/><path d="M36 48h48v30c0 10-8 18-18 18H54c-9 0-18-8-18-18V48z"/><rect x="22" y="70" width="20" height="46" rx="10"/><rect x="78" y="70" width="20" height="46" rx="10"/><path d="M46 96h28v60H46z"/><path d="M46 156h20v40H46z"/><path d="M66 156h20v40H66z"/></g></svg>') center/80% 100% no-repeat;
    border-radius: 18px;
    box-shadow:
      0 0 12px var(--holo-glow),
      0 0 28px var(--holo-glow-2);
    animation: holoFloat 6s ease-in-out infinite;
  }

  /* edge glow / chromatic fringe */
  .holo .holo-edge{
    position:absolute; inset:0;
    background:
      radial-gradient(120% 110% at 50% 40%,
        transparent 45%,
        hsla(var(--holo-a), 100%, 85%, .5) 65%,
        transparent 80%) ;
    mix-blend-mode: screen;
    filter: blur(2.5px) saturate(1.2);
    pointer-events:none;
  }

  /* scanlines + shimmer sweep */
  .holo .holo-scan{
    position:absolute; inset:0;
    background:
      repeating-linear-gradient( to bottom,
        transparent 0 3px,
        var(--holo-scan) 3px 4px),
      linear-gradient( to bottom,
        transparent 0%,
        rgba(255,255,255,.05) 40%,
        rgba(255,255,255,.12) 50%,
        transparent 60%);
    -webkit-mask: inherit; mask: inherit;
    mix-blend-mode: screen;
    animation: holoScan 4.8s linear infinite;
  }

  /* particles */
  .holo .holo-particles{ position:absolute; inset:0; pointer-events:none; }
  .holo .holo-particles span{
    --sz: 3px; --x: 50%; --y: 50%; --t: 6s;
    position:absolute; width:var(--sz); height:var(--sz); border-radius:50%;
    background: var(--holo-line);
    left: var(--x); top: var(--y);
    filter: drop-shadow(0 0 6px var(--holo-line));
    animation: floatDot var(--t) ease-in-out infinite;
  }
  /* sprinkle positions */
  .holo .holo-particles span:nth-child(1){ --x:14%; --y:18%; --t:7s }
  .holo .holo-particles span:nth-child(2){ --x:78%; --y:22%; --t:6.3s }
  .holo .holo-particles span:nth-child(3){ --x:20%; --y:62%; --t:7.6s }
  .holo .holo-particles span:nth-child(4){ --x:84%; --y:68%; --t:5.8s }
  .holo .holo-particles span:nth-child(5){ --x:52%; --y:86%; --t:6.8s }
  .holo .holo-particles span:nth-child(6){ --x:36%; --y:40%; --t:6.1s }
  .holo .holo-particles span:nth-child(7){ --x:66%; --y:46%; --t:7.2s }
  .holo .holo-particles span:nth-child(8){ --x:30%; --y:84%; --t:5.9s }
  .holo .holo-particles span:nth-child(9){ --x:72%; --y:82%; --t:7.4s }
  .holo .holo-particles span:nth-child(10){ --x:44%; --y:12%; --t:6.6s }

  /* animations */
  @keyframes holoPulse{ 0%,100%{transform:scale(.96);opacity:.85} 50%{transform:scale(1.03);opacity:1} }
  @keyframes holoFloat{ 0%,100%{ transform: translateY(0) } 50%{ transform: translateY(-4px) } }
  @keyframes holoScan{
    0%{ background-position: 0 -120px, 0 -120px }
    100%{ background-position: 0 160px, 0 160px }
  }
  @keyframes floatDot{
    0%,100%{ transform: translateY(0) scale(1) ; opacity:.85}
    50%{ transform: translateY(-6px) scale(1.15); opacity:1}
  }

  /* ===== Wireframe + Nodes layer (masked to the body) ===== */
  .holo .holo-net{
    position:absolute; inset:0; mix-blend-mode:screen; opacity:.95;
    -webkit-mask: inherit; mask: inherit;
    background:
      /* base grid */
      url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200"><defs><linearGradient id="lg" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="white" stop-opacity="0.55"/><stop offset="100%" stop-color="white" stop-opacity="0.15"/></linearGradient></defs><g stroke="white" stroke-opacity="0.25" stroke-width="0.6"><!-- vertical lines --><path d="M10 0 V200 M30 0 V200 M50 0 V200 M70 0 V200 M90 0 V200 M110 0 V200 M130 0 V200 M150 0 V200 M170 0 V200 M190 0 V200"/><!-- horizontal lines --><path d="M0 10 H200 M0 30 H200 M0 50 H200 M0 70 H200 M0 90 H200 M0 110 H200 M0 130 H200 M0 150 H200 M0 170 H200 M0 190 H200"/><!-- diagonals --><g opacity="0.35"><path d="M-40 0 L200 240"/><path d="M-20 0 L220 240"/><path d="M0 0 L240 240"/><path d="M0 -40 L240 200"/><path d="M0 -20 L240 220"/></g></g><!-- nodes (small glowing points) --><g fill="white"><circle cx="22" cy="18" r="1.7"/><circle cx="58" cy="32" r="1.4"/><circle cx="96" cy="26" r="1.6"/><circle cx="142" cy="44" r="1.5"/><circle cx="176" cy="20" r="1.9"/><circle cx="34" cy="74" r="1.6"/><circle cx="86" cy="92" r="1.5"/><circle cx="126" cy="80" r="1.7"/><circle cx="164" cy="96" r="1.6"/><circle cx="52" cy="124" r="1.5"/><circle cx="96" cy="136" r="1.7"/><circle cx="144" cy="132" r="1.6"/><circle cx="70" cy="168" r="1.5"/><circle cx="118" cy="176" r="1.8"/></g></svg>') center/180px 180px repeat;

    /* subtle parallax to keep it alive */
    animation: netDrift 14s ease-in-out infinite;
    filter: drop-shadow(0 0 6px hsla(var(--holo-a),95%,75%,.55));
  }

  /* vary opacity by zone for mood */
  .oracle.holo[data-zone="Rest & Recharge"] .holo-net{ opacity:.90 }
  .oracle.holo[data-zone="Health"] .holo-net{ opacity:.98 }
  .oracle.holo[data-zone="Creative / Project Work"] .holo-net{ opacity:.95 }
  .oracle.holo[data-zone="Review & Planning"] .holo-net{ opacity:.92 }

  /* vertical "spine" core glow */
  .holo .holo-core{
    position:absolute; inset:6% 30%;
    background:
      radial-gradient(60% 100% at 50% 0%, hsla(var(--holo-a),95%,75%,.55), transparent 60%),
      linear-gradient(180deg, hsla(var(--holo-a),95%,75%,.9), transparent 60%);
    filter: blur(2px) saturate(1.1);
    opacity:.85; mix-blend-mode:screen;
    -webkit-mask: inherit; mask: inherit;
    animation: corePulse 3.6s ease-in-out infinite;
  }

  /* gentle motion */
  @keyframes netDrift{
    0%{ background-position: 0 0 }
    50%{ background-position: 12px -10px }
    100%{ background-position: 0 0 }
  }
  @keyframes corePulse{
    0%,100%{ opacity:.75; transform: translateY(0) }
    50%{ opacity:1; transform: translateY(-2px) }
  }

  /* ===== Anatomical full-body silhouette (neutral athletic) ===== */
  .holo .holo-body.anat{
    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 200"><!-- Head --><circle cx="60" cy="22" r="12" fill="black"/><!-- Neck --><rect x="54" y="34" width="12" height="8" rx="3" fill="black"/><!-- Torso + shoulders (curved) --><path fill="black" d="M30,55 C34,42 44,36 60,36 C76,36 86,42 90,55 L92,78 C92,96 80,110 60,110 C40,110 28,96 28,78 Z"/><!-- Arms (slight natural bend) --><path fill="black" d="M28,58 C23,70 24,84 28,94 C30,100 36,104 40,103 C43,102 44,98 42,95 C39,90 38,84 38,78 L38,60 C36,58 32,57 28,58 Z"/><path fill="black" d="M92,58 C97,70 96,84 92,94 C90,100 84,104 80,103 C77,102 76,98 78,95 C81,90 82,84 82,78 L82,60 C84,58 88,57 92,58 Z"/><!-- Pelvis --><path fill="black" d="M46,110 C46,118 50,124 60,124 C70,124 74,118 74,110 Z"/><!-- Left leg --><path fill="black" d="M50,124 C48,140 48,156 49,172 C49.5,180 48,188 46,196 L56,196 C58,188 59,180 59,172 C59,156 60,140 62,124 Z"/><!-- Right leg --><path fill="black" d="M70,124 C72,140 72,156 71,172 C70.5,180 72,188 74,196 L64,196 C62,188 61,180 61,172 C61,156 60,140 58,124 Z"/></svg>') center/80% 100% no-repeat;
    mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 200"><circle cx="60" cy="22" r="12" fill="black"/><rect x="54" y="34" width="12" height="8" rx="3" fill="black"/><path fill="black" d="M30,55 C34,42 44,36 60,36 C76,36 86,42 90,55 L92,78 C92,96 80,110 60,110 C40,110 28,96 28,78 Z"/><path fill="black" d="M28,58 C23,70 24,84 28,94 C30,100 36,104 40,103 C43,102 44,98 42,95 C39,90 38,84 38,78 L38,60 C36,58 32,57 28,58 Z"/><path fill="black" d="M92,58 C97,70 96,84 92,94 C90,100 84,104 80,103 C77,102 76,98 78,95 C81,90 82,84 82,78 L82,60 C84,58 88,57 92,58 Z"/><path fill="black" d="M46,110 C46,118 50,124 60,124 C70,124 74,118 74,110 Z"/><path fill="black" d="M50,124 C48,140 48,156 49,172 C49.5,180 48,188 46,196 L56,196 C58,188 59,180 59,172 C59,156 60,140 62,124 Z"/><path fill="black" d="M70,124 C72,140 72,156 71,172 C70.5,180 72,188 74,196 L64,196 C62,188 61,180 61,172 C61,156 60,140 58,124 Z"/></svg>') center/80% 100% no-repeat;
  }

  /* Optional: a slimmer neutral variant‚Äîjust toggle .slim instead of .anat */
  .holo .holo-body.slim{
    -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 200"><circle cx="60" cy="22" r="11" fill="black"/><rect x="55" y="33" width="10" height="7" rx="3" fill="black"/><path fill="black" d="M34,56 C38,44 46,38 60,38 C74,38 82,44 86,56 L88,78 C88,96 78,108 60,108 C42,108 32,96 32,78 Z"/><path fill="black" d="M32,59 C28,70 30,84 33,92 C35,97 39,100 42,99 C44,98 45,96 44,93 C42,89 40,83 40,77 L40,62 C38,60 35,59 32,59 Z"/><path fill="black" d="M88,59 C92,70 90,84 87,92 C85,97 81,100 78,99 C76,98 75,96 76,93 C78,89 80,83 80,77 L80,62 C82,60 85,59 88,59 Z"/><path fill="black" d="M48,108 C48,116 52,121 60,121 C68,121 72,116 72,108 Z"/><path fill="black" d="M52,121 C50,138 51,156 52,172 C52.5,180 51,188 49,196 L57,196 C59,188 60,180 60,172 C60,156 60,138 61,121 Z"/><path fill="black" d="M68,121 C70,138 69,156 68,172 C67.5,180 69,188 71,196 L63,196 C61,188 60,180 60,172 C60,156 60,138 59,121 Z"/></svg>') center/78% 100% no-repeat;
    mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 200"><circle cx="60" cy="22" r="11" fill="black"/><rect x="55" y="33" width="10" height="7" rx="3" fill="black"/><path fill="black" d="M34,56 C38,44 46,38 60,38 C74,38 82,44 86,56 L88,78 C88,96 78,108 60,108 C42,108 32,96 32,78 Z"/><path fill="black" d="M32,59 C28,70 30,84 33,92 C35,97 39,100 42,99 C44,98 45,96 44,93 C42,89 40,83 40,77 L40,62 C38,60 35,59 32,59 Z"/><path fill="black" d="M88,59 C92,70 90,84 87,92 C85,97 81,100 78,99 C76,98 75,96 76,93 C78,89 80,83 80,77 L80,62 C82,60 85,59 88,59 Z"/><path fill="black" d="M48,108 C48,116 52,121 60,121 C68,121 72,116 72,108 Z"/><path fill="black" d="M52,121 C50,138 51,156 52,172 C52.5,180 51,188 49,196 L57,196 C59,188 60,180 60,172 C60,156 60,138 61,121 Z"/><path fill="black" d="M68,121 C70,138 69,156 68,172 C67.5,180 69,188 71,196 L63,196 C61,188 60,180 60,172 C60,156 60,138 59,121 Z"/></svg>') center/78% 100% no-repeat;
  }
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris' Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>

    <!-- Digital Twin (Oracle) Panel -->
    <section class="panel" id="oraclePanel" style="margin-top:18px;">
      <div class="hd">
        <h2>Digital Twin</h2>
        <div class="hint"><span id="oracleZoneHint">‚Äî</span></div>
      </div>
      <div class="bd">
        <div class="oracle-wrap">
          <div id="oracle" class="oracle holo" data-zone="Rest & Recharge" aria-label="Digital twin state">
            <div class="holo-glow"></div>
            <div class="holo-body anat"></div>

            <!-- NEW: wireframe grid + nodes clipped to the body -->
            <div class="holo-net"></div>

            <!-- vertical core glow (spine-like) -->
            <div class="holo-core"></div>

            <!-- edge + scan + particles stay for hologram vibe -->
            <div class="holo-edge"></div>
            <div class="holo-scan"></div>
            <div class="holo-particles">
              <span></span><span></span><span></span><span></span><span></span>
              <span></span><span></span><span></span><span></span><span></span>
            </div>
          </div>
        </div>
        <div class="oracle-legend">
          Mirrors your current Area (Rest &amp; Recharge, Health, Creative, etc.).
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Mock data (matches your screenshots) ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  const FOCUS = "Recovery Day";
  const ALLDAY = []; // e.g., ["Kris' Birthday"]

  const EVENTS = [
    { title:"water plants",            start: at(7,30),                    color:"green" },
    { title:"precor stretch circuit",  start: at(9,30),                    color:"blue"  },
    { title:"grocery shop",            start: at(11,0), end: at(12,0),     color:"gray"  },
    { title:"mom dinner",              start: at(19,30),                   color:"purple"},
    { title:"sleep",                   start: at(23,15),                   color:"blue"  },
  ];

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [
  { label:"Health",                   start: at(0,0),  end: at(7,30), color: AREA_COLORS.health },
  { label:"Flex",                     start: at(7,30),  end: at(9,30),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(11,0), color: AREA_COLORS.health },
  { label:"Prep & Maintenance",       start: at(11,0),  end: at(14,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Administrative",           start: at(14,0),  end: at(18,0),  color: AREA_COLORS.administrative },
  { label:"Social & Relationships",   start: at(18,0), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,0), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Render Agenda rows ---------- */
  const list = document.getElementById('agendaList');
  EVENTS.sort((a,b)=>+a.start-+b.start).forEach(ev=>{
    const row = document.createElement('div');
    row.className = 'agenda-row';
    row.dataset.start = ev.start.toISOString();
    if (ev.end) row.dataset.end = ev.end.toISOString();

    const startStr = fmtTime(ev.start);
    const endStr = ev.end ? fmtTime(ev.end) : null;

    row.innerHTML = `
      <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
      <div>
        <div class="agenda-title">${ev.title}</div>
        <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
      </div>
      <label class="chx" aria-label="Mark ${ev.title} done">
        <span class="inner"></span>
      </label>
    `;

    row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
    list.appendChild(row);
  });

  /* ---------- All-day pills ---------- */
  const lane = document.getElementById('alldayLane');
  ALLDAY.forEach(t=>{
    const p = document.createElement('span');
    p.className = 'allday-pill';
    p.textContent = t;
    lane.appendChild(p);
  });

  /* ---------- Focus pill / header ---------- */
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = ""; // keep right empty like your card
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Digital Twin wiring ---------- */
  function normalizeZone(area){
    const m = {
      "Rest & Recharge": "Rest & Recharge",
      "Health": "Health",
      "Creative / Project Work": "Creative / Project Work",
      "Review & Planning": "Review & Planning",
      "Errands & Logistics": "Errands & Logistics",
      "Social & Relationships": "Social & Relationships",
      "Flex": "Flex",
      "Prep & Maintenance": "Review & Planning"
    };
    return m[area] || "Flex";
  }

  function setOracleZone(zone){
    const el = document.getElementById('oracle');
    const hint = document.getElementById('oracleZoneHint');
    if (!el) return;
    el.setAttribute('data-zone', zone);
    if (hint) hint.textContent = zone;
  }

  function findCurrentArea(events, now) {
    // Mock implementation - find which zone we're currently in
    for (const zone of ZONES) {
      if (now >= zone.start && now < zone.end) {
        return { area: zone.label };
      }
    }
    return null;
  }

  function findNextArea(events, now) {
    // Mock implementation - find next zone
    for (const zone of ZONES) {
      if (now < zone.start) {
        return { area: zone.label };
      }
    }
    return null;
  }

  function updateOracleFromAgenda(){
    const day = window.__CURRENT_DAY || { events: ZONES };
    if (!day) return;
    const now = new Date();
    const current = findCurrentArea(day.events, now);
    if (current){
      setOracleZone(normalizeZone(current.area));
      return;
    }
    const next = findNextArea(day.events, now);
    setOracleZone(next ? "Flex" : "Flex");
  }

  function updateLiveArea() {
    // Mock function to simulate existing functionality
    updateOracleFromAgenda();
  }

  /* ---------- Boot + gentle timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
    updateOracleFromAgenda(); // Update oracle on each tick
  }

  document.addEventListener('DOMContentLoaded', ()=>{
    if (document.getElementById('oracle')){
      updateOracleFromAgenda();
    }
  });

  tick();
  setInterval(tick, 60000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock "Flex ¬∑ 3:33 PM‚Äì7:30 PM" */
  (function seedAreaPill(){
  const p = document.getElementById('areaPill');
  const seg = ZONES[0];
  if (seg) p.textContent = seg.label; // just the zone name, no time
})();
</script>
</body>
</html>
</file>

<file path="script.js">
// jengquin.io v1 demo script

const $ = sel => document.querySelector(sel);
const $$ = sel => Array.from(document.querySelectorAll(sel));

function fmtTime(d){
  return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
}
function fmtDate(d){
  return new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(d);
}
function addDays(d, n){ const c = new Date(d); c.setDate(c.getDate()+n); return c; }
function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }

let DEMO = true;

// ------------ Mock data
function mockTop3(){
  return [
    { title: "Ship GenCoin v1 page", due: "", completed: false, tag:"#Admin" },
    { title: "Record 'Album Stream' bumper", due: "", completed: false, tag:"#Creative" },
    { title: "7-Day Crash pass ‚Üí prune tasks", due: "", completed: true, tag:"#Review" },
  ];
}
function mockCrash(){
  const now = new Date();
  return [
    { title: "Bank statements ‚Üí sort & tag", due: addDays(now,1), completed:false, tag:"#Finance"},
    { title: "Mom Log: weekly summary", due: addDays(now,2), completed:false, tag:"#Caregiving"},
    { title: "Raspberry Pi: stream loop", due: addDays(now,3), completed:false, tag:"#Infra"},
    { title: "Nova ‚Üí Quick Add Shortcut", due: addDays(now,4), completed:true, tag:"#Flow"},
  ];
}
function mockCalendar(){
  const now = new Date();
  return [...Array(7)].map((_,i)=>{
    const d = addDays(now, i);
    const events = [];
    if(i===0) events.push({ t:"Standup (self)", at: new Date(d.setHours(10,0)), color:"blue"});
    if(i===1) events.push({ t:"Studio hour", at: new Date(addDays(now,1).setHours(14,0)), color:"green"});
    if(i===2) events.push({ t:"Groceries + meal prep", at: new Date(addDays(now,2).setHours(18,0)), color:"blue"});
    return { date: addDays(new Date(),i), events };
  });
}

// ------------ Live fetch helpers (wire these to your API later)
async function apiGet(path){
  // Replace with: return fetch(path).then(r=>r.json())
  if(path==="/top3") return mockTop3();
  if(path==="/crash7") return mockCrash();
  if(path==="/calendar") return mockCalendar();
  return [];
}
async function apiPost(path, payload){
  // Replace with real fetch POST when backend is ready
  return { ok:true };
}

// ------------ Renderers
function renderTop3(items){
  const wrap = $('#top3List'); wrap.innerHTML = "";
  items.forEach((it, idx)=>{
    const row = document.createElement('div');
    row.className = 'item' + (it.completed ? ' done' : '');
    row.innerHTML = `
      <label class="chx" aria-label="toggle done"><span class="dot"></span></label>
      <div>
        <div class="title">${escapeHtml(it.title)}</div>
        <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
      </div>
      <div class="row">
        <span class="tag">Top 3</span>
        <button class="btn ghost kebab" data-action="remove" title="Remove">‚ãØ</button>
      </div>`;
    row.querySelector('.chx').addEventListener('click', async ()=>{
      row.classList.toggle('done');
      // later: await apiPost('/reminder/toggle', { list:'Top 3', index: idx })
    });
    row.querySelector('[data-action="remove"]').addEventListener('click', async ()=>{
      row.style.opacity = .5;
      // later: await apiPost('/reminder/delete', { list:'Top 3', index: idx })
      setTimeout(()=> row.remove(), 180);
    });
    wrap.appendChild(row);
  });
}

function renderCrash(items){
  const wrap = $('#crashList'); wrap.innerHTML = "";
  items.forEach((it, idx)=>{
    const due = it.due ? fmtDate(new Date(it.due)) : "‚Äî";
    const row = document.createElement('div');
    row.className = 'item' + (it.completed ? ' done' : '');
    row.innerHTML = `
      <label class="chx" aria-label="toggle done"><span class="dot"></span></label>
      <div>
        <div class="title">${escapeHtml(it.title)}</div>
        <div class="meta">Due: ${due} ${it.tag ? '¬∑ ' + escapeHtml(it.tag) : ''}</div>
      </div>
      <span class="tag">Crash 7</span>`;
    row.querySelector('.chx').addEventListener('click', async ()=>{
      row.classList.toggle('done');
      // later: await apiPost('/reminder/toggle', { list:'Crash Plan', index: idx })
    });
    wrap.appendChild(row);
  });
}

function renderCal(days){
  const grid = $('#calGrid'); grid.innerHTML="";
  days.forEach(day=>{
    const div = document.createElement('div');
    div.className = 'day';
    div.innerHTML = `<div class="d">${fmtDate(new Date(day.date))}</div>`;
    if(day.events && day.events.length){
      day.events.forEach(ev=>{
        const pill = document.createElement('div');
        pill.className = 'pill ' + (ev.color || 'blue');
        pill.title = ev.t;
        pill.textContent = `${fmtTime(new Date(ev.at))} ‚Ä¢ ${ev.t}`;
        div.appendChild(pill);
      });
    } else {
      const none = document.createElement('div');
      none.className = 'faded'; none.textContent = '‚Äî';
      div.appendChild(none);
    }
    grid.appendChild(div);
  });
}

// ------------ Quick add
function wireEvents(){
  $('#top3Form').addEventListener('submit', async (e)=>{
    e.preventDefault();
    const fd = new FormData(e.target);
    const title = String(fd.get('title')||'').trim();
    if(!title) return;
    if(DEMO){
      const items = mockTop3();
      items.unshift({title, due:"", completed:false, tag:"#QuickAdd"});
      renderTop3(items);
    }else{
      await apiPost('/reminder', { list:"Top 3", title });
      await loadTop3();
    }
    e.target.reset();
  });

  // Simulated native app actions
  $('#revealTop3').addEventListener('click', ()=> alert('Would call /open { list:"Top 3" } ‚Üí opens Reminders'));
  $('#revealCrash').addEventListener('click', ()=> alert('Would call /open { list:"Crash Plan" } ‚Üí opens Reminders'));
  $('#openCalendar').addEventListener('click', ()=> alert('Would call /open-calendar ‚Üí opens Calendar'));
  $('#openReminders').addEventListener('click', ()=> alert('Opening Reminders (simulated)‚Ä¶'));
  $('#quickAddTop').addEventListener('click', ()=> $('.in[name="title"]').focus());

  // Demo toggle
  $('#toggleDemo').addEventListener('click', () => {
    DEMO = !DEMO;
    $('#toggleDemo').textContent = `Demo: ${DEMO ? 'Demo: On' : 'Demo: Off'}`;
    loadAll();
  });
}

// ------------ Loaders
async function loadTop3(){
  const items = DEMO ? mockTop3() : await apiGet('/top3');
  renderTop3(items);
}
async function loadCrash(){
  const items = DEMO ? mockCrash() : await apiGet('/crash7');
  renderCrash(items);
}
async function loadCalendar(){
  const days = DEMO ? mockCalendar() : await apiGet('/calendar');
  renderCal(days);
}
async function loadAll(){
  const now = new Date();
  $('#nowHint').textContent = fmtDate(now) + " ¬∑ " + fmtTime(now);
  $('#rangeHint').textContent = `${fmtDate(now)} ‚Üí ${fmtDate(addDays(now,6))}`;
  $('#tzHint').textContent = `Local time: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`;
  $('#year').textContent = new Date().getFullYear();
  await Promise.all([loadTop3(), loadCrash(), loadCalendar()]);
}

// Init
document.addEventListener('DOMContentLoaded', ()=>{
  wireEvents();
  loadAll();
});
</file>

<file path="site-urls.txt">
Jenquin Site URLs:

Live Site: https://jenquin813.github.io/jenquin.github.io/
Demo Mode: https://jenquin813.github.io/jenquin.github.io/?demo=1
</file>

<file path="test-top3.html">
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Top 3 Form</title>
  <style>
    body { font-family: system-ui, sans-serif; padding: 20px; }
    .panel { border: 1px solid #ccc; border-radius: 8px; padding: 15px; max-width: 500px; }
    .hd { margin-bottom: 10px; }
    .bd { margin-bottom: 15px; }
    .ft { border-top: 1px solid #eee; padding-top: 10px; }
    .list { min-height: 50px; }
    .item { display: flex; padding: 8px 0; border-bottom: 1px solid #eee; }
    .chx { margin-right: 10px; cursor: pointer; }
    .dot { display: inline-block; width: 16px; height: 16px; border: 2px solid #999; border-radius: 50%; }
    .done .dot { background-color: #999; }
    .title { font-weight: 500; }
    .meta { font-size: 0.8em; color: #666; }
    .quick { display: flex; }
    .in { flex: 1; padding: 8px; border: 1px solid #ccc; border-radius: 4px; margin-right: 8px; }
    .btn { padding: 8px 16px; background: #0066cc; color: white; border: none; border-radius: 4px; cursor: pointer; }
  </style>
</head>
<body>
  <section class="panel" id="top3Panel">
    <div class="hd">
      <h2>Top 3 Today</h2>
      <div class="row">
        <span class="badge" id="dayLabel">Today</span>
        <span class="hint" id="nowHint">‚Äî</span>
      </div>
    </div>
    <div class="bd">
      <div class="list" id="top3List"></div>
    </div>
    <div class="ft">
      <form class="quick" id="top3Form">
        <input class="in" type="text" placeholder="Quick add to Top 3‚Ä¶" name="title" required />
        <button class="btn" type="submit">Add</button>
      </form>
    </div>
  </section>

  <script>
    // Utilities
    const $ = sel => document.querySelector(sel);
    
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }
    
    // Demo mode
    let DEMO = true;
    
    // Mock data
    function mockTop3() {
      return [
        { title: "cut front grass", due: "", completed: false},
        { title: "pay electric", due: "", completed: false},
        { title: "migrate webhook to tailscale", due: "", completed: false},
      ];
    }
    
    // Renderer
    function renderTop3(items) {
      const wrap = $('#top3List'); 
      wrap.innerHTML = "";
      
      items.forEach((it, idx) => {
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div class="main">
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
          </div>
        `;
        
        // toggle complete
        row.querySelector('.chx').addEventListener('click', () => {
          row.classList.toggle('done');
        });
        
        wrap.appendChild(row);
      });
    }
    
    // Initial load
    function loadTop3() {
      const items = mockTop3();
      renderTop3(items);
    }
    
    // Form handler
    document.addEventListener('DOMContentLoaded', () => {
      console.log("DOM loaded, setting up form handler");
      const top3Form = $('#top3Form');
      console.log("Form element:", top3Form);
      
      if (top3Form) {
        top3Form.addEventListener('submit', (e) => {
          console.log("Form submitted");
          e.preventDefault();
          const fd = new FormData(e.target);
          const title = String(fd.get('title') || '').trim();
          console.log("Title:", title);
          
          if (!title) return;
          
          const items = mockTop3();
          items.unshift({title, due: "", completed: false, tag: "#QuickAdd"});
          renderTop3(items);
          e.target.reset();
        });
      }
    });
    
    // Initialize
    loadTop3();
  </script>
</body>
</html>
</file>

<file path="demo.html">
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Redirecting to Demo Mode</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      background-color: #1e1e1e;
      color: white;
      text-align: center;
    }
    h1 {
      margin-bottom: 1rem;
    }
    p {
      margin-bottom: 2rem;
      max-width: 600px;
    }
    .loader {
      border: 5px solid #f3f3f3;
      border-top: 5px solid #3498db;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin-bottom: 2rem;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <h1>Redirecting to Demo Mode</h1>
  <div class="loader"></div>
  <p>You will be automatically redirected to the jenquin.io dashboard in demo mode...</p>
  <script>
    // Ensure we're always in demo mode
    function redirectToDemo() {
      // Get the current URL
      var currentUrl = window.location.href;
      var baseUrl = './index.html';
      
      // Check if we're already on index.html
      if (currentUrl.includes('index.html')) {
        baseUrl = currentUrl.split('?')[0]; // Get the URL without parameters
      }
      
      // Add or update the demo parameter
      var targetUrl = baseUrl + (baseUrl.includes('?') ? '&' : '?') + 'demo=1';
      
      // Redirect to the demo URL
      window.location.href = targetUrl;
    }
    
    // Redirect after a short delay for the loading animation
    setTimeout(redirectToDemo, 1500);
  </script>
</body>
</html>
</file>

<file path="README.md">
# Jenquin.io

Personal Ops Dashboard

## Access URLs

- **Live Site**: https://jenquin813.github.io/jenquin.github.io/
- **Demo Mode**: https://jenquin813.github.io/jenquin.github.io/?demo=1

## Features

- Top 3 Today task management
- 7-Day Crash Plan
- Daily Agenda view
- Mini calendar with month navigation
- Digital clock
- Quick Add functionality
- Demo mode (via URL parameter)

| Layer | Description |
|------|-------------|
| **Backend (Private Repo)** | Handles the ‚Äúthinking‚Äù: logic, scheduling, data processing, and decision-making. |
| **Frontend (`jenquin-site`)** | Handles the ‚Äúfeeling‚Äù: what users see, click, and experience visually. |

This separation allows for clean modular growth ‚Äî keeping the system secure, adaptable, and easy to evolve over time.

## üß≠ Concept Diagram (Aligned & Consistent)
A high-level view of how **Jenquin Site** fits into the broader system with consistent, parallel labels:

```
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ        Jenquin UI        ‚îÇ
                     ‚îÇ  (jenquin-site frontend) ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                         [User Interaction Layer]
                                   ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ       Voice Gateway      ‚îÇ
                     ‚îÇ    (Siri / Mic Input)    ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                           [Input Interpretation]
                                   ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ       AI Assistant       ‚îÇ
                     ‚îÇ  (Nova ‚Äî Router/Agent)   ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                         [Intent Routing & Orchestration]
                                   ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ     Language Model(s)    ‚îÇ
                     ‚îÇ (LLM Engine ‚Äî Reasoning) ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                          [Structured Commands]
                                   ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ      Jenquin Backend     ‚îÇ
                     ‚îÇ (Data & Automation Core) ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                         [Memory & Long-Term Data]
                                   ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ    FlowOS / SelfOS Stack ‚îÇ
                     ‚îÇ   (Personal System Memory)‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Alignment notes:**
- **Voice Gateway** parallels **AI Assistant** in label style (top role + subtitle in parentheses).
- **AI Assistant** is the title; **Nova** is specified as the implementation (Router/Agent).
- **Language Model(s)** mirrors this pattern (title + role in parentheses).
- **Backend** and **FlowOS** use consistent ‚Äútitle + role‚Äù phrasing.

## üéØ Goals
- Present a **functional and visually clear** concept site.
- Prototype UI elements such as dashboards, top tasks, and flow navigation.
- Serve as the **public face** of the Jenquin project while backend logic develops privately.
- Evolve into a unified web or app experience that integrates voice, reminders, and adaptive interfaces.

## üîÑ Future Vision
Jenquin isn‚Äôt just a site ‚Äî it‚Äôs the start of a connected ecosystem. Over time, this front-end layer will become a **gateway** into a broader platform that blends:
- **automation**
- **data awareness**
- **voice input**
- **flow-based productivity**

The goal is to make technology feel *invisible but intelligent* ‚Äî helping people stay organized and in flow without needing to manage every detail manually.

## üß∞ Built With
- **HTML5 / CSS3**
- **JavaScript (Vanilla)**
- *(Optional future frameworks: React, Vue, or Svelte)*

## üöÄ Getting Started

### Local Development Server (Recommended)
For full functionality including data fetching:
```bash
git clone https://github.com/<yourusername>/jenquin-site.git
cd jenquin-site
python3 -m http.server 8080
```
Then open: **http://localhost:8080** and bookmark as "Jenquin Local App"

### File Preview (Basic)
For quick preview without server features:
```bash
cd jenquin-site
open index.html
```

### Live Site
View on GitHub Pages: https://jenquin813.github.io/jenquin.github.io/

## üñºÔ∏è Showcase / Screenshots (placeholder)
- `docs/screenshots/` folder for UI previews and GIFs (add when ready).
- Example sections to show later: **Reveal Crash Plan**, **Top 3 / Top 7**, **Flow Navigation**.

## ü™∂ License
This project is currently under personal development and not licensed for redistribution.
Future licensing will be added once the full system architecture is ready for collaboration.
</file>

<file path="sandbox_calendar_agenda_card.html">
<!doctype html>
<html lang="en">
<head>
<!-- Reminders wiring patch: use local JSON, scheduled-only -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agenda Card ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.28}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris‚Äô Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- Data status indicator -->
          <div id="dataStatus" style="padding:8px 12px;font-size:11px;color:var(--muted);text-align:center;border-top:1px solid var(--border);">
            Loading reminders...
          </div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Day context ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  /* ---------- Reminders (scheduled only) loader ---------- */
  async function loadRemindersScheduled() {
    const statusEl = document.getElementById('dataStatus');
    if (statusEl) statusEl.textContent = 'Loading reminders...';
    
    // served locally; never pushed. See .gitignore (/data/)
    const url = 'data/reminders.local.json?ts=' + Date.now();
    try {
      const res = await fetch(url, { cache: 'no-store' });
      if (!res.ok) throw new Error('HTTP ' + res.status);
      const data = await res.json();
      const { items = [], count = 0 } = data;

      // Map Reminders ‚Üí UI model: timed EVENTS + ALLDAY pills
      const EVENTS = [];
      const ALLDAY = [];
      for (const it of items) {
        if (!it?.dueISO) continue; // scheduled only
        const d = new Date(it.dueISO);
        const hasTime = !(d.getHours() === 0 && d.getMinutes() === 0);
        if (hasTime) {
          EVENTS.push({
            title: it.title,
            start: d,
            color: it.priority === 1 ? 'purple' : it.flagged ? 'blue' : 'green'
          });
        } else {
          // scheduled all-day item
          ALLDAY.push(it.title);
        }
      }
      // expose
      window.__REM_EVENTS = EVENTS.sort((a,b)=>+a.start-+b.start);
      window.__REM_ALLDAY = ALLDAY;
      
      // Update status
      if (statusEl) {
        statusEl.textContent = `‚úÖ Loaded ${count} reminders (${EVENTS.length} timed, ${ALLDAY.length} all-day)`;
      }
    } catch (err) {
      console.warn('Reminders fetch failed:', err);
      window.__REM_EVENTS = [];
      window.__REM_ALLDAY = ['Reminders unavailable'];
      if (statusEl) {
        statusEl.textContent = `‚ùå Failed to load reminders: ${err.message}`;
      }
    }
  }

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [
  { label:"Health",                   start: at(0,0),  end: at(7,30), color: AREA_COLORS.health },
  { label:"Flex",                     start: at(7,30),  end: at(9,30),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(11,0), color: AREA_COLORS.health },
  { label:"Prep & Maintenance",       start: at(11,0),  end: at(14,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Administrative",           start: at(14,0),  end: at(18,0),  color: AREA_COLORS.administrative },
  { label:"Social & Relationships",   start: at(18,0), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,0), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Hydrate UI from Reminders ---------- */
  async function hydrateCalendarFromReminders() {
    // load scheduled reminders
    await loadRemindersScheduled();

    // 1) All-day lane
    const lane = document.getElementById('alldayLane');
    lane.innerHTML = '';
    (window.__REM_ALLDAY || []).forEach(t=>{
      const p = document.createElement('span');
      p.className = 'allday-pill';
      p.textContent = t;
      lane.appendChild(p);
    });

    // 2) Timed events list
    const list = document.getElementById('agendaList');
    list.innerHTML = '';
    (window.__REM_EVENTS || []).forEach(ev=>{
      const row = document.createElement('div');
      row.className = 'agenda-row';
      row.dataset.start = ev.start.toISOString();
      const startStr = fmtTime(ev.start);
      row.innerHTML = `
        <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
        <div>
          <div class="agenda-title">${ev.title}</div>
          <div class="agenda-meta">${startStr}</div>
        </div>
        <label class="chx"><span class="inner"></span></label>
      `;
      row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
      list.appendChild(row);
    });

    // 3) refresh dynamics
    if (typeof updateNowLine === 'function') updateNowLine();
    if (typeof updateZoneBar === 'function') updateZoneBar(new Date());
  }

  /* ---------- Focus pill / header ---------- */
  const FOCUS = "Today";
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = "";
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Boot + timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
  }

  document.addEventListener('DOMContentLoaded', async ()=>{
    await hydrateCalendarFromReminders(); // initial render from Reminders
    tick();
  });

  // refresh UI every minute; refresh data every 10 minutes
  setInterval(tick, 60 * 1000);
  setInterval(hydrateCalendarFromReminders, 10 * 60 * 1000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock "Flex ¬∑ 3:33 PM‚Äì7:30 PM" */
  (function seedAreaPill(){
    const p = document.getElementById('areaPill');
    const seg = ZONES[0];
    if (seg) p.textContent = seg.label; // just the zone name, no time
  })();
</script>
</body>
</html>
</file>

<file path="run_commands">
add the modified files:
git add 

commit the changes:
git commit -m ""

push the changes to the remote repository:
git push origin master

create a zip backup with a timestamp in the Backups folder:
mkdir -p Backups && zip -r "Backups/jenquin-site-backup-$(date +%Y%m%d-%H%M%S).zip" . -x "*.git*" -x "Backups/*"



http://localhost:8080/sandbox_calendar_agenda_card.html


file:///Volumes/storage/projects/Jenquin-site/sandbox_digital_twin_oracle.html


#5) Local run + bookmark
#Start server:
cd /Volumes/storage/projects/Jenquin-site
python3 -m http.server 8080

Open + bookmark:
http://localhost:8080/sandbox_calendar_agenda_card.html
</file>

<file path="style.css">
:root{
  --bg: #0b0c10;
  --panel: #111318;
  --muted: #7b8496;
  --text: #e9edf5;
  --accent: #6ea8fe;
  --accent-2: #7df2c9;
  --danger: #ff7a7a;
  --ok: #76ff9b;
  --border: #20232b;
  --shadow: 0 8px 24px rgba(0,0,0,.35);
  --radius: 14px;
  --radius-sm: 10px;
}
@media (prefers-color-scheme: light){
  :root{
    --bg: #f6f7fb;
    --panel: #ffffff;
    --muted: #6b7280;
    --text: #0f172a;
    --accent: #2556ff;
    --accent-2: #0ea5e9;
    --border: #e5e7eb;
    --shadow: 0 10px 24px rgba(0,0,0,.08);
  }
}
*{ box-sizing: border-box }
html,body{ height:100% }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  background: radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
              radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%), var(--bg);
  color: var(--text);
  line-height:1.4;
}
.wrap{ max-width: 1200px; margin: 0 auto; padding: 28px 18px 40px; }
header{ display:flex; align-items:center; justify-content:space-between; gap: 16px; margin-bottom: 22px; }
.brand{ display:flex; align-items:center; gap:14px; }
.logo{ width:44px; height:44px; border-radius:12px; box-shadow: var(--shadow); }
.brand h1{ font-size: 20px; margin: 0; letter-spacing:.4px }
.brand .sub{ color: var(--muted); font-size:13px; margin-top:2px }
.actions{ display:flex; align-items:center; gap:8px }
.btn{
  appearance:none; border:1px solid var(--border); color:var(--text);
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  padding:10px 14px; border-radius:12px; cursor:pointer;
  transition: transform .08s ease, background .2s ease, border-color .2s ease;
}
.btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18) }
.btn.primary{ background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.05)); border-color: rgba(110,168,254,.35); color: white; }
.btn.ghost{ background: transparent; }
.grid{ display:grid; grid-template-columns: 1.1fr 1fr; gap: 18px; }
@media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }
.panel{
  background: var(--panel); border: 1px solid var(--border); border-radius: var(--radius);
  box-shadow: var(--shadow); overflow: clip;
}
.panel .hd{ display:flex; align-items:center; justify-content:space-between; gap: 10px; padding: 14px 16px; border-bottom:1px solid var(--border);
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06)); }
.panel .hd h2{ margin:0; font-size: 15px; letter-spacing:.3px }
.panel .hd .hint{ color: var(--muted); font-size:12px }
.panel .bd{ padding: 12px 16px }
.panel .ft{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; flex-wrap:wrap }
.list{ display:flex; flex-direction:column; gap:10px }
.item{
  display:grid; grid-template-columns: 22px 1fr auto; align-items:center; gap: 10px;
  padding:10px; border:1px solid var(--border); border-radius: var(--radius-sm);
  background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
}
.chx{ width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer }
.chx input{ display:none }
.chx .dot{ width:10px; height:10px; border-radius:3px; background:transparent; }
.item.done .title{ color: var(--muted); text-decoration: line-through }
.item.done .chx .dot{ background: var(--ok); }
.title{ font-size:14px; }
.meta{ color: var(--muted); font-size:12px }
.tag{ font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border); color: var(--muted); }
.kebab{ opacity:.7; }
.row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }
.quick{ display:flex; gap:10px; align-items:center; width:100%; }
.in{
  flex:1; min-width: 160px;
  border:1px solid var(--border); border-radius:12px; padding:10px 12px;
  background: rgba(0,0,0,.04); color: var(--text);
}
.select{
  border:1px solid var(--border); border-radius:12px; padding:10px 12px;
  background: rgba(0,0,0,.04); color: var(--text);
}
.cal{ display:grid; grid-template-columns: repeat(7,1fr); gap:10px; }
@media (max-width: 860px){ .cal{ grid-template-columns: repeat(3,1fr) } }
@media (max-width: 560px){ .cal{ grid-template-columns: repeat(2,1fr) } }
.day{
  border:1px solid var(--border); border-radius:12px; padding:10px;
  background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  min-height:90px; display:flex; flex-direction:column; gap:6px;
}
.day .d{ font-size:12px; color: var(--muted) }
.pill{
  font-size:12px; padding:6px 8px; border-radius:10px; border:1px solid var(--border);
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.pill.blue{ border-color: rgba(110,168,254,.4) }
.pill.green{ border-color: rgba(125,242,201,.45) }
footer{ margin-top: 24px; color: var(--muted); font-size:12px; text-align:center; }
.sep{ height:1px; background: var(--border); margin: 8px 0 }
.faded{ color: var(--muted) }
.badge{
  font-size:11px; padding:3px 8px; border-radius:999px; background: rgba(110,168,254,.15); border:1px solid rgba(110,168,254,.35);
  color: #dbe9ff;
}

/* Crash subtasks (accordion) */
.chev{ font-size:14px; border:1px solid var(--border); border-radius:8px; padding:4px 8px; }
.sublist{
  display:none; margin:8px 0 0 38px;
  padding:8px 10px; border-left:2px solid var(--border);
  display:none; gap:8px; flex-direction:column;
}
.sublist.open{ display:flex; }
.subitem{ display:flex; align-items:center; gap:8px; font-size:13px; }
.subitem .tick{ width:12px; height:12px; border-radius:3px; border:1px solid var(--border); background:rgba(0,0,0,.04); }
.subitem.done .subtxt{ color:var(--muted); text-decoration:line-through; }
</file>

<file path="index.html">
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jenquin.io ‚Äî Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg: #0b0c10;
      --panel: #111318;
      --muted: #7b8496;
      --text: #e9edf5;
      --accent: #6ea8fe;
      --accent-2: #7df2c9;
      --danger: #ff7a7a;
      --ok: #76ff9b;
      --border: #20232b;
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 14px;
      --radius-sm: 10px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg: #f6f7fb;
        --panel: #ffffff;
        --muted: #6b7280;
        --text: #0f172a;
        --accent: #2556ff;
        --accent-2: #0ea5e9;
        --border: #e5e7eb;
        --shadow: 0 10px 24px rgba(0,0,0,.08);
      }
    }

    *{ box-sizing: border-box }
    html,body{ height:100% }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
                  radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%), var(--bg);
      color: var(--text);
      line-height:1.4;
    }

    /* Shell */
    .wrap{
      max-width: 1200px;
      margin: 0 auto;
      padding: 28px 18px 40px;
    }

    header{
      display:flex; align-items:center; justify-content:space-between;
      gap: 16px; margin-bottom: 22px;
    }
    .brand{
      display:flex; align-items:center; gap:14px;
    }
    .logo{
      width:44px; height:44px; border-radius:12px;
      background:
        radial-gradient(60% 100% at 30% 10%, rgba(125,242,201,.3), transparent 60%),
        linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: var(--shadow);
    }
    .brand h1{
      font-size: 20px; margin: 0;
      letter-spacing:.4px;
    }
    .brand .sub{ color: var(--muted); font-size:13px; margin-top:2px }
    .actions{ display:flex; align-items:center; gap:10px }
    .btn{
      appearance:none; border:1px solid var(--border); color:var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      padding:10px 14px; border-radius:12px; cursor:pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18) }
    .btn.primary{
      background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.05));
      border-color: rgba(110,168,254,.35); color: white;
    }
    .btn.ghost{ background: transparent; }

    /* Layout */
    .grid{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 18px;
    }
    @media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }

    /* Panel */
    .panel{
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: clip;
    }
    .panel .hd{
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      padding: 14px 16px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    }
    .panel .hd h2{ margin:0; font-size: 15px; letter-spacing:.3px }
    .panel .hd .hint{ color:var(--muted); font-size:12px }
    .panel .bd{ padding: 12px 16px }
    .panel .ft{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; flex-wrap:wrap }

    /* Lists */
    .list{ display:flex; flex-direction:column; gap:10px }
    .item{
      display:grid; grid-template-columns: 22px 1fr auto; align-items:center; gap: 10px;
      padding:10px; border:1px solid var(--border); border-radius: var(--radius-sm);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    }
    .chx{ width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer }
    .chx input{ display:none }
    .chx .dot{ width:10px; height:10px; border-radius:3px; background:transparent; }
    .item.done .title{ color: var(--muted); text-decoration: line-through }
    .item.done .chx .dot{ background: var(--ok); }
    .title{ font-size:14px; }
    .meta{ color: var(--muted); font-size:12px }
    .tag{
      font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border);
      color: var(--muted);
    }
    .kebab{ opacity:.7; }
    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }

    /* Quick add */
    .quick{
      display:flex; gap:10px; align-items:center; width:100%;
    }
    .in{
      flex:1; min-width: 160px;
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }
    .select{
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }

    /* Agenda (Apple-style list) */
    .agenda-day{
      border:1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      margin-bottom: 12px; overflow: hidden;
      position: relative;
    }

    /* Live 'now' line inside a day box */
    .now-indicator {
      position: absolute;
      left: 12px;           /* aligns with agenda padding */
      right: 12px;
      height: 2px;
      background: rgba(255,255,255,.35);   /* subtle gray on dark */
      border-radius: 2px;
      pointer-events: none;
      z-index: 20;
      transition: top .2s ease-out;        /* smooth nudges */
    }

    /* optional tiny dot on the left edge */
    .now-indicator::before{
      content:"";
      position:absolute;
      left:-4px; top:-3px;
      width:8px; height:8px; border-radius:50%;
      background: rgba(255,255,255,.6);
      box-shadow: 0 0 6px rgba(255,255,255,.25);
    }
    @media (prefers-color-scheme: light){
      .now-indicator{ background: rgba(0,0,0,.25); }
      .now-indicator::before{ background: rgba(0,0,0,.45); }
    }
    .agenda-day-hd{
      display:flex; justify-content:space-between; align-items:center;
      padding:10px 12px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      font-size:13px; letter-spacing:.2px;
    }
    .agenda-day-hd .date{ color: var(--muted) }
    
    /* Make the left item in the small day header look like a pill */
    /* Softer, more blended focus pill ‚Äî matches card background */
    /* Softer, muted-gray focus pill */
    .agenda-day-hd > :first-child{
      display:inline-block;
      padding:6px 10px;
      border:1px solid rgba(255,255,255,.05);
      border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
      font-weight:400;
      font-size:12px;
      letter-spacing:.2px;
      color: var(--muted);         /* ‚Üê makes text match your time gray */
      box-shadow: inset 0 0 2px rgba(0,0,0,.25);
    }

    @media (prefers-color-scheme: light){
      .agenda-day-hd > :first-child{
        border:1px solid rgba(0,0,0,.05);
        background: linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
        color: var(--muted);       /* still use muted tone in light mode */
      }
    }
    .agenda-list{ display:flex; flex-direction:column }
    .agenda-row{
      display:grid; grid-template-columns: 20px 1fr auto; align-items:center;
      gap:10px; padding:10px 12px; border-top:1px solid var(--border);
    }
    .agenda-row:first-child{ border-top: none }
    .agenda-row .dot{
      width:10px; height:10px; border-radius:50%;
      border:2px solid var(--border);
    }
    .dot.blue{ background: rgba(110,168,254,.9) }
    .dot.green{ background: rgba(125,242,201,.95) }
    .dot.purple{ background: #b38aff }
    .dot.orange{ background: #ffb05a }
    .dot.gray{ background: #9aa3b2 }
    .agenda-title{ font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
    .agenda-meta{ color: var(--muted); font-size:12px }
    .agenda-badge{
      font-size:11px; padding:4px 8px; border-radius:999px;
      border:1px solid var(--border); color: var(--muted);
    }

    /* Agenda checkbox = exactly like Top 3 / Crash */
    .agenda-row .chx{
      width:18px; height:18px;
      border-radius:6px;
      border:1px solid var(--border);
      display:inline-grid; place-items:center;
      cursor:pointer;
      background: transparent;            /* <- no gray fill */
    }

    /* Hide the inner square when unchecked (no "box in box") */
    .agenda-row .chx .dot{
      width:10px; height:10px;
      border-radius:3px;
      background: transparent;
      border: none;                        /* <- ensure no outline */
      opacity: 0;                          /* <- invisible when unchecked */
    }

    /* Checked state = same green fill you already use */
    .agenda-row.done .chx .dot{
      opacity: 1;
      background: var(--ok);
    }

    /* Strike-through title when done (already added, keep) */
    .agenda-row.done .agenda-title{
      color: var(--muted);
      text-decoration: line-through;
    }

    /* Optional: nudge the right cell a hair */
    .agenda-row > .chx{ margin-left: 8px; }

    /* All-day lane: single line, scrolls left‚Üíright */
    .agenda-allday{
      display:flex;
      gap:8px;
      padding:10px 12px;
      border-top:1px solid var(--border);
      overflow-x:auto;
      white-space:nowrap;
      scrollbar-width: thin;
    }
    .agenda-allday::-webkit-scrollbar{ height:6px; }
    .agenda-allday::-webkit-scrollbar-thumb{
      background: rgba(255,255,255,.1);
      border-radius: 999px;
    }

    /* Subtle all-day pills */
    .allday-pill{
      display:inline-flex; align-items:center;
      padding:6px 10px;
      border:1px solid var(--border);
      border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      color: var(--muted);
      font-size:12px;
      white-space:nowrap;
    }

    /* Row directly under the focus banner: Area (left) + All-day items (right) */
    .area-row{
      display:flex; align-items:center; gap:8px;
      padding:10px 12px;
      border-top:1px solid var(--border);
      overflow-x:auto; /* if lots of all-day pills */
    }
    .area-row::-webkit-scrollbar{ height:6px; }
    .area-row::-webkit-scrollbar-thumb{
      background: rgba(255,255,255,.1);
      border-radius:999px;
    }

    /* Left pill = current Area (soft, blended) */
    .area-pill{
      display:inline-flex; align-items:center;
      padding:6px 10px;
      border:1px solid rgba(255,255,255,.05);
      border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
      color: var(--muted);
      font-size:12px;
      box-shadow: inset 0 0 2px rgba(0,0,0,.25);
      white-space:nowrap;
    }

    /* Right lane container for all-day items */
    .allday-lane{
      display:flex; gap:8px;
      margin-left:6px;
    }

    /* Reuse your subtle all-day pill look */
    .allday-pill{
      display:inline-flex; align-items:center;
      padding:6px 10px;
      border:1px solid var(--border);
      border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      color: var(--muted);
      font-size:12px;
      white-space:nowrap;
    }

    @media (prefers-color-scheme: light){
      .area-pill{
        border:1px solid rgba(0,0,0,.05);
        background: linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      }
    }

    footer{
      margin-top: 24px; color: var(--muted); font-size:12px; text-align:center;
    }
    .sep{ height:1px; background: var(--border); margin: 8px 0 }
    .faded{ color: var(--muted) }
    .badge{
      font-size:11px; padding:3px 8px; border-radius:999px; background: rgba(110,168,254,.15); border:1px solid rgba(110,168,254,.35);
      color: #dbe9ff;
    }
    
    /* Crash subtasks (accordion) */
    .chev{ font-size:14px; border:1px solid var(--border); border-radius:8px; padding:4px 8px; }
    .sublist{
      display:none; margin:8px 0 0 38px;
      padding:8px 10px; border-left:2px solid var(--border);
      display:none; gap:8px; flex-direction:column;
    }
    .sublist.open{ display:flex; }
    .subitem{ display:flex; align-items:center; gap:8px; font-size:13px; }
    .subitem .tick{ width:12px; height:12px; border-radius:3px; border:1px solid var(--border); background:rgba(0,0,0,.04); }
    .subitem.done .subtxt{ color:var(--muted); text-decoration:line-through; }
    .subitem{ cursor:pointer; }
    .subitem.done .tick{
      background: var(--ok);
      border-color: rgba(118,255,155,.7);
    }
    
    .item .main{
      flex:1;
    }
    .item .chev{
      margin-left:auto;
      font-size:16px;
      border:none;
      background:transparent;
      color:var(--muted);
      cursor:pointer;
      padding:6px 10px;
    }
    .item .chev:hover{
      color:var(--accent);
      transform: translateY(-1px);
    }
    
    .item .main{ flex:1; }
    .item .kebab{
      margin-left:auto;
      border:none;
      background:transparent;
      color:var(--muted);
      padding:6px 10px;
    }
    .item .kebab:hover{ color:var(--accent); transform: translateY(-1px); }
    
    .btn.mini{ padding:6px 10px; border-radius:10px }
    #miniMonth{
      display:grid; gap:6px;
      grid-template-columns: repeat(7, 1fr);
      width:100%;
    }
    .mm-cell{
      text-align:center; font-size:12px; padding:6px 0;
      border:1px solid var(--border); border-radius:8px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.04));
      cursor:pointer; user-select:none;
    }
    .mm-head{ font-weight:600; color:var(--muted); cursor:default; }
    .mm-out{ opacity:.45 }
    .mm-today{ outline:2px solid var(--accent); }
    .mm-sel{ background: rgba(110,168,254,.18); border-color: rgba(110,168,254,.45); }
    
    .month-nav {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-bottom: 10px;
    }
    
    .month-nav h3 {
      margin: 0;
      font-size: 14px;
      font-weight: 600;
      text-align: center;
      min-width: 100px;
    }
    
    .mini-row{
      display:grid; grid-template-columns: 1fr 1fr; gap:12px; align-items:stretch; width:100%;
      height: 180px;  /* match the clock box height */
    }
    @media (max-width: 860px){
      .mini-row{ grid-template-columns: 1fr; } /* stack on small screens */
    }

    /* Updated miniMonth styles */
    #miniMonth {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 6px 6px 8px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      box-shadow: var(--shadow);
    }

    /* Month header (keep small) */
    .mm-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2px; /* tighten spacing */
      font-size: 11px;
    }
    .mm-nav-btn {
      font-size: 11px;
      padding: 2px 6px;
    }
    .mm-nav-title {
      font-size: 11px;
    }

    /* Days grid scaled down */
    #mmGrid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 3px;
      flex: 1;
    }
    .mm-cell {
      font-size: 10px;
      padding: 3px 0;
    }

    /* Clock card */
    #miniClock{
      display:flex; flex-direction:column; justify-content:center; align-items:center;
      border:1px solid var(--border); border-radius:12px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      box-shadow: var(--shadow); height:100%;
      font-size: 48px;
    }
    .clk-time{
      font-variant-numeric: tabular-nums;
      font-size:46px; line-height:1; letter-spacing:1px;
    }
    .clk-sub{ margin-top:6px; color:var(--muted); font-size:12px; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>jenquin.io</h1>
          <div class="sub">Jenquin ‚Ä¢ Personal Ops Dashboard</div>
        </div>
      </div>
      <div class="actions">
        <button class="btn" id="openReminders">Open Reminders</button>
      </div>
    </header>

    <div class="grid">
      <!-- Left column: Top 3 + Crash 7 stacked -->
      <div class="stack">
        <section class="panel" id="top3Panel">
          <div class="hd">
            <h2>Flagged Reminders</h2>
            <div class="row">
              <span class="badge" id="dayLabel">Today</span>
              <span class="hint" id="nowHint">‚Äî</span>
            </div>
          </div>
          <div class="bd">
            <div class="list" id="top3List"></div>
          </div>
          <div class="ft">
            <form class="quick" id="top3Form">
              <input class="in" type="text" placeholder="Quick add to Top 3‚Ä¶" name="title" required />
              <button class="btn" type="submit">Add</button>
            </form>
          </div>
        </section>

        <!-- Crash Plan (no footer) -->
        <section class="panel" id="crashPanel" style="margin-top:18px;">
          <div class="hd">
            <h2>Smart Planner</h2>
            <div class="hint" id="rangeHint">Projects ‚Ä¢ Phases ‚Ä¢ Tasks</div>
          </div>
          <div class="bd">
            <div class="list" id="crashList"></div>
          </div>
        </section>
      </div>

      <!-- Right column: Agenda (Apple-style) -->
      <section class="panel" id="agendaPanel">
        <div class="hd" id="flowHd">
          <button class="btn ghost mini" id="dayPrev" aria-label="Previous day">‚Üê</button>
          <h2 id="dayTitle" style="margin:0 auto;">‚Äî</h2>
          <button class="btn ghost mini" id="dayNext" aria-label="Next day">‚Üí</button>
        </div>
        <div class="bd">
          <div id="agenda"></div>
        </div>
        <div class="ft">
          <div class="mini-row">
            <div id="miniMonth">
              <div class="mm-nav">
                <button class="mm-nav-btn" id="monthPrev" aria-label="Previous month">‚óÑ</button>
                <span class="mm-nav-title" id="monthTitle">Month</span>
                <button class="mm-nav-btn" id="monthNext" aria-label="Next month">‚ñ∫</button>
              </div>
              <div id="mmGrid"></div>
            </div>
            <div id="miniClock" aria-label="Current time">
              <div class="clk-time">--:--</div>
              <div class="clk-sub">‚Äî</div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <footer>
      ¬© <span id="year"></span> jenquin.io ‚Ä¢ v1 preview ¬∑ Data stays in Apple apps ¬∑ Clicks may open native apps
    </footer>
  </div>

  <script>
    // ------------ Utilities
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));
    
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function fmtTime(d){
      return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
    }
    function fmtDate(d){
      return new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(d);
    }
    function addDays(d, n){ const c = new Date(d); c.setDate(c.getDate()+n); return c; }
    
    // ----- Date anchors
    function startOfDay(d){ return new Date(d.getFullYear(), d.getMonth(), d.getDate()); }
    const TODAY = startOfDay(new Date());
    let SELECTED = TODAY; // ‚Üê the day your FlowOS panel shows

    // --- AREA detection (minimal; explicit ev.area preferred, else infer by title)
    const AREA_FLEX = "Flex";
    const AREA_NAMES = [
      "Prep & Maintenance",
      "Review & Planning",
      "Rest & Recharge",
      "Creative / Project Work",
      "Health",
      "Errands & Logistics",
      "Social & Relationships",
      "Flex"
    ];

    function inferAreaFromTitle(title=""){
      const t = title.toLowerCase();
      if (t.match(/\breview\b|\bplanning\b/)) return "Review & Planning";
      if (t.match(/\brest\b|\brecharge\b/)) return "Rest & Recharge";
      if (t.match(/\bprep\b|\bmaintenance\b/)) return "Prep & Maintenance";
      if (t.match(/\bcreative\b|\bproject\b/)) return "Creative / Project Work";
      if (t.match(/\bhealth\b|\bgym\b|\brun\b|\byoga\b/)) return "Health";
      if (t.match(/\berrand\b|\blogistic\b|\bshop\b|\bgrocery\b/)) return "Errands & Logistics";
      if (t.match(/\bsocial\b|\brelationship\b|\bfriend\b|\bdinner\b|\bmeet\b/)) return "Social & Relationships";
      if (t.match(/\bflex\b/)) return "Flex";
      return null;
    }

    // Build sorted "area windows" from events that map to an area
    function areaWindows(events=[]){
      return (events||[])
        .map(ev=>{
          const area = ev.area || inferAreaFromTitle(ev.title);
          return (area && ev.start) ? { ...ev, area } : null;
        })
        .filter(Boolean)
        .sort((a,b)=> +new Date(a.start) - +new Date(b.start));
    }

    // Single active area (if overlaps, prefer the one with latest start)
    function findCurrentArea(events, now=new Date()){
      const wins = areaWindows(events);
      const active = wins.filter(w=>{
        const s = new Date(w.start);
        const e = w.end ? new Date(w.end) : null;
        return e ? (now >= s && now < e) : (now >= s);
      });
      if (!active.length) return null;
      return active.reduce((a,b)=> new Date(a.start) > new Date(b.start) ? a : b);
    }

    // Next scheduled area after now
    function findNextArea(events, now=new Date()){
      const wins = areaWindows(events);
      for (const w of wins){ if (new Date(w.start) > now) return w; }
      return null;
    }

    // Format the Area pill
    function areaPillHTML(label, s, e){
      // only show the area label, no time
      return `<span class="area-pill">${escapeHtml(label)}</span>`;
    }

    // Create the combined row: [Area pill]  [all-day lane -> pills...]
    function renderAreaRow(day, box){
      const row = document.createElement('div');
      row.className = 'area-row';
      row.setAttribute('data-arearow','1');

      // left: area pill placeholder
      const areaSlot = document.createElement('span');
      areaSlot.className = 'area-pill';
      areaSlot.setAttribute('data-areaslot','1');
      areaSlot.textContent = ''; // will be filled by updateAreaRow()

      // right: all-day lane container
      const lane = document.createElement('div');
      lane.className = 'allday-lane';
      lane.setAttribute('data-alldaylane','1');

      // fill all-day items horizontally to the right, excluding the focus label
      const focusLabel = day.focus || "";
      if (day.allDay && day.allDay.length){
        (day.allDay || [])
          .filter(a => a && a.title && a.title !== focusLabel && !/^\[FOCUS\]/i.test(a.title))
          .forEach(a=>{
            const pill = document.createElement('span');
            pill.className = 'allday-pill';
            pill.textContent = a.title;
            lane.appendChild(pill);
          });
      }

      row.appendChild(areaSlot);
      row.appendChild(lane);
      box.appendChild(row);

      // initial area fill
      updateAreaRow(day, row);
    }

    // Update only the left area pill content
    function updateAreaRow(day, row){
      if (!row) return;
      const slot = row.querySelector('[data-areaslot="1"]');
      if (!slot) return;

      const now = new Date();
      const isToday = +startOfDay(now) === +startOfDay(day.date);

      if (!isToday){
        // On non-today days: show first area if any, else a default Flex window (optional)
        const wins = areaWindows(day.events);
        if (wins.length){
          const first = wins[0];
          slot.outerHTML = areaPillHTML(first.area, new Date(first.start), first.end ? new Date(first.end) : null);
        }else{
          const ds = new Date(day.date); ds.setHours(9,0,0,0);
          const de = new Date(day.date); de.setHours(17,0,0,0);
          slot.outerHTML = areaPillHTML(AREA_FLEX, ds, de);
        }
        return;
      }

      // Today: only show the current area; if in a gap, show Flex until next area or EOD
      const current = findCurrentArea(day.events, now);
      if (current){
        slot.outerHTML = areaPillHTML(current.area, new Date(current.start), current.end ? new Date(current.end) : null);
      }else{
        const next = findNextArea(day.events, now);
        const flexStart = now;
        const flexEnd = next ? new Date(next.start)
          : new Date(day.date.getFullYear(), day.date.getMonth(), day.date.getDate(), 23, 59, 0, 0);
        slot.outerHTML = areaPillHTML(AREA_FLEX, flexStart, flexEnd);
      }
    }

    // Called by your timer to keep the area pill live
    function updateLiveArea(){
      const dayBox = document.querySelector('#agenda .agenda-day');
      if (!dayBox || !window.__CURRENT_DAY) return;
      const row = dayBox.querySelector('[data-arearow="1"]');
      if (!row) return;
      updateAreaRow(window.__CURRENT_DAY, row);
    }

    // ------------ Demo mode via URL parameter
    // Visit site normally for live mode, add ?demo=1 for demo mode
    // Simple flag for demo mode
    let DEMO = new URLSearchParams(window.location.search).has('demo');
    let CRASH_STATE = null;
    
    // In-memory storage for demo mode
    const DEMO_STORAGE = {};
    
    // ------------ Storage wrappers for demo vs live persistence
    // These wrappers provide a consistent interface for storage operations
    // In demo mode, they use memory storage that resets on page refresh
    // In live mode, they use localStorage for persistence
    
    // ------------ Storage wrappers for demo vs live persistence
    // These wrappers provide a consistent interface for storage operations
    // In demo mode, they use memory storage that resets on page refresh
    // In live mode, they use localStorage for persistence
    
    // Get a value from storage (localStorage in live mode, memory in demo mode)
    function storageGet(key) {
      if (DEMO) {
        return DEMO_STORAGE[key];
      } else {
        try {
          return JSON.parse(localStorage.getItem(key) || 'null');
        } catch {
          return null;
        }
      }
    }
    
    // Set a value in storage (localStorage in live mode, memory in demo mode)
    function storageSet(key, value) {
      if (DEMO) {
        DEMO_STORAGE[key] = value;
      } else {
        localStorage.setItem(key, JSON.stringify(value));
      }
    }
    
    // Remove a value from storage
    function storageRemove(key) {
      if (DEMO) {
        delete DEMO_STORAGE[key];
      } else {
        localStorage.removeItem(key);
      }
    }
    
    
    // ------------ Mock data
    function mockTop3(){
      return [
        { title: "cut front grass", due: "", completed: false},
        { title: "pay electric", due: "", completed: false},
        { title: "migrate webhook to tailscale", due: "", completed: false},
      ];
    }
    function mockCrash(){
  const now = new Date();
  const day = (n)=> addDays(now, n-1); // Day 1=today, Day 2=+1, etc.

  return [
    {
      day: 1,
      title: "Project ‚Äî FlowOS",
      due: day(1),
      subtasks: [
        "Phase: Planner UI ‚Äî build Project Title List",
        "Phase: Sync ‚Äî Reminders ‚Üí export ‚Üí normalize ‚Üí map ‚Üí render"
      ]
    },
    {
      day: 2,
      title: "Project ‚Äî Smart Planner Card",
      due: day(2),
      subtasks: [
        "Phase: Structure ‚Äî Projects ‚Üí Phases ‚Üí Tasks",
        "Phase: Render ‚Äî Accordion behavior"
      ]
    },
    {
      day: 3,
      title: "Project ‚Äî Dashboard Integration",
      due: day(3),
      subtasks: [
        "Phase: API ‚Äî Connect live data sources",
        "Phase: UI ‚Äî Real-time updates and notifications"
      ]
    },
    {
      day: 4,
      title: "Project ‚Äî Mobile Optimization",
      due: day(4),
      subtasks: [
        "Phase: Responsive ‚Äî Tablet and phone layouts",
        "Phase: Touch ‚Äî Gesture controls and interactions"
      ]
    },
    {
      day: 5,
      title: "Project ‚Äî Data Sync Engine",
      due: day(5),
      subtasks: [
        "Phase: Export ‚Äî Apple Reminders integration",
        "Phase: Transform ‚Äî Normalize data structures"
      ]
    },
    {
      day: 6,
      title: "Project ‚Äî Performance Optimization",
      due: day(6),
      subtasks: [
        "Phase: Speed ‚Äî Lazy loading and caching",
        "Phase: Memory ‚Äî Efficient state management"
      ]
    },
    {
      day: 7,
      title: "Project ‚Äî User Experience Polish",
      due: day(7),
      subtasks: [
        "Phase: Polish ‚Äî Animations and micro-interactions",
        "Phase: Testing ‚Äî User acceptance and edge cases"
      ]
    }
  ];
}

    // --- Mock agenda data like your screenshots
    function mockAgenda(forDate = SELECTED){
      const d0 = startOfDay(forDate);
      const at = (d,h,m=0)=> new Date(d.getFullYear(), d.getMonth(), d.getDate(), h, m);
      const weekday = new Intl.DateTimeFormat(undefined, { weekday:'long' }).format(d0);

      return [{
        label: weekday,
        date: d0,
        focus: "Recovery Day",          // ‚Üê focus lives here
        allDay: [                       // ‚Üê birthdays, etc. (no focus here)
          { title: "" },
          // { title: "Pay bills" },
        ],
        events: [
          { title:"water plants",          start: at(d0,7,30),   color:"green" },
          { title:"precor stretch circuit",start: at(d0,9,30),   color:"blue" },
          { title:"grocery shop",                start: at(d0,11,0), end: at(d0,12,0), color:"gray" },
          { title:"mom dinner",            start: at(d0,19,30),  color:"purple" },
          { title:"sleep",                 start: at(d0,23,15),  color:"blue" },
        ]
      }];
    }

    // ------------ Live fetch helpers (wire these to your API later)
    async function apiGet(path){
      if(path==="/top3") return mockTop3();
      if(path==="/crash7") return mockCrash();
      if(path==="/agenda") return mockAgenda();
      return [];
    }
    async function apiPost(path, payload){
      return { ok:true };
    }

    // ------------ Renderers
    function renderTop3(items){
      const wrap = $('#top3List');
      wrap.innerHTML = "";

      items.forEach((it, idx)=>{
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div class="main">
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
          </div>
        `;

        // toggle complete
        row.querySelector('.chx').addEventListener('click', ()=>{
          row.classList.toggle('done');
        });

        wrap.appendChild(row);
      });
    }

    function renderCrash(items){
      const wrap = $('#crashList');
      wrap.innerHTML = "";
    
      items.forEach((it, dayIdx)=>{
        const due = it.due ? fmtDate(new Date(it.due)) : "‚Äî";
    
        // Day row (header)
        const row = document.createElement('div');
        row.className = 'item';
        row.innerHTML = `
          <label class="chx" aria-label="toggle day done">
            <span class="dot"></span>
          </label>
          <div class="main">
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">Due: ${due}</div>
          </div>
          <button class="btn ghost chev" type="button" aria-expanded="false">‚ñ∏</button>
        `;
    
        // Subtask list
        const sub = document.createElement('div');
        sub.className = 'sublist';
    
        (it.subtasks || []).forEach((st, subIdx)=>{
          const li = document.createElement('div');
          li.className = 'subitem' + (st.completed ? ' done' : '');
          li.innerHTML = `
            <span class="tick" aria-hidden="true"></span>
            <span class="subtxt">${escapeHtml(st.text || st)}</span>
          `;
    
          // Toggle a single subtask
          li.addEventListener('click', ()=>{
            const curr = CRASH_STATE[dayIdx].subtasks[subIdx];
            curr.completed = !curr.completed;
            li.classList.toggle('done', curr.completed);
            localStorage.setItem('crash7', JSON.stringify(CRASH_STATE));
          });
    
          sub.appendChild(li);
        });
    
        // Chevron expand/collapse
        const toggleBtn = row.querySelector('.chev');
        toggleBtn.addEventListener('click', ()=>{
          const open = sub.classList.toggle('open');
          toggleBtn.textContent = open ? '‚ñæ' : '‚ñ∏';
          toggleBtn.setAttribute('aria-expanded', String(open));
        });
    
        // Optional: mark whole day as done (visual only)
        row.querySelector('.chx').addEventListener('click', ()=>{
          row.classList.toggle('done');
        });
    
        wrap.appendChild(row);
        wrap.appendChild(sub);
      });
    }
    
    function getAgendaDone(){
      return storageGet('agendaDone') || {};
    }
    function setAgendaDone(map){
      storageSet('agendaDone', map || {});
    }
    function agendaKey(ev){
      // stable key per event instance
      const s = new Date(ev.start).toISOString();
      const e = ev.end ? new Date(ev.end).toISOString() : '';
      // Include the day in the key to scope it to the day
      const day = startOfDay(new Date(ev.start)).toISOString().split('T')[0];
      return `${day}|${s}|${e}|${ev.title}`;
    }
    
    function renderAgenda(days){
      const wrap = document.getElementById('agenda');
      wrap.innerHTML = "";

      days.forEach(day=>{
        const box = document.createElement('div');
        box.className = 'agenda-day';

        // ---- Header (Focus banner)
        const hd = document.createElement('div');
        hd.className = 'agenda-day-hd';
        const dow = new Intl.DateTimeFormat(undefined, { weekday:'long'}).format(day.date);
        const mdy = new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(day.date);
        hd.innerHTML = `<div>${escapeHtml(day.label)}</div><div class="date">${dow}, ${mdy}</div>`;
        box.appendChild(hd);

        // Replace left header text with focus (if present)
        // use ONLY the explicit focus
        const focus = day.focus || null;
        if (focus){
          hd.firstElementChild.textContent = focus;
          const right = hd.querySelector('.date');
          if (right) right.textContent = "";
        }

        // Add the area row with all-day items
        renderAreaRow(day, box);

        // ---- Timed events (sorted)
        const list = document.createElement('div');
        list.className = 'agenda-list';
        (day.events||[]).sort((a,b)=> +new Date(a.start) - +new Date(b.start));
        (day.events||[]).forEach(ev=>{
          const startStr = fmtTime(new Date(ev.start));
          const endStr   = ev.end ? fmtTime(new Date(ev.end)) : null;

          const row = document.createElement('div');
          row.className = 'agenda-row';
          row.dataset.start = new Date(ev.start).toISOString();
          if (ev.end) row.dataset.end = new Date(ev.end).toISOString();
          
          row.innerHTML = `
            <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
            <div>
              <div class="agenda-title">${escapeHtml(ev.title)}</div>
              <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
            </div>
            <label class="chx" aria-label="Mark ${escapeHtml(ev.title)} done">
              <span class="dot"></span>
            </label>
          `;

          const key = agendaKey(ev);
          const doneMap = getAgendaDone();
          if (doneMap[key]) row.classList.add('done');

          // toggle done on click (checkbox at right)
          row.querySelector('.chx').addEventListener('click', ()=>{
            row.classList.toggle('done');
            const m = getAgendaDone();
            m[key] = row.classList.contains('done');
            setAgendaDone(m);
          });

          list.appendChild(row);
        });
        box.appendChild(list);

        wrap.appendChild(box);
      });
    }

    function ensureNowIndicator(dayBox){
      let el = dayBox.querySelector('.now-indicator');
      if (!el){
        el = document.createElement('div');
        el.className = 'now-indicator';
        dayBox.appendChild(el);
      }
      return el;
    }

    /**
     * Places the 'now' line inside the first .agenda-day box based on time.
     * It interpolates between the DOM positions of the nearest events so it
     * glides smoothly even between rows of different heights.
     */
    function updateNowIndicator(){
      // Only show on the selected day if it is today
      const isToday = +startOfDay(new Date()) === +startOfDay(SELECTED);
      const dayBox = document.querySelector('#agenda .agenda-day');
      if (!dayBox){ return; }

      // Remove if not today
      if (!isToday){
        const old = dayBox.querySelector('.now-indicator');
        if (old) old.remove();
        return;
      }

      const list = dayBox.querySelector('.agenda-list');
      if (!list){ return; }

      const rows = Array.from(list.querySelectorAll('.agenda-row'));
      const now = new Date();

      // Build time ‚Üí y map from rows
      const points = rows.map(row => {
        const start = new Date(row.dataset.start);
        const end = row.dataset.end ? new Date(row.dataset.end) : null;
        const rect = row.getBoundingClientRect();
        const listTop = list.getBoundingClientRect().top + window.scrollY;
        return {
          start, end,
          yTop:  rect.top + window.scrollY - listTop,
          yBot:  rect.bottom + window.scrollY - listTop
        };
      });

      const indicator = ensureNowIndicator(dayBox);
      const listBoxTop = list.getBoundingClientRect().top + window.scrollY;

      // If no events, pin to the very top at current time
      if (points.length === 0){
        indicator.style.top = (listBoxTop + 8 - listBoxTop) + 'px';
        return;
      }

      // Find surrounding interval
      let prev = null, next = null;
      for (let i=0;i<points.length;i++){
        const p = points[i];
        const start = p.start;
        if (now < start){ next = p; break; }
        prev = p;
      }

      let topPx;

      if (!prev){                 // before first event
        const first = points[0];
        const dayStart = new Date(SELECTED); // 00:00 today
        const minutesSpan = (first.start - dayStart) / 60000;
        const prog = Math.min(Math.max((now - dayStart) / (first.start - dayStart), 0), 1);
        topPx = first.yTop * prog;
      } else if (!next){          // after last event
        const last = points[points.length - 1];
        const dayEnd = new Date(SELECTED); dayEnd.setHours(23,59,59,999);
        const prog = Math.min(Math.max((now - (last.end || last.start)) / (dayEnd - (last.end || last.start)), 0), 1);
        topPx = last.yBot + (list.scrollHeight - last.yBot) * prog;
      } else {                    // between prev and next
        const t0 = prev.end || prev.start;            // use end if present
        const t1 = next.start;
        const y0 = prev.yBot;
        const y1 = next.yTop;
        const prog = Math.min(Math.max((now - t0) / (t1 - t0), 0), 1);
        topPx = y0 + (y1 - y0) * prog;
      }

      // Apply position (relative to the agenda-day box)
      const dayTop = dayBox.getBoundingClientRect().top + window.scrollY;
      indicator.style.top = (listBoxTop - dayTop + topPx) + 'px';
    }

    // Kick the updater
    function startNowIndicator(){
      updateNowIndicator();
      updateLiveArea();                  // ‚Üê add
      clearInterval(window.__nowTimer);
      // smooth enough and cheap
      window.__nowTimer = setInterval(()=>{
        updateNowIndicator();
        updateLiveArea();                // ‚Üê add
      }, 60000); // every minute is fine
      // also recalc after resizes
      window.addEventListener('resize', updateNowIndicator);
      window.addEventListener('scroll', updateNowIndicator, { passive:true });
    }

    // ------------ Quick add
    document.addEventListener('DOMContentLoaded', () => {
      const top3Form = $('#top3Form');
      if (top3Form) {
        top3Form.addEventListener('submit', async (e)=>{
          e.preventDefault();
          const fd = new FormData(e.target);
          const title = String(fd.get('title')||'').trim();
          if(!title) return;
          if(DEMO){
            const items = mockTop3();
            items.unshift({title, due:"", completed:false, tag:"#QuickAdd"});
            renderTop3(items);
          }else{
            await apiPost('/reminder', { list:"Top 3", title });
            await loadTop3();
          }
          e.target.reset();
        });
      }
    });

    // ------------ Actions (simulate opening native apps)
    document.addEventListener('DOMContentLoaded', () => {
      const openReminders = $('#openReminders');
      
      if (openReminders) {
        openReminders.addEventListener('click', () => alert('Opening Reminders (simulated)‚Ä¶'));
      }
    });

    // ------------ Loaders
    async function loadTop3(){
      const items = DEMO ? mockTop3() : await apiGet('/top3');
      renderTop3(items);
    }
    async function loadCrash(){
      // try cache first
      if (CRASH_STATE === null) {
        CRASH_STATE = storageGet('crash7');
      }
    
      // fetch if no cache
      if (!Array.isArray(CRASH_STATE) || CRASH_STATE.length === 0) {
        CRASH_STATE = DEMO ? mockCrash() : await apiGet('/crash7');
      }
    
      // normalize: turn string subtasks into {text, completed:false}
      CRASH_STATE = CRASH_STATE.map(day=>{
        const subs = (day.subtasks || []).map(s => {
          return typeof s === 'string' ? { text: s, completed: false } : s;
        });
        return { ...day, subtasks: subs };
      });
    
      storageSet('crash7', CRASH_STATE);
      renderCrash(CRASH_STATE);
    }
    
    function startOfMonth(d){ return new Date(d.getFullYear(), d.getMonth(), 1); }
    function endOfMonth(d){ return new Date(d.getFullYear(), d.getMonth()+1, 0); }
    
    // Big digital clock (minutes; flip to seconds if you want)
    const SHOW_SECONDS = false;

    function renderClockOnce(){
      const box = document.getElementById('miniClock');
      if(!box) return;
      const now = new Date();
      const timeFmt = new Intl.DateTimeFormat(undefined, {
        hour: '2-digit', minute: '2-digit', ...(SHOW_SECONDS ? { second: '2-digit' } : {})
      });

      box.querySelector('.clk-time').textContent = timeFmt.format(now);
      box.querySelector('.clk-sub').textContent = '';
    }

    function startClock(){
      renderClockOnce();
      clearInterval(window.__clkTimer);
      // Update every second if showing seconds; otherwise every 30s to save cycles
      window.__clkTimer = setInterval(renderClockOnce, SHOW_SECONDS ? 1000 : 30000);
    }

    function updateMonthTitle(date) {
      const monthTitle = document.getElementById('monthTitle');
      if (monthTitle) {
        const monthYearFmt = new Intl.DateTimeFormat(undefined, { month: 'long', year: 'numeric' });
        monthTitle.textContent = monthYearFmt.format(date);
      }
    }
    
    function renderMiniMonth(anchor = SELECTED){
      const mount = document.getElementById('miniMonth');
      if(!mount) return;
      
      // Get or create the grid container
      let grid = document.getElementById('mmGrid');
      if (!grid) {
        grid = document.createElement('div');
        grid.id = 'mmGrid';
        mount.appendChild(grid);
      }
      grid.innerHTML = "";

      const monthStart = startOfMonth(anchor);
      const monthEnd   = endOfMonth(anchor);
      
      // Update month title
      updateMonthTitle(anchor);
      // Find grid start on Sunday (or your locale's week start)
      const gridStart = addDays(monthStart, -monthStart.getDay());
      // Headers
      "SMTWTFS".split("").forEach(ch=>{
        const h = document.createElement('div');
        h.className = 'mm-cell mm-head';
        h.textContent = ch;
        grid.appendChild(h);
      });
      // 6 weeks * 7 days
      for(let i=0;i<42;i++){
        const d = addDays(gridStart, i);
        const cell = document.createElement('div');
        cell.className = 'mm-cell';
        if(d.getMonth() !== anchor.getMonth()) cell.classList.add('mm-out');
        if(+startOfDay(d) === +startOfDay(TODAY)) cell.classList.add('mm-today');
        if(+startOfDay(d) === +startOfDay(SELECTED)) cell.classList.add('mm-sel');
        cell.textContent = d.getDate();
        cell.addEventListener('click', ()=>{
          SELECTED = startOfDay(d);
          updateDayTitle(SELECTED);
          loadAgenda();           // re-render agenda for that day
          renderMiniMonth(SELECTED); // re-render month selection
        });
        grid.appendChild(cell);
      }
    }
    
    // Setup day and month navigation after DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
      const dayPrevBtn = document.getElementById('dayPrev');
      const dayNextBtn = document.getElementById('dayNext');
      const monthPrevBtn = document.getElementById('monthPrev');
      const monthNextBtn = document.getElementById('monthNext');
      
      if (dayPrevBtn) {
        dayPrevBtn.addEventListener('click', () => {
          SELECTED = addDays(SELECTED, -1);
          loadAgenda();
          renderMiniMonth(SELECTED);
        });
      }
      
      if (dayNextBtn) {
        dayNextBtn.addEventListener('click', () => {
          SELECTED = addDays(SELECTED, +1);
          loadAgenda();
          renderMiniMonth(SELECTED);
        });
      }
      
      if (monthPrevBtn) {
        monthPrevBtn.addEventListener('click', () => {
          // Go to previous month (same day)
          const currentDay = SELECTED.getDate();
          SELECTED = new Date(SELECTED.getFullYear(), SELECTED.getMonth() - 1, 1);
          // Try to maintain the same day of month if possible
          const lastDayOfMonth = new Date(SELECTED.getFullYear(), SELECTED.getMonth() + 1, 0).getDate();
          SELECTED.setDate(Math.min(currentDay, lastDayOfMonth));
          renderMiniMonth(SELECTED);
        });
      }
      
      if (monthNextBtn) {
        monthNextBtn.addEventListener('click', () => {
          // Go to next month (same day)
          const currentDay = SELECTED.getDate();
          SELECTED = new Date(SELECTED.getFullYear(), SELECTED.getMonth() + 1, 1);
          // Try to maintain the same day of month if possible
          const lastDayOfMonth = new Date(SELECTED.getFullYear(), SELECTED.getMonth() + 1, 0).getDate();
          SELECTED.setDate(Math.min(currentDay, lastDayOfMonth));
          renderMiniMonth(SELECTED);
        });
      }
    });
    function updateDayTitle(d){
      const w = new Intl.DateTimeFormat(undefined,{ weekday:'long'}).format(d);
      const md = new Intl.DateTimeFormat(undefined,{ month:'short', day:'numeric'}).format(d);
      const dayTitle = document.getElementById('dayTitle');
      if (dayTitle) dayTitle.textContent = `${w} ‚Ä¢ ${md}`;
    }
    
    async function loadAgenda(){
      const days = DEMO ? mockAgenda(SELECTED) : await apiGet('/agenda');
      window.__CURRENT_DAY = days[0];  // keep a handle for live updates
      renderAgenda(days);
      updateDayTitle(SELECTED);
      startNowIndicator();   // <‚Äî add this
    }
    
    async function loadAll(){
      const now = new Date();
      const nowHint = $('#nowHint');
      const rangeHint = $('#rangeHint');
      const tzHint = $('#tzHint');
      
      if (nowHint) nowHint.textContent = fmtDate(now);
      if (rangeHint) rangeHint.textContent = `${fmtDate(SELECTED)} ‚Üí ${fmtDate(addDays(SELECTED,6))}`;
      if (tzHint) tzHint.textContent = `Local time: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`;
      
      await Promise.all([loadTop3(), loadCrash(), loadAgenda()]);
      renderMiniMonth(SELECTED);
      startClock();
      startNowIndicator();   // <‚Äî add this
    }

    // ------------ Misc
    document.addEventListener('DOMContentLoaded', () => {
      const yearEl = $('#year');
      if (yearEl) yearEl.textContent = new Date().getFullYear();
      
      // Add demo mode indicator if in demo mode
      if (DEMO) {
        const footer = document.querySelector('footer');
        if (footer) {
          const demoIndicator = document.createElement('div');
          demoIndicator.className = 'demo-indicator';
          demoIndicator.textContent = 'DEMO MODE';
          demoIndicator.style.color = 'var(--muted)';
          demoIndicator.style.fontWeight = 'bold';
          demoIndicator.style.marginTop = '8px';
          footer.appendChild(demoIndicator);
        }
      }
    });
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }

    // Init
    loadAll();
  </script>
</body>
</html>
</file>

</files>
</file>

<file path="demo.html">
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Redirecting to Demo Mode</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      background-color: #1e1e1e;
      color: white;
      text-align: center;
    }
    h1 {
      margin-bottom: 1rem;
    }
    p {
      margin-bottom: 2rem;
      max-width: 600px;
    }
    .loader {
      border: 5px solid #f3f3f3;
      border-top: 5px solid #3498db;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin-bottom: 2rem;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <h1>Redirecting to Demo Mode</h1>
  <div class="loader"></div>
  <p>You will be automatically redirected to the jenquin.io dashboard in demo mode...</p>
  <script>
    // Ensure we're always in demo mode
    function redirectToDemo() {
      // Get the current URL
      var currentUrl = window.location.href;
      var baseUrl = './index.html';
      
      // Check if we're already on index.html
      if (currentUrl.includes('index.html')) {
        baseUrl = currentUrl.split('?')[0]; // Get the URL without parameters
      }
      
      // Add or update the demo parameter
      var targetUrl = baseUrl + (baseUrl.includes('?') ? '&' : '?') + 'demo=1';
      
      // Redirect to the demo URL
      window.location.href = targetUrl;
    }
    
    // Redirect after a short delay for the loading animation
    setTimeout(redirectToDemo, 1500);
  </script>
</body>
</html>
</file>

<file path="sandbox_calendar_loading_bar.html">
<!doctype html>
<html lang="en">
<head>
<!-- Reminders wiring patch: use local JSON, scheduled-only -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Agenda Card ‚Ä¢ Sandbox</title>
<meta name="color-scheme" content="light dark" />
<style>
  /* ==== your design tokens ==== */
  :root{
    --bg:#0b0c10; --panel:#111318; --muted:#7b8496; --text:#e9edf5;
    --accent:#6ea8fe; --accent-2:#7df2c9; --ok:#76ff9b; --border:#20232b;
    --shadow:0 8px 24px rgba(0,0,0,.35);
    --radius:14px; --radius-sm:10px;
  }
  @media (prefers-color-scheme: light){
    :root{
      --bg:#f6f7fb; --panel:#ffffff; --muted:#6b7280; --text:#0f172a;
      --accent:#2556ff; --accent-2:#0ea5e9; --border:#e5e7eb;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
  }

  /* page shell just to center the card */
  html,body{height:100%}
  body{
    margin:0; background:
      radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
      radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%),
      var(--bg);
    color:var(--text); font:14px/1.4 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  .wrap{max-width:860px;margin:32px auto;padding:0 16px}

  /* ======= Agenda card (copied to match your look) ======= */
  .panel{
    background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
    box-shadow:var(--shadow); overflow:clip;
  }
  .panel .hd{
    display:flex; align-items:center; justify-content:space-between; gap:10px;
    padding:14px 16px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  }
  .panel .hd h2{margin:0;font-size:15px;letter-spacing:.3px}
  .panel .bd{padding:12px 16px}

  .agenda-day{
    border:1px solid var(--border); border-radius:var(--radius);
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    overflow:hidden; position:relative;
  }
  .agenda-day-hd{
    display:flex; justify-content:space-between; align-items:center;
    padding:10px 12px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    font-size:13px; letter-spacing:.2px;
  }
  .agenda-day-hd .date{ color:var(--muted) }
  .agenda-day-hd > :first-child{
    display:inline-block; padding:6px 10px; border:1px solid rgba(255,255,255,.05);
    border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    font-weight:400; font-size:12px; letter-spacing:.2px; color:var(--muted);
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  @media (prefers-color-scheme: light){
    .agenda-day-hd > :first-child{
      border:1px solid rgba(0,0,0,.05);
      background:linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      color:var(--muted);
    }
  }

  /* live horizontal 'now' line */
  .now-indicator{
    position:absolute; left:12px; right:12px; height:2px; border-radius:2px;
    background:rgba(255,255,255,.35); pointer-events:none; z-index:20; transition:top .2s ease-out;
  }
  .now-indicator::before{
    content:""; position:absolute; left:-4px; top:-3px; width:8px; height:8px; border-radius:50%;
    background:rgba(255,255,255,.6); box-shadow:0 0 6px rgba(255,255,255,.25);
  }
  @media (prefers-color-scheme: light){
    .now-indicator{background:rgba(0,0,0,.25)} .now-indicator::before{background:rgba(0,0,0,.45)}
  }

  /* ==== Focus Zone Loading Bar (new) ==== */
  .zonebar{
    position:relative; height:26px; margin:10px 12px 0; border:1px solid var(--border);
    border-radius:999px; overflow:hidden;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  }
  .zb-seg{position:absolute; top:0; bottom:0; opacity:.28}
  .zb-label{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:11px; color:var(--muted); white-space:nowrap; pointer-events:none;
    text-shadow:0 1px 0 rgba(0,0,0,.35);
  }
  .zb-fill{position:absolute; inset:0 auto 0 0; width:0%;
    background:linear-gradient(90deg, rgba(255,255,255,.10), rgba(255,255,255,.03));}
  .zb-dot{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:8px; height:8px; border-radius:50%; background:rgba(255,255,255,.9);
    box-shadow:0 0 8px rgba(255,255,255,.45); left:0%;
  }

  /* area row (left) + all-day lane (right) */
  .area-row{
    display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border);
    overflow-x:auto;
  }
  .area-pill{
    padding:6px 10px; border:1px solid rgba(255,255,255,.05); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
    color:var(--muted); font-size:12px; white-space:nowrap;
    box-shadow:inset 0 0 2px rgba(0,0,0,.25);
  }
  .allday-lane{display:flex; gap:8px}
  .allday-pill{
    padding:6px 10px; border:1px solid var(--border); border-radius:999px;
    background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    color:var(--muted); font-size:12px; white-space:nowrap;
  }

  .agenda-list{display:flex; flex-direction:column}
  .agenda-row{
    display:grid; grid-template-columns:20px 1fr auto; gap:10px; align-items:center;
    padding:10px 12px; border-top:1px solid var(--border);
  }
  .agenda-row:first-child{border-top:none}
  .agenda-row .dot{width:10px; height:10px; border-radius:50%; border:2px solid var(--border)}
  .dot.blue{background:rgba(110,168,254,.9)} .dot.green{background:rgba(125,242,201,.95)}
  .dot.purple{background:#b38aff} .dot.gray{background:#9aa3b2}
  .agenda-title{font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .agenda-meta{color:var(--muted); font-size:12px}
  .agenda-row .chx{
    width:18px;height:18px;border-radius:6px;border:1px solid var(--border);
    display:inline-grid;place-items:center;cursor:pointer;background:transparent;
  }
  .agenda-row .chx .inner{width:10px;height:10px;border-radius:3px;background:transparent;opacity:0}
  .agenda-row.done .chx .inner{background:var(--ok);opacity:1}
  .agenda-row.done .agenda-title{color:var(--muted);text-decoration:line-through}
</style>
</head>
<body>
  <div class="wrap">
    <section class="panel" id="agendaPanel">
      <div class="hd">
        <button class="btn ghost mini" disabled>‚Üê</button>
        <h2 id="dayTitle" style="margin:0 auto;">Saturday ‚Ä¢ Oct 11</h2>
        <button class="btn ghost mini" disabled>‚Üí</button>
      </div>
      <div class="bd">
        <div class="agenda-day" id="dayBox">
          <!-- small header: left replaced by Focus string -->
          <div class="agenda-day-hd" id="miniHd">
            <div>Recovery Day</div>
            <div class="date"></div>
          </div>

          <!-- Focus Zone loading bar -->
          <div class="zonebar" id="zonebar">
            <div class="zb-fill" id="zbFill"></div>
            <div class="zb-dot" id="zbDot"></div>
            <!-- segments + labels injected by JS -->
          </div>

          <!-- Area pill + all-day pills -->
          <div class="area-row" id="areaRow">
            <span class="area-pill" id="areaPill">Flex ¬∑ 3:33 PM‚Äì7:30 PM</span>
            <div class="allday-lane" id="alldayLane">
              <!-- e.g., birthdays -->
              <!-- <span class="allday-pill">Kris‚Äô Birthday</span> -->
            </div>
          </div>

          <!-- Timed events list -->
          <div class="agenda-list" id="agendaList"></div>

          <!-- Data status indicator -->
          <div id="dataStatus" style="padding:8px 12px;font-size:11px;color:var(--muted);text-align:center;border-top:1px solid var(--border);">
            Loading reminders...
          </div>

          <!-- live horizontal 'now' line -->
          <div class="now-indicator" id="nowLine"></div>
        </div>
      </div>
    </section>
  </div>

<script>
  /* ---------- Utilities ---------- */
  const fmtTime = d => new Intl.DateTimeFormat(undefined,{hour:'numeric',minute:'2-digit'}).format(d);
  const startOfDay = d => new Date(d.getFullYear(), d.getMonth(), d.getDate());

  /* ---------- Day context ---------- */
  const SELECTED = startOfDay(new Date()); // today
  const at = (h,m=0)=> new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), h, m);

  /* ---------- Reminders (scheduled only) loader ---------- */
  async function loadRemindersScheduled() {
    const statusEl = document.getElementById('dataStatus');
    if (statusEl) statusEl.textContent = 'Loading reminders...';
    
    // served locally; never pushed. See .gitignore (/data/)
    const url = 'data/reminders.local.json?ts=' + Date.now();
    try {
      const res = await fetch(url, { cache: 'no-store' });
      if (!res.ok) throw new Error('HTTP ' + res.status);
      const data = await res.json();
      const { items = [], count = 0 } = data;

      // Map Reminders ‚Üí UI model: timed EVENTS + ALLDAY pills
      const EVENTS = [];
      const ALLDAY = [];
      for (const it of items) {
        if (!it?.dueISO) continue; // scheduled only
        const d = new Date(it.dueISO);
        const hasTime = !(d.getHours() === 0 && d.getMinutes() === 0);
        if (hasTime) {
          EVENTS.push({
            title: it.title,
            start: d,
            color: it.priority === 1 ? 'purple' : it.flagged ? 'blue' : 'green'
          });
        } else {
          // scheduled all-day item
          ALLDAY.push(it.title);
        }
      }
      // expose
      window.__REM_EVENTS = EVENTS.sort((a,b)=>+a.start-+b.start);
      window.__REM_ALLDAY = ALLDAY;
      
      // Update status
      if (statusEl) {
        statusEl.textContent = `‚úÖ Loaded ${count} reminders (${EVENTS.length} timed, ${ALLDAY.length} all-day)`;
      }
    } catch (err) {
      console.warn('Reminders fetch failed:', err);
      window.__REM_EVENTS = [];
      window.__REM_ALLDAY = ['Reminders unavailable'];
      if (statusEl) {
        statusEl.textContent = `‚ùå Failed to load reminders: ${err.message}`;
      }
    }
  }

  /* Zone schedule for the loading bar (edit to taste) */
  /* ---- Area color tokens ---- */
const AREA_COLORS = {
  administrative: 'rgba(255,217,90,.45)',      // yellow
  prep:           'rgba(125,242,201,.45)',     // mint/green
  review:         'rgba(255,176,90,.45)',      // orange
  rest:           'rgba(179,138,255,.45)',     // violet
  creative:       'rgba(255,122,122,.45)',     // red
  health:         'rgba(110,168,254,.45)',     // blue
  errands:        'rgba(217,198,163,.45)',     // tan / beige
  social:         'rgba(90,200,250,.45)',      // light blue
  flex:           'rgba(124,77,255,.45)',      // dark violet / purple
};

/* ---- Recovery Day layout (times on the SELECTED day) ---- */
const ZONES = [
  { label:"Health",                   start: at(0,0),  end: at(7,30), color: AREA_COLORS.health },
  { label:"Flex",                     start: at(7,30),  end: at(9,30),   color: AREA_COLORS.prep },
  { label:"Health",                   start: at(9,30),  end: at(11,0), color: AREA_COLORS.health },
  { label:"Prep & Maintenance",       start: at(11,0),  end: at(14,0),  color: AREA_COLORS.flex }, // or errands
  { label:"Administrative",           start: at(14,0),  end: at(18,0),  color: AREA_COLORS.administrative },
  { label:"Social & Relationships",   start: at(18,0), end: at(21,0),  color: AREA_COLORS.social },
  { label:"Rest & Recharge",          start: at(21,0),  end: at(23,0),  color: AREA_COLORS.rest },
  { label:"Sleep",                    start: at(23,0), end: at(24,0),  color: AREA_COLORS.rest },
];

  /* ---------- Hydrate UI from Reminders ---------- */
  async function hydrateCalendarFromReminders() {
    // load scheduled reminders
    await loadRemindersScheduled();

    // 1) All-day lane
    const lane = document.getElementById('alldayLane');
    lane.innerHTML = '';
    (window.__REM_ALLDAY || []).forEach(t=>{
      const p = document.createElement('span');
      p.className = 'allday-pill';
      p.textContent = t;
      lane.appendChild(p);
    });

    // 2) Timed events list
    const list = document.getElementById('agendaList');
    list.innerHTML = '';
    (window.__REM_EVENTS || []).forEach(ev=>{
      const row = document.createElement('div');
      row.className = 'agenda-row';
      row.dataset.start = ev.start.toISOString();
      const startStr = fmtTime(ev.start);
      row.innerHTML = `
        <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
        <div>
          <div class="agenda-title">${ev.title}</div>
          <div class="agenda-meta">${startStr}</div>
        </div>
        <label class="chx"><span class="inner"></span></label>
      `;
      row.querySelector('.chx').addEventListener('click', ()=> row.classList.toggle('done'));
      list.appendChild(row);
    });

    // 3) refresh dynamics
    if (typeof updateNowLine === 'function') updateNowLine();
    if (typeof updateZoneBar === 'function') updateZoneBar(new Date());
  }

  /* ---------- Focus pill / header ---------- */
  const FOCUS = "Today";
  document.querySelector('#miniHd > :first-child').textContent = FOCUS;
  document.querySelector('#miniHd .date').textContent = "";
  document.getElementById('dayTitle').textContent =
    new Intl.DateTimeFormat(undefined,{weekday:'long'}).format(SELECTED) +
    " ‚Ä¢ " +
    new Intl.DateTimeFormat(undefined,{month:'short',day:'numeric'}).format(SELECTED);

  /* ---------- Focus Zone Loading Bar ---------- */
  const zonebar = document.getElementById('zonebar');
  const fillEl  = document.getElementById('zbFill');
  const dotEl   = document.getElementById('zbDot');

  const DAY_START = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 0,0,0);
  const DAY_END   = new Date(SELECTED.getFullYear(), SELECTED.getMonth(), SELECTED.getDate(), 24,0,0);
  const totalMs   = DAY_END - DAY_START;

  // draw segments + labels
  ZONES.forEach(z=>{
    const left  = ((z.start - DAY_START)/totalMs) * 100;
    const width = ((z.end   - z.start)/totalMs) * 100;
    const seg   = document.createElement('div');
    seg.className = 'zb-seg'; seg.style.left = left+'%'; seg.style.width = width+'%';
    seg.style.background = z.color || 'rgba(110,168,254,.35)';
    const lab = document.createElement('div');
    lab.className = 'zb-label'; lab.textContent = z.label;
    if (width < 8) lab.style.display = 'none';
    seg.appendChild(lab);
    zonebar.appendChild(seg);
  });

  function updateZoneBar(now=new Date()){
    const pct = Math.max(0, Math.min(1, (now - DAY_START)/totalMs)) * 100;
    fillEl.style.width = pct + '%';
    dotEl.style.left = pct + '%';
  }

  /* ---------- Live horizontal now line ---------- */
  const nowLine = document.getElementById('nowLine');
  function updateNowLine(){
    const listEl = document.getElementById('agendaList');
    const rows = Array.from(listEl.querySelectorAll('.agenda-row'));
    const now = new Date();

    const points = rows.map(r=>{
      const s = new Date(r.dataset.start);
      const e = r.dataset.end ? new Date(r.dataset.end) : null;
      const rect = r.getBoundingClientRect();
      const listTop = listEl.getBoundingClientRect().top + window.scrollY;
      return { s, e, yTop:rect.top + window.scrollY - listTop, yBot:rect.bottom + window.scrollY - listTop };
    });

    let top;
    if (!points.length){ top = 10; }
    else{
      let prev=null,next=null;
      for (const p of points){ if (now < p.s){ next=p; break } prev=p; }
      if (!prev){                                   // before first
        const first = points[0];
        const span  = (first.s - SELECTED)/60000 || 1;
        const prog  = Math.max(0, Math.min(1, (now - SELECTED)/ (first.s-SELECTED)));
        top = first.yTop * prog;
      }else if (!next){                             // after last
        const last = points[points.length-1];
        const end  = last.e || last.s;
        const tail = (24*60) - ((end.getHours()*60)+end.getMinutes());
        const prog = Math.max(0, Math.min(1, (now - end)/(tail*60000)));
        top = last.yBot + (listEl.scrollHeight - last.yBot) * prog;
      }else{                                        // between two
        const t0 = prev.e || prev.s, t1 = next.s;
        const y0 = prev.yBot, y1 = next.yTop;
        const prog = Math.max(0, Math.min(1, (now - t0)/(t1 - t0)));
        top = y0 + (y1 - y0) * prog;
      }
    }
    const dayTop = document.getElementById('dayBox').getBoundingClientRect().top + window.scrollY;
    const listTop = listEl.getBoundingClientRect().top + window.scrollY;
    nowLine.style.top = (listTop - dayTop + top) + 'px';
  }

  /* ---------- Boot + timers ---------- */
  function tick(){
    updateZoneBar(new Date());
    updateNowLine();
  }

  document.addEventListener('DOMContentLoaded', async ()=>{
    await hydrateCalendarFromReminders(); // initial render from Reminders
    tick();
  });

  // refresh UI every minute; refresh data every 10 minutes
  setInterval(tick, 60 * 1000);
  setInterval(hydrateCalendarFromReminders, 10 * 60 * 1000);
  window.addEventListener('resize', tick);
  window.addEventListener('scroll', updateNowLine, {passive:true});

  /* Optional: set the Area pill text to match your mock "Flex ¬∑ 3:33 PM‚Äì7:30 PM" */
  (function seedAreaPill(){
    const p = document.getElementById('areaPill');
    const seg = ZONES[0];
    if (seg) p.textContent = seg.label; // just the zone name, no time
  })();
</script>
</body>
</html>
</file>

<file path="README.md">
# Jenquin.io

Personal Ops Dashboard

## Access URLs

- **Live Site**: https://jenquin813.github.io/jenquin.github.io/
- **Demo Mode**: https://jenquin813.github.io/jenquin.github.io/?demo=1

## Features

- Top 3 Today task management
- 7-Day Crash Plan
- Daily Agenda view
- Mini calendar with month navigation
- Digital clock
- Quick Add functionality
- Demo mode (via URL parameter)

| Layer | Description |
|------|-------------|
| **Backend (Private Repo)** | Handles the ‚Äúthinking‚Äù: logic, scheduling, data processing, and decision-making. |
| **Frontend (`jenquin-site`)** | Handles the ‚Äúfeeling‚Äù: what users see, click, and experience visually. |

This separation allows for clean modular growth ‚Äî keeping the system secure, adaptable, and easy to evolve over time.

## üß≠ Concept Diagram (Aligned & Consistent)
A high-level view of how **Jenquin Site** fits into the broader system with consistent, parallel labels:

```
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ        Jenquin UI        ‚îÇ
                     ‚îÇ  (jenquin-site frontend) ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                         [User Interaction Layer]
                                   ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ       Voice Gateway      ‚îÇ
                     ‚îÇ    (Siri / Mic Input)    ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                           [Input Interpretation]
                                   ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ       AI Assistant       ‚îÇ
                     ‚îÇ  (Nova ‚Äî Router/Agent)   ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                         [Intent Routing & Orchestration]
                                   ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ     Language Model(s)    ‚îÇ
                     ‚îÇ (LLM Engine ‚Äî Reasoning) ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                          [Structured Commands]
                                   ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ      Jenquin Backend     ‚îÇ
                     ‚îÇ (Data & Automation Core) ‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                   ‚îÇ
                         [Memory & Long-Term Data]
                                   ‚îÇ
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚îÇ    FlowOS / SelfOS Stack ‚îÇ
                     ‚îÇ   (Personal System Memory)‚îÇ
                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Alignment notes:**
- **Voice Gateway** parallels **AI Assistant** in label style (top role + subtitle in parentheses).
- **AI Assistant** is the title; **Nova** is specified as the implementation (Router/Agent).
- **Language Model(s)** mirrors this pattern (title + role in parentheses).
- **Backend** and **FlowOS** use consistent ‚Äútitle + role‚Äù phrasing.

## üéØ Goals
- Present a **functional and visually clear** concept site.
- Prototype UI elements such as dashboards, top tasks, and flow navigation.
- Serve as the **public face** of the Jenquin project while backend logic develops privately.
- Evolve into a unified web or app experience that integrates voice, reminders, and adaptive interfaces.

## üîÑ Future Vision
Jenquin isn‚Äôt just a site ‚Äî it‚Äôs the start of a connected ecosystem. Over time, this front-end layer will become a **gateway** into a broader platform that blends:
- **automation**
- **data awareness**
- **voice input**
- **flow-based productivity**

The goal is to make technology feel *invisible but intelligent* ‚Äî helping people stay organized and in flow without needing to manage every detail manually.

## üß∞ Built With
- **HTML5 / CSS3**
- **JavaScript (Vanilla)**
- *(Optional future frameworks: React, Vue, or Svelte)*

## üöÄ Getting Started

### Local Development Server (Recommended)
For full functionality including data fetching:
```bash
git clone https://github.com/<yourusername>/jenquin-site.git
cd jenquin-site
python3 -m http.server 8080
```
Then open: **http://localhost:8080** and bookmark as "Jenquin Local App"

### File Preview (Basic)
For quick preview without server features:
```bash
cd jenquin-site
open index.html
```

### Live Site
View on GitHub Pages: https://jenquin813.github.io/jenquin.github.io/

## üñºÔ∏è Showcase / Screenshots (placeholder)
- `docs/screenshots/` folder for UI previews and GIFs (add when ready).
- Example sections to show later: **Reveal Crash Plan**, **Top 3 / Top 7**, **Flow Navigation**.

## ü™∂ License
This project is currently under personal development and not licensed for redistribution.
Future licensing will be added once the full system architecture is ready for collaboration.
</file>

<file path="style.css">
:root{
  --bg: #0b0c10;
  --panel: #111318;
  --muted: #7b8496;
  --text: #e9edf5;
  --accent: #6ea8fe;
  --accent-2: #7df2c9;
  --danger: #ff7a7a;
  --ok: #76ff9b;
  --border: #20232b;
  --shadow: 0 8px 24px rgba(0,0,0,.35);
  --radius: 14px;
  --radius-sm: 10px;
}
@media (prefers-color-scheme: light){
  :root{
    --bg: #f6f7fb;
    --panel: #ffffff;
    --muted: #6b7280;
    --text: #0f172a;
    --accent: #2556ff;
    --accent-2: #0ea5e9;
    --border: #e5e7eb;
    --shadow: 0 10px 24px rgba(0,0,0,.08);
  }
}
*{ box-sizing: border-box }
html,body{ height:100% }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  background: radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
              radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%), var(--bg);
  color: var(--text);
  line-height:1.4;
}
.wrap{ max-width: 1200px; margin: 0 auto; padding: 28px 18px 40px; }
header{ display:flex; align-items:center; justify-content:space-between; gap: 16px; margin-bottom: 22px; }
.brand{ display:flex; align-items:center; gap:14px; }
.logo{ width:44px; height:44px; border-radius:12px; box-shadow: var(--shadow); }
.brand h1{ font-size: 20px; margin: 0; letter-spacing:.4px }
.brand .sub{ color: var(--muted); font-size:13px; margin-top:2px }
.actions{ display:flex; align-items:center; gap:8px }
.btn{
  appearance:none; border:1px solid var(--border); color:var(--text);
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
  padding:10px 14px; border-radius:12px; cursor:pointer;
  transition: transform .08s ease, background .2s ease, border-color .2s ease;
}
.btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18) }
.btn.primary{ background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.05)); border-color: rgba(110,168,254,.35); color: white; }
.btn.ghost{ background: transparent; }
.grid{ display:grid; grid-template-columns: 1.1fr 1fr; gap: 18px; }
@media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }
.panel{
  background: var(--panel); border: 1px solid var(--border); border-radius: var(--radius);
  box-shadow: var(--shadow); overflow: clip;
}
.panel .hd{ display:flex; align-items:center; justify-content:space-between; gap: 10px; padding: 14px 16px; border-bottom:1px solid var(--border);
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06)); }
.panel .hd h2{ margin:0; font-size: 15px; letter-spacing:.3px }
.panel .hd .hint{ color: var(--muted); font-size:12px }
.panel .bd{ padding: 12px 16px }
.panel .ft{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; flex-wrap:wrap }
.list{ display:flex; flex-direction:column; gap:10px }
.item{
  display:grid; grid-template-columns: 22px 1fr auto; align-items:center; gap: 10px;
  padding:10px; border:1px solid var(--border); border-radius: var(--radius-sm);
  background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
}
.chx{ width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer }
.chx input{ display:none }
.chx .dot{ width:10px; height:10px; border-radius:3px; background:transparent; }
.item.done .title{ color: var(--muted); text-decoration: line-through }
.item.done .chx .dot{ background: var(--ok); }
.title{ font-size:14px; }
.meta{ color: var(--muted); font-size:12px }
.tag{ font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border); color: var(--muted); }
.kebab{ opacity:.7; }
.row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }
.quick{ display:flex; gap:10px; align-items:center; width:100%; }
.in{
  flex:1; min-width: 160px;
  border:1px solid var(--border); border-radius:12px; padding:10px 12px;
  background: rgba(0,0,0,.04); color: var(--text);
}
.select{
  border:1px solid var(--border); border-radius:12px; padding:10px 12px;
  background: rgba(0,0,0,.04); color: var(--text);
}
.cal{ display:grid; grid-template-columns: repeat(7,1fr); gap:10px; }
@media (max-width: 860px){ .cal{ grid-template-columns: repeat(3,1fr) } }
@media (max-width: 560px){ .cal{ grid-template-columns: repeat(2,1fr) } }
.day{
  border:1px solid var(--border); border-radius:12px; padding:10px;
  background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
  min-height:90px; display:flex; flex-direction:column; gap:6px;
}
.day .d{ font-size:12px; color: var(--muted) }
.pill{
  font-size:12px; padding:6px 8px; border-radius:10px; border:1px solid var(--border);
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.pill.blue{ border-color: rgba(110,168,254,.4) }
.pill.green{ border-color: rgba(125,242,201,.45) }
footer{ margin-top: 24px; color: var(--muted); font-size:12px; text-align:center; }
.sep{ height:1px; background: var(--border); margin: 8px 0 }
.faded{ color: var(--muted) }
.badge{
  font-size:11px; padding:3px 8px; border-radius:999px; background: rgba(110,168,254,.15); border:1px solid rgba(110,168,254,.35);
  color: #dbe9ff;
}

/* Crash subtasks (accordion) */
.chev{ font-size:14px; border:1px solid var(--border); border-radius:8px; padding:4px 8px; }
.sublist{
  display:none; margin:8px 0 0 38px;
  padding:8px 10px; border-left:2px solid var(--border);
  display:none; gap:8px; flex-direction:column;
}
.sublist.open{ display:flex; }
.subitem{ display:flex; align-items:center; gap:8px; font-size:13px; }
.subitem .tick{ width:12px; height:12px; border-radius:3px; border:1px solid var(--border); background:rgba(0,0,0,.04); }
.subitem.done .subtxt{ color:var(--muted); text-decoration:line-through; }
</file>

<file path="index.html">
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jenquin.io ‚Äî Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --bg: #0b0c10;
      --panel: #111318;
      --muted: #7b8496;
      --text: #e9edf5;
      --accent: #6ea8fe;
      --accent-2: #7df2c9;
      --danger: #ff7a7a;
      --ok: #76ff9b;
      --border: #20232b;
      --shadow: 0 8px 24px rgba(0,0,0,.35);
      --radius: 14px;
      --radius-sm: 10px;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg: #f6f7fb;
        --panel: #ffffff;
        --muted: #6b7280;
        --text: #0f172a;
        --accent: #2556ff;
        --accent-2: #0ea5e9;
        --border: #e5e7eb;
        --shadow: 0 10px 24px rgba(0,0,0,.08);
      }
    }

    *{ box-sizing: border-box }
    html,body{ height:100% }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 80% -10%, rgba(110,168,254,.12), transparent 60%),
                  radial-gradient(900px 700px at -10% 20%, rgba(125,242,201,.12), transparent 60%), var(--bg);
      color: var(--text);
      line-height:1.4;
    }

    /* Shell */
    .wrap{
      max-width: 1200px;
      margin: 0 auto;
      padding: 28px 18px 40px;
    }

    header{
      display:flex; align-items:center; justify-content:space-between;
      gap: 16px; margin-bottom: 22px;
    }
    .brand{
      display:flex; align-items:center; gap:14px;
    }
    .logo{
      width:44px; height:44px; border-radius:12px;
      background:
        radial-gradient(60% 100% at 30% 10%, rgba(125,242,201,.3), transparent 60%),
        linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: var(--shadow);
    }
    .brand h1{
      font-size: 20px; margin: 0;
      letter-spacing:.4px;
    }
    .brand .sub{ color: var(--muted); font-size:13px; margin-top:2px }
    .actions{ display:flex; align-items:center; gap:10px }
    .btn{
      appearance:none; border:1px solid var(--border); color:var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      padding:10px 14px; border-radius:12px; cursor:pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); border-color: rgba(255,255,255,.18) }
    .btn.primary{
      background: linear-gradient(180deg, rgba(110,168,254,.2), rgba(110,168,254,.05));
      border-color: rgba(110,168,254,.35); color: white;
    }
    .btn.ghost{ background: transparent; }

    /* Layout */
    .grid{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap: 18px;
    }
    @media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }

    /* Panel */
    .panel{
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: clip;
    }
    .panel .hd{
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      padding: 14px 16px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
    }
    .panel .hd h2{ margin:0; font-size: 15px; letter-spacing:.3px }
    .panel .hd .hint{ color:var(--muted); font-size:12px }
    .panel .bd{ padding: 12px 16px }
    .panel .ft{ padding: 12px 16px; border-top:1px solid var(--border); display:flex; gap:8px; flex-wrap:wrap }

    /* Lists */
    .list{ display:flex; flex-direction:column; gap:10px }
    .item{
      display:grid; grid-template-columns: 22px 1fr auto; align-items:center; gap: 10px;
      padding:10px; border:1px solid var(--border); border-radius: var(--radius-sm);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
    }
    .chx{ width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer }
    .chx input{ display:none }
    .chx .dot{ width:10px; height:10px; border-radius:3px; background:transparent; }
    .item.done .title{ color: var(--muted); text-decoration: line-through }
    .item.done .chx .dot{ background: var(--ok); }
    .title{ font-size:14px; }
    .meta{ color: var(--muted); font-size:12px }
    .tag{
      font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border);
      color: var(--muted);
    }
    .kebab{ opacity:.7; }
    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }

    /* Quick add */
    .quick{
      display:flex; gap:10px; align-items:center; width:100%;
    }
    .in{
      flex:1; min-width: 160px;
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }
    .select{
      border:1px solid var(--border); border-radius:12px; padding:10px 12px;
      background: rgba(0,0,0,.04); color: var(--text);
    }

    /* Agenda (Apple-style list) */
    .agenda-day{
      border:1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      margin-bottom: 12px; overflow: hidden;
      position: relative;
    }

    /* Live 'now' line inside a day box */
    .now-indicator {
      position: absolute;
      left: 12px;           /* aligns with agenda padding */
      right: 12px;
      height: 2px;
      background: rgba(255,255,255,.35);   /* subtle gray on dark */
      border-radius: 2px;
      pointer-events: none;
      z-index: 20;
      transition: top .2s ease-out;        /* smooth nudges */
    }

    /* optional tiny dot on the left edge */
    .now-indicator::before{
      content:"";
      position:absolute;
      left:-4px; top:-3px;
      width:8px; height:8px; border-radius:50%;
      background: rgba(255,255,255,.6);
      box-shadow: 0 0 6px rgba(255,255,255,.25);
    }
    @media (prefers-color-scheme: light){
      .now-indicator{ background: rgba(0,0,0,.25); }
      .now-indicator::before{ background: rgba(0,0,0,.45); }
    }
    .agenda-day-hd{
      display:flex; justify-content:space-between; align-items:center;
      padding:10px 12px; border-bottom:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,.06));
      font-size:13px; letter-spacing:.2px;
    }
    .agenda-day-hd .date{ color: var(--muted) }
    
    /* Make the left item in the small day header look like a pill */
    /* Softer, more blended focus pill ‚Äî matches card background */
    /* Softer, muted-gray focus pill */
    .agenda-day-hd > :first-child{
      display:inline-block;
      padding:6px 10px;
      border:1px solid rgba(255,255,255,.05);
      border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
      font-weight:400;
      font-size:12px;
      letter-spacing:.2px;
      color: var(--muted);         /* ‚Üê makes text match your time gray */
      box-shadow: inset 0 0 2px rgba(0,0,0,.25);
    }

    @media (prefers-color-scheme: light){
      .agenda-day-hd > :first-child{
        border:1px solid rgba(0,0,0,.05);
        background: linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
        color: var(--muted);       /* still use muted tone in light mode */
      }
    }
    .agenda-list{ display:flex; flex-direction:column }
    .agenda-row{
      display:grid; grid-template-columns: 20px 1fr auto; align-items:center;
      gap:10px; padding:10px 12px; border-top:1px solid var(--border);
    }
    .agenda-row:first-child{ border-top: none }
    .agenda-row .dot{
      width:10px; height:10px; border-radius:50%;
      border:2px solid var(--border);
    }
    .dot.blue{ background: rgba(110,168,254,.9) }
    .dot.green{ background: rgba(125,242,201,.95) }
    .dot.purple{ background: #b38aff }
    .dot.orange{ background: #ffb05a }
    .dot.gray{ background: #9aa3b2 }
    .agenda-title{ font-size:14px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
    .agenda-meta{ color: var(--muted); font-size:12px }
    .agenda-badge{
      font-size:11px; padding:4px 8px; border-radius:999px;
      border:1px solid var(--border); color: var(--muted);
    }

    /* Agenda checkbox = exactly like Top 3 / Crash */
    .agenda-row .chx{
      width:18px; height:18px;
      border-radius:6px;
      border:1px solid var(--border);
      display:inline-grid; place-items:center;
      cursor:pointer;
      background: transparent;            /* <- no gray fill */
    }

    /* Hide the inner square when unchecked (no "box in box") */
    .agenda-row .chx .dot{
      width:10px; height:10px;
      border-radius:3px;
      background: transparent;
      border: none;                        /* <- ensure no outline */
      opacity: 0;                          /* <- invisible when unchecked */
    }

    /* Checked state = same green fill you already use */
    .agenda-row.done .chx .dot{
      opacity: 1;
      background: var(--ok);
    }

    /* Strike-through title when done (already added, keep) */
    .agenda-row.done .agenda-title{
      color: var(--muted);
      text-decoration: line-through;
    }

    /* Optional: nudge the right cell a hair */
    .agenda-row > .chx{ margin-left: 8px; }

    /* All-day lane: single line, scrolls left‚Üíright */
    .agenda-allday{
      display:flex;
      gap:8px;
      padding:10px 12px;
      border-top:1px solid var(--border);
      overflow-x:auto;
      white-space:nowrap;
      scrollbar-width: thin;
    }
    .agenda-allday::-webkit-scrollbar{ height:6px; }
    .agenda-allday::-webkit-scrollbar-thumb{
      background: rgba(255,255,255,.1);
      border-radius: 999px;
    }

    /* Subtle all-day pills */
    .allday-pill{
      display:inline-flex; align-items:center;
      padding:6px 10px;
      border:1px solid var(--border);
      border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      color: var(--muted);
      font-size:12px;
      white-space:nowrap;
    }

    /* Row directly under the focus banner: Area (left) + All-day items (right) */
    .area-row{
      display:flex; align-items:center; gap:8px;
      padding:10px 12px;
      border-top:1px solid var(--border);
      overflow-x:auto; /* if lots of all-day pills */
    }
    .area-row::-webkit-scrollbar{ height:6px; }
    .area-row::-webkit-scrollbar-thumb{
      background: rgba(255,255,255,.1);
      border-radius:999px;
    }

    /* Left pill = current Area (soft, blended) */
    .area-pill{
      display:inline-flex; align-items:center;
      padding:6px 10px;
      border:1px solid rgba(255,255,255,.05);
      border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.015), rgba(0,0,0,.12));
      color: var(--muted);
      font-size:12px;
      box-shadow: inset 0 0 2px rgba(0,0,0,.25);
      white-space:nowrap;
    }

    /* Right lane container for all-day items */
    .allday-lane{
      display:flex; gap:8px;
      margin-left:6px;
    }

    /* Reuse your subtle all-day pill look */
    .allday-pill{
      display:inline-flex; align-items:center;
      padding:6px 10px;
      border:1px solid var(--border);
      border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      color: var(--muted);
      font-size:12px;
      white-space:nowrap;
    }

    @media (prefers-color-scheme: light){
      .area-pill{
        border:1px solid rgba(0,0,0,.05);
        background: linear-gradient(180deg, rgba(255,255,255,.6), rgba(0,0,0,.02));
      }
    }

    footer{
      margin-top: 24px; color: var(--muted); font-size:12px; text-align:center;
    }
    .sep{ height:1px; background: var(--border); margin: 8px 0 }
    .faded{ color: var(--muted) }
    .badge{
      font-size:11px; padding:3px 8px; border-radius:999px; background: rgba(110,168,254,.15); border:1px solid rgba(110,168,254,.35);
      color: #dbe9ff;
    }
    
    /* Crash subtasks (accordion) */
    .chev{ font-size:14px; border:1px solid var(--border); border-radius:8px; padding:4px 8px; }
    .sublist{
      display:none; margin:8px 0 0 38px;
      padding:8px 10px; border-left:2px solid var(--border);
      display:none; gap:8px; flex-direction:column;
    }
    .sublist.open{ display:flex; }
    .subitem{ display:flex; align-items:center; gap:8px; font-size:13px; }
    .subitem .tick{ width:12px; height:12px; border-radius:3px; border:1px solid var(--border); background:rgba(0,0,0,.04); }
    .subitem.done .subtxt{ color:var(--muted); text-decoration:line-through; }
    .subitem{ cursor:pointer; }
    .subitem.done .tick{
      background: var(--ok);
      border-color: rgba(118,255,155,.7);
    }
    
    .item .main{
      flex:1;
    }
    .item .chev{
      margin-left:auto;
      font-size:16px;
      border:none;
      background:transparent;
      color:var(--muted);
      cursor:pointer;
      padding:6px 10px;
    }
    .item .chev:hover{
      color:var(--accent);
      transform: translateY(-1px);
    }
    
    .item .main{ flex:1; }
    .item .kebab{
      margin-left:auto;
      border:none;
      background:transparent;
      color:var(--muted);
      padding:6px 10px;
    }
    .item .kebab:hover{ color:var(--accent); transform: translateY(-1px); }
    
    .btn.mini{ padding:6px 10px; border-radius:10px }
    #miniMonth{
      display:grid; gap:6px;
      grid-template-columns: repeat(7, 1fr);
      width:100%;
    }
    .mm-cell{
      text-align:center; font-size:12px; padding:6px 0;
      border:1px solid var(--border); border-radius:8px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.04));
      cursor:pointer; user-select:none;
    }
    .mm-head{ font-weight:600; color:var(--muted); cursor:default; }
    .mm-out{ opacity:.45 }
    .mm-today{ outline:2px solid var(--accent); }
    .mm-sel{ background: rgba(110,168,254,.18); border-color: rgba(110,168,254,.45); }
    
    .month-nav {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-bottom: 10px;
    }
    
    .month-nav h3 {
      margin: 0;
      font-size: 14px;
      font-weight: 600;
      text-align: center;
      min-width: 100px;
    }
    
    .mini-row{
      display:grid; grid-template-columns: 1fr 1fr; gap:12px; align-items:stretch; width:100%;
      height: 180px;  /* match the clock box height */
    }
    @media (max-width: 860px){
      .mini-row{ grid-template-columns: 1fr; } /* stack on small screens */
    }

    /* Updated miniMonth styles */
    #miniMonth {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 6px 6px 8px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      box-shadow: var(--shadow);
    }

    /* Month header (keep small) */
    .mm-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2px; /* tighten spacing */
      font-size: 11px;
    }
    .mm-nav-btn {
      font-size: 11px;
      padding: 2px 6px;
    }
    .mm-nav-title {
      font-size: 11px;
    }

    /* Days grid scaled down */
    #mmGrid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 3px;
      flex: 1;
    }
    .mm-cell {
      font-size: 10px;
      padding: 3px 0;
    }

    /* Clock card */
    #miniClock{
      display:flex; flex-direction:column; justify-content:center; align-items:center;
      border:1px solid var(--border); border-radius:12px;
      background: linear-gradient(180deg, rgba(255,255,255,.01), rgba(0,0,0,.05));
      box-shadow: var(--shadow); height:100%;
      font-size: 48px;
    }
    .clk-time{
      font-variant-numeric: tabular-nums;
      font-size:46px; line-height:1; letter-spacing:1px;
    }
    .clk-sub{ margin-top:6px; color:var(--muted); font-size:12px; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>jenquin.io</h1>
          <div class="sub">Jenquin ‚Ä¢ Personal Ops Dashboard</div>
        </div>
      </div>
      <div class="actions">
        <button class="btn" id="openReminders">Open Reminders</button>
      </div>
    </header>

    <div class="grid">
      <!-- Left column: Top 3 + Crash 7 stacked -->
      <div class="stack">
        <section class="panel" id="top3Panel">
          <div class="hd">
            <h2>Flagged Reminders</h2>
            <div class="row">
              <span class="badge" id="dayLabel">Today</span>
              <span class="hint" id="nowHint">‚Äî</span>
            </div>
          </div>
          <div class="bd">
            <div class="list" id="top3List"></div>
          </div>
          <div class="ft">
            <form class="quick" id="top3Form">
              <input class="in" type="text" placeholder="Quick add to Top 3‚Ä¶" name="title" required />
              <button class="btn" type="submit">Add</button>
            </form>
          </div>
        </section>

        <!-- Crash Plan (no footer) -->
        <section class="panel" id="crashPanel" style="margin-top:18px;">
          <div class="hd">
            <h2>Smart Planner</h2>
            <div class="hint" id="rangeHint">Projects ‚Ä¢ Phases ‚Ä¢ Tasks</div>
          </div>
          <div class="bd">
            <div class="list" id="crashList"></div>
          </div>
        </section>
      </div>

      <!-- Right column: Agenda (Apple-style) -->
      <section class="panel" id="agendaPanel">
        <div class="hd" id="flowHd">
          <button class="btn ghost mini" id="dayPrev" aria-label="Previous day">‚Üê</button>
          <h2 id="dayTitle" style="margin:0 auto;">‚Äî</h2>
          <button class="btn ghost mini" id="dayNext" aria-label="Next day">‚Üí</button>
        </div>
        <div class="bd">
          <div id="agenda"></div>
        </div>
        <div class="ft">
          <div class="mini-row">
            <div id="miniMonth">
              <div class="mm-nav">
                <button class="mm-nav-btn" id="monthPrev" aria-label="Previous month">‚óÑ</button>
                <span class="mm-nav-title" id="monthTitle">Month</span>
                <button class="mm-nav-btn" id="monthNext" aria-label="Next month">‚ñ∫</button>
              </div>
              <div id="mmGrid"></div>
            </div>
            <div id="miniClock" aria-label="Current time">
              <div class="clk-time">--:--</div>
              <div class="clk-sub">‚Äî</div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <footer>
      ¬© <span id="year"></span> jenquin.io ‚Ä¢ v1 preview ¬∑ Data stays in Apple apps ¬∑ Clicks may open native apps
    </footer>
  </div>

  <script>
    // ------------ Utilities
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));
    
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function fmtTime(d){
      return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
    }
    function fmtDate(d){
      return new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(d);
    }
    function addDays(d, n){ const c = new Date(d); c.setDate(c.getDate()+n); return c; }
    
    // ----- Date anchors
    function startOfDay(d){ return new Date(d.getFullYear(), d.getMonth(), d.getDate()); }
    const TODAY = startOfDay(new Date());
    let SELECTED = TODAY; // ‚Üê the day your FlowOS panel shows

    // --- AREA detection (minimal; explicit ev.area preferred, else infer by title)
    const AREA_FLEX = "Flex";
    const AREA_NAMES = [
      "Prep & Maintenance",
      "Review & Planning",
      "Rest & Recharge",
      "Creative / Project Work",
      "Health",
      "Errands & Logistics",
      "Social & Relationships",
      "Flex"
    ];

    function inferAreaFromTitle(title=""){
      const t = title.toLowerCase();
      if (t.match(/\breview\b|\bplanning\b/)) return "Review & Planning";
      if (t.match(/\brest\b|\brecharge\b/)) return "Rest & Recharge";
      if (t.match(/\bprep\b|\bmaintenance\b/)) return "Prep & Maintenance";
      if (t.match(/\bcreative\b|\bproject\b/)) return "Creative / Project Work";
      if (t.match(/\bhealth\b|\bgym\b|\brun\b|\byoga\b/)) return "Health";
      if (t.match(/\berrand\b|\blogistic\b|\bshop\b|\bgrocery\b/)) return "Errands & Logistics";
      if (t.match(/\bsocial\b|\brelationship\b|\bfriend\b|\bdinner\b|\bmeet\b/)) return "Social & Relationships";
      if (t.match(/\bflex\b/)) return "Flex";
      return null;
    }

    // Build sorted "area windows" from events that map to an area
    function areaWindows(events=[]){
      return (events||[])
        .map(ev=>{
          const area = ev.area || inferAreaFromTitle(ev.title);
          return (area && ev.start) ? { ...ev, area } : null;
        })
        .filter(Boolean)
        .sort((a,b)=> +new Date(a.start) - +new Date(b.start));
    }

    // Single active area (if overlaps, prefer the one with latest start)
    function findCurrentArea(events, now=new Date()){
      const wins = areaWindows(events);
      const active = wins.filter(w=>{
        const s = new Date(w.start);
        const e = w.end ? new Date(w.end) : null;
        return e ? (now >= s && now < e) : (now >= s);
      });
      if (!active.length) return null;
      return active.reduce((a,b)=> new Date(a.start) > new Date(b.start) ? a : b);
    }

    // Next scheduled area after now
    function findNextArea(events, now=new Date()){
      const wins = areaWindows(events);
      for (const w of wins){ if (new Date(w.start) > now) return w; }
      return null;
    }

    // Format the Area pill
    function areaPillHTML(label, s, e){
      // only show the area label, no time
      return `<span class="area-pill">${escapeHtml(label)}</span>`;
    }

    // Create the combined row: [Area pill]  [all-day lane -> pills...]
    function renderAreaRow(day, box){
      const row = document.createElement('div');
      row.className = 'area-row';
      row.setAttribute('data-arearow','1');

      // left: area pill placeholder
      const areaSlot = document.createElement('span');
      areaSlot.className = 'area-pill';
      areaSlot.setAttribute('data-areaslot','1');
      areaSlot.textContent = ''; // will be filled by updateAreaRow()

      // right: all-day lane container
      const lane = document.createElement('div');
      lane.className = 'allday-lane';
      lane.setAttribute('data-alldaylane','1');

      // fill all-day items horizontally to the right, excluding the focus label
      const focusLabel = day.focus || "";
      if (day.allDay && day.allDay.length){
        (day.allDay || [])
          .filter(a => a && a.title && a.title !== focusLabel && !/^\[FOCUS\]/i.test(a.title))
          .forEach(a=>{
            const pill = document.createElement('span');
            pill.className = 'allday-pill';
            pill.textContent = a.title;
            lane.appendChild(pill);
          });
      }

      row.appendChild(areaSlot);
      row.appendChild(lane);
      box.appendChild(row);

      // initial area fill
      updateAreaRow(day, row);
    }

    // Update only the left area pill content
    function updateAreaRow(day, row){
      if (!row) return;
      const slot = row.querySelector('[data-areaslot="1"]');
      if (!slot) return;

      const now = new Date();
      const isToday = +startOfDay(now) === +startOfDay(day.date);

      if (!isToday){
        // On non-today days: show first area if any, else a default Flex window (optional)
        const wins = areaWindows(day.events);
        if (wins.length){
          const first = wins[0];
          slot.outerHTML = areaPillHTML(first.area, new Date(first.start), first.end ? new Date(first.end) : null);
        }else{
          const ds = new Date(day.date); ds.setHours(9,0,0,0);
          const de = new Date(day.date); de.setHours(17,0,0,0);
          slot.outerHTML = areaPillHTML(AREA_FLEX, ds, de);
        }
        return;
      }

      // Today: only show the current area; if in a gap, show Flex until next area or EOD
      const current = findCurrentArea(day.events, now);
      if (current){
        slot.outerHTML = areaPillHTML(current.area, new Date(current.start), current.end ? new Date(current.end) : null);
      }else{
        const next = findNextArea(day.events, now);
        const flexStart = now;
        const flexEnd = next ? new Date(next.start)
          : new Date(day.date.getFullYear(), day.date.getMonth(), day.date.getDate(), 23, 59, 0, 0);
        slot.outerHTML = areaPillHTML(AREA_FLEX, flexStart, flexEnd);
      }
    }

    // Called by your timer to keep the area pill live
    function updateLiveArea(){
      const dayBox = document.querySelector('#agenda .agenda-day');
      if (!dayBox || !window.__CURRENT_DAY) return;
      const row = dayBox.querySelector('[data-arearow="1"]');
      if (!row) return;
      updateAreaRow(window.__CURRENT_DAY, row);
    }

    // ------------ Demo mode via URL parameter
    // Visit site normally for live mode, add ?demo=1 for demo mode
    // Simple flag for demo mode
    let DEMO = new URLSearchParams(window.location.search).has('demo');
    let CRASH_STATE = null;
    
    // In-memory storage for demo mode
    const DEMO_STORAGE = {};
    
    // ------------ Storage wrappers for demo vs live persistence
    // These wrappers provide a consistent interface for storage operations
    // In demo mode, they use memory storage that resets on page refresh
    // In live mode, they use localStorage for persistence
    
    // ------------ Storage wrappers for demo vs live persistence
    // These wrappers provide a consistent interface for storage operations
    // In demo mode, they use memory storage that resets on page refresh
    // In live mode, they use localStorage for persistence
    
    // Get a value from storage (localStorage in live mode, memory in demo mode)
    function storageGet(key) {
      if (DEMO) {
        return DEMO_STORAGE[key];
      } else {
        try {
          return JSON.parse(localStorage.getItem(key) || 'null');
        } catch {
          return null;
        }
      }
    }
    
    // Set a value in storage (localStorage in live mode, memory in demo mode)
    function storageSet(key, value) {
      if (DEMO) {
        DEMO_STORAGE[key] = value;
      } else {
        localStorage.setItem(key, JSON.stringify(value));
      }
    }
    
    // Remove a value from storage
    function storageRemove(key) {
      if (DEMO) {
        delete DEMO_STORAGE[key];
      } else {
        localStorage.removeItem(key);
      }
    }
    
    
    // ------------ Mock data
    function mockTop3(){
      return [
        { title: "cut front grass", due: "", completed: false},
        { title: "pay electric", due: "", completed: false},
        { title: "migrate webhook to tailscale", due: "", completed: false},
      ];
    }
    function mockCrash(){
  const now = new Date();
  const day = (n)=> addDays(now, n-1); // Day 1=today, Day 2=+1, etc.

  return [
    {
      day: 1,
      title: "Project ‚Äî FlowOS",
      due: day(1),
      subtasks: [
        "Phase: Planner UI ‚Äî build Project Title List",
        "Phase: Sync ‚Äî Reminders ‚Üí export ‚Üí normalize ‚Üí map ‚Üí render"
      ]
    },
    {
      day: 2,
      title: "Project ‚Äî Smart Planner Card",
      due: day(2),
      subtasks: [
        "Phase: Structure ‚Äî Projects ‚Üí Phases ‚Üí Tasks",
        "Phase: Render ‚Äî Accordion behavior"
      ]
    },
    {
      day: 3,
      title: "Project ‚Äî Dashboard Integration",
      due: day(3),
      subtasks: [
        "Phase: API ‚Äî Connect live data sources",
        "Phase: UI ‚Äî Real-time updates and notifications"
      ]
    },
    {
      day: 4,
      title: "Project ‚Äî Mobile Optimization",
      due: day(4),
      subtasks: [
        "Phase: Responsive ‚Äî Tablet and phone layouts",
        "Phase: Touch ‚Äî Gesture controls and interactions"
      ]
    },
    {
      day: 5,
      title: "Project ‚Äî Data Sync Engine",
      due: day(5),
      subtasks: [
        "Phase: Export ‚Äî Apple Reminders integration",
        "Phase: Transform ‚Äî Normalize data structures"
      ]
    },
    {
      day: 6,
      title: "Project ‚Äî Performance Optimization",
      due: day(6),
      subtasks: [
        "Phase: Speed ‚Äî Lazy loading and caching",
        "Phase: Memory ‚Äî Efficient state management"
      ]
    },
    {
      day: 7,
      title: "Project ‚Äî User Experience Polish",
      due: day(7),
      subtasks: [
        "Phase: Polish ‚Äî Animations and micro-interactions",
        "Phase: Testing ‚Äî User acceptance and edge cases"
      ]
    }
  ];
}

    // --- Mock agenda data like your screenshots
    function mockAgenda(forDate = SELECTED){
      const d0 = startOfDay(forDate);
      const at = (d,h,m=0)=> new Date(d.getFullYear(), d.getMonth(), d.getDate(), h, m);
      const weekday = new Intl.DateTimeFormat(undefined, { weekday:'long' }).format(d0);

      return [{
        label: weekday,
        date: d0,
        focus: "Recovery Day",          // ‚Üê focus lives here
        allDay: [                       // ‚Üê birthdays, etc. (no focus here)
          { title: "" },
          // { title: "Pay bills" },
        ],
        events: [
          { title:"water plants",          start: at(d0,7,30),   color:"green" },
          { title:"precor stretch circuit",start: at(d0,9,30),   color:"blue" },
          { title:"grocery shop",                start: at(d0,11,0), end: at(d0,12,0), color:"gray" },
          { title:"mom dinner",            start: at(d0,19,30),  color:"purple" },
          { title:"sleep",                 start: at(d0,23,15),  color:"blue" },
        ]
      }];
    }

    // ------------ Live fetch helpers (wire these to your API later)
    async function apiGet(path){
      if(path==="/top3") return mockTop3();
      if(path==="/crash7") return mockCrash();
      if(path==="/agenda") return mockAgenda();
      return [];
    }
    async function apiPost(path, payload){
      return { ok:true };
    }

    // ------------ Renderers
    function renderTop3(items){
      const wrap = $('#top3List');
      wrap.innerHTML = "";

      items.forEach((it, idx)=>{
        const row = document.createElement('div');
        row.className = 'item' + (it.completed ? ' done' : '');
        row.innerHTML = `
          <label class="chx" aria-label="toggle done">
            <span class="dot"></span>
          </label>
          <div class="main">
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">${it.tag ? escapeHtml(it.tag) : ''}</div>
          </div>
        `;

        // toggle complete
        row.querySelector('.chx').addEventListener('click', ()=>{
          row.classList.toggle('done');
        });

        wrap.appendChild(row);
      });
    }

    function renderCrash(items){
      const wrap = $('#crashList');
      wrap.innerHTML = "";
    
      items.forEach((it, dayIdx)=>{
        const due = it.due ? fmtDate(new Date(it.due)) : "‚Äî";
    
        // Day row (header)
        const row = document.createElement('div');
        row.className = 'item';
        row.innerHTML = `
          <label class="chx" aria-label="toggle day done">
            <span class="dot"></span>
          </label>
          <div class="main">
            <div class="title">${escapeHtml(it.title)}</div>
            <div class="meta">Due: ${due}</div>
          </div>
          <button class="btn ghost chev" type="button" aria-expanded="false">‚ñ∏</button>
        `;
    
        // Subtask list
        const sub = document.createElement('div');
        sub.className = 'sublist';
    
        (it.subtasks || []).forEach((st, subIdx)=>{
          const li = document.createElement('div');
          li.className = 'subitem' + (st.completed ? ' done' : '');
          li.innerHTML = `
            <span class="tick" aria-hidden="true"></span>
            <span class="subtxt">${escapeHtml(st.text || st)}</span>
          `;
    
          // Toggle a single subtask
          li.addEventListener('click', ()=>{
            const curr = CRASH_STATE[dayIdx].subtasks[subIdx];
            curr.completed = !curr.completed;
            li.classList.toggle('done', curr.completed);
            localStorage.setItem('crash7', JSON.stringify(CRASH_STATE));
          });
    
          sub.appendChild(li);
        });
    
        // Chevron expand/collapse
        const toggleBtn = row.querySelector('.chev');
        toggleBtn.addEventListener('click', ()=>{
          const open = sub.classList.toggle('open');
          toggleBtn.textContent = open ? '‚ñæ' : '‚ñ∏';
          toggleBtn.setAttribute('aria-expanded', String(open));
        });
    
        // Optional: mark whole day as done (visual only)
        row.querySelector('.chx').addEventListener('click', ()=>{
          row.classList.toggle('done');
        });
    
        wrap.appendChild(row);
        wrap.appendChild(sub);
      });
    }
    
    function getAgendaDone(){
      return storageGet('agendaDone') || {};
    }
    function setAgendaDone(map){
      storageSet('agendaDone', map || {});
    }
    function agendaKey(ev){
      // stable key per event instance
      const s = new Date(ev.start).toISOString();
      const e = ev.end ? new Date(ev.end).toISOString() : '';
      // Include the day in the key to scope it to the day
      const day = startOfDay(new Date(ev.start)).toISOString().split('T')[0];
      return `${day}|${s}|${e}|${ev.title}`;
    }
    
    function renderAgenda(days){
      const wrap = document.getElementById('agenda');
      wrap.innerHTML = "";

      days.forEach(day=>{
        const box = document.createElement('div');
        box.className = 'agenda-day';

        // ---- Header (Focus banner)
        const hd = document.createElement('div');
        hd.className = 'agenda-day-hd';
        const dow = new Intl.DateTimeFormat(undefined, { weekday:'long'}).format(day.date);
        const mdy = new Intl.DateTimeFormat(undefined, { month:'short', day:'numeric' }).format(day.date);
        hd.innerHTML = `<div>${escapeHtml(day.label)}</div><div class="date">${dow}, ${mdy}</div>`;
        box.appendChild(hd);

        // Replace left header text with focus (if present)
        // use ONLY the explicit focus
        const focus = day.focus || null;
        if (focus){
          hd.firstElementChild.textContent = focus;
          const right = hd.querySelector('.date');
          if (right) right.textContent = "";
        }

        // Add the area row with all-day items
        renderAreaRow(day, box);

        // ---- Timed events (sorted)
        const list = document.createElement('div');
        list.className = 'agenda-list';
        (day.events||[]).sort((a,b)=> +new Date(a.start) - +new Date(b.start));
        (day.events||[]).forEach(ev=>{
          const startStr = fmtTime(new Date(ev.start));
          const endStr   = ev.end ? fmtTime(new Date(ev.end)) : null;

          const row = document.createElement('div');
          row.className = 'agenda-row';
          row.dataset.start = new Date(ev.start).toISOString();
          if (ev.end) row.dataset.end = new Date(ev.end).toISOString();
          
          row.innerHTML = `
            <span class="dot ${ev.color||'blue'}" aria-hidden="true"></span>
            <div>
              <div class="agenda-title">${escapeHtml(ev.title)}</div>
              <div class="agenda-meta">${endStr ? `${startStr}‚Äì${endStr}` : startStr}</div>
            </div>
            <label class="chx" aria-label="Mark ${escapeHtml(ev.title)} done">
              <span class="dot"></span>
            </label>
          `;

          const key = agendaKey(ev);
          const doneMap = getAgendaDone();
          if (doneMap[key]) row.classList.add('done');

          // toggle done on click (checkbox at right)
          row.querySelector('.chx').addEventListener('click', ()=>{
            row.classList.toggle('done');
            const m = getAgendaDone();
            m[key] = row.classList.contains('done');
            setAgendaDone(m);
          });

          list.appendChild(row);
        });
        box.appendChild(list);

        wrap.appendChild(box);
      });
    }

    function ensureNowIndicator(dayBox){
      let el = dayBox.querySelector('.now-indicator');
      if (!el){
        el = document.createElement('div');
        el.className = 'now-indicator';
        dayBox.appendChild(el);
      }
      return el;
    }

    /**
     * Places the 'now' line inside the first .agenda-day box based on time.
     * It interpolates between the DOM positions of the nearest events so it
     * glides smoothly even between rows of different heights.
     */
    function updateNowIndicator(){
      // Only show on the selected day if it is today
      const isToday = +startOfDay(new Date()) === +startOfDay(SELECTED);
      const dayBox = document.querySelector('#agenda .agenda-day');
      if (!dayBox){ return; }

      // Remove if not today
      if (!isToday){
        const old = dayBox.querySelector('.now-indicator');
        if (old) old.remove();
        return;
      }

      const list = dayBox.querySelector('.agenda-list');
      if (!list){ return; }

      const rows = Array.from(list.querySelectorAll('.agenda-row'));
      const now = new Date();

      // Build time ‚Üí y map from rows
      const points = rows.map(row => {
        const start = new Date(row.dataset.start);
        const end = row.dataset.end ? new Date(row.dataset.end) : null;
        const rect = row.getBoundingClientRect();
        const listTop = list.getBoundingClientRect().top + window.scrollY;
        return {
          start, end,
          yTop:  rect.top + window.scrollY - listTop,
          yBot:  rect.bottom + window.scrollY - listTop
        };
      });

      const indicator = ensureNowIndicator(dayBox);
      const listBoxTop = list.getBoundingClientRect().top + window.scrollY;

      // If no events, pin to the very top at current time
      if (points.length === 0){
        indicator.style.top = (listBoxTop + 8 - listBoxTop) + 'px';
        return;
      }

      // Find surrounding interval
      let prev = null, next = null;
      for (let i=0;i<points.length;i++){
        const p = points[i];
        const start = p.start;
        if (now < start){ next = p; break; }
        prev = p;
      }

      let topPx;

      if (!prev){                 // before first event
        const first = points[0];
        const dayStart = new Date(SELECTED); // 00:00 today
        const minutesSpan = (first.start - dayStart) / 60000;
        const prog = Math.min(Math.max((now - dayStart) / (first.start - dayStart), 0), 1);
        topPx = first.yTop * prog;
      } else if (!next){          // after last event
        const last = points[points.length - 1];
        const dayEnd = new Date(SELECTED); dayEnd.setHours(23,59,59,999);
        const prog = Math.min(Math.max((now - (last.end || last.start)) / (dayEnd - (last.end || last.start)), 0), 1);
        topPx = last.yBot + (list.scrollHeight - last.yBot) * prog;
      } else {                    // between prev and next
        const t0 = prev.end || prev.start;            // use end if present
        const t1 = next.start;
        const y0 = prev.yBot;
        const y1 = next.yTop;
        const prog = Math.min(Math.max((now - t0) / (t1 - t0), 0), 1);
        topPx = y0 + (y1 - y0) * prog;
      }

      // Apply position (relative to the agenda-day box)
      const dayTop = dayBox.getBoundingClientRect().top + window.scrollY;
      indicator.style.top = (listBoxTop - dayTop + topPx) + 'px';
    }

    // Kick the updater
    function startNowIndicator(){
      updateNowIndicator();
      updateLiveArea();                  // ‚Üê add
      clearInterval(window.__nowTimer);
      // smooth enough and cheap
      window.__nowTimer = setInterval(()=>{
        updateNowIndicator();
        updateLiveArea();                // ‚Üê add
      }, 60000); // every minute is fine
      // also recalc after resizes
      window.addEventListener('resize', updateNowIndicator);
      window.addEventListener('scroll', updateNowIndicator, { passive:true });
    }

    // ------------ Quick add
    document.addEventListener('DOMContentLoaded', () => {
      const top3Form = $('#top3Form');
      if (top3Form) {
        top3Form.addEventListener('submit', async (e)=>{
          e.preventDefault();
          const fd = new FormData(e.target);
          const title = String(fd.get('title')||'').trim();
          if(!title) return;
          if(DEMO){
            const items = mockTop3();
            items.unshift({title, due:"", completed:false, tag:"#QuickAdd"});
            renderTop3(items);
          }else{
            await apiPost('/reminder', { list:"Top 3", title });
            await loadTop3();
          }
          e.target.reset();
        });
      }
    });

    // ------------ Actions (simulate opening native apps)
    document.addEventListener('DOMContentLoaded', () => {
      const openReminders = $('#openReminders');
      
      if (openReminders) {
        openReminders.addEventListener('click', () => alert('Opening Reminders (simulated)‚Ä¶'));
      }
    });

    // ------------ Loaders
    async function loadTop3(){
      const items = DEMO ? mockTop3() : await apiGet('/top3');
      renderTop3(items);
    }
    async function loadCrash(){
      // try cache first
      if (CRASH_STATE === null) {
        CRASH_STATE = storageGet('crash7');
      }
    
      // fetch if no cache
      if (!Array.isArray(CRASH_STATE) || CRASH_STATE.length === 0) {
        CRASH_STATE = DEMO ? mockCrash() : await apiGet('/crash7');
      }
    
      // normalize: turn string subtasks into {text, completed:false}
      CRASH_STATE = CRASH_STATE.map(day=>{
        const subs = (day.subtasks || []).map(s => {
          return typeof s === 'string' ? { text: s, completed: false } : s;
        });
        return { ...day, subtasks: subs };
      });
    
      storageSet('crash7', CRASH_STATE);
      renderCrash(CRASH_STATE);
    }
    
    function startOfMonth(d){ return new Date(d.getFullYear(), d.getMonth(), 1); }
    function endOfMonth(d){ return new Date(d.getFullYear(), d.getMonth()+1, 0); }
    
    // Big digital clock (minutes; flip to seconds if you want)
    const SHOW_SECONDS = false;

    function renderClockOnce(){
      const box = document.getElementById('miniClock');
      if(!box) return;
      const now = new Date();
      const timeFmt = new Intl.DateTimeFormat(undefined, {
        hour: '2-digit', minute: '2-digit', ...(SHOW_SECONDS ? { second: '2-digit' } : {})
      });

      box.querySelector('.clk-time').textContent = timeFmt.format(now);
      box.querySelector('.clk-sub').textContent = '';
    }

    function startClock(){
      renderClockOnce();
      clearInterval(window.__clkTimer);
      // Update every second if showing seconds; otherwise every 30s to save cycles
      window.__clkTimer = setInterval(renderClockOnce, SHOW_SECONDS ? 1000 : 30000);
    }

    function updateMonthTitle(date) {
      const monthTitle = document.getElementById('monthTitle');
      if (monthTitle) {
        const monthYearFmt = new Intl.DateTimeFormat(undefined, { month: 'long', year: 'numeric' });
        monthTitle.textContent = monthYearFmt.format(date);
      }
    }
    
    function renderMiniMonth(anchor = SELECTED){
      const mount = document.getElementById('miniMonth');
      if(!mount) return;
      
      // Get or create the grid container
      let grid = document.getElementById('mmGrid');
      if (!grid) {
        grid = document.createElement('div');
        grid.id = 'mmGrid';
        mount.appendChild(grid);
      }
      grid.innerHTML = "";

      const monthStart = startOfMonth(anchor);
      const monthEnd   = endOfMonth(anchor);
      
      // Update month title
      updateMonthTitle(anchor);
      // Find grid start on Sunday (or your locale's week start)
      const gridStart = addDays(monthStart, -monthStart.getDay());
      // Headers
      "SMTWTFS".split("").forEach(ch=>{
        const h = document.createElement('div');
        h.className = 'mm-cell mm-head';
        h.textContent = ch;
        grid.appendChild(h);
      });
      // 6 weeks * 7 days
      for(let i=0;i<42;i++){
        const d = addDays(gridStart, i);
        const cell = document.createElement('div');
        cell.className = 'mm-cell';
        if(d.getMonth() !== anchor.getMonth()) cell.classList.add('mm-out');
        if(+startOfDay(d) === +startOfDay(TODAY)) cell.classList.add('mm-today');
        if(+startOfDay(d) === +startOfDay(SELECTED)) cell.classList.add('mm-sel');
        cell.textContent = d.getDate();
        cell.addEventListener('click', ()=>{
          SELECTED = startOfDay(d);
          updateDayTitle(SELECTED);
          loadAgenda();           // re-render agenda for that day
          renderMiniMonth(SELECTED); // re-render month selection
        });
        grid.appendChild(cell);
      }
    }
    
    // Setup day and month navigation after DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
      const dayPrevBtn = document.getElementById('dayPrev');
      const dayNextBtn = document.getElementById('dayNext');
      const monthPrevBtn = document.getElementById('monthPrev');
      const monthNextBtn = document.getElementById('monthNext');
      
      if (dayPrevBtn) {
        dayPrevBtn.addEventListener('click', () => {
          SELECTED = addDays(SELECTED, -1);
          loadAgenda();
          renderMiniMonth(SELECTED);
        });
      }
      
      if (dayNextBtn) {
        dayNextBtn.addEventListener('click', () => {
          SELECTED = addDays(SELECTED, +1);
          loadAgenda();
          renderMiniMonth(SELECTED);
        });
      }
      
      if (monthPrevBtn) {
        monthPrevBtn.addEventListener('click', () => {
          // Go to previous month (same day)
          const currentDay = SELECTED.getDate();
          SELECTED = new Date(SELECTED.getFullYear(), SELECTED.getMonth() - 1, 1);
          // Try to maintain the same day of month if possible
          const lastDayOfMonth = new Date(SELECTED.getFullYear(), SELECTED.getMonth() + 1, 0).getDate();
          SELECTED.setDate(Math.min(currentDay, lastDayOfMonth));
          renderMiniMonth(SELECTED);
        });
      }
      
      if (monthNextBtn) {
        monthNextBtn.addEventListener('click', () => {
          // Go to next month (same day)
          const currentDay = SELECTED.getDate();
          SELECTED = new Date(SELECTED.getFullYear(), SELECTED.getMonth() + 1, 1);
          // Try to maintain the same day of month if possible
          const lastDayOfMonth = new Date(SELECTED.getFullYear(), SELECTED.getMonth() + 1, 0).getDate();
          SELECTED.setDate(Math.min(currentDay, lastDayOfMonth));
          renderMiniMonth(SELECTED);
        });
      }
    });
    function updateDayTitle(d){
      const w = new Intl.DateTimeFormat(undefined,{ weekday:'long'}).format(d);
      const md = new Intl.DateTimeFormat(undefined,{ month:'short', day:'numeric'}).format(d);
      const dayTitle = document.getElementById('dayTitle');
      if (dayTitle) dayTitle.textContent = `${w} ‚Ä¢ ${md}`;
    }
    
    async function loadAgenda(){
      const days = DEMO ? mockAgenda(SELECTED) : await apiGet('/agenda');
      window.__CURRENT_DAY = days[0];  // keep a handle for live updates
      renderAgenda(days);
      updateDayTitle(SELECTED);
      startNowIndicator();   // <‚Äî add this
    }
    
    async function loadAll(){
      const now = new Date();
      const nowHint = $('#nowHint');
      const rangeHint = $('#rangeHint');
      const tzHint = $('#tzHint');
      
      if (nowHint) nowHint.textContent = fmtDate(now);
      if (rangeHint) rangeHint.textContent = `${fmtDate(SELECTED)} ‚Üí ${fmtDate(addDays(SELECTED,6))}`;
      if (tzHint) tzHint.textContent = `Local time: ${Intl.DateTimeFormat().resolvedOptions().timeZone}`;
      
      await Promise.all([loadTop3(), loadCrash(), loadAgenda()]);
      renderMiniMonth(SELECTED);
      startClock();
      startNowIndicator();   // <‚Äî add this
    }

    // ------------ Misc
    document.addEventListener('DOMContentLoaded', () => {
      const yearEl = $('#year');
      if (yearEl) yearEl.textContent = new Date().getFullYear();
      
      // Add demo mode indicator if in demo mode
      if (DEMO) {
        const footer = document.querySelector('footer');
        if (footer) {
          const demoIndicator = document.createElement('div');
          demoIndicator.className = 'demo-indicator';
          demoIndicator.textContent = 'DEMO MODE';
          demoIndicator.style.color = 'var(--muted)';
          demoIndicator.style.fontWeight = 'bold';
          demoIndicator.style.marginTop = '8px';
          footer.appendChild(demoIndicator);
        }
      }
    });
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])) }

    // Init
    loadAll();
  </script>
</body>
</html>
</file>

</files>
